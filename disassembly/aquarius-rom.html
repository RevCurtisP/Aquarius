<html>
<head>
<style>
body {background: black; color: White;}
.colon {color: Blue;}
.comment {color: LightGreen;}
.hex {color: Plum}
.label {color: Cyan;}
.mnemonic {color: CornflowerBlue;}
.number {color: LightBlue;}
.source {color: Coral;}
</style>
</head>
<body>
<pre>
<span class="comment">;;Mattel Aquarius Microsoft S1, S2, and Extended Basic ROM disassembly</span>
<span class="comment">;;</span>
<span class="comment">;;Annotated by Curtis F Kaylor</span>
<span class="comment">;;</span>
<span class="comment">;;Originally disassembled with dasmx, but modified to a custom syntax</span>

<span class="comment">;;Listing format:</span>
<span class="comment">;;</span>
<span class="comment">;;Columns Contents</span>
<span class="comment">;;  1-4   S1 address (or ---- for equates) - If blank, code is not in S1 ROM</span>
<span class="comment">;;  6-9   S2 address (or ---- for equates) - If blank, code is not in S2 ROM</span>
<span class="comment">;;  11    Separator between address and machine code bytes</span>
<span class="comment">;;        Normally ":" for lines of Code or " " for Comments and Equates</span>
<span class="comment">;;        If lower case "x", line is Standard BASIC referenced from Extended Basic</span>
<span class="comment">;;        If Upper case "X", line is Extended Basic only</span>
<span class="comment">;;        If "=", the label is to be for an EQU to address in Extended BASIC</span>
<span class="comment">;;        If "-", line contains the comment to use when processing the next "="</span>
<span class="comment">;; 13-23  Hexadecimal machine code bytes (up to four per line)</span>
<span class="comment">;; 24-28  Label Source ("~~~" if not found in any source}</span>
<span class="comment">;;        [ ] = Global - referenced in external routine(s)</span>
<span class="comment">;;        ( ) = Local - referenced in the same routine</span>
<span class="comment">;;        { } = Unused - not referenced in code, but found in source documents</span>
<span class="comment">;;  28    For comments starting at column 30, this is a collapse indicator</span>
<span class="comment">;;        that can be used in an interactive display of the listing</span>
<span class="comment">;;        A " " or "+" means the comment line is always shown</span>
<span class="comment">;;        A "|" means the comment line can be collapsed into the previous "+"</span>
<span class="comment">;; 30-36  Label - All labels are upper case</span>
<span class="comment">;; 38-44  Op-Code - All opocodes are in lower case</span>
<span class="comment">;;        Pseudo-Op "equ" is used for labels that are only defined once</span>
<span class="comment">;;        while "=" is used for labels that are redefined</span>
<span class="comment">;;        Hexadecimal numbers are prefixed with a "$" (Motorola format)</span>
<span class="comment">;;        and Binary numbers are prefixed with a %"</span>
<span class="comment">;;  46-   Operand</span>
<span class="comment">;;  ---   Comments begin with ";"</span>
<span class="comment">;;        If from a source document, it is followed with the source ID in brackets</span>
<span class="comment">;;        ";;" precedes a comment from an annotator</span>
<span class="comment">;;        ";;;" precedes meta-comments, which sre not part of the assembly code</span>
<span class="comment">;;        "***" denotes comments where the code is unclear</span>
<span class="comment">;;</span>
<span class="comment">;;  Lines beginning with ":" are temporary lines to allow progressive testing of</span>
<span class="comment">;;  conversion to a source file and subsequent assembly. They will be added</span>
<span class="comment">;;  and removed as needed until the generated source code fully assembles.</span>
<span class="comment">;;</span>
<span class="comment">;;Labels and comments are taken from the following:</span>
<span class="comment">;;  Original Source Code (Canonical Labels and Comments)</span>
<span class="comment">;;    [M80] Microsoft Basic-80 5.2 Source [198]</span>
<span class="comment">;;          winworldpc.com/product/microsoft-basic/80</span>
<span class="comment">;;    [M65] Microsoft BASIC for 6502 Original Source Code [1978]</span>
<span class="comment">;;          www.pagetable.com/?p=774</span>
<span class="comment">;;    [GWB] Microsoft GW-BASIC Interpreter Source Code [1983]</span>
<span class="comment">;;          https://github.com/microsoft/GW-BASIC</span>
<span class="comment">;;  Commented Disassemby Listings (Non-Canonical)</span>
<span class="comment">;;    [A4K] Altair BASIC 3.2 (4K) - Annotated Disassembly [1975]</span>
<span class="comment">;;          altairbasic.org/</span>
<span class="comment">;;    [A8K] Altair BASIC 8K - Disassembly [1978]</span>
<span class="comment">;;          www.autometer.de/unix4fun/z80pack/ftp/altair/basic8k78.orge</span>
<span class="comment">;;    [TR1] TRS-80 Model I Level II Basic ROM Disassembly</span>
<span class="comment">;;          http://www.trs-80.com/wordpress/zaps-patches-pokes-tips/rom-cpu-info-page/</span>
<span class="comment">;;  Third Party Reference Materials (Non-Canonical)</span>
<span class="comment">;;    [L2R] Level II ROM Reference Manual [1980]</span>
<span class="comment">;;          https://www.classic-computers.org.nz/system-80/manuals_Level%20II%20ROM%20Reference%20Manual.pdf</span>
<span class="comment">;;    [M64] COMPUTE!'s Mapping the C64</span>
<span class="comment">;;    [EBU] Extended BASIC Unravelled II for the Tandy TRS-80 Color Computer</span>
<span class="comment">;;          https://colorcomputerarchive.com/repo/Documents/Books/Unravelled%20Series/extended-basic-unravelled.pdf</span>
<span class="comment">;;</span>
<span class="comment">;;Label sources are denoted to the left of the label and comment sources are denoted at the beginning of the comment.</span>
<span class="comment">;;</span>
<span class="comment">;;Comments taken from the above sources are preceded by a single semicolon, while unsourced comments</span>
<span class="comment">;;are preceded by two semicolons, and annotations are preceded by three semicolons.</span>
<span class="comment">;</span>
<span class="comment">;</span>
<span class="comment">;S1   S2  x</span>
<span class="number">----      </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Mattel Aquarius Microsoft S1 Basic ROM </span>
<span class="number">     ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Mattel Aquarius Microsoft S2 Basic ROM </span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Mattel Aquarius Microsoft Extended Basic ROM</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;                                       </span>
<span class="number">---- ---- </span><span class="colon">x </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;BASIC Constants                        </span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">CLMWID </span><span class="mnemonic"> equ    </span> 14      <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE COMMA COLUMNS FOURTEEN CHARACTERS</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">LPTSIZ </span><span class="mnemonic"> equ    </span> 132     <span class="comment">;{M80} WIDTH OF PRINTER</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">SGBASE </span><span class="mnemonic"> equ    </span> $A0     <span class="comment">;;Base Semigraphics Character</span>

<span class="comment">                             ;;System Variables</span>
<span class="number">---- ---- </span><span class="colon">x </span><span class="hex">           </span><span class="source">      </span><span class="label">SCREEN </span><span class="mnemonic"> equ    </span> $3000   <span class="comment">;;Screen Character Matrix</span>
<span class="number">---- ---- </span><span class="colon">x </span><span class="hex">           </span><span class="source">      </span><span class="label">COLOR  </span><span class="mnemonic"> equ    </span> $3400   <span class="comment">;;Screen Color Matrix</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">TTYPOS </span><span class="mnemonic"> equ    </span> $3800   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">STORE TERMINAL POSITION HERE</span>
<span class="number">---- ---- </span><span class="colon">x </span><span class="hex">           </span><span class="source">      </span><span class="label">CURRAM </span><span class="mnemonic"> equ    </span> $3801   <span class="comment">;;Position in CHARACTER RAM of cursor</span>
<span class="number">---- ---- </span><span class="colon">x </span><span class="hex">           </span><span class="source">[M65] </span><span class="label">USRPOK </span><span class="mnemonic"> equ    </span> $3803   <span class="comment">;;JP instruction for USR() routine</span>
<span class="number">~~~~ ~~~~ </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">USRADD </span><span class="mnemonic"> equ    </span> $3804   <span class="comment">;;Address of USR routine</span>
<span class="number">---- ---- </span><span class="colon">x </span><span class="hex">           </span><span class="source">      </span><span class="label">HOOK   </span><span class="mnemonic"> equ    </span> $3806   <span class="comment">;;Extended ROM Hook Vector</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">CNTOFL </span><span class="mnemonic"> equ    </span> $3808   <span class="comment">;;Line Counter. If not 0,</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">SCRMBL </span><span class="mnemonic"> equ    </span> $3809   <span class="comment">;;Last Scramble byte output to port #FF</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">CHARC  </span><span class="mnemonic"> equ    </span> $380A   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ISCNTC STORES EATEN CHAR HERE WHEN NOT A ^C</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">RESPTR </span><span class="mnemonic"> equ    </span> $380B   <span class="comment">;;Pointer to Ctrl-Key Reserved Word</span>
<span class="number">---- ---- </span><span class="colon">x </span><span class="hex">           </span><span class="source">      </span><span class="label">CURCHR </span><span class="mnemonic"> equ    </span> $380D   <span class="comment">;;Character under Cursor</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M64] </span><span class="label">LSTX   </span><span class="mnemonic"> equ    </span> $380E   <span class="comment">;</span><span class="source">[M64] </span><span class="comment">Matrix Coordinate of Last Key Pressed</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">KCOUNT </span><span class="mnemonic"> equ    </span> $380F   <span class="comment">;;Keyboard debounce counter</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">FDIVC  </span><span class="mnemonic"> equ    </span> $3810   <span class="comment">;                </span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">FDIVB  </span><span class="mnemonic"> equ    </span> $3814   <span class="comment">;                </span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">FDIVA  </span><span class="mnemonic"> equ    </span> $3818   <span class="comment">;                </span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">FDIVG  </span><span class="mnemonic"> equ    </span> $381B   <span class="comment">;                </span>
<span class="comment">                             ;               $381E   ;{M80} RND FUNCTION PERTUBATION COUNT</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">RNDCNT </span><span class="mnemonic"> equ    </span> $381F   <span class="comment">;                </span>
<span class="comment">                             ;       equ     $3820   ;</span>
<span class="number">~~~~ ~~~~ </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">RNDTAB </span><span class="mnemonic"> equ    </span> $3821   <span class="comment">;;Random Number TABLE</span>
<span class="comment">                                                     ;;;Pointed into by loading HL to RNDCNT and adding to it</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">RNDX   </span><span class="mnemonic"> equ    </span> $3841   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">LAST RANDOM NUMBER GENERATED, BETWEEN 0 AND 1</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">LPTPOS </span><span class="mnemonic"> equ    </span> $3846   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POSITION OF LPT PRINT HEAD</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">PRTFLG </span><span class="mnemonic"> equ    </span> $3847   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WHETHER OUTPUT GOES TO LPT</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">LINLEN </span><span class="mnemonic"> equ    </span> $3848   <span class="comment">;;Length of a Screen Line</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">CLMLST </span><span class="mnemonic"> equ    </span> $3849   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POSITION OF LAST COMMA COLUMN</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">RUBSW  </span><span class="mnemonic"> equ    </span> $384A   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RUBOUT SWITCH =1 INSIDE THE PROCESSING OF A RUBOUT (INLIN)</span>
<span class="number">---- ---- </span><span class="colon">x </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">TOPMEM </span><span class="mnemonic"> equ    </span> $384B   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TOP LOCATION TO USE FOR THE STACK INITIALLY SET UP BY INIT</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">                        ;[M80] ACCORDING TO MEMORY SIZE TO ALLOW FOR 50 BYTES OF STRING SPACE.</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">                        ;[M80] CHANGED BY A CLEAR COMMAND WITH AN ARGUMENT.</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">CURLIN </span><span class="mnemonic"> equ    </span> $384D   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CURRENT LINE #</span>
<span class="number">---- ---- </span><span class="colon">x </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">TXTTAB </span><span class="mnemonic"> equ    </span> $384F   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINTER TO BEGINNING OF TEXT</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">                        ;[M80] DOESN'T CHANGE AFTER BEING SETUP BY INIT.</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[GWB] </span><span class="label">FILNAM </span><span class="mnemonic"> equ    </span> $3851   <span class="comment">;;File Name for CSAVE and CLOAD</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">FILNAF </span><span class="mnemonic"> equ    </span> $3857   <span class="comment">;;File Name Read from Cassette</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">INSYNC </span><span class="mnemonic"> equ    </span> $385D   <span class="comment">;;Contains $FF between read of SYNC and data from tape</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">CLFLAG </span><span class="mnemonic"> equ    </span> $385E   <span class="comment">;;Flags whether doing CLOAD (0) or CLOAD? ($FF)</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">BUFMIN </span><span class="mnemonic"> equ    </span> $385F   <span class="comment">;{M80} START OF BUFFER</span>
<span class="number">---- ---- </span><span class="colon">x </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">BUF    </span><span class="mnemonic"> equ    </span> $3860   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TYPE IN STORED HERE. DIRECT STATEMENTS EXECUTE OUT OF HERE.</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">                        ;[M80] REMEMBER "INPUT" SMASHES BUF. MUST BE AT A LOWER ADDRESS THAN DSCTMP</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">                        ;[M80] OR ASSIGNMENT OF STRING VALUES IN DIRECT STATEMENTS WON'T COPY INTO</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">                        ;[M80] STRING SPACE -- WHICH IT MUST ALLOW FOR SINGLE QUOTE IN BIG LINE</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">OLDSTK </span><span class="mnemonic"> equ    </span> $3865   <span class="comment">;;Deprecated: Top Of Stack - Now Set by STKINI</span>
<span class="number">----      </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TMPSTK </span><span class="mnemonic"> equ    </span> $386A   <span class="comment">;;Temporary Stack - Set by INIT</span>
<span class="number">     ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TMPSTK </span><span class="mnemonic"> equ    </span> $38A0   <span class="comment">;;Temporary Stack - Set by INIT</span>
<span class="number">---- ---- </span><span class="colon">x </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">ENDBUF </span><span class="mnemonic"> equ    </span> $38A9   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PLACE TO STOP BIG LINES</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">BUFLEN </span><span class="mnemonic"> equ    </span> ENDBUF-BUF-1  ;;Buffer Length
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">DIMFLG </span><span class="mnemonic"> equ    </span> $38AA   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IN GETTING A POINTER TO A VARIABLE IT IS IMPORTANT TO REMEMBER</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">                        ;[M80] WHETHER IT IS BEING DONE FOR "DIM" OR NOT</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">VALTYP </span><span class="mnemonic"> equ    </span> $38AB   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE TYPE INDICATOR 0=NUMERIC 1=STRING</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">DORES  </span><span class="mnemonic"> equ    </span> $38AC   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WHETHER CAN OR CAN'T CRUNCH RES'D WORDS TURNED ON WHEN "DATA"</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">                        ;[M80] BEING SCANNED BY CRUNCH SO UNQUOTED STRINGS WON'T BE CRUNCHED.</span>
<span class="number">---- ---- </span><span class="colon">x </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">MEMSIZ </span><span class="mnemonic"> equ    </span> $38AD   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">HIGHEST LOCATION IN MEMORY</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">TEMPPT </span><span class="mnemonic"> equ    </span> $38AF   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINTER AT FIRST FREE TEMP DESCRIPTOR. INITIALIZED TO POINT TO TEMPST</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">TEMPST </span><span class="mnemonic"> equ    </span> $38B1   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">STORAGE FOR NUMTMP TEMP DESCRIPTORS</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">DSCTMP </span><span class="mnemonic"> equ    </span> $38BD   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">STRING FUNCTIONS BUILD ANSWER DESCRIPTOR HERE</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">FRETOP </span><span class="mnemonic"> equ    </span> $38C1   <span class="comment">;{M80} TOP OF FREE STRING SPACE</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">TENP3  </span><span class="mnemonic"> equ    </span> $38C3   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">USED MOMENTARILY BY FRMEVL. USED IN EXTENDED BY FOUT AND</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">                        ;[M80] USER DEFINED FUNCTIONS ARRAY VARIABLE HANDLING TEMPORARY</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">TEMP8  </span><span class="mnemonic"> equ    </span> $38C5   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">USED TO STORE THE ADDRESS OF THE END OF STRING ARRAYS IN GARBAGE COLLECTION</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">ENDFOR </span><span class="mnemonic"> equ    </span> $38C7   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVED TEXT POINTER AT END OF "FOR" STATEMENT</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">DATLIN </span><span class="mnemonic"> equ    </span> $38C9   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DATA LINE # -- REMEMBER FOR ERRORS</span>
<span class="number">---- ---- </span><span class="colon">x </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">SUBFLG </span><span class="mnemonic"> equ    </span> $38CB   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FLAG WHETHER SUBSCRIPTED VARIABLE ALLOWED "FOR" AND USER-DEFINED</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">                        ;[M80] FUNCTION POINTER FETCHING TURN THIS ON BEFORE CALLING PTRGET SO</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">                        ;[M80] ARRAYS WON'T BE DETECTED. STKINI AND PTRGET CLEAR IT.</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">USFLG  </span><span class="mnemonic"> equ    </span> $38CC   <span class="comment">;;Direct Mode Flag</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">FLGINP </span><span class="mnemonic"> equ    </span> $38CD   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FLAGS WHETHER WE ARE DOING "INPUT" OR A READ</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">SAVTXT </span><span class="mnemonic"> equ    </span> $38CE   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PLACE WHERE NEWSTT SAVES TEXT POINTER</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">TENP2  </span><span class="mnemonic"> equ    </span> $38D0   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FORMULA EVALUATOR TEMP MUST BE PRESERVED BY OPERATORS</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">                        ;[M80] USED IN EXTENDED BY FOUT AND USER-DEFINED FUNCTIONS</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">OLDLIN </span><span class="mnemonic"> equ    </span> $38D2   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">OLD LINE NUMBER (SETUP BY ^C,"STOP" OR "END" IN A PROGRAM)</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">OLDTXT </span><span class="mnemonic"> equ    </span> $38D4   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">OLD TEXT POINTER</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">VARTAB </span><span class="mnemonic"> equ    </span> $38D6   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINTER TO START OF SIMPLE VARIABLE SPACE. UPDATED WHENEVER</span>
<span class="comment">                                                     ;[M80] THE SIZE OF THE PROGRAM CHANGES, SET TO [TXTTAB] BY SCRATCH ("NEW").</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">ARYTAB </span><span class="mnemonic"> equ    </span> $38D8   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINTER TO BEGINNING OF ARRAY TABLE. INCREMENTED BY 6 WHENEVER</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">                        ;[M80] A NEW SIMPLE VARIABLE IS FOUND, AND SET TO [VARTAB] BY CLEARC.</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">STREND </span><span class="mnemonic"> equ    </span> $38DA   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">END OF STORAGE IN USE. INCREASED WHENEVER A NEW ARRAY</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">                        ;[M80] OR SIMPLE VARIABLE IS ENCOUNTERED SET TO [VARTAB] BY CLEARC.</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">DATPTR </span><span class="mnemonic"> equ    </span> $38DC   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINTER TO DATA. INITIALIZED TO POINT AT THE ZERO IN FRONT OF [TXTTAB]</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">                        ;[M80] BY "RESTORE" WHICH IS CALLED BY CLEARC. UPDATED BY EXECUTION OF A "READ"</span>
<span class="number">---- ---- </span><span class="colon">x </span><span class="hex">           </span><span class="source">[M65] </span><span class="label">VARNAM </span><span class="mnemonic"> equ    </span> $38DE   <span class="comment">;;Variable Name  </span>
<span class="number">---- ---- </span><span class="colon">x </span><span class="hex">           </span><span class="source">[M65] </span><span class="label">VARPNT </span><span class="mnemonic"> equ    </span> $38E0   <span class="comment">;;Pointer to Variable</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">[~~~] </span><span class="label">FNPARM </span><span class="mnemonic"> equ    </span> $38E2   <span class="comment">;;Defined Function Parameter</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">FACLO  </span><span class="mnemonic"> equ    </span> $38E4   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">LOW ORDER OF MANTISSA</span>
<span class="number">~~~~ ~~~~ </span><span class="colon">  </span><span class="hex">           </span><span class="source">{M80} </span><span class="label">FACMO  </span><span class="mnemonic"> equ    </span> $38E5   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MIDDLE ORDER OF MANTISSA</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">FACHO  </span><span class="mnemonic"> equ    </span> $38E6   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">HIGH ORDER OF MANTISSA</span>
<span class="number">---- ---- </span><span class="colon">x </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">FAC    </span><span class="mnemonic"> equ    </span> $38E7   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">EXPONENT  </span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">FBUFFR </span><span class="mnemonic"> equ    </span> $38E8   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">BUFFER FOR FOUT</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M65] </span><span class="label">RESHO  </span><span class="mnemonic"> equ    </span> $38F6   <span class="comment">;</span><span class="source">[M65] </span><span class="comment">RESULT OF MULTIPLIER AND DIVIDER</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M65] </span><span class="label">RESMO  </span><span class="mnemonic"> equ    </span> $38F7   <span class="comment">;;RESMO and RESLO are loaded into and stored from HL</span>
<span class="number">~~~~ ~~~~ </span><span class="colon">  </span><span class="hex">           </span><span class="source">{M65} </span><span class="label">RESLO  </span><span class="mnemonic"> equ    </span> $38F8   <span class="comment">;                </span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">SAVSTK </span><span class="mnemonic"> equ    </span> $38F9   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NEWSTT SAVES STACK HERE BEFORE SO THAT ERROR REVERY CAN</span>
<span class="comment">                                                     ;[M80] CAN RESTORE THE STACK WHEN AN ERROR OCCURS</span>
<span class="number">----      </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">BASTXT </span><span class="mnemonic"> equ    </span> $38FA   <span class="comment">;;???First byte of program gets clobbered by NEWSTT</span>
<span class="number">     ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;        $38FB-$38FF   ;;??Unused       </span>
<span class="number">     ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;              $3900   ;;This is always 0</span>
<span class="number">     ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">BASTXT </span><span class="mnemonic"> equ    </span> $3901   <span class="comment">;;Start of Basic Program</span>

<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Extended BASIC System Variables        </span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">FORCLR </span><span class="mnemonic"> equ    </span> $3900   <span class="comment">;;Foreground Color</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">ATRBYT </span><span class="mnemonic"> equ    </span> $3902   <span class="comment">;;Current Graphics Attributes</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">[GWB] </span><span class="label">GXPOS  </span><span class="mnemonic"> equ    </span> $3903   <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">X Position of Second Coordinate</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">[GWB] </span><span class="label">GYPOS  </span><span class="mnemonic"> equ    </span> $3905   <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">Y Position of Second Coordinate</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">[GWB] </span><span class="label">GRPACY </span><span class="mnemonic"> equ    </span> $3907   <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">Previous Y Coordinate</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">[GWB] </span><span class="label">GRPACX </span><span class="mnemonic"> equ    </span> $3909   <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">Previous X Coordinate</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">[GWB] </span><span class="label">MAXUPD </span><span class="mnemonic"> equ    </span> $390B   <span class="comment">;;Jump Instruction</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;              $390C   ;[GWB] Address of Major Axis Move Update</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">[GWB] </span><span class="label">MINUPD </span><span class="mnemonic"> equ    </span> $390E   <span class="comment">;;Jump Instruction</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;              $390F   ;[GWB] Address of Minor Axis Move Update</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">[GWB] </span><span class="label">MAXDEL </span><span class="mnemonic"> equ    </span> $3911   <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">Largest Delta for Line</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">[GWB] </span><span class="label">MINDEL </span><span class="mnemonic"> equ    </span> $3913   <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">Smaller of 2 Deltas for Line</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">[GWB] </span><span class="label">ASPECT </span><span class="mnemonic"> equ    </span> $3915   <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">ASPECT RATIO</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">[GWB] </span><span class="label">CENCNT </span><span class="mnemonic"> equ    </span> $3917   <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">END CIRCLE POINT COUNT</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">[GWB] </span><span class="label">GLINEF </span><span class="mnemonic"> equ    </span> $3919   <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">LINE-TO-CENTER FLAG</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">[GWB] </span><span class="label">CNPNTS </span><span class="mnemonic"> equ    </span> $391A   <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">1/8 NO. OF PTS IN CIRCLE</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">[GWB] </span><span class="label">CPLOTF </span><span class="mnemonic"> equ    </span> $391C   <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">PLOT FLAG </span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">[GWB] </span><span class="label">CPCNT  </span><span class="mnemonic"> equ    </span> $391D   <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">;1/8 NO. OF PTS IN CIRCLE</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">[GWB] </span><span class="label">CPCNT8 </span><span class="mnemonic"> equ    </span> $391F   <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">NO. OF PTS IN CIRCLE</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">[GWB] </span><span class="label">CRCSUM </span><span class="mnemonic"> equ    </span> $3921   <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">CIRCLE SUM</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">[GWB] </span><span class="label">CSTCNT </span><span class="mnemonic"> equ    </span> $3923   <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">START COUNT</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">[GWB] </span><span class="label">CSCLXY </span><span class="mnemonic"> equ    </span> $3925   <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">FLAG WHETHER ASPECT WAS .GT. 1</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">CURLOC </span><span class="mnemonic"> equ    </span> $3926   <span class="comment">;;Current Point Address</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">PINDEX </span><span class="mnemonic"> equ    </span> $3928   <span class="comment">;;Point Bit Mask Index</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">[GWB] </span><span class="label">CXOFF  </span><span class="mnemonic"> equ    </span> $3929   <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">X OFFSET FROM CENTER SAVE LOC</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">[GWB] </span><span class="label">CYOFF  </span><span class="mnemonic"> equ    </span> $392B   <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">Y OFFSET SAVE LOCATION</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">BUFRET </span><span class="mnemonic"> equ    </span> $392F   <span class="comment">;;BUFLIN Return Address</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">BUFPTR </span><span class="mnemonic"> equ    </span> $3931   <span class="comment">;;Pointer into BUF while Unpacking Line</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">DRWSCL </span><span class="mnemonic"> equ    </span> $3933   <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">DRAW: SCALE - DRAW POS,Scaling factor</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">DRWFLG </span><span class="mnemonic"> equ    </span> $3934   <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">OPTION FLAGS - DRAW flag</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">DRWANG </span><span class="mnemonic"> equ    </span> $3935   <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">DRAW "ANGLE" (0..3) - DRAW translation angle</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">MCLPTR </span><span class="mnemonic"> equ    </span> $3936   <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">MAC LANG PTR</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">MCLLEN </span><span class="mnemonic"> equ    </span> $3938   <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">STRING LENGTH</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">MCLTAB </span><span class="mnemonic"> equ    </span> $3939   <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">;PTR TO COMMAND TABLE</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">PUTFLG </span><span class="mnemonic"> equ    </span> $393B   <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">WHETHER DOING PUT() OR GET()</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">ARYPNT </span><span class="mnemonic"> equ    </span> $393C   <span class="comment">;;Pointer into GET/PUT Array</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">OPCJMP </span><span class="mnemonic"> equ    </span> $393E   <span class="comment">;;Jump Instruction</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">OPCADR </span><span class="mnemonic"> equ    </span> $393F   <span class="comment">;;Draw Operator Routine Address</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">GYMAX  </span><span class="mnemonic"> equ    </span> $3941   <span class="comment">;;Maximum X Position: 39</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">GXMAX  </span><span class="mnemonic"> equ    </span> $3942   <span class="comment">;;Maximum Y Position: 23</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;        $3943-$3947   ;Probably Unused </span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;              $3948   ;;This is always 0</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">BASTXT </span><span class="mnemonic"> equ    </span> $3949   <span class="comment">;;Start of Extended Basic Program</span>


<span class="comment">                             ;;External Addresses</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[~~~] </span><span class="label">EXTBAS </span><span class="mnemonic"> equ    </span> $2000   <span class="comment">;;Start of Extended Basic</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[~~~] </span><span class="label">XSTART </span><span class="mnemonic"> equ    </span> $2010   <span class="comment">;;Extended BASIC Startup Routine</span>
<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">[~~~] </span><span class="label">XINIT  </span><span class="mnemonic"> equ    </span> $E010   <span class="comment">;;ROM Cartridge Initialization Entry Point</span>

<span class="number">---- ---- </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> org    </span> $0000   <span class="comment">;;Starting Address of Standard BASIC</span>

          X       <span class="source">      </span>     ;;S<span class="mnemonic">tandard </span><span class="comment">broutines             </span>
<span class="number">0000 0000 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0000 0000 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;RST 0 - Startup                        </span>
<span class="number">0000 0000 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;On power up or reset, the Z80 jumps to this RST</span>
<span class="number">0000 0000 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;The instruction RST START is functionally equivalent to doing</span>
<span class="number">0000 0000 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;a hardware reset.                      </span>
<span class="number">0000      </span><span class="colon">: </span><span class="hex">C3 41 00   </span><span class="source">[M80] </span><span class="label">START: </span><span class="mnemonic"> jp     </span> INIT              <span class="comment">;;Start Initialization</span>
<span class="number">     0000 </span><span class="colon">: </span><span class="hex">C3 E1 1F   </span><span class="source">[M80] </span><span class="label">START: </span><span class="mnemonic"> jp     </span> JMPINI            <span class="comment">;;Start Initialization</span>
<span class="number">0003 0003 </span><span class="colon">: </span><span class="hex">82 06 22   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $82,$06,$22       <span class="comment">;;Revision Date 1982-06-22</span>
<span class="number">0006 0006 </span><span class="colon">: </span><span class="hex">0B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 11                <span class="comment">;;Revision Number?</span>
<span class="number">0007 0007 </span><span class="colon">: </span><span class="hex">00         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> nop    </span>                   <span class="comment">;;Pad out the RST routine</span>
<span class="number">0008 0008 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0008 0008 </span><span class="colon">- </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;RST 1 - Syntax Check                   </span>
<span class="number">0008 0008 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Check for Matching Character           </span>
<span class="number">0008 0008 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">"SYNCHK" LOOKS AT THE CURRENT CHARACTER TO MAKE SURE IT</span>
<span class="number">0008 0008 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">IS THE SPECIFIC THING IN THE BYTE IMMEDIATELY FOLLOWING</span>
<span class="number">0008 0008 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">"RST SYNCHK". IF NOT, IT CALLS THE "SYNTAX ERROR" ROUTINE.</span>
<span class="number">0008 0008 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">OTHERWISE IT GOBBLES THE NEXT CHAR AND RETURNS,</span>
<span class="number">0008 0008 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">0008 0008 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">[A]=NEW CHAR AND [H,L] IS ADVANCED BY "CHRGET".</span>
<span class="number">0008 0008 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">0008 0008 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;;In Basic versions that don't use RST, this routine is named SYNCHR</span>
<span class="number">0008 0008 </span><span class="colon">= </span><span class="hex">7E         </span><span class="source">[M80] </span><span class="label">SYNCHK:</span><span class="mnemonic"> ld     </span> a,(hl)                   
<span class="number">0009 0009 </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl                  
<span class="number">000A 000A </span><span class="colon">: </span><span class="hex">BE         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> (hl)              <span class="comment">;</span><span class="source">[M65] </span><span class="comment">CHARACTERS EQUAL?</span>
<span class="number">000B 000B </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">000C 000C </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl                  
<span class="number">000D 000D </span><span class="colon">: </span><span class="hex">C2 C4 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,SNERR          <span class="comment">;</span><span class="source">[M65] </span><span class="comment">"SYNTAX ERROR"</span>
<span class="number">0010 0010 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0010 0010 </span><span class="colon">- </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;RST 2 - Get Next Character             </span>
<span class="number">0010 0010 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHRGET - THE NEXT CHARACTER SCAN ROUTINE</span>
<span class="number">0010 0010 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">"CHRGET" USES [H,L] AS THE CURRENT TEXT PNTR</span>
<span class="number">0010 0010 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">FETCHES A NEW CHARACTER INTO ACCA AFTER INCREMENTING [H,L]</span>
<span class="number">0010 0010 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">AND SETS CONDITION CODES ACCORDING TO WHAT'S IN ACCA.</span>
<span class="number">0010 0010 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">      NOT C=  NUMERIC   ("0" THRU "9")</span>
<span class="number">0010 0010 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">      Z=      ":" OR END-OF-LINE (A NULL)</span>
<span class="number">0010 0010 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">                                  </span>
<span class="number">0010 0010 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">[ACCA] = NEW CHAR.                </span>
<span class="number">0010 0010 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">[H,L]=[H,L]+1                     </span>
<span class="number">0010 0010 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0010 0010 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Since the text pointer is kept in HL, the 8080 versions of Basic</span>
<span class="number">0010 0010 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;use LD A,HL to get the current character, rather than CHRGOT</span>
<span class="number">0010 0010 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0010 0010 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;;Basic versions that don't use RST use CALL CHRGTR instead</span>
<span class="number">0010 0010 </span><span class="colon">= </span><span class="hex">23         </span><span class="source">[M65] </span><span class="label">CHRGET:</span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M65] </span><span class="comment">INCREMENT THE TEXT PNTR</span>
<span class="number">0011 0011 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">{M65} </span><span class="label">CHRGOT:</span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;;Entry point to get current character</span>
<span class="number">0012 0012 </span><span class="colon">: </span><span class="hex">FE 3A      </span><span class="source">{M65} </span><span class="label">QNUM:  </span><span class="mnemonic"> cp     </span> ':'               <span class="comment">;</span><span class="source">[M65] </span><span class="comment">IS IT A ":"?</span>
<span class="number">0014 0014 </span><span class="colon">: </span><span class="hex">D0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nc                <span class="comment">;</span><span class="source">[M65] </span><span class="comment">IT IS .GE. ":"</span>
<span class="number">0015 0015 </span><span class="colon">: </span><span class="hex">C3 70 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> CHRCON            <span class="comment">;;Continue in CHRGETR</span>
<span class="number">0018 0018 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0018 0018 </span><span class="colon">- </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;RST 3 - Output Character               </span>
<span class="number">0018 0018 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;{M80}  RST OUTCHR prints char in [A] no registers affected</span>
<span class="number">0018 0018 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;{M80}    to either terminal or printer depending on flag:</span>
<span class="number">0018 0018 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;{M80}    PRTFLG if non-zero print to printer</span>
<span class="number">0018 0018 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">0018 0018 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;;Basic versions that don't use RST use CALL OUTDO instead</span>
<span class="number">0018 0018 </span><span class="colon">= </span><span class="hex">C3 8A 19   </span><span class="source">[GWB] </span><span class="label">OUTCHR:</span><span class="mnemonic"> jp     </span> OUTDO             <span class="comment">;;Execute print character routine</span>
<span class="number">001B 001B </span><span class="colon">: </span><span class="hex">00 00 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 0,0,0,0,0         <span class="comment">;;Pad out the RST routine</span>
<span class="number">001F 001F </span><span class="colon">: </span><span class="hex">00         </span><span class="source">      </span><span class="comment">                                  ;;;(The hook call code from OUTDO could be moved here)</span>
<span class="number">0020 0020 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0020 0020 </span><span class="colon">- </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;RST 4 - Integer Compare                </span>
<span class="number">0020 0020 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[TR1] </span><span class="comment">Compares HL with DE. After execution,</span>
<span class="number">0020 0020 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;If HL = DE, Z flag is set              </span>
<span class="number">0020 0020 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;If HL <> DE, Z flag is reset           </span>
<span class="number">0020 0020 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;If HL < DE, C flag is set              </span>
<span class="number">0020 0020 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;If HL >= DE, C flag is reset           </span>
<span class="number">0020 0020 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;;In versions that don't use RST, this routine is named DCOMPR</span>
<span class="number">0020 0020 </span><span class="colon">= </span><span class="hex">7C         </span><span class="source">[M80] </span><span class="label">COMPAR:</span><span class="mnemonic"> ld     </span> a,h               <span class="comment">;;Compare [DE] to [HL]</span>
<span class="number">0021 0021 </span><span class="colon">: </span><span class="hex">92         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> d                 <span class="comment">;;Sets Z flag if equal</span>
<span class="number">0022 0022 </span><span class="colon">: </span><span class="hex">C0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nz                <span class="comment">;;Sets Carry if [DE] > [HL]</span>
<span class="number">0023 0023 </span><span class="colon">: </span><span class="hex">7D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,l               <span class="comment">;;Destroys [A]</span>
<span class="number">0024 0024 </span><span class="colon">: </span><span class="hex">93         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> e                 <span class="comment">;      </span>
<span class="number">0025 0025 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">0026 0026 </span><span class="colon">: </span><span class="hex">00 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 0,0               <span class="comment">;;Pad out the RST routine</span>
<span class="number">0028 0028 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0028 0028 </span><span class="colon">- </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;RST 5 - Get sign of Floating Point Argument</span>
<span class="number">0028 0028 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT SIGN OF FAC IN A.             </span>
<span class="number">0028 0028 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALTERS A ONLY                     </span>
<span class="number">0028 0028 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">LEAVES FAC ALONE                  </span>
<span class="number">0028 0028 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">0028 0028 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;;Basic versions that don't use RST use CALL SIGN insteaoard</span>
<span class="number">0028 0028 </span><span class="colon">= </span><span class="hex">3A E7 38   </span><span class="source">[M80] </span><span class="label">FSIGN: </span><span class="mnemonic"> ld     </span> a,(FAC)           <span class="comment">;      </span>
<span class="number">002B 002B </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M65] </span><span class="comment">IF NUMBER IS ZERO, SO IS RESULT</span>
<span class="number">002C 002C </span><span class="colon">: </span><span class="hex">C2 EB 14   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,SIGNC          <span class="comment">;;Check sign of mantissa if not 0</span>
<span class="number">002F 002F </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">0030 0030 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0030 0030 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;RST 6 - Extended BASIC Hook Dispatch   </span>
<span class="number">0030 0030 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;The additional functionality of Extended Basic are invoked via this RST.</span>
<span class="number">0030 0030 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Each RST HOOK instruction is followed by a byte that indicates which hook</span>
<span class="number">0030 0030 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;routine to execute. On startup, this routine jumps to NOHOOK, which skips</span>
<span class="number">0030 0030 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;the hook number byte the does a RET.   </span>
<span class="number">0030 0030 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;                                       </span>
<span class="number">0030 0030 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Extended Basic overwrites the address in HOOK, enabling hook dispatch.</span>
<span class="number">0030 0030 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;                                       </span>
<span class="number">0030 0030 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    } </span><span class="comment">;;                                       </span>
<span class="number">0030 0030 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;*** TODO: List the hook routines.      </span>
<span class="number">0030 0030 </span><span class="colon">: </span><span class="hex">DD 2A 06 38</span><span class="source">      </span><span class="label">HOOKDO:</span><span class="mnemonic"> ld     </span> ix,(HOOK)         <span class="comment">;;Get hook routine address</span>
<span class="number">0034 0034 </span><span class="colon">: </span><span class="hex">DD E9      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> (ix)              <span class="comment">;;and jump to it</span>
<span class="number">0036 0036 </span><span class="colon">: </span><span class="hex">00 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 0,0               <span class="comment">;;Pad out RST routine</span>
<span class="number">0038 0038 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0038 0038 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;RST 7 - Execute USR Routine            </span>
<span class="number">0038 0038 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;The instruction RST USRFN executes user defined code at</span>
<span class="number">0038 0038 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;the address in USR via the JP instruction in USRPOK.</span>
<span class="number">0038 0038 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;                                       </span>
<span class="number">0038 0038 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;This is the same entry point used by the USR function.</span>
<span class="number">0038 0038 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;***TODO: how to detect a USR() call    </span>
<span class="number">0038 0038 </span><span class="colon">: </span><span class="hex">C3 03 38   </span><span class="source">[M80] </span><span class="label">USRFN: </span><span class="mnemonic"> jp     </span> USRPOK            <span class="comment">;;Execute USR() routine</span>
<span class="number">003B 003B </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">003B 003B </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Default Extended BASIC Hook Routine    </span>
<span class="number">003B 003B </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;The system variable HOOK is loaded with the address of this</span>
<span class="number">003B 003B </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;routine on startup, so that all RST HOOK instructions</span>
<span class="number">003B 003B </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;are routed here.                       </span>
<span class="number">003B 003B </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;                                       </span>
<span class="number">003B 003B </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;This routine returns to the second byte after the RST</span>
<span class="number">003B 003B </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;RST instruction, preserving all registers.</span>
<span class="number">003B 003B </span><span class="colon">: </span><span class="hex">D9         </span><span class="source">      </span><span class="label">NOHOOK:</span><span class="mnemonic"> exx    </span>                   <span class="comment">;;Save BC, DE, and HL</span>
<span class="number">003C 003C </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;;Get return address off stack</span>
<span class="number">003D 003D </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;;Increment to skip byte after RST</span>
<span class="number">003E 003E </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;;Put new return address on stack</span>
<span class="number">003F 003F </span><span class="colon">: </span><span class="hex">D9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> exx    </span>                   <span class="comment">;;Restore BC, DE, and HL</span>
<span class="number">0040 0040 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;;and Return</span>
<span class="number">0041 0041 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0041 0041 </span><span class="colon">: </span><span class="hex">31 A0 38   </span><span class="source">[M80] </span><span class="label">INIT:  </span><span class="mnemonic"> ld     </span> sp,TMPSTK         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET UP TEMP STACK</span>
<span class="number">0044 0044 </span><span class="colon">: </span><span class="hex">3E 0B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,11              <span class="comment">;      </span>
<span class="number">0046      </span><span class="colon">: </span><span class="hex">CD 74 1D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> TTYCH             <span class="comment">;;Print CLS to Clear Screen</span>
<span class="number">     0046 </span><span class="colon">: </span><span class="hex">CD 94 1D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> TTYOUT            <span class="comment">;;Print CLS to Clear Screen</span>
<span class="number">0049 0049 </span><span class="colon">: </span><span class="hex">2A 01 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(CURRAM)       <span class="comment">;      </span>
<span class="number">004C 004C </span><span class="colon">: </span><span class="hex">36 20      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),' '          <span class="comment">;;Place Space on Screen</span>
<span class="number">004E 004E </span><span class="colon">: </span><span class="hex">3E 07      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,7               <span class="comment">;      </span>
<span class="number">0050      </span><span class="colon">: </span><span class="hex">CD 74 1D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> TTYCH             <span class="comment">;;Print BEL to Sound Beep</span>
<span class="number">     0050 </span><span class="colon">: </span><span class="hex">CD 94 1D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> TTYOUT            <span class="comment">;;Print BEL to Sound Beep</span>
<span class="number">0053 0053 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;      </span>
<span class="number">0054 0054 </span><span class="colon">: </span><span class="hex">D3 FF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> out    </span> ($FF),a           <span class="comment">;;Output 0 to I/O Port 255;</span>
<span class="number">0056 0056 </span><span class="colon">: </span><span class="hex">21 FF 2F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,$2FFF          <span class="comment">;      </span>
<span class="number">0059 0059 </span><span class="colon">: </span><span class="hex">22 5D 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (INSYNC),hl       <span class="comment">;      </span>
<span class="number">005C 005C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">005C 005C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Check for Catridge ROM at $E010        </span>
<span class="number">005C 005C </span><span class="colon">: </span><span class="hex">11 11 E0   </span><span class="source">      </span><span class="label">CRTCHK:</span><span class="mnemonic"> ld     </span> de,XINIT+1        <span class="comment">;      </span>
<span class="number">005F 005F </span><span class="colon">: </span><span class="hex">21 81 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,CRTSIG-1       <span class="comment">;      </span>
<span class="number">0062 0062 </span><span class="colon">: </span><span class="hex">1B         </span><span class="source">(~~~) </span><span class="label">CRTCH1:</span><span class="mnemonic"> dec    </span> de                <span class="comment">;      </span>
<span class="number">0063 0063 </span><span class="colon">: </span><span class="hex">1B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> de                <span class="comment">;      </span>
<span class="number">0064 0064 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">0065 0065 </span><span class="colon">: </span><span class="hex">1A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(de)            <span class="comment">;      </span>
<span class="number">0066 0066 </span><span class="colon">: </span><span class="hex">0F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rrca   </span>                   <span class="comment">;      </span>
<span class="number">0067 0067 </span><span class="colon">: </span><span class="hex">0F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rrca   </span>                   <span class="comment">;      </span>
<span class="number">0068 0068 </span><span class="colon">: </span><span class="hex">83         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,e               <span class="comment">;      </span>
<span class="number">0069 0069 </span><span class="colon">: </span><span class="hex">BE         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> (hl)              <span class="comment">;      </span>
<span class="number">006A 006A </span><span class="colon">: </span><span class="hex">28 F6      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,CRTCH1          <span class="comment">;      </span>
<span class="number">006C 006C </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;      </span>
<span class="number">006D 006D </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;      </span>
<span class="number">006E 006E </span><span class="colon">: </span><span class="hex">20 19      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,RESET          <span class="comment">;;ROM not found, start Basic</span>
<span class="number">0070 0070 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;      </span>
<span class="number">0071 0071 </span><span class="colon">: </span><span class="hex">06 0C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,$0C             <span class="comment">;      </span>
<span class="number">0073 0073 </span><span class="colon">: </span><span class="hex">86         </span><span class="source">(~~~) </span><span class="label">CRTCH2:</span><span class="mnemonic"> add    </span> a,(hl)            <span class="comment">;      </span>
<span class="number">0074 0074 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">0075 0075 </span><span class="colon">: </span><span class="hex">80         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,b               <span class="comment">;      </span>
<span class="number">0076 0076 </span><span class="colon">: </span><span class="hex">05         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> b                 <span class="comment">;      </span>
<span class="number">0077 0077 </span><span class="colon">: </span><span class="hex">20 FA      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,CRTCH2         <span class="comment">;      </span>
<span class="number">0079 0079 </span><span class="colon">: </span><span class="hex">AE         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> (hl)              <span class="comment">;      </span>
<span class="number">007A 007A </span><span class="colon">: </span><span class="hex">D3 FF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> out    </span> ($FF),a           <span class="comment">;      </span>
<span class="number">007C 007C </span><span class="colon">: </span><span class="hex">32 09 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (SCRMBL),a        <span class="comment">;      </span>
<span class="number">007F 007F </span><span class="colon">: </span><span class="hex">C3 10 E0   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> XINIT             <span class="comment">;;Execute Cartridge Code</span>
<span class="number">0082 0082 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0082 0082 </span><span class="colon">: </span><span class="hex">2B 37 24 24</span><span class="source">      </span><span class="label">CRTSIG:</span><span class="mnemonic"> byte   </span> "+7$$3,",0        <span class="comment">;;$A000 Cartridge Signature</span>
<span class="number">0086 0086 </span><span class="colon">: </span><span class="hex">33 2C 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0089 0089 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0089 0089 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Display Startup Screen                 </span>
<span class="number">0089 0089 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Copies the bytes at BASICT and STARTT directly to</span>
<span class="number">0089 0089 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;specific positions in screen memory.   </span>
<span class="number">0089 0089 </span><span class="colon">: </span><span class="hex">11 A1 31   </span><span class="source">      </span><span class="label">RESET: </span><span class="mnemonic"> ld     </span> de,SCREEN+417     <span class="comment">;;Display "BASIC"</span>
<span class="number">008C 008C </span><span class="colon">: </span><span class="hex">21 B0 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,BASICT         <span class="comment">;;at line 10, column 17</span>
<span class="number">008F 008F </span><span class="colon">: </span><span class="hex">01 05 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> bc,STARTT-BASICT  <span class="comment">;      </span>
<span class="number">0092 0092 </span><span class="colon">: </span><span class="hex">ED B0      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ldir   </span>                   <span class="comment">;      </span>
<span class="number">0094 0094 </span><span class="colon">: </span><span class="hex">11 10 32   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,SCREEN+528     <span class="comment">;;Display Start Message</span>
<span class="number">0097 0097 </span><span class="colon">: </span><span class="hex">21 B5 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,STARTT         <span class="comment">;at line 13, column 8</span>
<span class="number">009A 009A </span><span class="colon">: </span><span class="hex">01 19 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> bc,STARTE-STARTT  <span class="comment">;      </span>
<span class="number">009D 009D </span><span class="colon">: </span><span class="hex">ED B0      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ldir   </span>                   <span class="comment">;      </span>
<span class="number">009F 009F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">009F 009F </span><span class="colon">- </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Cycle Screen Colors                    </span>
<span class="number">009F 009F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Cycles through backround colors by sequentially</span>
<span class="number">009F 009F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;calling the COLORS routine in a loop.  </span>
<span class="number">009F 009F </span><span class="colon">= </span><span class="hex">06 03      </span><span class="source">      </span><span class="label">CYCLE: </span><span class="mnemonic"> ld     </span> b,3               <span class="comment">;;Black on Yellow</span>
<span class="number">00A1 00A1 </span><span class="colon">: </span><span class="hex">CD CF 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> COLORS            <span class="comment">;      </span>
<span class="number">00A4 00A4 </span><span class="colon">: </span><span class="hex">06 02      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,2               <span class="comment">;;Black on Green</span>
<span class="number">00A6 00A6 </span><span class="colon">: </span><span class="hex">CD CF 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> COLORS            <span class="comment">;      </span>
<span class="number">00A9 00A9 </span><span class="colon">: </span><span class="hex">06 06      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,6               <span class="comment">;;Black on Light Cyan</span>
<span class="number">00AB 00AB </span><span class="colon">: </span><span class="hex">CD CF 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> COLORS            <span class="comment">;      </span>
<span class="number">00AE 00AE </span><span class="colon">: </span><span class="hex">18 EF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> CYCLE             <span class="comment">;      </span>
<span class="number">00B0 00B0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">00B0 00B0 </span><span class="colon">- </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Start Screen Text                      </span>
<span class="number">00B0 00B0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Copied directly into Screen RAM by the RESET routine</span>
<span class="number">00B0 00B0 </span><span class="colon">= </span><span class="hex">42 41 53 49</span><span class="source">      </span><span class="label">BASICT:</span><span class="mnemonic"> byte   </span> "BASIC"                  
<span class="number">00B4 00B4 </span><span class="colon">: </span><span class="hex">43         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">00B5 00B5 </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Start Screen Prompt                    </span>
<span class="number">00B5 00B5 </span><span class="colon">= </span><span class="hex">50 72 65 73</span><span class="source">      </span><span class="label">STARTT:</span><span class="mnemonic"> byte   </span> "Press RETURN key to start"
<span class="number">00B9 00B9 </span><span class="colon">: </span><span class="hex">73 20 52 45</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">00BD 00BD </span><span class="colon">: </span><span class="hex">54 55 52 4E</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">00C1 00C1 </span><span class="colon">: </span><span class="hex">20 6B 65 79</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">00C5 00C5 </span><span class="colon">: </span><span class="hex">20 74 6F 20</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">00C9 00C9 </span><span class="colon">: </span><span class="hex">73 74 61 72</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">00CD 00CD </span><span class="colon">: </span><span class="hex">74         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">00CE 00CE </span><span class="colon">= </span><span class="hex">00         </span><span class="source">      </span><span class="label">STARTE:</span><span class="mnemonic"> byte   </span> 0                 <span class="comment">;;End of Start Screen Prompt</span>
<span class="number">00CF 00CF </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">00CF 00CF </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Set Screen Colors and Check for Keypress</span>
<span class="number">00CF 00CF </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Fills color RAM with the foreground/backround colors</span>
<span class="number">00CF 00CF </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;pssed in the accumulator, then goes into a delay loop</span>
<span class="number">00CF 00CF </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;that checks for a keypress.            </span>
<span class="number">00CF 00CF </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;                                       </span>
<span class="number">00CF 00CF </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;If RETURN is pressed, execution passes to COLDST,</span>
<span class="number">00CF 00CF </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;initializing the Basic interpreter,    </span>
<span class="number">00CF 00CF </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;                                       </span>
<span class="number">00CF 00CF </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;If CTRL-C is pressed, execution passes to WARMST,</span>
<span class="number">00CF 00CF </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;preserving the Basic program and returning the user</span>
<span class="number">00CF 00CF </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;to the "Ok" prompt.                    </span>
<span class="number">00CF 00CF </span><span class="colon">: </span><span class="hex">21 00 34   </span><span class="source">      </span><span class="label">COLORS:</span><span class="mnemonic"> ld     </span> hl,COLOR          <span class="comment">;;Store Accumulator in all bytes of Color</span>
<span class="number">00D2 00D2 </span><span class="colon">: </span><span class="hex">70         </span><span class="source">(~~~) </span><span class="label">COLOR1:</span><span class="mnemonic"> ld     </span> (hl),b            <span class="comment">;;memory, addresses $3400 through $3FFF</span>
<span class="number">00D3 00D3 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;;     </span>
<span class="number">00D4 00D4 </span><span class="colon">: </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,h               <span class="comment">;;NOTE: This wipes out $3B80 through $3FFF,</span>
<span class="number">00D5 00D5 </span><span class="colon">: </span><span class="hex">FE 38      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> $38               <span class="comment">;;which are after the end of Color memory.</span>
<span class="number">00D7 00D7 </span><span class="colon">: </span><span class="hex">20 F9      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,COLOR1         <span class="comment">;      </span>
<span class="number">00D9 00D9 </span><span class="colon">: </span><span class="hex">21 00 40   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,$4000          <span class="comment">;;Loop 12,288 times</span>
<span class="number">00DC 00DC </span><span class="colon">: </span><span class="hex">CD 80 1E   </span><span class="source">(~~~) </span><span class="label">COLOR2:</span><span class="mnemonic"> call   </span> INCHRC            <span class="comment">;;Check for keypress</span>
<span class="number">00DF 00DF </span><span class="colon">: </span><span class="hex">FE 0D      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 13                <span class="comment">;{M80} IS IT A CARRIAGE RETURN?</span>
<span class="number">00E1 00E1 </span><span class="colon">: </span><span class="hex">28 1A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,COLDST          <span class="comment">;;Cold Start</span>
<span class="number">00E3 00E3 </span><span class="colon">: </span><span class="hex">FE 03      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 3                 <span class="comment">;;Is it CTRL-C?</span>
<span class="number">00E5 00E5 </span><span class="colon">: </span><span class="hex">28 06      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,WARMST          <span class="comment">;;Warm Start</span>
<span class="number">00E7 00E7 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;;Decrement Counter</span>
<span class="number">00E8 00E8 </span><span class="colon">: </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,h               <span class="comment">;      </span>
<span class="number">00E9 00E9 </span><span class="colon">: </span><span class="hex">B5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> l                 <span class="comment">;      </span>
<span class="number">00EA 00EA </span><span class="colon">: </span><span class="hex">20 F0      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,COLOR2         <span class="comment">;;If not 0, loop</span>
<span class="number">00EC 00EC </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;;Back to CYCLE</span>
<span class="number">00ED 00ED </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">00ED 00ED </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Basic Interpreter Warm Start           </span>
<span class="number">00ED 00ED </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Clears the screen, resets I/O port $FF, initializes</span>
<span class="number">00ED 00ED </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;the hardware stack,                    </span>
<span class="number">00ED 00ED </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;***then does other stuff.              </span>
<span class="number">00ED 00ED </span><span class="colon">: </span><span class="hex">3E 0B      </span><span class="source">      </span><span class="label">WARMST:</span><span class="mnemonic"> ld     </span> a,11              <span class="comment">;      </span>
<span class="number">00EF 00EF </span><span class="colon">: </span><span class="hex">CD 72 1D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> TTYCHR            <span class="comment">;;Clear Screen</span>
<span class="number">00F2 00F2 </span><span class="colon">: </span><span class="hex">3A 09 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(SCRMBL)        <span class="comment">;      </span>
<span class="number">00F5 00F5 </span><span class="colon">: </span><span class="hex">D3 FF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> out    </span> ($FF),a           <span class="comment">;;Reset I/O Port 255</span>
<span class="number">00F7 00F7 </span><span class="colon">: </span><span class="hex">CD E5 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> STKINI            <span class="comment">;;Initialize stack</span>
<span class="number">00FA 00FA </span><span class="colon">: </span><span class="hex">CD 40 1A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> WRMCON            <span class="comment">;;Finish Up</span>
<span class="number">0108 00FD </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0108 00FD </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">COLDST:</span><span class="mnemonic">        </span>                          
<span class="number">00FD      </span><span class="colon">: </span><span class="hex">3A 33 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,($3933)                
<span class="number">0100      </span><span class="colon">: </span><span class="hex">8C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> adc    </span> a,h                      
<span class="number">0101      </span><span class="colon">: </span><span class="hex">85         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,l                      
<span class="number">0102      </span><span class="colon">: </span><span class="hex">86         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,(hl)                   
<span class="number">0103      </span><span class="colon">: </span><span class="hex">D3 FF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> out    </span> ($FF),a           <span class="comment">;;Write it to I/O Port 255</span>
<span class="number">0105      </span><span class="colon">: </span><span class="hex">32 09 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (SCRMBL),a        <span class="comment">;;and save it for later</span>
<span class="number">0108 00FD </span><span class="colon">: </span><span class="hex">21 87 01   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,DEFALT         <span class="comment">;Set System Variable Default Values</span>
<span class="number">010B 0100 </span><span class="colon">: </span><span class="hex">01 51 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> bc,81             <span class="comment">;      </span>
<span class="number">010E 0103 </span><span class="colon">: </span><span class="hex">11 03 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,USRPOK         <span class="comment">;;Copy 80 bytes starting at DEFALT</span>
<span class="number">0111 0106 </span><span class="colon">: </span><span class="hex">ED B0      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ldir   </span>                   <span class="comment">;;to the first 80 bytes of System Variables</span>
<span class="number">0113 0108 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;      </span>
<span class="number">0114 0109 </span><span class="colon">: </span><span class="hex">32 A9 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (ENDBUF),a        <span class="comment">;;Clear byte after end of BUF</span>
<span class="number">0117 010C </span><span class="colon">: </span><span class="hex">32 00 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (BASTXT-1),a      <span class="comment">;;Clear byte before start of basic program</span>
<span class="number">011A 010F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Test Memory to Find Top of RAM         </span>
<span class="number">011A 010F </span><span class="colon">: </span><span class="hex">21 64 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,BASTXT+99      <span class="comment">;;Set RAM Test starting address</span>
<span class="number">011D 0112 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">MEMTST:</span><span class="mnemonic"> inc    </span> hl                <span class="comment">;;Bump pointer</span>
<span class="number">011E 0113 </span><span class="colon">: </span><span class="hex">4E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,(hl)            <span class="comment">;;Save contents of location</span>
<span class="number">011F 0114 </span><span class="colon">: </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,h               <span class="comment">;      </span>
<span class="number">0120 0115 </span><span class="colon">: </span><span class="hex">B5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> l                 <span class="comment">;;Wrapped around to $0000?</span>
<span class="number">0121 0116 </span><span class="colon">: </span><span class="hex">28 0B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,MEMCHK          <span class="comment">;;Yes, go on to check memory</span>
<span class="number">0123 0118 </span><span class="colon">: </span><span class="hex">A9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> c                 <span class="comment">;;Scramble bits into A</span>
<span class="number">0124 0119 </span><span class="colon">: </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a            <span class="comment">;;and write to location</span>
<span class="number">0125 011A </span><span class="colon">: </span><span class="hex">46         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,(hl)            <span class="comment">;;Read back into B</span>
<span class="number">0126 011B </span><span class="colon">: </span><span class="hex">2F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cpl    </span>                   <span class="comment">;;Invert scrambled bits</span>
<span class="number">0127 011C </span><span class="colon">: </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a            <span class="comment">;;Write to location</span>
<span class="number">0128 011D </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;;read it back</span>
<span class="number">0129 011E </span><span class="colon">: </span><span class="hex">2F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cpl    </span>                   <span class="comment">;;and revert back</span>
<span class="number">012A 011F </span><span class="colon">: </span><span class="hex">71         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),c            <span class="comment">;;Write original byte to location</span>
<span class="number">012B 0120 </span><span class="colon">: </span><span class="hex">B8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> b                 <span class="comment">;;Did reads match writes?</span>
<span class="number">012C 0121 </span><span class="colon">: </span><span class="hex">28 EF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,MEMTST          <span class="comment">;;Yes, check next location</span>
<span class="number">012E 0123 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Check Memory Size               ;      </span>
<span class="number">012E 0123 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">(~~~) </span><span class="label">MEMCHK:</span><span class="mnemonic"> dec    </span> hl                <span class="comment">;;Back up to last good address</span>
<span class="number">012F 0124 </span><span class="colon">: </span><span class="hex">11 2C 3A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,BASTXT+299     <span class="comment">;      </span>
<span class="number">0132 0127 </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;;Is there enough RAM?</span>
<span class="number">0133 0128 </span><span class="colon">: </span><span class="hex">DA B7 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> c,OMERR           <span class="comment">;;No, Out of Memory error</span>
<span class="number">0136 012B </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Set Top of memory                      </span>
<span class="number">0136 012B </span><span class="colon">: </span><span class="hex">11 CE FF   </span><span class="source">{~~~} </span><span class="label">MEMSET:</span><span class="mnemonic"> ld     </span> de,$FFCE                 
<span class="number">0139 012E </span><span class="colon">: </span><span class="hex">22 AD 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (MEMSIZ),hl       <span class="comment">;;Set MEMSIZ to last RAM location</span>
<span class="number">013C 0131 </span><span class="colon">: </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de                    
<span class="number">013D 0132 </span><span class="colon">: </span><span class="hex">22 4B 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (TOPMEM),hl       <span class="comment">;;Set TOPMEM t0 MEMSIZ-50</span>
<span class="number">0140 0135 </span><span class="colon">: </span><span class="hex">CD BE 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SCRTCH            <span class="comment">;;Perform NEW</span>
<span class="number">     0138 </span><span class="colon">: </span><span class="hex">CD F2 1F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> PRNTIT            <span class="comment">;;Print copyright message</span>
<span class="number">0143      </span><span class="colon">: </span><span class="hex">21 62 01   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,HEDING         <span class="comment">;;Print copyright message</span>
<span class="number">0146      </span><span class="colon">: </span><span class="hex">CD 9D 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> STROUT                   
<span class="number">0149 013B </span><span class="colon">: </span><span class="hex">31 65 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> sp,OLDSTK         <span class="comment">;;Top of of stack used to be here</span>
<span class="number">014C 013E </span><span class="colon">: </span><span class="hex">CD E5 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> STKINI            <span class="comment">;;Set stack pointer to TOPMEM</span>
<span class="number">014F 0141 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Check for Extended BASIC               </span>
<span class="number">014F 0141 </span><span class="colon">: </span><span class="hex">21 05 20   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,EXTBAS+5       <span class="comment">;;End of signature in Extended BASIC</span>
<span class="number">0152 0144 </span><span class="colon">: </span><span class="hex">11 82 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,CRTSIG         <span class="comment">;;Text to check signature against</span>
<span class="number">0155 0147 </span><span class="colon">: </span><span class="hex">1A         </span><span class="source">(~~~) </span><span class="label">EXTCHK:</span><span class="mnemonic"> ld     </span> a,(de)            <span class="comment">;;Get byte from signature</span>
<span class="number">0156 0148 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;;Did we reach a terminator?</span>
<span class="number">     0149 </span><span class="colon">: </span><span class="hex">CA E8 1F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,XBASIC          <span class="comment">;;Yes, start Extended BASIC</span>
<span class="number">0157      </span><span class="colon">: </span><span class="hex">CA 10 20   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,XSTART          <span class="comment">;;Yes, start Extended BASIC</span>
<span class="number">015A 014C </span><span class="colon">: </span><span class="hex">BE         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> (hl)              <span class="comment">;;Does it match byte in ROM?</span>
<span class="number">015B      </span><span class="colon">: </span><span class="hex">C2 02 04   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,READY          <span class="comment">;;No, move on</span>
<span class="number">     014D </span><span class="colon">: </span><span class="hex">20 04      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,INITFF         <span class="comment">;;No, move on</span>
<span class="number">015E 014F </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;;Move backward in Extended BASIC</span>
<span class="number">015F 0150 </span><span class="colon">: </span><span class="hex">13         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> de                <span class="comment">;;and forward in test signature</span>
<span class="number">0160      </span><span class="colon">: </span><span class="hex">18 F3      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> EXTCHK            <span class="comment">;;Compare next character</span>
<span class="number">     0151 </span><span class="colon">: </span><span class="hex">18 F4      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> EXTCHK            <span class="comment">;;Compare next character</span>
<span class="number">     0153 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">     0153 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Initialize I/O Port 255                </span>
<span class="number">     0153 </span><span class="colon">: </span><span class="hex">ED 5F      </span><span class="source">(~~~) </span><span class="label">INITFF:</span><span class="mnemonic"> ld     </span> a,r               <span class="comment">;;Read random number from Refresh Register</span>
<span class="number">     0155 </span><span class="colon">: </span><span class="hex">17         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rla    </span>                   <span class="comment">;;Rotate left</span>
<span class="number">     0156 </span><span class="colon">: </span><span class="hex">81         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,c               <span class="comment">;;Copy in bit that was rotated out</span>
<span class="number">     0157 </span><span class="colon">: </span><span class="hex">D3 FF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> out    </span> ($FF),a           <span class="comment">;;Write it to I/O Port 255</span>
<span class="number">     0159 </span><span class="colon">: </span><span class="hex">32 09 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (SCRMBL),a        <span class="comment">;;and save it for later</span>
<span class="number">     015C </span><span class="colon">: </span><span class="hex">C3 02 04   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> READY             <span class="comment">;;Enter direct mode</span>
<span class="number">0162 015F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0162 015F </span><span class="colon">= </span><span class="hex">0B         </span><span class="source">[GWB] </span><span class="label">HEDING:</span><span class="mnemonic"> byte   </span> 11                <span class="comment">;;Copyright Message</span>
<span class="number">0163 0160 </span><span class="colon">: </span><span class="hex">43 6F 70 79</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> "Copyright ",5," "       
<span class="number">0167 0164 </span><span class="colon">: </span><span class="hex">72 69 67 68</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">016B 0168 </span><span class="colon">: </span><span class="hex">74 20 05 20</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">016F 016C </span><span class="colon">: </span><span class="hex">31 39 38 32</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> "1982 by Microsoft Inc." 
<span class="number">0173 0170 </span><span class="colon">: </span><span class="hex">20 62 79 20</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0177 0174 </span><span class="colon">: </span><span class="hex">4D 69 63 72</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">017B 0178 </span><span class="colon">: </span><span class="hex">6F 73 6F 66</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">017F 017C </span><span class="colon">: </span><span class="hex">74 20 49 6E</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0183 0180 </span><span class="colon">: </span><span class="hex">63 2E      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">     0182 </span><span class="colon">: </span><span class="hex">20 53 32   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> " S2"                    
<span class="number">0185 0184 </span><span class="colon">: </span><span class="hex">0A 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 10,0                     
<span class="number">0187 0187 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0187 0187 </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">        ;;System Variable Default Values - 81 ($51) bytes</span>
<span class="number">0187 0187 </span><span class="colon">= </span><span class="hex">C3 97 06   </span><span class="source">      </span><span class="label">DEFALT:</span><span class="mnemonic"> jp     </span> FCERR             <span class="comment">;;3803 USRPOK</span>
<span class="number">018A 018A </span><span class="colon">: </span><span class="hex">3B 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> NOHOOK            <span class="comment">;;3806 HOOK</span>
<span class="number">018C 018C </span><span class="colon">: </span><span class="hex">00         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 0                 <span class="comment">;;3808 CNTOFL</span>
<span class="number">018D 018D </span><span class="colon">: </span><span class="hex">A3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 163               <span class="comment">;;3809 SCRMBL</span>
<span class="number">018E 018E </span><span class="colon">: </span><span class="hex">00         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 0                 <span class="comment">;;380A CHARC</span>
<span class="number">018F 018F </span><span class="colon">: </span><span class="hex">00 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> 0                 <span class="comment">;;380B RESPTR</span>
<span class="number">0191 0191 </span><span class="colon">: </span><span class="hex">20         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> ' '               <span class="comment">;;380D CURCHR</span>
<span class="number">0192 0192 </span><span class="colon">: </span><span class="hex">00         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 0                 <span class="comment">;;380E LSTX</span>
<span class="number">0193 0193 </span><span class="colon">: </span><span class="hex">00         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 0                 <span class="comment">;;380F KCOUNT</span>
<span class="number">0194 0194 </span><span class="colon">: </span><span class="hex">D6 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> $00               <span class="comment">;;3810 FDIVC</span>
<span class="number">0196 0196 </span><span class="colon">: </span><span class="hex">6F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,a               <span class="comment">;;3812 </span>
<span class="number">0197 0197 </span><span class="colon">: </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,h               <span class="comment">;;3813 </span>
<span class="number">0198 0198 </span><span class="colon">: </span><span class="hex">DE 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sbc    </span> a,00              <span class="comment">;;3814 FDIVB</span>
<span class="number">019A 019A </span><span class="colon">: </span><span class="hex">67         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,a               <span class="comment">;;3816 </span>
<span class="number">019B 019B </span><span class="colon">: </span><span class="hex">78         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,b               <span class="comment">;;3817 </span>
<span class="number">019C 019C </span><span class="colon">: </span><span class="hex">DE 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sbc    </span> a,00              <span class="comment">;;3818 FDIVA</span>
<span class="number">019E 019E </span><span class="colon">: </span><span class="hex">47         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,a               <span class="comment">;;381A </span>
<span class="number">019F 019F </span><span class="colon">: </span><span class="hex">3E 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,0               <span class="comment">;;381B FDIVG</span>
<span class="number">01A1 01A1 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;;381D </span>
<span class="number">01A2 01A2 </span><span class="colon">: </span><span class="hex">00         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 0                 <span class="comment">;;381E </span>
<span class="number">01A3 01A3 </span><span class="colon">: </span><span class="hex">00         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 0                 <span class="comment">;;381F RNDCNT</span>
<span class="number">01A4 01A4 </span><span class="colon">: </span><span class="hex">00         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 0                 <span class="comment">;;3820 </span>
<span class="number">01A5 01A5 </span><span class="colon">: </span><span class="hex">35 4A CA 99</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $35,$4A,$CA,$99   <span class="comment">;;3821 RNDTAB</span>
<span class="number">01A9 01A9 </span><span class="colon">: </span><span class="hex">39 1C 76 98</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $39,$1C,$76,$98   <span class="comment">;;3825 </span>
<span class="number">01AD 01AD </span><span class="colon">: </span><span class="hex">22 95 B3 98</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $22,$95,$B3,$98   <span class="comment">;;3829 </span>
<span class="number">01B1 01B1 </span><span class="colon">: </span><span class="hex">0A DD 47 98</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $0A,$DD,$47,$98   <span class="comment">;;383D </span>
<span class="number">01B5 01B5 </span><span class="colon">: </span><span class="hex">53 D1 99 99</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $53,$D1,$99,$99   <span class="comment">;;3831 </span>
<span class="number">01B9 01B9 </span><span class="colon">: </span><span class="hex">0A 1A 9F 98</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $0A,$1A,$9F,$98   <span class="comment">;;3835 </span>
<span class="number">01BD 01BD </span><span class="colon">: </span><span class="hex">65 BC CD 98</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $65,$BC,$CD,$98   <span class="comment">;;3839 </span>
<span class="number">01C1 01C1 </span><span class="colon">: </span><span class="hex">D6 77 3E 98</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $D6,$77,$3E,$98   <span class="comment">;;383D </span>
<span class="number">01C5 01C5 </span><span class="colon">: </span><span class="hex">52 C7 4F 80</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $52,$C7,$4F,$80   <span class="comment">;;3841 RNDX</span>
<span class="number">01C9 01C9 </span><span class="colon">: </span><span class="hex">00         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $00               <span class="comment">;;3845 </span>
<span class="number">01CA 01CA </span><span class="colon">: </span><span class="hex">00         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $00               <span class="comment">;;3846 LPTPOS</span>
<span class="number">01CB 01CB </span><span class="colon">: </span><span class="hex">00         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $00               <span class="comment">;;3847 PRTFLG</span>
<span class="number">01CC 01CC </span><span class="colon">: </span><span class="hex">28         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $28               <span class="comment">;;3848 LINLEN</span>
<span class="number">01CD 01CD </span><span class="colon">: </span><span class="hex">0E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $0E               <span class="comment">;;3849 CLMLST</span>
<span class="number">01CE 01CE </span><span class="colon">: </span><span class="hex">00         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $00               <span class="comment">;;384A RUBSW</span>
<span class="number">01CF      </span><span class="colon">: </span><span class="hex">5D 39      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $5D,$39           <span class="comment">;;384B TOPMEM</span>
<span class="number">     01CF </span><span class="colon">: </span><span class="hex">64 39      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $64,$39           <span class="comment">;;3964 TOPMEM</span>
<span class="number">01D1 01D1 </span><span class="colon">: </span><span class="hex">FE FF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $FE,$FF           <span class="comment">;;384D CURLIN</span>
<span class="number">01D3      </span><span class="colon">: </span><span class="hex">FA 38      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> BASTXT            <span class="comment">;;384F TXTTAB</span>
<span class="number">     01D3 </span><span class="colon">: </span><span class="hex">01 39      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> BASTXT            <span class="comment">;;3901 TXTTAB</span>
<span class="number">01D5 01D5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">01D5 01D5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">STATEMENT DISPATCH ADDRESSES      </span>
<span class="number">01D5 01D5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">WHEN A STATEMENT IS TO BE EXECUTED, THE FIRST</span>
<span class="number">01D5 01D5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">CHARACTER OF THE STATEMENT IS EXAMINED</span>
<span class="number">01D5 01D5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">TO SEE IF IT IS LESS THAN THE RESERVED</span>
<span class="number">01D5 01D5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">WORD TOKEN FOR THE LOWEST NUMBERED STATEMENT NAME.</span>
<span class="number">01D5 01D5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">IF SO, THE "LET" CODE IS CALLED TO</span>
<span class="number">01D5 01D5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">TREAT THE STATEMENT AS AN ASSIGNMENT STATEMENT.</span>
<span class="number">01D5 01D5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">OTHERWISE A CHECK IS MADE TO MAKE SURE THE</span>
<span class="number">01D5 01D5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">RESERVED WORD NUMBER IS NOT TOO LARGE TO BE A</span>
<span class="number">01D5 01D5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">STATEMENT TYPE NUMBER. IF NOT THE ADDRESS</span>
<span class="number">01D5 01D5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">TO DISPATCH TO IS FETCHED FROM "STMDSP" (THE STATEMENT</span>
<span class="number">01D5 01D5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">DISPATCH LIST) USING THE RESERVED WORD</span>
<span class="number">01D5 01D5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">NUMBER FOR THE STATEMENT TO CALCULATE AN INDEX INTO</span>
<span class="number">01D5 01D5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">THE LIST.                         </span>
<span class="number">01D5 01D5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">01D5 01D5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M65] </span><span class="label">STMDSP:</span><span class="mnemonic"> ;MARKS </span>START OF STATEMENT LIST   
<span class="number">01D5 01D5 </span><span class="colon">: </span><span class="hex">21 0C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> ENDS              <span class="comment">;;$0C21</span>
<span class="number">01D7 01D7 </span><span class="colon">: </span><span class="hex">BC 05      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> FOR               <span class="comment">;;$05BC</span>
<span class="number">01D9 01D9 </span><span class="colon">: </span><span class="hex">13 0D      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> NEXT              <span class="comment">;;$0D13</span>
<span class="number">01DB 01DB </span><span class="colon">: </span><span class="hex">1C 07      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> DATA              <span class="comment">;;$071C</span>
<span class="number">01DD 01DD </span><span class="colon">: </span><span class="hex">93 08      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> INPUT             <span class="comment">;;$0893</span>
<span class="number">01DF 01DF </span><span class="colon">: </span><span class="hex">CC 10      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> DIM               <span class="comment">;;$10CC</span>
<span class="number">01E1 01E1 </span><span class="colon">: </span><span class="hex">BE 08      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> READ              <span class="comment">;;$08BE</span>
<span class="number">01E3 01E3 </span><span class="colon">: </span><span class="hex">31 07      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> LET               <span class="comment">;;$0731</span>
<span class="number">01E5 01E5 </span><span class="colon">: </span><span class="hex">DC 06      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> GOTO              <span class="comment">;;$06DC</span>
<span class="number">01E7 01E7 </span><span class="colon">: </span><span class="hex">BE 06      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> RUN               <span class="comment">;;$06BE</span>
<span class="number">01E9 01E9 </span><span class="colon">: </span><span class="hex">9C 07      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> IFS               <span class="comment">;;$079C</span>
<span class="number">01EB 01EB </span><span class="colon">: </span><span class="hex">05 0C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> RESTOR            <span class="comment">;;$0C05</span>
<span class="number">01ED 01ED </span><span class="colon">: </span><span class="hex">CB 06      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> GOSUB             <span class="comment">;;$06CB</span>
<span class="number">01EF 01EF </span><span class="colon">: </span><span class="hex">F8 06      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> RETURN            <span class="comment">;;$06F8</span>
<span class="number">01F1 01F1 </span><span class="colon">: </span><span class="hex">1E 07      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> REM               <span class="comment">;;$071E</span>
<span class="number">01F3 01F3 </span><span class="colon">: </span><span class="hex">1F 0C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> STOP              <span class="comment">;;$0C1F</span>
<span class="number">01F5 01F5 </span><span class="colon">: </span><span class="hex">80 07      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> ONGOTO            <span class="comment">;;$0780</span>
<span class="number">01F7 01F7 </span><span class="colon">: </span><span class="hex">B5 07      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> LPRINT            <span class="comment">;;$07B5</span>
<span class="number">01F9 01F9 </span><span class="colon">: </span><span class="hex">15 1B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> COPY              <span class="comment">;;$1B15</span>
<span class="number">01FB 01FB </span><span class="colon">: </span><span class="hex">3B 0B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> DEF               <span class="comment">;;$0B3B</span>
<span class="number">01FD 01FD </span><span class="colon">: </span><span class="hex">6D 0B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> POKE              <span class="comment">;;$0B6D</span>
<span class="number">01FF 01FF </span><span class="colon">: </span><span class="hex">BC 07      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> PRINT             <span class="comment">;;$07BC</span>
<span class="number">0201 0201 </span><span class="colon">: </span><span class="hex">4B 0C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> CONT              <span class="comment">;;$0C4B</span>
<span class="number">0203 0203 </span><span class="colon">: </span><span class="hex">6C 05      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> LIST              <span class="comment">;;$056C</span>
<span class="number">0205 0205 </span><span class="colon">: </span><span class="hex">67 05      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> LLIST             <span class="comment">;;$0567</span>
<span class="number">0207 0207 </span><span class="colon">: </span><span class="hex">CD 0C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> CLEAR             <span class="comment">;;$0CCD</span>
<span class="number">0209 0209 </span><span class="colon">: </span><span class="hex">2C 1C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> CLOAD             <span class="comment">;;$1C2C</span>
<span class="number">020B 020B </span><span class="colon">: </span><span class="hex">08 1C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> CSAVE             <span class="comment">;;$1C08</span>
<span class="number">020D 020D </span><span class="colon">: </span><span class="hex">4F 1A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> PSET              <span class="comment">;;$1A4F</span>
<span class="number">020F 020F </span><span class="colon">: </span><span class="hex">4C 1A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> PRESET            <span class="comment">;;$1A4C</span>
<span class="number">0211 0211 </span><span class="colon">: </span><span class="hex">D6 1A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> SOUND             <span class="comment">;;$1AD6</span>
<span class="number">0213 0213 </span><span class="colon">: </span><span class="hex">BD 0B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> SCRATH            <span class="comment">;;$0BBD NEW</span>
<span class="number">0215 0215 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Function Dispatch Table                </span>
<span class="number">0215 0215 </span><span class="colon">: </span><span class="hex">F5 14      </span><span class="source">[M80] </span><span class="label">FUNDSP:</span><span class="mnemonic"> word   </span> SGN               <span class="comment">;;$14F5</span>
<span class="number">0217 0217 </span><span class="colon">: </span><span class="hex">B1 15      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> INT               <span class="comment">;;$15B1</span>
<span class="number">0219 0219 </span><span class="colon">: </span><span class="hex">09 15      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> ABS               <span class="comment">;;$1509</span>
<span class="number">021B 021B </span><span class="colon">: </span><span class="hex">03 38      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> USRPOK            <span class="comment">;;$3803 USR()</span>
<span class="number">021D 021D </span><span class="colon">: </span><span class="hex">A8 10      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> FRE               <span class="comment">;;$10A8</span>
<span class="number">022F 022F </span><span class="colon">: </span><span class="hex">2E 0B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> LPOS              <span class="comment">;;$0B2E</span>
<span class="number">0221 0221 </span><span class="colon">: </span><span class="hex">33 0B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> POS               <span class="comment">;;$0B33</span>
<span class="number">0223 0223 </span><span class="colon">: </span><span class="hex">75 17      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> SQR               <span class="comment">;;$1775</span>
<span class="number">0225 0225 </span><span class="colon">: </span><span class="hex">66 18      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> RND               <span class="comment">;;$1866</span>
<span class="number">0227 0227 </span><span class="colon">: </span><span class="hex">85 13      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> LOG               <span class="comment">;;$1385</span>
<span class="number">0229 0229 </span><span class="colon">: </span><span class="hex">CD 17      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> EXP               <span class="comment">;;$17CD</span>
<span class="number">022B 022B </span><span class="colon">: </span><span class="hex">D7 18      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> COS               <span class="comment">;;$18D7</span>
<span class="number">022D 022D </span><span class="colon">: </span><span class="hex">DD 18      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> SIN               <span class="comment">;;$18DD</span>
<span class="number">022F 022F </span><span class="colon">: </span><span class="hex">70 19      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> TAN               <span class="comment">;;$1970</span>
<span class="number">0231 0231 </span><span class="colon">: </span><span class="hex">85 19      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> ATN               <span class="comment">;;$1985</span>
<span class="number">0233 0233 </span><span class="colon">: </span><span class="hex">63 0B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> PEEK              <span class="comment">;;$0B63</span>
<span class="number">0235 0235 </span><span class="colon">: </span><span class="hex">F3 0F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> LEN               <span class="comment">;;$0FF3</span>
<span class="number">0237 0237 </span><span class="colon">: </span><span class="hex">29 0E      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> STR               <span class="comment">;;$0E29</span>
<span class="number">0239 0239 </span><span class="colon">: </span><span class="hex">84 10      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> VAL               <span class="comment">;;$1084</span>
<span class="number">023B 023B </span><span class="colon">: </span><span class="hex">02 10      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> ASC               <span class="comment">;;$1002</span>
<span class="number">023D 023D </span><span class="colon">: </span><span class="hex">13 10      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> CHR               <span class="comment">;;$1013</span>
<span class="number">023F 023F </span><span class="colon">: </span><span class="hex">21 10      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> LEFT              <span class="comment">;;$1021</span>
<span class="number">0241 0241 </span><span class="colon">: </span><span class="hex">50 10      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> RIGHT             <span class="comment">;;$1050</span>
<span class="number">0243 0243 </span><span class="colon">: </span><span class="hex">59 10      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> MID               <span class="comment">;;$1059</span>
<span class="number">0245 0245 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0245 0245 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Statement Tokens                       </span>
<span class="number">0245 0245 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">TOKENS FOR RESERVED WORDS ALWAYS HAVE THE MOST</span>
<span class="number">0245 0245 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">SIGNIFICANT BIT ON.               </span>
<span class="number">0245 0245 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;;The first (or only) character of each keyword has bit 7 set.</span>
<span class="number">0245 0245 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;;In Altair and 6502 Basic, bit 7 was set in the last character</span>
<span class="number">0245 0245 </span><span class="colon">: </span><span class="hex">           </span><span class="source">[M65] </span><span class="label">RESLST:</span><span class="mnemonic"> ;[M65] </span>THE LIST OF RESERVED WORDS:
<span class="number">0245 0245 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span> $80               <span class="comment">;;Tokens start at 128</span>
<span class="number">0245 0245 </span><span class="colon">: </span><span class="hex">           </span><span class="source">[M65] </span><span class="label">ENDTK  </span><span class="mnemonic"> equ    </span> TK                <span class="comment">;      </span>
<span class="number">0245 0245 </span><span class="colon">: </span><span class="hex">C5 4E 44   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'E'+$80,"ND"      <span class="comment">;;$80  </span>
<span class="number">0248 0248 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">0248 0248 </span><span class="colon">: </span><span class="hex">           </span><span class="source">[M65] </span><span class="label">FORTK  </span><span class="mnemonic"> equ    </span> TK                <span class="comment">;      </span>
<span class="number">0248 0248 </span><span class="colon">: </span><span class="hex">C6 4F 52   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'F'+$80,"OR"      <span class="comment">;;$81  </span>
<span class="number">024B 024B </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">024B 024B </span><span class="colon">: </span><span class="hex">CE 45 58 54</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'N'+$80,"EXT"     <span class="comment">;;$82  </span>
<span class="number">024F 024F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">024F 024F </span><span class="colon">: </span><span class="hex">           </span><span class="source">[M65] </span><span class="label">DATATK </span><span class="mnemonic"> equ    </span> TK                <span class="comment">;      </span>
<span class="number">024F 024F </span><span class="colon">: </span><span class="hex">C4 41 54 41</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'D'+$80,"ATA"     <span class="comment">;;$83  </span>
<span class="number">0253 0253 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">0253 0253 </span><span class="colon">: </span><span class="hex">           </span><span class="source">      </span><span class="label">INPUTK </span><span class="mnemonic"> equ    </span> TK                <span class="comment">;      </span>
<span class="number">0253 0253 </span><span class="colon">: </span><span class="hex">C9 4E 50 55</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'I'+$80,"NPUT"    <span class="comment">;;$84  </span>
<span class="number">0257 0257 </span><span class="colon">: </span><span class="hex">54         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0258 0258 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">0258 0258 </span><span class="colon">: </span><span class="hex">C4 49 4D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'D'+$80,"IM"      <span class="comment">;;$85  </span>
<span class="number">025B 025B </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">025B 025B </span><span class="colon">: </span><span class="hex">D2 45 41 44</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'R'+$80,"EAD"     <span class="comment">;;$86  </span>
<span class="number">025F 025F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">025F 025F </span><span class="colon">: </span><span class="hex">CC 45 54   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'L'+$80,"ET"      <span class="comment">;;$87  </span>
<span class="number">0262 0262 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">0262 0262 </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M65] </span><span class="label">GOTOTK </span><span class="mnemonic"> equ    </span> TK                       
<span class="number">0262 0262 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">GOTOTK </span><span class="mnemonic"> equ    </span> $88               <span class="comment">;;The GOTO Token</span>
<span class="number">0262 0262 </span><span class="colon">: </span><span class="hex">C7 4F 54 4F</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'G'+$80,"OTO"     <span class="comment">;;$88  </span>
<span class="number">0266 0266 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">0266 0266 </span><span class="colon">: </span><span class="hex">D2 55 4E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'R'+$80,"UN"      <span class="comment">;;$89  </span>
<span class="number">0269 0269 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">0269 0269 </span><span class="colon">: </span><span class="hex">C9 46      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'I'+$80,"F"       <span class="comment">;;$8A  </span>
<span class="number">026B 026B </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">026B 026B </span><span class="colon">: </span><span class="hex">D2 45 53 54</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'R'+$80,"ESTORE"  <span class="comment">;;$8B  </span>
<span class="number">026F 026F </span><span class="colon">: </span><span class="hex">4F 52 45   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0272 0272 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">0272 0272 </span><span class="colon">: </span><span class="hex">           </span><span class="source">[M65] </span><span class="label">GOSUTK </span><span class="mnemonic"> equ    </span> TK                <span class="comment">;      </span>
<span class="number">0272 0272 </span><span class="colon">: </span><span class="hex">C7 4F 53 55</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'G'+$80,"OSUB"    <span class="comment">;;$8C  </span>
<span class="number">0276 0276 </span><span class="colon">: </span><span class="hex">42         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0277 0277 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">0277 0277 </span><span class="colon">: </span><span class="hex">D2 45 54 55</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'R'+$80,"ETURN"   <span class="comment">;;$8D  </span>
<span class="number">027B 027B </span><span class="colon">: </span><span class="hex">52 4E      </span><span class="source">      </span><span class="comment">                                  ;      </span>
<span class="number">027D 027D </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">027D 027D </span><span class="colon">: </span><span class="hex">           </span><span class="source">[M65] </span><span class="label">REMTK  </span><span class="mnemonic"> equ    </span> TK                <span class="comment">;      </span>
<span class="number">027D 027D </span><span class="colon">: </span><span class="hex">D2 45 4D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'R'+$80,"EM"      <span class="comment">;;$8E  </span>
<span class="number">0280 0280 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">0280 0280 </span><span class="colon">: </span><span class="hex">D3 54 4F 50</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'S'+$80,"TOP"     <span class="comment">;;$8F  </span>
<span class="number">0282 0282 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">0284 0284 </span><span class="colon">: </span><span class="hex">CF 4E      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'O'+$80,"N"       <span class="comment">;;$90  </span>
<span class="number">0286 0286 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">0286 0286 </span><span class="colon">: </span><span class="hex">CC 50 52 49</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'L'+$80,"PRINT"   <span class="comment">;;$91  </span>
<span class="number">028A 028A </span><span class="colon">: </span><span class="hex">4E 54      </span><span class="source">      </span><span class="comment">                                  ;      </span>
<span class="number">028C 028C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">028C 028C </span><span class="colon">: </span><span class="hex">C3 4F 50 59</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'C'+$80,"OPY"     <span class="comment">;;$92  </span>
<span class="number">0290 0290 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">0290 0290 </span><span class="colon">: </span><span class="hex">C4 45 46   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'D'+$80,"EF"      <span class="comment">;;$93  </span>
<span class="number">0293 0293 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">0293 0293 </span><span class="colon">: </span><span class="hex">D0 4F 4B 45</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'P'+$80,"OKE"     <span class="comment">;;$94  </span>
<span class="number">0297 0297 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">0297 0297 </span><span class="colon">: </span><span class="hex">           </span><span class="source">[M65] </span><span class="label">PRINTK </span><span class="mnemonic"> equ    </span> TK                <span class="comment">;      </span>
<span class="number">0297 0297 </span><span class="colon">: </span><span class="hex">D0 52 49 4E</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'P'+$80,"RINT"    <span class="comment">;;$95  </span>
<span class="number">029B 029B </span><span class="colon">: </span><span class="hex">54         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">029C 029C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">029C 029C </span><span class="colon">: </span><span class="hex">C3 4F 4E 54</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'C'+$80,"ONT"     <span class="comment">;;$96  </span>
<span class="number">02A0 02A0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">02A0 02A0 </span><span class="colon">: </span><span class="hex">CC 49 53 54</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'L'+$80,"IST"     <span class="comment">;;$97  </span>
<span class="number">02A4 02A4 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">02A4 02A4 </span><span class="colon">: </span><span class="hex">CC 4C 49 53</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'L'+$80,"LIST"    <span class="comment">;;$98  </span>
<span class="number">02A8 02A8 </span><span class="colon">: </span><span class="hex">54         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">02A9 02A9 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">02A9 02A9 </span><span class="colon">: </span><span class="hex">C3 4C 45 41</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'C'+$80,"LEAR"    <span class="comment">;;$99  </span>
<span class="number">02AD 02AD </span><span class="colon">: </span><span class="hex">52         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">02AE 02AE </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">02AE 02AE </span><span class="colon">: </span><span class="hex">C3 4C 4F 41</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'C'+$80,"LOAD"    <span class="comment">;;$9A  </span>
<span class="number">02B2 02B2 </span><span class="colon">: </span><span class="hex">44         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">02B3 02B3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">02B3 02B3 </span><span class="colon">: </span><span class="hex">C3 53 41 56</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'C'+$80,"SAVE"    <span class="comment">;;$9B  </span>
<span class="number">02B7 02B7 </span><span class="colon">: </span><span class="hex">45         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">02B8 02B8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">02B8 02B8 </span><span class="colon">T </span><span class="hex">           </span><span class="source">      </span><span class="label">PSETTK </span><span class="mnemonic"> equ    </span> $9C               <span class="comment">;;The PSET Token</span>
<span class="number">02B8 02B8 </span><span class="colon">: </span><span class="hex">D0 53 45 54</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'P'+$80,"SET"     <span class="comment">;;$9C  </span>
<span class="number">02BC 02BC </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">02B8 02B8 </span><span class="colon">T </span><span class="hex">           </span><span class="source">      </span><span class="label">PRESTK </span><span class="mnemonic"> equ    </span> $9D               <span class="comment">;;The PRESET Token</span>
<span class="number">02BC 02BC </span><span class="colon">: </span><span class="hex">D0 52 45 53</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'P'+$80,"RESET"   <span class="comment">;;$9D  </span>
<span class="number">02C0 02C0 </span><span class="colon">: </span><span class="hex">45 54      </span><span class="source">      </span><span class="comment">                                  ;      </span>
<span class="number">02C2 02C2 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">02C2 02C2 </span><span class="colon">: </span><span class="hex">D3 4F 55 4E</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'S'+$80,"OUND"    <span class="comment">;;$9E  </span>
<span class="number">02C6 02C6 </span><span class="colon">: </span><span class="hex">44         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">02C7 02C7 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">02C7 02C7 </span><span class="colon">: </span><span class="hex">           </span><span class="source">[M65] </span><span class="label">SCRATK </span><span class="mnemonic"> equ    </span> TK                <span class="comment">;      </span>
<span class="number">02C7 02C7 </span><span class="colon">: </span><span class="hex">CE 45 57   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'N'+$80,"EW"      <span class="comment">;;$9F  </span>
<span class="number">02CA 02CA </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">02CA 02CA </span><span class="colon">: </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">END OF COMMAND LIST        ;      </span>
<span class="number">02CA 02CA </span><span class="colon">: </span><span class="hex">           </span><span class="source">      </span><span class="label">TABTK  </span><span class="mnemonic"> equ    </span> TK                <span class="comment">;      </span>
<span class="number">02CA 02CA </span><span class="colon">: </span><span class="hex">D4 41 42 28</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'T'+$80,"AB("     <span class="comment">;;$A0  </span>
<span class="number">02CE 02CE </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">02CE 02CE </span><span class="colon">: </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">TOTK   </span><span class="mnemonic"> equ    </span> TK                <span class="comment">;      </span>
<span class="number">02CE 02CE </span><span class="colon">: </span><span class="hex">D4 4F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'T'+$80,"O"       <span class="comment">;;$A1  </span>
<span class="number">02D0 02D0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">02CA 02CA </span><span class="colon">: </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">FNTK   </span><span class="mnemonic"> equ    </span> TK                <span class="comment">;      </span>
<span class="number">02D0 02D0 </span><span class="colon">T </span><span class="hex">           </span><span class="source">      </span><span class="label">FNTK   </span><span class="mnemonic"> equ    </span> $A2               <span class="comment">;;The FN Token</span>
<span class="number">02D0 02D0 </span><span class="colon">: </span><span class="hex">C6 4E      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'F'+$80,"N"       <span class="comment">;;$A2  </span>
<span class="number">02D2 02D2 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">02D2 02D2 </span><span class="colon">: </span><span class="hex">           </span><span class="source">      </span><span class="label">SPCTK  </span><span class="mnemonic"> equ    </span> TK                <span class="comment">;      </span>
<span class="number">02D2 02D2 </span><span class="colon">: </span><span class="hex">D3 50 43 28</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'S'+$80,"PC("     <span class="comment">;;$A3  </span>
<span class="number">02D6 02D6 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">02D6 02D6 </span><span class="colon">: </span><span class="hex">           </span><span class="source">      </span><span class="label">INKETK </span><span class="mnemonic"> equ    </span> TK                <span class="comment">;      </span>
<span class="number">02D6 02D6 </span><span class="colon">: </span><span class="hex">C9 4E 4B 45</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'I'+$80,"NKEY$"   <span class="comment">;;$A4  </span>
<span class="number">02DA 02DA </span><span class="colon">: </span><span class="hex">59 24      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">02DC 02DC </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">02DC 02DC </span><span class="colon">: </span><span class="hex">           </span><span class="source">[M65] </span><span class="label">THENTK </span><span class="mnemonic"> equ    </span> TK                <span class="comment">;      </span>
<span class="number">02DC 02DC </span><span class="colon">: </span><span class="hex">D4 48 45 4E</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'T'+$80,"HEN"     <span class="comment">;;$A5  </span>
<span class="number">02E0 02E0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">02E0 02E0 </span><span class="colon">: </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">NOTTK  </span><span class="mnemonic"> equ    </span> TK                <span class="comment">;      </span>
<span class="number">02E0 02E0 </span><span class="colon">: </span><span class="hex">CE 4F 54   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'N'+$80,"OT"      <span class="comment">;;$A6  </span>
<span class="number">02E3 02E3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">02E3 02E3 </span><span class="colon">: </span><span class="hex">           </span><span class="source">[M65] </span><span class="label">STEPTK </span><span class="mnemonic"> equ    </span> TK                <span class="comment">;      </span>
<span class="number">02E3 02E3 </span><span class="colon">T </span><span class="hex">           </span><span class="source">      </span><span class="label">STEPTK </span><span class="mnemonic"> equ    </span> $A7               <span class="comment">;;The STEP Token</span>
<span class="number">02E3 02E3 </span><span class="colon">: </span><span class="hex">D3 54 45 50</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'S'+$80,"TEP"     <span class="comment">;;$A7  </span>
<span class="number">02E7 02E7 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">02E7 02E7 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">02E7 02E7 </span><span class="colon">: </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Operators                              </span>
<span class="number">02E7 02E7 </span><span class="colon">: </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">PLUSTK </span><span class="mnemonic"> equ    </span> TK                <span class="comment">;      </span>
<span class="number">02E7 02E7 </span><span class="colon">: </span><span class="hex">AB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> '+'+$80           <span class="comment">;;$A8 plus</span>
<span class="number">02E8 02E8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">02E8 02E8 </span><span class="colon">: </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">MINUTK </span><span class="mnemonic"> equ    </span> TK                <span class="comment">;      </span>
<span class="number">02E8 02E8 </span><span class="colon">T </span><span class="hex">           </span><span class="source">      </span><span class="label">MINUTK </span><span class="mnemonic"> equ    </span> $A9               <span class="comment">;The - Token</span>
<span class="number">02E8 02E8 </span><span class="colon">: </span><span class="hex">AD         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> '-'+$80           <span class="comment">;;$A9 minus</span>
<span class="number">02E9 02E9 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">02E9 02E9 </span><span class="colon">: </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">MULTK  </span><span class="mnemonic"> equ    </span> TK                <span class="comment">;      </span>
<span class="number">02E9 02E9 </span><span class="colon">: </span><span class="hex">AA         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> '*'+$80           <span class="comment">;;$AA times</span>
<span class="number">02EA 02EA </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">02EA 02EA </span><span class="colon">: </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">DIVTK  </span><span class="mnemonic"> equ    </span> TK                <span class="comment">;      </span>
<span class="number">02EA 02EA </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> '/'+$80           <span class="comment">;;$AB divide</span>
<span class="number">02EB 02EB </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">02EB 02EB </span><span class="colon">: </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">EXPTK  </span><span class="mnemonic"> equ    </span> TK                <span class="comment">;      </span>
<span class="number">02EB 02EB </span><span class="colon">: </span><span class="hex">DE         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> '^'+$80           <span class="comment">;;$AC  </span>
<span class="number">02EC 02EC </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">02EC 02EC </span><span class="colon">: </span><span class="hex">           </span><span class="source">      </span><span class="label">ANDTK  </span><span class="mnemonic"> equ    </span> TK                       
<span class="number">02EC 02EC </span><span class="colon">T </span><span class="hex">           </span><span class="source">      </span><span class="label">ANDTK  </span><span class="mnemonic"> equ    </span> $AD               <span class="comment">;;The AND Token</span>
<span class="number">02EC 02EC </span><span class="colon">: </span><span class="hex">C1 4E 44   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'A'+$80,"ND"      <span class="comment">;;$AD  </span>
<span class="number">02EF 02EF </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">02EF 02EF </span><span class="colon">: </span><span class="hex">           </span><span class="source">      </span><span class="label">ORTK   </span><span class="mnemonic"> equ    </span> TK                       
<span class="number">02EF 02EF </span><span class="colon">T </span><span class="hex">           </span><span class="source">      </span><span class="label">ORTK   </span><span class="mnemonic"> equ    </span> $AE               <span class="comment">;;The OR Token</span>
<span class="number">02EF 02EF </span><span class="colon">: </span><span class="hex">CF 52      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'O'+$80,"R"       <span class="comment">;;$AE  </span>
<span class="number">02F1 02F1 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">02F1 02F1 </span><span class="colon">: </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">GREATK </span><span class="mnemonic"> equ    </span> TK                <span class="comment">;      </span>
<span class="number">02F1 02F1 </span><span class="colon">: </span><span class="hex">BE         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> '>'+$80           <span class="comment">;;$AF greater than</span>
<span class="number">02F2 02F2 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">02F2 02F2 </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">EQUATK </span><span class="mnemonic"> equ    </span> TK                       
<span class="number">02F2 02F2 </span><span class="colon">T </span><span class="hex">           </span><span class="source">      </span><span class="label">EQUATK </span><span class="mnemonic"> equ    </span> $B0               <span class="comment">;;The Equals Token</span>
<span class="number">02F2 02F2 </span><span class="colon">: </span><span class="hex">BD         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> '='+$80           <span class="comment">;;$B0 equals</span>
<span class="number">02F3 02F3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">02F3 02F3 </span><span class="colon">: </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">LESSTK </span><span class="mnemonic"> equ    </span> TK                <span class="comment">;      </span>
<span class="number">02F3 02F3 </span><span class="colon">: </span><span class="hex">BC         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> '<'+$80           <span class="comment">;;$B1 less than</span>
<span class="number">02F3 02F3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">02F4 02F4 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">02F4 02F4 </span><span class="colon">: </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Functions                              </span>
<span class="number">02F4 02F4 </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">NOTE DANGER OF ONE RESERVED WORD BEING A PART</span>
<span class="number">02F4 02F4 </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">OF ANOTHER:                       </span>
<span class="number">02F4 02F4 </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">IE . . IF 2 GREATER THAN F OR T=5 THEN...</span>
<span class="number">02F4 02F4 </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">WILL NOT WORK!!! SINCE "FOR" WILL BE CRUNCHED!!</span>
<span class="number">02F4 02F4 </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">IN ANY CASE MAKE SURE THE SMALLER WORD APPEARS</span>
<span class="number">02F4 02F4 </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">SECOND IN THE RESERVED WORD TABLE ("INP" AND "INPUT")</span>
<span class="number">02F4 02F4 </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">ANOTHER EXAMPLE: IF T OR Q THEN ... "TO" IS CRUNCHED</span>
<span class="number">02F4 02F4 </span><span class="colon">: </span><span class="hex">           </span><span class="source">[M65] </span><span class="label">ONEFUN </span><span class="mnemonic"> equ    </span> TK                <span class="comment">;;*** This might go after SGN</span>
<span class="number">02F4 02F4 </span><span class="colon">: </span><span class="hex">D3 47 4E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'S'+$80,"GN"      <span class="comment">;;$B2  </span>
<span class="number">02F7 02F7 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">02F7 02F7 </span><span class="colon">: </span><span class="hex">C9 4E 54   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'I'+$80,"NT"      <span class="comment">;;$B3  </span>
<span class="number">02FA 02FA </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">02FA 02FA </span><span class="colon">: </span><span class="hex">C1 42 53   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'A'+$80,"BS"      <span class="comment">;;$B4  </span>
<span class="number">02FD 02FD </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">02FD 02FD </span><span class="colon">: </span><span class="hex">D5 53 52   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'U'+$80,"SR"      <span class="comment">;;$B5  </span>
<span class="number">0300 0300 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">0300 0300 </span><span class="colon">: </span><span class="hex">C6 52 45   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'F'+$80,"RE"      <span class="comment">;;$B6  </span>
<span class="number">0303 0303 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">0303 0303 </span><span class="colon">: </span><span class="hex">CC 50 4F 53</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'L'+$80,"POS"     <span class="comment">;;$B7  </span>
<span class="number">0307 0307 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">0307 0307 </span><span class="colon">: </span><span class="hex">D0 4F 53   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'P'+$80,"OS"      <span class="comment">;;$B8  </span>
<span class="number">030A 030A </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">030A 030A </span><span class="colon">: </span><span class="hex">D3 51 52   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'S'+$80,"QR"      <span class="comment">;;$B9  </span>
<span class="number">030D 030D </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">030D 030D </span><span class="colon">: </span><span class="hex">D2 4E 44   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'R'+$80,"ND"      <span class="comment">;;$BA  </span>
<span class="number">0310 0310 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">0310 0310 </span><span class="colon">: </span><span class="hex">CC 4F 47   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'L'+$80,"OG"      <span class="comment">;;$BB  </span>
<span class="number">0313 0313 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">0313 0313 </span><span class="colon">: </span><span class="hex">C5 58 50   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'E'+$80,"XP"      <span class="comment">;;$BC  </span>
<span class="number">0316 0316 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">0316 0316 </span><span class="colon">: </span><span class="hex">C3 4F 53   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'C'+$80,"OS"      <span class="comment">;;$BD  </span>
<span class="number">0319 0319 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">0319 0319 </span><span class="colon">: </span><span class="hex">D3 49 4E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'S'+$80,"IN"      <span class="comment">;;$BE  </span>
<span class="number">031C 031C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">031C 031C </span><span class="colon">: </span><span class="hex">D4 41 4E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'T'+$80,"AN"      <span class="comment">;;$BF  </span>
<span class="number">031F 031F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">031F 031F </span><span class="colon">: </span><span class="hex">C1 54 4E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'A'+$80,"TN"      <span class="comment">;;$C0  </span>
<span class="number">0322 0322 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">0322 0322 </span><span class="colon">: </span><span class="hex">D0 45 45 4B</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'P'+$80,"EEK"     <span class="comment">;;$C1  </span>
<span class="number">0326 0326 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">0326 0326 </span><span class="colon">: </span><span class="hex">CC 45 4E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'L'+$80,"EN"      <span class="comment">;;$C2  </span>
<span class="number">0329 0329 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">0329 0329 </span><span class="colon">: </span><span class="hex">D3 54 52 24</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'S'+$80,"TR$"     <span class="comment">;;$C3  </span>
<span class="number">032D 032D </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">032D 032D </span><span class="colon">: </span><span class="hex">D6 41 4C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'V'+$80,"AL"      <span class="comment">;;$C4  </span>
<span class="number">0330 0330 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">0330 0330 </span><span class="colon">: </span><span class="hex">C1 53 43   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'A'+$80,"SC"      <span class="comment">;;$C5  </span>
<span class="number">0333 0333 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">0333 0333 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">CHRTK  </span><span class="mnemonic"> equ    </span> TK                       
<span class="number">0333 0333 </span><span class="colon">: </span><span class="hex">C3 48 52 24</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'C'+$80,"HR$"     <span class="comment">;;$C6  </span>
<span class="number">0337 0337 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">0337 0337 </span><span class="colon">: </span><span class="hex">CC 45 46 54</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'L'+$80,"EFT$"    <span class="comment">;;$C7  </span>
<span class="number">033B 033B </span><span class="colon">: </span><span class="hex">24         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">033C 033C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">033C 033C </span><span class="colon">: </span><span class="hex">D2 49 47 48</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'R'+$80,"IGHT$"   <span class="comment">;;$C8  </span>
<span class="number">0340 0340 </span><span class="colon">: </span><span class="hex">54 24      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0342 0342 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">0342 0342 </span><span class="colon">: </span><span class="hex">CD 49 44 24</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'M'+$80,"ID$"     <span class="comment">;;$C9  </span>
<span class="number">0346 0346 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span>      TK+1                
<span class="number">0346 0346 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">POINTK </span><span class="mnemonic"> equ    </span> TK                       
<span class="number">0346 0346 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">POINTK </span><span class="mnemonic"> equ    </span> $CA               <span class="comment">;;The POINT Token</span>
<span class="number">0346 0346 </span><span class="colon">: </span><span class="hex">D0 4F 49 4E</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'P'+$80,"OINT"    <span class="comment">;;$CA  </span>
<span class="number">034A 034A </span><span class="colon">: </span><span class="hex">54         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">034B 034B </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="comment">;;The token crunching routine stops here, but the token expansion routine does not</span>
<span class="comment">;;so any 'tokens' above $CA will produce strange results when LISTed</span>
<span class="number">034B 034B </span><span class="colon">: </span><span class="hex">80         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $80               <span class="comment">;;End of List Marker</span>
<span class="number">034C034C  </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">034C 034C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;OPERATOR TABLE CONTAINS PRECEDENCE FOLLOWED BY THE ROUTINE ADDRESS</span>
<span class="number">034C 034C </span><span class="colon">: </span><span class="hex">79         </span><span class="source">[M80] </span><span class="label">OPTAB: </span><span class="mnemonic"> byte   </span> 121               <span class="comment">;ADD   </span>
<span class="number">034D 034D </span><span class="colon">: </span><span class="hex">5C 16      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> FADDT             <span class="comment">;      </span>
<span class="number">034F 034F </span><span class="colon">: </span><span class="hex">79         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 121               <span class="comment">;SUBTRACT</span>
<span class="number">0350 0350 </span><span class="colon">: </span><span class="hex">5C 12      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> FSUBT             <span class="comment">;      </span>
<span class="number">0352 0352 </span><span class="colon">: </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 124               <span class="comment">;MULTIPLY</span>
<span class="number">0353 0353 </span><span class="colon">: </span><span class="hex">C9 13      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> FMULTT            <span class="comment">;      </span>
<span class="number">0355 0355 </span><span class="colon">: </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 124               <span class="comment">;DIVIDE</span>
<span class="number">0356 0356 </span><span class="colon">: </span><span class="hex">2D 14      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> FDIVT             <span class="comment">;      </span>
<span class="number">0358 0358 </span><span class="colon">: </span><span class="hex">7F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 127               <span class="comment">;POWER </span>
<span class="number">0359 0359 </span><span class="colon">: </span><span class="hex">7E 17      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> FPWRT             <span class="comment">;      </span>
<span class="number">035B 035B </span><span class="colon">: </span><span class="hex">50         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 80                <span class="comment">;AND   </span>
<span class="number">035C 035C </span><span class="colon">: </span><span class="hex">A9 0A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> ANDOP             <span class="comment">;      </span>
<span class="number">035E 035E </span><span class="colon">: </span><span class="hex">46         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 70                <span class="comment">;OR    </span>
<span class="number">035F 035F </span><span class="colon">: </span><span class="hex">A8 0A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> OROP              <span class="comment">;      </span>
<span class="number">0361 0361 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0361 0361 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;{M80} NEEDED FOR MESSAGES               </span>
<span class="number">0361 0361 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0361 0361 </span><span class="colon">: </span><span class="hex">20 45 72 72</span><span class="source">[M65] </span><span class="label">ERR:   </span><span class="mnemonic"> byte   </span> " Error",7,0             
<span class="number">0365 0365 </span><span class="colon">: </span><span class="hex">6F 72 07 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0369 0369 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0369 0369 </span><span class="colon">: </span><span class="hex">20 69 6E 20</span><span class="source">[M65] </span><span class="label">INTXT: </span><span class="mnemonic"> byte   </span> " in ",0                 
<span class="number">036C 036C </span><span class="colon">: </span><span class="hex">00         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">036E 036E </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">036E 036E </span><span class="colon">: </span><span class="hex">4F 6B 0D 0A</span><span class="source">[M80] </span><span class="label">REDDY: </span><span class="mnemonic"> byte   </span> "Ok",13,10,0      <span class="comment">;;FINZER and NULRT rely on REDDY-1 being a 0!</span>
<span class="number">0372 0372 </span><span class="colon">: </span><span class="hex">00         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0373 0373 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0373 0373 </span><span class="colon">: </span><span class="hex">42 72 65 61</span><span class="source">[M80] </span><span class="label">BRKTXT:</span><span class="mnemonic"> byte   </span> "Break",0                
<span class="number">0377 0377 </span><span class="colon">: </span><span class="hex">6B 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0379 0379 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0379 0379 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">; [M65] ERROR MESSAGES                   </span>
<span class="number">0379 0379 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">; [M65] WHEN AN ERROR CONDITION IS DETECTED,</span>
<span class="number">0379 0379 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">; [M65] [ACCX] MUST BE SET UP TO INDICATE WHICH ERROR</span>
<span class="number">0379 0379 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">; [M65] MESSAGE IS APPROPRIATE AND A BRANCH MUST BE MADE</span>
<span class="number">0379 0379 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">; [M65] TO "ERROR". THE STACK WILL BE RESET AND ALL</span>
<span class="number">0379 0379 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">; [M65] PROGRAM CONTEXT WILL BE LOST. VARIABLES</span>
<span class="number">0379 0379 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">; [M65] VALUES AND THE ACTUAL PROGRAM REMAIN INTACT.</span>
<span class="number">0379 0379 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">; [M65] ONLY THE VALUE OF [ACCX] IS IMPORTANT WHEN</span>
<span class="number">0379 0379 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">; [M65] THE BRANCH IS MADE TO ERROR. [ACCX] IS USED AS AN</span>
<span class="number">0379 0379 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">; [M65] INDEX INTO "ERRTAB" WHICH GIVES THE TWO</span>
<span class="number">0379 0379 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">; [M65] CHARACTER ERROR MESSAGE THAT WILL BE PRINTED ON THE</span>
<span class="number">0379 0379 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">; [M65] USER'S TERMINAL.                 </span>
<span class="number">0379 0379 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">0379 0379 </span><span class="colon">: </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">ERRTAB:</span><span class="mnemonic"> ;;List </span>OF Error Messages         
<span class="number">0379 0379 </span><span class="colon">: </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">ERRNF  </span><span class="mnemonic"> equ    </span> *-ERRTAB          <span class="comment">;;$00  </span>
<span class="number">0379 0379 </span><span class="colon">: </span><span class="hex">4E 46      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> "NF"              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NEXT without FOR</span>
<span class="number">037B 037B </span><span class="colon">: </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">ERRSN  </span><span class="mnemonic"> equ    </span> *-ERRTAB          <span class="comment">;;$02  </span>
<span class="number">037B 037B </span><span class="colon">: </span><span class="hex">53 4E      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> "SN"              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">Syntax error</span>
<span class="number">037D 037D </span><span class="colon">: </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">ERRRG  </span><span class="mnemonic"> equ    </span> *-ERRTAB          <span class="comment">;;$04  </span>
<span class="number">037D 037D </span><span class="colon">: </span><span class="hex">52 47      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> "RG"              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RETURN without GOSUB</span>
<span class="number">037F 037F </span><span class="colon">: </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">ERROD  </span><span class="mnemonic"> equ    </span> *-ERRTAB          <span class="comment">;;$06  </span>
<span class="number">037F 037F </span><span class="colon">: </span><span class="hex">4F 44      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> "OD"              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">Out of DATA</span>
<span class="number">0381 0381 </span><span class="colon">: </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">ERRFC  </span><span class="mnemonic"> equ    </span> *-ERRTAB          <span class="comment">;;$08  </span>
<span class="number">0381 0381 </span><span class="colon">: </span><span class="hex">46 43      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> "FC"              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">Illegal function call</span>
<span class="number">0383 0383 </span><span class="colon">: </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">ERROV  </span><span class="mnemonic"> equ    </span> *-ERRTAB          <span class="comment">;;$0A  </span>
<span class="number">0383 0383 </span><span class="colon">: </span><span class="hex">4F 56      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> "OV"              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">Overflow</span>
<span class="number">0385 0385 </span><span class="colon">: </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">ERROM  </span><span class="mnemonic"> equ    </span> *-ERRTAB          <span class="comment">;;$0C  </span>
<span class="number">0385 0385 </span><span class="colon">: </span><span class="hex">4F 4D      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> "OM"              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">Out of memory</span>
<span class="number">0387 0387 </span><span class="colon">: </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">ERRUS  </span><span class="mnemonic"> equ    </span> *-ERRTAB          <span class="comment">;;$0E  </span>
<span class="number">0387 0387 </span><span class="colon">: </span><span class="hex">55 4C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> "UL"              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">Undefined line number</span>
<span class="number">0389 0389 </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">ERRBS  </span><span class="mnemonic"> equ    </span> *-ERRTAB          <span class="comment">;;$10  </span>
<span class="number">0389 0389 </span><span class="colon">: </span><span class="hex">42 53      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> "BS"              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">Subscript out of range</span>
<span class="number">038B 038B </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">ERRDDS </span><span class="mnemonic"> equ    </span> *-ERRTAB          <span class="comment">;;$12  </span>
<span class="number">038B 038B </span><span class="colon">: </span><span class="hex">44 44      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> "DD"              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">Duplicate Definition</span>
<span class="number">038D 038D </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">ERRDV0 </span><span class="mnemonic"> equ    </span> *-ERRTAB          <span class="comment">;;$14  </span>
<span class="number">038D 038D </span><span class="colon">: </span><span class="hex">2F 30      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> "/0"              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">Division by zero</span>
<span class="number">038F 038F </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">ERRID  </span><span class="mnemonic"> equ    </span> *-ERRTAB          <span class="comment">;;$16  </span>
<span class="number">038F 038F </span><span class="colon">: </span><span class="hex">49 44      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> "ID"              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">Illegal direct</span>
<span class="number">0391 0391 </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">ERRTM  </span><span class="mnemonic"> equ    </span> *-ERRTAB          <span class="comment">;;$18  </span>
<span class="number">0391 0391 </span><span class="colon">: </span><span class="hex">54 4D      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> "TM"              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">Type mismatch</span>
<span class="number">0393 0393 </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">ERRSO  </span><span class="mnemonic"> equ    </span> *-ERRTAB          <span class="comment">;;$1A  </span>
<span class="number">0393 0393 </span><span class="colon">: </span><span class="hex">4F 53      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> "OS"              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">Out of string space</span>
<span class="number">0395 0395 </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">ERRLS  </span><span class="mnemonic"> equ    </span> *-ERRTAB          <span class="comment">;;$1C  </span>
<span class="number">0395 0395 </span><span class="colon">: </span><span class="hex">4C 53      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> "LS"              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">String too long</span>
<span class="number">0397 0397 </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">ERRST  </span><span class="mnemonic"> equ    </span> *-ERRTAB          <span class="comment">;;$1E  </span>
<span class="number">0397 0397 </span><span class="colon">: </span><span class="hex">53 54      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> "ST"              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">String formula too complex</span>
<span class="number">0399 0399 </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">ERRCN  </span><span class="mnemonic"> equ    </span> *-ERRTAB          <span class="comment">;;$20  </span>
<span class="number">0399 0399 </span><span class="colon">: </span><span class="hex">43 4E      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> "CN"              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">Can't continue</span>
<span class="number">039B 039B </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">ERRUF  </span><span class="mnemonic"> equ    </span> *-ERRTAB          <span class="comment">;;$22  </span>
<span class="number">039B 039B </span><span class="colon">: </span><span class="hex">55 46      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> "UF"              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">Undefined user function</span>
<span class="number">039D 039D </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">ERRMO  </span><span class="mnemonic"> equ    </span> *-ERRTAB          <span class="comment">;;$24  </span>
<span class="number">039D 039D </span><span class="colon">: </span><span class="hex">4D 4F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> "MO"              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">Missing operand</span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">FIND A "FOR" ENTRY ON THE STACK WITH THE VARIABLE POINTER PASSED IN [D,E]</span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">MOST SMALL ROUTINES ARE FAIRLY SIMPLE</span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">AND ARE DOCUMENTED IN PLACE. "FNDFOR" IS</span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">USED FOR FINDING "FOR" ENTRIES ON </span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">THE STACK. WHENEVER A "FOR" IS EXECUTED, A</span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">16-BYTE ENTRY IS PUSHED ONTO THE STACK.</span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">BEFORE THIS IS DONE, HOWEVER, A CHECK</span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">MUST BE MADE TO SEE IF THERE      </span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">ARE ANY "FOR" ENTRIES ALREADY ON THE STACK</span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">FOR THE SAME LOOP VARIABLE. IF SO, THAT "FOR" ENTRY</span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">AND ALL OTHER "FOR" ENTRIES THAT WERE MADE AFTER IT</span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">ARE ELIMINATED FROM THE STACK. THIS IS SO A</span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">PROGRAM THAT JUMPS OUT OF THE MIDDLE</span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">OF A "FOR" LOOP AND THEN RESTARTS THE LOOP AGAIN</span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">AND AGAIN WON'T USE UP 18 BYTES OF STACK</span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">SPACE EVERY TIME. THE "NEXT" CODE ALSO</span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">CALLS "FNDFOR" TO SEARCH FOR A "FOR" ENTRY WITH</span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">THE LOOP VARIABLE IN              </span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">THE "NEXT". AT WHATEVER POINT A MATCH IS FOUND</span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">THE STACK IS RESET. IF NO MATCH IS FOUND A</span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">"NEXT WITHOUT FOR"  ERROR OCCURS. GOSUB EXECUTION</span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">ALSO PUTS A 5-BYTE ENTRY ON STACK.</span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">WHEN A RETURN IS EXECUTED "FNDFOR" IS</span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">CALLED WITH A VARIABLE POINTER THAT CAN'T</span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">BE MATCHED. WHEN "FNDFOR" HAS RUN </span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">THROUGH ALL THE "FOR" ENTRIES ON THE STACK</span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">IT RETURNS AND THE RETURN CODE MAKES</span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">SURE THE ENTRY THAT WAS STOPPED   </span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">ON IS A GOSUB ENTRY. THIS ASSURES THAT</span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">IF YOU GOSUB TO A SECTION OF CODE </span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">IN WHICH A FOR LOOP IS ENTERED BUT NEVER</span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">EXITED THE RETURN WILL STILL BE   </span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">ABLE TO FIND THE MOST RECENT      </span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">GOSUB ENTRY. THE "RETURN" CODE ELIMINATES THE</span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">"GOSUB" ENTRY AND ALL "FOR" ENTRIES MADE AFTER</span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">THE GOSUB ENTRY.                  </span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">039F 039F </span><span class="colon">: </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">FORSIZ </span><span class="mnemonic"> equ    </span> 13                <span class="comment">;;Size of a FOR entry on the stack</span>
<span class="number">039F 039F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">039F 039F </span><span class="colon">: </span><span class="hex">21 04 00   </span><span class="source">[M80] </span><span class="label">FNDFOR:</span><span class="mnemonic"> ld     </span> hl,4+0            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IGNORING THE RETURN ADDRESS OF</span>
<span class="number">03A2 03A2 </span><span class="colon">: </span><span class="hex">39         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,sp             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">THIS SUBROUTINE, SET [H,L]=SP</span>
<span class="number">03A3 03A3 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">[M80] </span><span class="label">LOOPER:</span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE WHAT TYPE OF THING IS ON THE STACK</span>
<span class="number">03A4 03A4 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">03A5 03A5 </span><span class="colon">: </span><span class="hex">FE 81      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> FORTK             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS THIS STACK ENTRY A "FOR"?</span>
<span class="number">03A7 03A7 </span><span class="colon">: </span><span class="hex">C0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nz                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NO SO OK</span>
<span class="number">03A8 03A8 </span><span class="colon">: </span><span class="hex">4E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DO EQUIVALENT OF PUSHM / XTHL</span>
<span class="number">03A9 03A9 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">03AA 03AA </span><span class="colon">: </span><span class="hex">46         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,(hl)            <span class="comment">;      </span>
<span class="number">03AB 03AB </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">03AC 03AC </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT H  ON</span>
<span class="number">03AD 03AD </span><span class="colon">: </span><span class="hex">60         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUSH B / XTHL IS SLOWER</span>
<span class="number">03AE 03AE </span><span class="colon">: </span><span class="hex">69         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,c               <span class="comment">;      </span>
<span class="number">03AF 03AF </span><span class="colon">: </span><span class="hex">7A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,d               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FOR THE "NEXT" STATMENT WITHOUT AN ARGUMENT</span>
<span class="number">03B0 03B0 </span><span class="colon">: </span><span class="hex">B3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> e                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WE MATCH ON ANYTHING</span>
<span class="number">03B1 03B1 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE SURE WE RETURN [D,E]</span>
<span class="number">03B2 03B2 </span><span class="colon">: </span><span class="hex">28 02      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,POPGOF          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINTING TO THE VARIABLE</span>
<span class="number">03B4 03B4 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;      </span>
<span class="number">03B5 03B5 </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;      </span>
<span class="number">03B6 03B6 </span><span class="colon">: </span><span class="hex">01 0D 00   </span><span class="source">[M80] </span><span class="label">POPGOF:</span><span class="mnemonic"> ld     </span> bc,FORSIZ         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TO WIPE OUT A "FOR" ENTRY</span>
<span class="number">03B9 03B9 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF VARIABLE IN THIS ENTRY MATCHES RETURN</span>
<span class="number">03BA 03BA </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WITH [H,L] POINTING THE BOTTOM ;OF THE ENTRY</span>
<span class="number">03BB 03BB </span><span class="colon">: </span><span class="hex">09         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,bc             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NOW POINTING TO THE START OF THE NEXT ENTRY.</span>
<span class="number">03BC 03BC </span><span class="colon">: </span><span class="hex">18 E5      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> LOOPER            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF ITS A "FOR" ENTRY AND IF THE VARIABLE MATCHES</span>
<span class="number">03BE 03BE </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">03BE 03BE </span><span class="colon">: </span><span class="hex">2A C9 38   </span><span class="source">[M80] </span><span class="label">DATSNE:</span><span class="mnemonic"> ld     </span> hl,(DATLIN)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET DATA LINE</span>
<span class="number">03C1 03C1 </span><span class="colon">: </span><span class="hex">22 4D 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CURLIN),hl       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE IT CURRENT LINE</span>
<span class="number">03C4 03C4 </span><span class="colon">= </span><span class="hex">1E 02      </span><span class="source">[M80] </span><span class="label">SNERR: </span><span class="mnemonic"> ld     </span> e,ERRSN           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"SYNTAX ERROR"</span>
<span class="number">03C6 03C6 </span><span class="colon">: </span><span class="hex">01         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $01               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"LD BC," OVER THE NEXT 2</span>
<span class="number">03C7 03C7 </span><span class="colon">: </span><span class="hex">1E 14      </span><span class="source">[M80] </span><span class="label">DV0ERR:</span><span class="mnemonic"> ld     </span> e,ERRDV0          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DIVISION BY ZERO</span>
<span class="number">03C9 03C9 </span><span class="colon">: </span><span class="hex">01         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $01               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"LD BC," OVER THE NEXT 2</span>
<span class="number">03CA 03CA </span><span class="colon">: </span><span class="hex">1E 00      </span><span class="source">[M80] </span><span class="label">NFERR: </span><span class="mnemonic"> ld     </span> e,ERRNF           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"NEXT WITHOUT FOR" ERROR</span>
<span class="number">03CC 03CC </span><span class="colon">: </span><span class="hex">01         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $01               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"LD BC," OVER THE NEXT 2</span>
<span class="number">03CD 03CD </span><span class="colon">: </span><span class="hex">1E 12      </span><span class="source">[M80] </span><span class="label">DDERR: </span><span class="mnemonic"> ld     </span> e,ERRDDS          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"REDIMENSIONED VARIABLE"</span>
<span class="number">03CF 03CF </span><span class="colon">: </span><span class="hex">01         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $01               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"LD BC," OVER THE NEXT 2</span>
<span class="number">03D0 03D0 </span><span class="colon">= </span><span class="hex">1E 22      </span><span class="source">[M80] </span><span class="label">UFERR: </span><span class="mnemonic"> ld     </span> e,ERRUF           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"UNDEFINED FUNCTION" ERROR</span>
<span class="number">03D2 03D2 </span><span class="colon">: </span><span class="hex">01         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $01               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"LD BC," OVER THE NEXT 2</span>
<span class="number">03D3 03D3 </span><span class="colon">: </span><span class="hex">1E 0A      </span><span class="source">[M80] </span><span class="label">OVERR: </span><span class="mnemonic"> ld     </span> e,ERROV           <span class="comment">;;      Overflow Error</span>
<span class="number">03D5 03D5 </span><span class="colon">: </span><span class="hex">01         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $01               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"LD BC," OVER THE NEXT 2</span>
<span class="number">03D6 03D6 </span><span class="colon">: </span><span class="hex">1E 24      </span><span class="source">[M80] </span><span class="label">MOERR: </span><span class="mnemonic"> ld     </span> e,ERRMO           <span class="comment">;;     Missing Operand</span>
<span class="number">03D8 03D8 </span><span class="colon">: </span><span class="hex">01         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $01               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"LD BC," OVER THE NEXT 2</span>
<span class="number">03D9 03D9 </span><span class="colon">: </span><span class="hex">1E 18      </span><span class="source">[M80] </span><span class="label">TMERR: </span><span class="mnemonic"> ld     </span> e,ERRTM           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TYPE MISMATCH ERROR</span>
<span class="number">03DB 03DB </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">03DB 03DB </span><span class="colon">: </span><span class="hex">CD E5 0B   </span><span class="source">[M80] </span><span class="label">ERROR: </span><span class="mnemonic"> call   </span> STKINI            <span class="comment">;      </span>
<span class="number">03DE 03DE </span><span class="colon">: </span><span class="hex">F7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> HOOKDO            <span class="comment">;;call Hook Service Routine</span>
<span class="number">03DF 03DF </span><span class="colon">: </span><span class="hex">00         </span><span class="source">{~~~} </span><span class="label">HOOK0: </span><span class="mnemonic"> byte   </span> 0                 <span class="comment">;      </span>
<span class="number">03E0 03E0 </span><span class="colon">: </span><span class="hex">CD DE 19   </span><span class="source">(M65) </span><span class="label">ERRCRD:</span><span class="mnemonic"> call   </span> CRDONZ            <span class="comment">;      </span>
<span class="number">03E3 03E3 </span><span class="colon">: </span><span class="hex">21 79 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,ERRTAB         <span class="comment">;      </span>
<span class="number">03E6 03E6 </span><span class="colon">: </span><span class="hex">F7         </span><span class="source">{~~~} </span><span class="label">ERRCRH:</span><span class="mnemonic"> rst    </span> HOOKDO            <span class="comment">;;call Hook Service Routine</span>
<span class="number">03E7 03E7 </span><span class="colon">: </span><span class="hex">01         </span><span class="source">{~~~} </span><span class="label">HOOK1: </span><span class="mnemonic"> byte   </span> 1                 <span class="comment">;      </span>
<span class="number">03E8 03E8 </span><span class="colon">: </span><span class="hex">57         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,a               <span class="comment">;;Add Error Offset</span>
<span class="number">03E9 03E9 </span><span class="colon">: </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de             <span class="comment">;      </span>
<span class="number">03EA 03EA </span><span class="colon">: </span><span class="hex">3E 3F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,'?'             <span class="comment">;</span><span class="source">[M65] </span><span class="comment">PRINT A QUESTION MARK</span>
<span class="number">03EC 03EC </span><span class="colon">: </span><span class="hex">DF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> OUTCHR            <span class="comment">;      </span>
<span class="number">03ED 03ED </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">(M80) </span><span class="label">ERRFIN:</span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M65] </span><span class="comment">GET FIRST CHR OF ERR MSG.</span>
<span class="number">03EE 03EE </span><span class="colon">: </span><span class="hex">DF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> OUTCHR            <span class="comment">;</span><span class="source">[M65] </span><span class="comment">OUTPUT IT.</span>
<span class="number">03EF 03EF </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;</span><span class="source">[M65] </span><span class="comment">GET SECOND CHR.</span>
<span class="number">03F0 03F0 </span><span class="colon">: </span><span class="hex">DF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> OUTCHR            <span class="comment">;</span><span class="source">[M65] </span><span class="comment">OUTPUT IT.</span>
<span class="number">03F1 03F1 </span><span class="colon">: </span><span class="hex">21 61 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,ERR            <span class="comment">;;" Error"</span>
<span class="number">03F4 03F4 </span><span class="colon">: </span><span class="hex">CD 9D 0E   </span><span class="source">[M80] </span><span class="label">ERRFN1:</span><span class="mnemonic"> call   </span> STROUT            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PRINT MESSAGE</span>
<span class="number">03F7 03F7 </span><span class="colon">: </span><span class="hex">2A 4D 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(CURLIN)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RESTORE LINE NUMBER</span>
<span class="number">03FA 03FA </span><span class="colon">: </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,h               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF IN DIRECT MODE</span>
<span class="number">03FB 03FB </span><span class="colon">: </span><span class="hex">A5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> and    </span> l                 <span class="comment">;      </span>
<span class="number">03FC 03FC </span><span class="colon">: </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ZERO SAYS DIRECT MODE</span>
<span class="number">03FD 03FD </span><span class="colon">: </span><span class="hex">C4 6D 16   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> nz,INPRT          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PRINT LINE NUMBER IN [H,L]</span>
<span class="number">0400 0400 </span><span class="colon">: </span><span class="hex">3E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $3E               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SKIP THE NEXT BYTE WITH "MVI A,0"</span>
<span class="number">0401 0401 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0401 0401 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    - </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">FOR "LIST" COMMAND STOPPING       </span>
<span class="number">0401 0401 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">[M80] </span><span class="label">STPRDY:</span><span class="mnemonic"> pop    </span> bc                       
<span class="number">0402 0402 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0402 0402 </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Enter Immediate Mode                   </span>
<span class="number">0402 0402 </span><span class="colon">= </span><span class="hex">F7         </span><span class="source">[M80] </span><span class="label">READY: </span><span class="mnemonic"> rst    </span> HOOKDO            <span class="comment">;;Call hook routine</span>
<span class="number">0403 0403 </span><span class="colon">: </span><span class="hex">02         </span><span class="source">{~~~} </span><span class="label">HOOK2: </span><span class="mnemonic"> byte   </span> 2                 <span class="comment">;      </span>
<span class="number">0404 0404 </span><span class="colon">: </span><span class="hex">CD BE 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FINLPT            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PRINT ANY LEFT OVERS</span>
<span class="number">0407 0407 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;      </span>
<span class="number">0408 0408 </span><span class="colon">: </span><span class="hex">32 08 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CNTOFL),a        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FORCE OUTPUT</span>
<span class="number">040B 040B </span><span class="colon">: </span><span class="hex">CD DE 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CRDONZ            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF NOT ALREADY AT LEFT, SEND CRLF</span>
<span class="number">040E 040E </span><span class="colon">: </span><span class="hex">21 6E 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,REDDY          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"OK" CRLF CRLF</span>
<span class="number">0411 0411 </span><span class="colon">: </span><span class="hex">CD 9D 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> STROUT            <span class="comment">;      </span>
<span class="number">0414 0414 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">                                  ;      </span>
<span class="number">0414 0414 </span><span class="colon">: </span><span class="hex">21 FF FF   </span><span class="source">[M80] </span><span class="label">MAIN:  </span><span class="mnemonic"> ld     </span> hl,$FFFF          <span class="comment">;      </span>
<span class="number">0417 0417 </span><span class="colon">: </span><span class="hex">22 4D 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CURLIN),hl       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SETUP CURLIN FOR DIRECT MODE</span>
<span class="comment">;;;GW-BASIC and CP/M Basic have Automatic Line Numbering Logic here</span>
<span class="number">041A 041A </span><span class="colon">: </span><span class="hex">CD 85 0D   </span><span class="source">{M80} </span><span class="label">NTAUTO:</span><span class="mnemonic"> call   </span> INLIN             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET A LINE FROM TTY</span>
<span class="number">041D 041D </span><span class="colon">: </span><span class="hex">38 F5      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,MAIN            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IGNORE ^C S</span>
<span class="number">041F 041F </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE FIRST</span>
<span class="number">0420 0420 </span><span class="colon">: </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF 0 SAVING THE CARRY FLAG</span>
<span class="number">0421 0421 </span><span class="colon">: </span><span class="hex">3D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> a                 <span class="comment">;      </span>
<span class="number">0422 0422 </span><span class="colon">: </span><span class="hex">28 F0      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,MAIN            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF SO, A BLANK LINE WAS INPUT</span>
<span class="number">0424 0424 </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE STATUS INDICATOR FOR 1ST CHARACTER</span>
<span class="number">0425 0425 </span><span class="colon">: </span><span class="hex">CD 9C 06   </span><span class="source">{M65} </span><span class="label">MAIN1: </span><span class="mnemonic"> call   </span> SCNLIN            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">READ IN A LINE #</span>
<span class="comment">;;;GW-BASIC snd CP/M Basic have extra logic here           ;</span>
<span class="number">0428 0428 </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Tokenize Entered Line                  </span>
<span class="number">0428 0428 </span><span class="colon">= </span><span class="hex">D5         </span><span class="source">[M80] </span><span class="label">EDENT: </span><span class="mnemonic"> push   </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE LINE #</span>
<span class="number">0429 0429 </span><span class="colon">: </span><span class="hex">CD BC 04   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CRUNCH            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CRUNCH THE LINE DOWN</span>
<span class="number">042C 042C </span><span class="colon">: </span><span class="hex">47         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,a               <span class="comment">;</span><span class="source">[M65] </span><span class="comment">RETAIN CHARACTER COUNT.</span>
<span class="number">042D 042D </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RESTORE LINE #</span>
<span class="number">042E 042E </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WAS THERE A LINE #?</span>
<span class="number">042F 042F </span><span class="colon">: </span><span class="hex">F7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> HOOKDO            <span class="comment">;;Call Hook Dispatch Routine</span>
<span class="number">0430 0430 </span><span class="colon">: </span><span class="hex">03         </span><span class="source">{~~~} </span><span class="label">HOOK3: </span><span class="mnemonic"> byte   </span> 3                 <span class="comment">;      </span>
<span class="number">0431 0431 </span><span class="colon">: </span><span class="hex">D2 4B 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,GONE           <span class="comment">;      </span>
<span class="number">0434 0434 </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;      </span>
<span class="number">0435 0435 </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE LINE # AND CHARACTER COUNT</span>
<span class="number">0436 0436 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;      </span>
<span class="number">0437 0437 </span><span class="colon">: </span><span class="hex">32 CC 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (USFLG),a         <span class="comment">;{M80} RESET THE FLAG</span>
<span class="number">043A 043A </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">REMEMBER IF THIS LINE IS</span>
<span class="number">043B 043B </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET THE ZERO FLAG ON ZERO</span>
<span class="number">043C 043C </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">BLANK SO WE DON'T INSERT IT</span>
<span class="number">043D 043D </span><span class="colon">: </span><span class="hex">CD 9F 04   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FNDLIN            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET A POINTER TO THE LINE</span>
<span class="number">0440 0440 </span><span class="colon">: </span><span class="hex">38 06      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,LEXIST          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">LINE EXISTS, DELETE IT</span>
<span class="number">0442 0442 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET FLAG SAYS WHETHER LINE BLANK</span>
<span class="number">0443 0443 </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE BACK</span>
<span class="number">0444 0444 </span><span class="colon">: </span><span class="hex">CA F3 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,USERR           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE BACK</span>
<span class="number">0447 0447 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TRYING TO DELETE NON-EXISTANT LINE, ERROR</span>
<span class="number">0448 0448 </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">(M80) </span><span class="label">LEXIST:</span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE POINTER</span>
<span class="number">0449 0449 </span><span class="colon">: </span><span class="hex">30 10      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,NODEL          <span class="comment">;      </span>
<span class="number">0FFB 0FFB </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">DELETE THE LINE                   </span>
<span class="number">044B 044B </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">{M80} </span><span class="label">DEL:   </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[D,E] NOW HAVE THE POINTER TO NEXT LINE</span>
<span class="number">044C 044C </span><span class="colon">: </span><span class="hex">2A D6 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(VARTAB)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">COMPACTIFYING TO VARTAB</span>
<span class="number">044F 044F </span><span class="colon">: </span><span class="hex">1A         </span><span class="source">(M80) </span><span class="label">MLOOP: </span><span class="mnemonic"> ld     </span> a,(de)            <span class="comment">;      </span>
<span class="number">0450 0450 </span><span class="colon">: </span><span class="hex">02         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (bc),a            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SHOVING DOWN TO ELIMINATE A LINE</span>
<span class="number">0451 0451 </span><span class="colon">: </span><span class="hex">03         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> bc                <span class="comment">;      </span>
<span class="number">0452 0452 </span><span class="colon">: </span><span class="hex">13         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> de                <span class="comment">;      </span>
<span class="number">0453 0453 </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;      </span>
<span class="number">0454 0454 </span><span class="colon">: </span><span class="hex">20 F9      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,MLOOP          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DONE COMPACTIFYING?</span>
<span class="number">0456 0456 </span><span class="colon">: </span><span class="hex">60         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,b               <span class="comment">;      </span>
<span class="number">0457 0457 </span><span class="colon">: </span><span class="hex">69         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,c               <span class="comment">;;HL = new end of program</span>
<span class="number">0458 0458 </span><span class="colon">: </span><span class="hex">22 D6 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (VARTAB),hl       <span class="comment">;</span><span class="source">[M65] </span><span class="comment">SETUP [VARTAB]</span>
<span class="number">045B 045B </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">(M80) </span><span class="label">NODEL: </span><span class="mnemonic"> pop    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POP POINTER AT PLACE TO INSERT</span>
<span class="number">045C 045C </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF THIS LINE HAD ANYTHING ON IT</span>
<span class="number">045D 045D </span><span class="colon">: </span><span class="hex">28 21      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,FINI            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF NOT DON'T INSERT</span>
<span class="number">045F 045F </span><span class="colon">: </span><span class="hex">2A D6 38   </span><span class="source">(M80) </span><span class="label">LEVFRE:</span><span class="mnemonic"> ld     </span> hl,(VARTAB)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CURRENT END</span>
<span class="number">0462 0462 </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[H,L]=CHARACTER COUNT. VARTAB ONTO STACK</span>
<span class="number">0463 0463 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[B,C]=OLD VARTAB</span>
<span class="number">0464 0464 </span><span class="colon">: </span><span class="hex">09         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,bc             <span class="comment">;      </span>
<span class="number">0465 0465 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE NEW VARTAB</span>
<span class="number">0466 0466 </span><span class="colon">: </span><span class="hex">CD 92 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> BLTU              <span class="comment">;;Create space for new line</span>
<span class="number">0469 0469 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POP OFF VARTAB</span>
<span class="number">046A 046A </span><span class="colon">: </span><span class="hex">22 D6 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (VARTAB),hl       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">UPDATE VARTAB</span>
<span class="number">046D 046D </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;      </span>
<span class="number">046E 046E </span><span class="colon">: </span><span class="hex">74         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),h            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FOOL CHEAD WITH NON-ZERO LINK</span>
<span class="number">046F 046F </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET LINE # OFF STACK</span>
<span class="number">0470 0470 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SO IT DOESN'T THINK THIS LINK</span>
<span class="number">0471 0471 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS THE END OF THE PROGRAM</span>
<span class="number">0472 0472 </span><span class="colon">: </span><span class="hex">73         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),e            <span class="comment">;      </span>
<span class="number">0473 0473 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT DOWN LINE #</span>
<span class="number">0474 0474 </span><span class="colon">: </span><span class="hex">72         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),d            <span class="comment">;      </span>
<span class="number">0475 0475 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">0476 0476 </span><span class="colon">: </span><span class="hex">11 60 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,BUF            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MOVE LINE FRM BUF TO PROGRAM AREA</span>
<span class="number">0479 0479 </span><span class="colon">: </span><span class="hex">1A         </span><span class="source">(M80) </span><span class="label">MLOOPR:</span><span class="mnemonic"> ld     </span> a,(de)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NOW TRANSFERING LINE IN FROM BUF</span>
<span class="number">047A 047A </span><span class="colon">: </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a            <span class="comment">;      </span>
<span class="number">047B 047B </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">047C 047C </span><span class="colon">: </span><span class="hex">13         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> de                <span class="comment">;      </span>
<span class="number">047D 047D </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;;If not line terminator, keep going</span>
<span class="number">047E 047E </span><span class="colon">: </span><span class="hex">20 F9      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,MLOOPR         <span class="comment">;      </span>
<span class="number">0480 0480 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0480 0480 </span><span class="colon">: </span><span class="hex">F7         </span><span class="source">[M80] </span><span class="label">FINI:  </span><span class="mnemonic"> rst    </span> HOOKDO            <span class="comment">;      </span>
<span class="number">0481 0481 </span><span class="colon">: </span><span class="hex">04         </span><span class="source">{~~~} </span><span class="label">HOOK4: </span><span class="mnemonic"> byte   </span> 4                 <span class="comment">;      </span>
<span class="number">0482 0482 </span><span class="colon">: </span><span class="hex">CD CB 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> RUNC              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DO CLEAR & SET UP STACK</span>
<span class="number">0485 0485 </span><span class="colon">: </span><span class="hex">F7         </span><span class="source">{M80} </span><span class="label">LINKER:</span><span class="mnemonic"> rst    </span> HOOKDO            <span class="comment">;      </span>
<span class="number">0486 0486 </span><span class="colon">: </span><span class="hex">05         </span><span class="source">{~~~} </span><span class="label">HOOK5: </span><span class="mnemonic"> byte   </span> 5                 <span class="comment">;      </span>
<span class="number">0487 0487 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;;HL=TXTTAB</span>
<span class="number">0488 0488 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;;DE=TXTTAB</span>
<span class="number">0489 0489 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0489 0489 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Fix Basic Line Links                   </span>
<span class="number">0489 0489 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHEAD GOES THROUGH PROGRAM STORAGE AND FIXES</span>
<span class="number">0489 0489 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">UP ALL THE LINKS. THE END OF EACH </span>
<span class="number">0489 0489 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">LINE IS FOUND BY SEARCHING FOR THE ZERO AT THE END.</span>
<span class="number">0489 0489 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE DOUBLE ZERO LINK IS USED TO DETECT THE END OF THE PROGRAM</span>
<span class="number">0489 0489 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">0489 0489 </span><span class="colon">: </span><span class="hex">62         </span><span class="source">[M80] </span><span class="label">CHEAD: </span><span class="mnemonic"> ld     </span> h,d               <span class="comment">;</span><span class="source">[H,L]=</span><span class="comment">[D,E]</span>
<span class="number">048A 048A </span><span class="colon">: </span><span class="hex">6B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,e               <span class="comment">;      </span>
<span class="number">048B 048B </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF END OF CHAIN</span>
<span class="number">048C 048C </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">BUMP POINTER</span>
<span class="number">048D 048D </span><span class="colon">: </span><span class="hex">B6         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> (hl)              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">2ND BYTE</span>
<span class="number">048E 048E </span><span class="colon">: </span><span class="hex">CA 14 04   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,MAIN            <span class="comment">;      </span>
<span class="number">0491 0491 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FIX HL TO START OF TEXT</span>
<span class="number">0492 0492 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">0493 0493 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">0494 0494 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;SET CC'S</span>
<span class="number">0495 0495 </span><span class="colon">: </span><span class="hex">BE         </span><span class="source">(M80) </span><span class="label">CZLOOP:</span><span class="mnemonic"> cp     </span> (hl)              <span class="comment">;;Skip to end of Basic line</span>
<span class="number">0496 0496 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">0497 0497 </span><span class="colon">: </span><span class="hex">20 FC      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,CZLOOP         <span class="comment">;      </span>
<span class="number">0499 0499 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;SWITCH TEMP</span>
<span class="number">049A 049A </span><span class="colon">: </span><span class="hex">73         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),e            <span class="comment">;DO FIRST BYTE OF FIXUP</span>
<span class="number">049B 049B </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;ADVANCE POINTER</span>
<span class="number">049C 049C </span><span class="colon">: </span><span class="hex">72         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),d            <span class="comment">;2ND BYTE OF FIXUP</span>
<span class="number">049D 049D </span><span class="colon">: </span><span class="hex">18 EA      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> CHEAD             <span class="comment">;KEEP CHAINING TIL DONE</span>
<span class="number">049F 049F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">049F 049F </span><span class="colon">- </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Find Basic Line                        </span>
<span class="number">049F 049F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">FNDLIN SEARCHES THE PROGRAM TEXT FOR THE LINE</span>
<span class="number">049F 049F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">WHOSE LINE # IS PASSED IN [D,E]. [D,E] IS PRESERVED.</span>
<span class="number">049F 049F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THERE ARE THREE POSSIBLE RETURNS: </span>
<span class="number">049F 049F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">049F 049F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> 1) ZERO FLAG SET. CARRY NOT SET.  LINE NOT FOUND.</span>
<span class="number">049F 049F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">    NO LINE IN PROGRAM GREATER THAN ONE SOUGHT.</span>
<span class="number">049F 049F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">    [B,C] POINTS TO TWO ZERO BYTES AT END OF PROGRAM.</span>
<span class="number">049F 049F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">    [H,L]=[B,C]                   </span>
<span class="number">049F 049F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">049F 049F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> 2) ZERO, CARRY SET.              </span>
<span class="number">049F 049F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">    [B,C] POINTS TO THE LINK FIELD IN THE LINE</span>
<span class="number">049F 049F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">    WHICH IS THE LINE SEARCHED FOR.</span>
<span class="number">049F 049F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">    [H,L] POINTS TO THE LINK FIELD IN THE NEXT LINE.</span>
<span class="number">049F 049F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">049F 049F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> 3) NON-ZERO, CARRY NOT SET.      </span>
<span class="number">049F 049F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">    LINE NOT FOUND, [B,C]  POINTS TO LINE IN PROGRAM</span>
<span class="number">049F 049F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">    GREATER THAN ONE SEARCHED FOR.</span>
<span class="number">049F 049F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">    [H,L] POINTS TO THE LINK FIELD IN THE NEXT LINE.</span>
<span class="number">049F 049F </span><span class="colon">= </span><span class="hex">2A 4F 38   </span><span class="source">      </span><span class="label">FNDLIN:</span><span class="mnemonic"> ld     </span> hl,(TXTTAB)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET POINTER TO START OF TEXT</span>
<span class="number">04A2 04A2 </span><span class="colon">: </span><span class="hex">44         </span><span class="source">      </span><span class="label">LOOP:  </span><span class="mnemonic"> ld     </span> b,h               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF EXITING BECAUSE OF END OF PROGRAM,</span>
<span class="number">04A3 04A3 </span><span class="colon">: </span><span class="hex">4D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,l               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET [B,C] TO POINT TO DOUBLE ZEROES.</span>
<span class="number">04A4 04A4 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET WORD POINTER TO</span>
<span class="number">04A5 04A5 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">BUMP POINTER</span>
<span class="number">04A6 04A6 </span><span class="colon">: </span><span class="hex">B6         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> (hl)              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET 2ND BYTE</span>
<span class="number">04A7 04A7 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GO BACK</span>
<span class="number">04A8 04A8 </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF ZERO THEN DONE</span>
<span class="number">04A9 04A9 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SKIP PAST AND GET THE LINE #</span>
<span class="number">04AA 04AA </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">04AB 04AB </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">INTO [H,L] FOR COMPARISON WITH</span>
<span class="number">04AC 04AC </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE LINE # BEING SEARCHED FOR</span>
<span class="number">04AD 04AD </span><span class="colon">: </span><span class="hex">66         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WHICH IS IN [D,E]</span>
<span class="number">04AE 04AE </span><span class="colon">: </span><span class="hex">6F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,a               <span class="comment">;      </span>
<span class="number">04AF 04AF </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF IT MATCHES OR IF WE'VE GONE TOO FAR</span>
<span class="number">04B0 04B0 </span><span class="colon">: </span><span class="hex">60         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE [H,L] POINT TO THE START OF THE</span>
<span class="number">04B1 04B1 </span><span class="colon">: </span><span class="hex">69         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,c               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">LINE BEYOND THIS ONE, BY PICKING</span>
<span class="number">04B2 04B2 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">UP THE LINK THAT [B,C] POINTS AT</span>
<span class="number">04B3 04B3 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">04B4 04B4 </span><span class="colon">: </span><span class="hex">66         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,(hl)            <span class="comment">;      </span>
<span class="number">04B5 04B5 </span><span class="colon">: </span><span class="hex">6F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,a               <span class="comment">;      </span>
<span class="number">04B6 04B6 </span><span class="colon">: </span><span class="hex">3F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ccf    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TURN CARRY OFF</span>
<span class="number">04B7 04B7 </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">EQUAL RETURN</span>
<span class="number">04B8 04B8 </span><span class="colon">: </span><span class="hex">3F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ccf    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE CARRY ZERO</span>
<span class="number">04B9 04B9 </span><span class="colon">: </span><span class="hex">D0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NO MATCH RETURN (GREATER)</span>
<span class="number">04BA 04BA </span><span class="colon">: </span><span class="hex">18 E6      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> LOOP              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">KEEP LOOPING</span>
<span class="number">04BC 04BC </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">04BC 04BC </span><span class="colon">- </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Convert Keyword to Token               </span>
<span class="number">04BC 04BC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALL "RESERVED" WORDS ARE TRANSLATED INTO SINGLE</span>
<span class="number">04BC 04BC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ONE OR TWO (IF TWO, FIRST IS ALWAYS 377 OCTAL)</span>
<span class="number">04BC 04BC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">BYTES WITH THE MSB ON. THIS SAVES SPACE AND TIME</span>
<span class="number">04BC 04BC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">BY ALLOWING FOR TABLE DISPATCH DURING EXECUTION.</span>
<span class="number">04BC 04BC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THEREFORE ALL STATEMENTS APPEAR TOGETHER IN THE</span>
<span class="number">04BC 04BC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">RESERVED WORD LIST IN THE SAME    </span>
<span class="number">04BC 04BC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ORDER THEY APPEAR IN IN STMDSP.   </span>
<span class="number">04BC 04BC </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">[M80] </span><span class="label">CRUNCH:</span><span class="mnemonic"> xor    </span> a                 <span class="comment">;SAY EXPECTING FLOATING NUMBERS</span>
<span class="number">04BD 04BD </span><span class="colon">: </span><span class="hex">32 AC 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (DORES),a         <span class="comment">;ALLOW CRUNCHING</span>
<span class="number">04C0 04C0 </span><span class="colon">: </span><span class="hex">0E 05      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,5               <span class="comment">;LENGTH OF KRUNCH BUFFER</span>
<span class="number">04C2 04C2 </span><span class="colon">: </span><span class="hex">11 60 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,BUF            <span class="comment">;SETUP DESTINATION POINTER</span>
<span class="number">04C5 04C5 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">[M80] </span><span class="label">KLOOP: </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;GET CHARACTER FROM BUF</span>
<span class="number">04C6 04C6 </span><span class="colon">: </span><span class="hex">FE 20      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> ' '               <span class="comment">;SPACE?</span>
<span class="number">04C8 04C8 </span><span class="colon">: </span><span class="hex">CA 3C 05   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,STUFFH          <span class="comment">;JUST STUFF AWAY</span>
<span class="number">04CB 04CB </span><span class="colon">: </span><span class="hex">47         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,a               <span class="comment">;SETUP B WITH A QUOTE IF IT IS A STRING</span>
<span class="number">04CC 04CC </span><span class="colon">: </span><span class="hex">FE 22      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> '"'               <span class="comment">;QUOTE SIGN?</span>
<span class="number">04CE 04CE </span><span class="colon">: </span><span class="hex">CA 58 05   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,STRNG           <span class="comment">;YES, GO TO SPECIAL STRING HANDLING</span>
<span class="number">04D1 04D1 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;END OF LINE?</span>
<span class="number">04D2 04D2 </span><span class="colon">: </span><span class="hex">CA 5E 05   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,CRDONE          <span class="comment">;YES, DONE CRUNCHING</span>
<span class="number">04D5 04D5 </span><span class="colon">: </span><span class="hex">3A AC 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(DORES)         <span class="comment">;IN DATA STATEMENT AND NO CRUNCH?</span>
<span class="number">04D8 04D8 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                        
<span class="number">04D9 04D9 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;GET THE CHARACTER AGAIN</span>
<span class="number">04DA 04DA </span><span class="colon">: </span><span class="hex">C2 3C 05   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,STUFFH         <span class="comment">;IF NO CRUNCHING JUST STORE THE CHARACTER</span>
<span class="number">04DD 04DD </span><span class="colon">: </span><span class="hex">FE 3F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> '?'               <span class="comment">;A QMARK?</span>
<span class="number">04DF 04DF </span><span class="colon">: </span><span class="hex">3E 95      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,PRINTK          <span class="comment">;      </span>
<span class="number">04E1 04E1 </span><span class="colon">: </span><span class="hex">CA 3C 05   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,STUFFH          <span class="comment">;THEN USE A "PRINT" TOKEN</span>
<span class="number">04E4 04E4 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;      </span>
<span class="number">04E5 04E5 </span><span class="colon">: </span><span class="hex">FE 30      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> '0'               <span class="comment">;</span><span class="source">[M65] </span><span class="comment">SKIP NUMERICS.</span>
<span class="number">04E7 04E7 </span><span class="colon">: </span><span class="hex">38 05      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,MUSTCR          <span class="comment">;      </span>
<span class="number">04E9 04E9 </span><span class="colon">: </span><span class="hex">FE 3C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> '<'               <span class="comment">;</span><span class="source">[M65] </span><span class="comment">":" AND ";" ARE ENTERED STRAIGHTAWAY.</span>
<span class="number">04EB 04EB </span><span class="colon">: </span><span class="hex">DA 3C 05   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> c,STUFFH          <span class="comment">;      </span>
<span class="number">04EE 04EE </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">[M65] </span><span class="label">MUSTCR:</span><span class="mnemonic"> push   </span> de                <span class="comment">;</span><span class="source">[M65] </span><span class="comment">SAVE BUFFER POINTER.</span>
<span class="number">04EF 04EF </span><span class="colon">: </span><span class="hex">11 44 02   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,RESLST-1       <span class="comment">;</span><span class="source">[M65] </span><span class="comment">LOAD RESLST POINTER.</span>
<span class="number">04F2 04F2 </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M65] </span><span class="comment">SAVE TEXT POINTER FOR LATER USE.</span>
<span class="number">04F3 04F3 </span><span class="colon">: </span><span class="hex">01 36 05   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> bc,NOTGOS         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PLACE TO RETURN IF NOT FUNNY GO</span>
<span class="number">04F6 04F6 </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;      </span>
<span class="number">04F7 04F7 </span><span class="colon">: </span><span class="hex">06 7F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,$7F             <span class="comment">;      </span>
<span class="number">04F9 04F9 </span><span class="colon">= </span><span class="hex">7E         </span><span class="source">[~~~] </span><span class="label">CRUNCX:</span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET CHAR FROM MEMORY</span>
<span class="number">04FA 04FA </span><span class="colon">: </span><span class="hex">FE 61      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 'a'               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS IT LOWER CASE RANGE</span>
<span class="number">04FC 04FC </span><span class="colon">: </span><span class="hex">38 07      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,RESCON          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">LESS</span>
<span class="number">04FE 04FE </span><span class="colon">: </span><span class="hex">FE 7B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> '{'               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GREATER</span>
<span class="number">0500 0500 </span><span class="colon">: </span><span class="hex">30 03      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,RESCON         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TEST</span>
<span class="number">0502 0502 </span><span class="colon">: </span><span class="hex">E6 5F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> and    </span> $5F               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE UPPER CASE</span>
<span class="number">0504 0504 </span><span class="colon">: </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a            <span class="comment">;;and put it back</span>
<span class="number">0505 0505 </span><span class="colon">: </span><span class="hex">4E         </span><span class="source">[N65] </span><span class="label">RESCON:</span><span class="mnemonic"> ld     </span> c,(hl)            <span class="comment">;</span><span class="source">[M80 S</span><span class="comment">AVE CHAR IN [C]</span>
<span class="number">0506 0506 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Find next Reserved Word that starts with this character</span>
<span class="number">0506 0506 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;;HL=RESLST Pointer, DE=Text Pointer</span>
<span class="number">0507 0507 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">(M80) </span><span class="label">LOPPSI:</span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">BUMP RESLST POINTER</span>
<span class="number">0508 0508 </span><span class="colon">: </span><span class="hex">B6         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> (hl)              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET CC'S</span>
<span class="number">0509 0509 </span><span class="colon">: </span><span class="hex">F2 07 05   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> p,LOPPSI          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF REST OF CHARS MATCH</span>
<span class="number">050C 050C </span><span class="colon">: </span><span class="hex">04         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> b                 <span class="comment">;      </span>
<span class="number">050D 050D </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET BYTE FROM RESERVED WORD LIST</span>
<span class="number">050E 050E </span><span class="colon">: </span><span class="hex">E6 7F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> and    </span> $7F               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET RID OF HIGH BIT</span>
<span class="number">0510 0510 </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF=0 THEN END OF THIS CHARS RESLT</span>
<span class="number">0511 0511 </span><span class="colon">: </span><span class="hex">B9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> c                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">COMPARE TO CHAR FROM SOURCE LINE</span>
<span class="number">0512 0512 </span><span class="colon">: </span><span class="hex">20 F3      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,LOPPSI         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF NO MATCH, SEARCH FOR NEXT RESWRD</span>
<span class="number">0514 0514 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;;DE=RESLST Pointer, HL=Text Pointer</span>
<span class="number">0515 0515 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;;Save Text Pointer</span>
<span class="number">0516 0516 </span><span class="colon">: </span><span class="hex">13         </span><span class="source">(M80) </span><span class="label">LOPSKP:</span><span class="mnemonic"> inc    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINT AFTER TOKEN</span>
<span class="number">0517 0517 </span><span class="colon">: </span><span class="hex">1A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(de)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET A BYTE FROM RESWRD LIST</span>
<span class="number">0518 0518 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">BUMP RESLST POINTER</span>
<span class="number">0519 0519 </span><span class="colon">: </span><span class="hex">FA 32 05   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> m,NOTFNT          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET CC'S</span>
<span class="number">051C 051C </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NOT END OF RESWRD, KEEP SKIPPING</span>
<span class="number">051D 051D </span><span class="colon">: </span><span class="hex">78         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,b               <span class="comment">;      </span>
<span class="number">051E 051E </span><span class="colon">: </span><span class="hex">FE 88      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> GOTOTK            <span class="comment">;      </span>
<span class="number">0520 0520 </span><span class="colon">: </span><span class="hex">20 02      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,MAKUPL         <span class="comment">;      </span>
<span class="number">0522 0522 </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;      </span>
<span class="number">0523 0523 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FIX TEXT POINTER</span>
<span class="number">0524 0524 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">(M80) </span><span class="label">MAKUPL:</span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">0525 0525 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;      </span>
<span class="number">0526 0526 </span><span class="colon">: </span><span class="hex">FE 61      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 'a'               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS IT LOWER CASE RANGE</span>
<span class="number">0528 0528 </span><span class="colon">: </span><span class="hex">38 02      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,MAKUPS          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">LESS</span>
<span class="number">052A 052A </span><span class="colon">: </span><span class="hex">E6 5F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> and    </span> $5F               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE UPPER CASE</span>
<span class="number">052C 052C </span><span class="colon">: </span><span class="hex">B9         </span><span class="source">(M80) </span><span class="label">MAKUPS:</span><span class="mnemonic"> cp     </span> c                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">COMPARE TO CHAR FROM SOURCE LINE</span>
<span class="number">052D 052D </span><span class="colon">: </span><span class="hex">28 E7      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,LOPSKP          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF NO MATCH, SEARCH FOR NEXT RESWRD</span>
<span class="number">052F 052F </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;      </span>
<span class="number">0530 0530 </span><span class="colon">: </span><span class="hex">18 D3      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> RESCON            <span class="comment">;      </span>
<span class="number">0532 0532 </span><span class="colon">: </span><span class="hex">48         </span><span class="source">(M80) </span><span class="label">NOTFNT:</span><span class="mnemonic"> ld     </span> c,b               <span class="comment">;      </span>
<span class="number">0533 0533 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;      </span>
<span class="number">0534 0534 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;      </span>
<span class="number">0535 0535 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">0536 0536 </span><span class="colon">: </span><span class="hex">F7         </span><span class="source">[M80] </span><span class="label">NOTGOS:</span><span class="mnemonic"> rst    </span> HOOKDO            <span class="comment">;      </span>
<span class="number">0537 0537 </span><span class="colon">: </span><span class="hex">0A         </span><span class="source">{~~~} </span><span class="label">HOOK10:</span><span class="mnemonic"> byte   </span> 10                <span class="comment">;      </span>
<span class="number">0538 0538 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;;HL=text pointer, DE=krunch pointer</span>
<span class="number">0539 0539 </span><span class="colon">: </span><span class="hex">79         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,c               <span class="comment">;;Get token</span>
<span class="number">053A 053A </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;      </span>
<span class="number">053B 053B </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;      </span>
<span class="number">053C 053C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">053C 053C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Copy character to crunch buffer        </span>
<span class="number">053C 053C </span><span class="colon">: </span><span class="hex">23         </span><span class="source">[M80] </span><span class="label">STUFFH:</span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ENTRY TO BUMP [H,L]</span>
<span class="number">053D 053D </span><span class="colon">: </span><span class="hex">12         </span><span class="source">{M80} </span><span class="label">KRNSAV:</span><span class="mnemonic"> ld     </span> (de),a            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE BYTE IN KRUNCH BUFFER</span>
<span class="number">053E 053E </span><span class="colon">: </span><span class="hex">13         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">BUMP POINTER</span>
<span class="number">053F 053F </span><span class="colon">: </span><span class="hex">0C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> c                 <span class="comment">;;Increment buffer count</span>
<span class="number">0540 0540 </span><span class="colon">: </span><span class="hex">D6 3A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> ':'               <span class="comment">;</span><span class="source">[M65] </span><span class="comment">IS IT A ":"?"</span>
<span class="number">0542 0542 </span><span class="colon">: </span><span class="hex">28 04      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,COLIS           <span class="comment">;</span><span class="source">[M65] </span><span class="comment">YES, ALLOW CRUNCHING AGAIN.</span>
<span class="number">0544 0544 </span><span class="colon">: </span><span class="hex">FE 49      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> DATATK-':'        <span class="comment">;</span><span class="source">[M65] </span><span class="comment">IS IT A DATATK?</span>
<span class="number">0546 0546 </span><span class="colon">: </span><span class="hex">20 03      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,NODATT         <span class="comment">;</span><span class="source">[M65] </span><span class="comment">NO, SEE IF IT IS REM TOKEN.</span>
<span class="number">0548 0548 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0548 0548 </span><span class="colon">: </span><span class="hex">32 AC 38   </span><span class="source">(M80) </span><span class="label">COLIS: </span><span class="mnemonic"> ld     </span> (DORES),a         <span class="comment">;</span><span class="source">[M65] </span><span class="comment">SETUP FLAG.</span>
<span class="number">054B 054B </span><span class="colon">: </span><span class="hex">D6 54      </span><span class="source">(M80) </span><span class="label">NODATT:</span><span class="mnemonic"> sub    </span> REMTK-':'         <span class="comment">;</span><span class="source">[M65] </span><span class="comment">REM ONLY STOPS ON NULL.</span>
<span class="number">054D 054D </span><span class="colon">: </span><span class="hex">C2 C5 04   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,KLOOP          <span class="comment">;</span><span class="source">[M65] </span><span class="comment">NO, CONTINUE CRUNCHING.</span>
<span class="number">0550 0550 </span><span class="colon">: </span><span class="hex">47         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,a               <span class="comment">;{M80} SAVE TERMINATOR IN [B]</span>
<span class="number">0551 0551 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">(M80) </span><span class="label">STR1:  </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET A CHAR</span>
<span class="number">0552 0552 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET CONDITION CODES</span>
<span class="number">0553 0553 </span><span class="colon">: </span><span class="hex">28 09      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,CRDONE          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF END OF LINE THEN DONE</span>
<span class="number">0555 0555 </span><span class="colon">: </span><span class="hex">B8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> b                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">COMPARE CHAR WITH THIS TERMINATOR</span>
<span class="number">0556 0556 </span><span class="colon">: </span><span class="hex">28 E4      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,STUFFH          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF YES, DONE WITH STRING</span>
<span class="number">0558 0558 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0558 0558 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">(M80) </span><span class="label">STRNG: </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">INCREMENT TEXT POINTER</span>
<span class="number">0559 0559 </span><span class="colon">: </span><span class="hex">12         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (de),a            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE CHAR IN KRUNCH BUFFER</span>
<span class="number">055A 055A </span><span class="colon">: </span><span class="hex">0C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> c                 <span class="comment">;;Increment buffer count</span>
<span class="number">055B 055B </span><span class="colon">: </span><span class="hex">13         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> de                <span class="comment">;</span><span class="source">[M65] </span><span class="comment">INCREMENT BUFFER POINTER.</span>
<span class="number">055C 055C </span><span class="colon">: </span><span class="hex">18 F3      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> STR1              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">KEEP LOOPING</span>
<span class="number">055E 055E </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">055E 055E </span><span class="colon">: </span><span class="hex">21 5F 38   </span><span class="source">(M80) </span><span class="label">CRDONE:</span><span class="mnemonic"> ld     </span> hl,BUF-1          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET POINTER TO CHAR BEFORE BUF AS "GONE" DOES A CHRGET</span>
<span class="number">0561 0561 </span><span class="colon">: </span><span class="hex">12         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (de),a            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NEED THREE 0'S ON THE END</span>
<span class="number">0562 0562 </span><span class="colon">: </span><span class="hex">13         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ONE FOR END-OF-LINE</span>
<span class="number">0563 0563 </span><span class="colon">: </span><span class="hex">12         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (de),a            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND 2 FOR A ZERO LINK</span>
<span class="number">0564 0564 </span><span class="colon">: </span><span class="hex">13         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SINCE IF THIS IS A DIRECT STATEMENT</span>
<span class="number">0565 0565 </span><span class="colon">: </span><span class="hex">12         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (de),a            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ITS END MUST LOOK LIKE THE END OF A PROGRAM</span>
<span class="number">0566 0566 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">END OF CRUNCHING</span>
<span class="number">0567 0567 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0567 0567 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;The LLIST and LIST commands            </span>
<span class="number">0567 0567 </span><span class="colon">: </span><span class="hex">3E 01      </span><span class="source">[M80] </span><span class="label">LLIST: </span><span class="mnemonic"> ld     </span> a,1               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PRTFLG=1 FOR REGULAR LIST</span>
<span class="number">0569 0569 </span><span class="colon">: </span><span class="hex">32 47 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (PRTFLG),a        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE IN I/O FLAG (END OF LPT)</span>
<span class="number">056C 056C </span><span class="colon">: </span><span class="hex">3E 17      </span><span class="source">[M80] </span><span class="label">LIST:  </span><span class="mnemonic"> ld     </span> a,23              <span class="comment">;;Set line count to 23</span>
<span class="number">056E 056E </span><span class="colon">: </span><span class="hex">32 08 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CNTOFL),a        <span class="comment">;      </span>
<span class="number">0571 0571 </span><span class="colon">: </span><span class="hex">CD 9C 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SCNLIN            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SCAN LINE RANGE</span>
<span class="number">0574 0574 </span><span class="colon">: </span><span class="hex">C0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nz                <span class="comment">;      </span>
<span class="number">0575 0575 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET RID OF NEWSTT RETURN ADDR</span>
<span class="number">0576 0576 </span><span class="colon">: </span><span class="hex">CD 9F 04   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FNDLIN            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DONT EVEN LIST LINE #</span>
<span class="number">0579 0579 </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE POINTER TO 1ST LINE</span>
<span class="number">057A 057A </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">(M80) </span><span class="label">LIST4: </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET POINTER TO LINE</span>
<span class="number">057B 057B </span><span class="colon">: </span><span class="hex">4E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[B,C]=THE LINK POINTING TO THE NEXT</span>
<span class="number">057C 057C </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">057D 057D </span><span class="colon">: </span><span class="hex">46         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,(hl)            <span class="comment">;      </span>
<span class="number">057E 057E </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">057F 057F </span><span class="colon">: </span><span class="hex">78         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF END OF CHAIN</span>
<span class="number">0580 0580 </span><span class="colon">: </span><span class="hex">B1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> c                 <span class="comment">;      </span>
<span class="number">0581 0581 </span><span class="colon">: </span><span class="hex">CA 02 04   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,READY           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">LAST LINE, STOP.</span>
<span class="number">0584 0584 </span><span class="colon">: </span><span class="hex">CD 25 1A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> ISCNTC            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHECK FOR CONTROL-C</span>
<span class="number">0587 0587 </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE LINK</span>
<span class="number">0588 0588 </span><span class="colon">: </span><span class="hex">CD EA 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CRDO              <span class="comment">;      </span>
<span class="number">058B 058B </span><span class="colon">: </span><span class="hex">5E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[B,C]=THE LINK POINTING TO THE NEXT LINE</span>
<span class="number">058C 058C </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">058D 058D </span><span class="colon">: </span><span class="hex">56         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,(hl)            <span class="comment">;      </span>
<span class="number">058E 058E </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">058F 058F </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DON'T ALLOW ^C</span>
<span class="number">0590 0590 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET LINE # IN [H,L]</span>
<span class="number">0591 0591 </span><span class="colon">: </span><span class="hex">CD 75 16   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> LINPRT            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PRINT AS INT WITHOUT LEADING SPACE</span>
<span class="number">0594 0594 </span><span class="colon">: </span><span class="hex">3E 20      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,' '             <span class="comment">;      </span>
<span class="number">0596 0596 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;      </span>
<span class="number">0597 0597 </span><span class="colon">: </span><span class="hex">DF         </span><span class="source">(M65) </span><span class="label">PLOOP: </span><span class="mnemonic"> rst    </span> OUTCHR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PRINT A SPACE AFTER THE LINE #</span>
<span class="number">0598 0598 </span><span class="colon">= </span><span class="hex">7E         </span><span class="source">[M80] </span><span class="label">LISPRT:</span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;;Detokenize and Print Line</span>
<span class="number">0599 0599 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">INCR POINTER</span>
<span class="number">059A 059A </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET CC</span>
<span class="number">059B 059B </span><span class="colon">: </span><span class="hex">28 DD      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,LIST4           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF =0 THEN END OF LINE</span>
<span class="number">059D 059D </span><span class="colon">: </span><span class="hex">F2 97 05   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> p,PLOOP           <span class="comment">;      </span>
<span class="number">05A0 05A0 </span><span class="colon">: </span><span class="hex">F7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> HOOKDO            <span class="comment">;;Handle Extended BASIC Tokens</span>
<span class="number">05A1 05A1 </span><span class="colon">: </span><span class="hex">16         </span><span class="source">{~~~} </span><span class="label">HOOK22:</span><span class="mnemonic"> byte   </span> 22                <span class="comment">;      </span>
<span class="number">05A2 05A2 </span><span class="colon">: </span><span class="hex">D6 7F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> $7F               <span class="comment">;      </span>
<span class="number">05A4 05A4 </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a               <span class="comment">;      </span>
<span class="number">05A5 05A5 </span><span class="colon">: </span><span class="hex">11 45 02   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,RESLST         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET PTR TO START OF RESERVED WORD LIST</span>
<span class="number">05A8 05A8 </span><span class="colon">= </span><span class="hex">1A         </span><span class="source">(M80) </span><span class="label">RESSRC:</span><span class="mnemonic"> ld     </span> a,(de)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET CHAR FROM RESLST</span>
<span class="number">05A9 05A9 </span><span class="colon">: </span><span class="hex">13         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">BUMP SOURCE PTR</span>
<span class="number">05AA 05AA </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET CC'S</span>
<span class="number">05AB 05AB </span><span class="colon">: </span><span class="hex">F2 A8 05   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> p,RESSRC          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF NOT END OF THIS RESWRD, THEN KEEP LOOKING</span>
<span class="number">05AE 05AE </span><span class="colon">: </span><span class="hex">0D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> c                 <span class="comment">;      </span>
<span class="number">05AF 05AF </span><span class="colon">: </span><span class="hex">20 F7      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,RESSRC         <span class="comment">;      </span>
<span class="number">05B1 05B1 </span><span class="colon">: </span><span class="hex">E6 7F      </span><span class="source">[M80] </span><span class="label">MORLNP:</span><span class="mnemonic"> and    </span> $7F               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND OFF HIGH ORDER BIT</span>
<span class="number">05B3 05B3 </span><span class="colon">: </span><span class="hex">DF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> OUTCHR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">STORE THIS CHAR</span>
<span class="number">05B4 05B4 </span><span class="colon">: </span><span class="hex">1A         </span><span class="source">{M80} </span><span class="label">MORPUR:</span><span class="mnemonic"> ld     </span> a,(de)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET BYTE FROM RESWRD</span>
<span class="number">05B5 05B5 </span><span class="colon">: </span><span class="hex">13         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">BUMP POINTER</span>
<span class="number">05B6 05B6 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET CC'S</span>
<span class="number">05B7 05B7 </span><span class="colon">: </span><span class="hex">F2 B1 05   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> p,MORLNP          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">END OF RESWRD?</span>
<span class="number">05BA 05BA </span><span class="colon">: </span><span class="hex">18 DC      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> LISPRT            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PRINT NEXT CHAR</span>
<span class="number">05BC 05BC </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">05BC 05BC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">"FOR" STATEMENT                   </span>
<span class="number">05BC 05BC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">A "FOR" ENTRY ON THE STACK HAS THE FOLLOWING FORMAT:</span>
<span class="number">05BC 05BC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">05BC 05BC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">LOW ADDRESS                       </span>
<span class="number">05BC 05BC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> TOKEN ($FOR IN HIGH BYTE)  1 BYTE</span>
<span class="number">05BC 05BC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> A POINTER TO THE LOOP VARIABLE  2 BYTES</span>
<span class="number">05BC 05BC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> A BYTE REFLECTING THE SIGN OF THE INCREMENT 1 BYTE</span>
<span class="number">05BC 05BC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> THE STEP 4 BYTES                 </span>
<span class="number">05BC 05BC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> THE UPPER VALUE 4 BYTES          </span>
<span class="number">05BC 05BC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> THE LINE # OF THE "FOR" STATEMENT 2 BYTES</span>
<span class="number">05BC 05BC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> A TEXT POINTER INTO THE "FOR" STATEMENT 2 BYTES</span>
<span class="number">05BC 05BC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">HIGH ADDRESS                      </span>
<span class="number">05BC 05BC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">05BC 05BC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">TOTAL 16 BYTES                    </span>
<span class="number">05BC 05BC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;;*** On the Aquarius, the entry is only 13 bytes</span>
<span class="number">05BC 05BC </span><span class="colon">: </span><span class="hex">3E 64      </span><span class="source">[M80] </span><span class="label">FOR:   </span><span class="mnemonic"> ld     </span> a,100                    
<span class="number">05BE 05BE </span><span class="colon">: </span><span class="hex">32 CB 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (SUBFLG),a        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DONT RECOGNIZE SUBSCRIPTED VARIABLES</span>
<span class="number">05C1 05C1 </span><span class="colon">: </span><span class="hex">CD 31 07   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> LET               <span class="comment">;</span><span class="source">[M65] </span><span class="comment">READ VARIABLE AND ASSIGN INITIAL VALUE</span>
<span class="number">05C4 05C4 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;      </span>
<span class="number">05C5 05C5 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE TEXT POINTER</span>
<span class="number">05C6 05C6 </span><span class="colon">: </span><span class="hex">CD 1C 07   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> DATA              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET [H,L]=END OF STATEMENT</span>
<span class="number">05C9 05C9 </span><span class="colon">: </span><span class="hex">22 C7 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (ENDFOR),hl       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE FOR COMPARISON</span>
<span class="number">05CC 05CC </span><span class="colon">: </span><span class="hex">21 02 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,2              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET UP POINTER INTO STACK</span>
<span class="number">05CF 05CF </span><span class="colon">: </span><span class="hex">39         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,sp             <span class="comment">;      </span>
<span class="number">05D0 05D0 </span><span class="colon">: </span><span class="hex">CD A3 03   </span><span class="source">(M80) </span><span class="label">LPFORM:</span><span class="mnemonic"> call   </span> LOOPER            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MUST HAVE VARIABLE POINTER IN [D,E]</span>
<span class="number">05D3 05D3 </span><span class="colon">: </span><span class="hex">20 14      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,NOTOL          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NO MATCHING ENTRY, DON'T ELIMINATE ANYTHING</span>
<span class="number">05D5 05D5 </span><span class="colon">: </span><span class="hex">09         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,bc             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ELIMINATE THE MATCHING ENTRY</span>
<span class="number">05D6 05D6 </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE TEXT POINTER</span>
<span class="number">05D7 05D7 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF END TEXT POINTER OF MATCHING ENTRY</span>
<span class="number">05D8 05D8 </span><span class="colon">: </span><span class="hex">56         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MATCHES THE FOR WE ARE HANDLING</span>
<span class="number">05D9 05D9 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PICK UP THE END OF THE "FOR" TEXT POINTER</span>
<span class="number">05DA 05DA </span><span class="colon">: </span><span class="hex">5E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FOR THE ENTRY ON THE STACK</span>
<span class="number">05DB 05DB </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WITHOUT CHANGING [H,L]</span>
<span class="number">05DC 05DC </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">05DD 05DD </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE STACK POINTER FOR THE COMPARISON</span>
<span class="number">05DE 05DE </span><span class="colon">: </span><span class="hex">2A C7 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(ENDFOR)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET ENDING TEXT POINTER FOR THIS "FOR"</span>
<span class="number">05E1 05E1 </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF THEY MATCH</span>
<span class="number">05E2 05E2 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET BACK THE STACK POINTER</span>
<span class="number">05E3 05E3 </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;      </span>
<span class="number">05E4 05E4 </span><span class="colon">: </span><span class="hex">20 EA      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,LPFORM         <span class="comment">;;[M80] KEEP SEARCHING IF NO MATCH</span>
<span class="number">05E6 05E6 </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET BACK THE TEXT POINTER</span>
<span class="number">05E7 05E7 </span><span class="colon">: </span><span class="hex">F9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> sp,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DO THE ELIMINATION</span>
<span class="number">05E8 05E8 </span><span class="colon">: </span><span class="hex">0C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> c                 <span class="comment">;      </span>
<span class="number">05E9 05E9 </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">(M80) </span><span class="label">NOTOL: </span><span class="mnemonic"> pop    </span> de                <span class="comment">;      </span>
<span class="number">05EA 05EA </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[H,L]=TEXT POINTER</span>
<span class="number">05EB 05EB </span><span class="colon">: </span><span class="hex">0E 08      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,8               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE SURE 16 BYTES ARE AVAILABLE</span>
<span class="number">05ED 05ED </span><span class="colon">: </span><span class="hex">CD A0 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GETSTK            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">OFF OF THE STACK</span>
<span class="number">05F0 05F0 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">REALLY SAVE THE TEXT POINTER</span>
<span class="number">05F1 05F1 </span><span class="colon">: </span><span class="hex">2A C7 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(ENDFOR)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PICK UP POINTER AT END OF "FOR"</span>
<span class="number">05F4 05F4 </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT POINTER ON STACK AND RESTORE TEXT POINTER</span>
<span class="number">05F5 05F5 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUSH POINTER TO VARIABLE ONTO THE STACK</span>
<span class="number">05F6 05F6 </span><span class="colon">: </span><span class="hex">2A 4D 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(CURLIN)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[H,L] GET THE CURRENT LINE #</span>
<span class="number">05F9 05F9 </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">LINE # ON THE STACK AND [H,L] IS THE TEXT POINTER</span>
<span class="number">05FA 05FA </span><span class="colon">: </span><span class="hex">CD 75 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CHKNUM            <span class="comment">;      </span>
<span class="number">05FD 05FD </span><span class="colon">: </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK            <span class="comment">;      </span>
<span class="number">05FE 05FE </span><span class="colon">: </span><span class="hex">A1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> TOTK              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"TO" IS NECESSARY</span>
<span class="number">05FF 05FF </span><span class="colon">: </span><span class="hex">CD 72 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FRMNUM            <span class="comment">;</span><span class="source">[M65] </span><span class="comment">VALUE MUST BE A NUMBER</span>
<span class="number">0602 0602 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;      </span>
<span class="number">0603 0603 </span><span class="colon">: </span><span class="hex">CD 2E 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVRF             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE STUFF</span>
<span class="number">0606 0606 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">REGAIN TEXT POINTER</span>
<span class="number">0607 0607 </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">OPPOSITE OF PUSHR</span>
<span class="number">0608 0608 </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE SIGN OF THE INCREMENT</span>
<span class="number">0609 0609 </span><span class="colon">: </span><span class="hex">01 00 81   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> bc,$8100          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DEFAULT THE STEP TO BE 1</span>
<span class="number">060C 060C </span><span class="colon">: </span><span class="hex">51         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,c               <span class="comment">;      </span>
<span class="number">060D 060D </span><span class="colon">: </span><span class="hex">5A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,d               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET 1.0 IN THE REGISTERS</span>
<span class="number">060E 060E </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET TERMINATING CHARACTER</span>
<span class="number">060F 060F </span><span class="colon">: </span><span class="hex">FE A7      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> STEPTK            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DO WE HAVE "STEP" ?</span>
<span class="number">0611 0611 </span><span class="colon">: </span><span class="hex">3E 01      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,1               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SETUP DEFAULT SIGN</span>
<span class="number">0613 0613 </span><span class="colon">: </span><span class="hex">20 0A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,ONEON          <span class="comment">;</span><span class="source">[M65] </span><span class="comment">NO. ASSUME 1.0.</span>
<span class="number">0615 0615 </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;</span><span class="source">[M65] </span><span class="comment">YES. ADVANCE POINTER</span>
<span class="number">0616 0616 </span><span class="colon">: </span><span class="hex">CD 72 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FRMNUM            <span class="comment">;      </span>
<span class="number">0619 0619 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;      </span>
<span class="number">061A 061A </span><span class="colon">: </span><span class="hex">CD 2E 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVRF             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET UP THE REGISTERS</span>
<span class="number">061D 061D </span><span class="colon">: </span><span class="hex">EF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> FSIGN             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE SIGN OF THE INCREMENT</span>
<span class="number">061E 061E </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">{M80} </span><span class="label">STPSGN:</span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POP OFF THE TEXT POINTER</span>
<span class="number">061F 061F </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">(M80) </span><span class="label">ONEON: </span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT VALUE ON BACKWARDS</span>
<span class="number">0620 0620 </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">OPPOSITE OF PUSHR</span>
<span class="number">0621 0621 </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;      </span>
<span class="number">0622 0622 </span><span class="colon">: </span><span class="hex">33         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> sp                <span class="comment">;      </span>
<span class="number">0623 0623 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;      </span>
<span class="number">0624 0624 </span><span class="colon">: </span><span class="hex">2A CE 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(SAVTXT)       <span class="comment">;      </span>
<span class="number">0627 0627 </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;      </span>
<span class="number">0628 0628 </span><span class="colon">: </span><span class="hex">06 81      </span><span class="source">[M80] </span><span class="label">NXTCON:</span><span class="mnemonic"> ld     </span> b,FORTK           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT A 'FOR' TOKEN ONTO THE STACK</span>
<span class="number">062A 062A </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;      </span>
<span class="number">062B 062B </span><span class="colon">: </span><span class="hex">33         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> sp                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE "TOKEN" ONLY TAKES ONE BYTE OF STACK SPACE</span>
<span class="number">062C 062C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">062C 062C </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">NEW STATEMENT FETCHER             </span>
<span class="number">062C 062C </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">BACK HERE FOR NEW STATEMENT. CHARACTER POINTED TO BY [H,L]</span>
<span class="number">062C 062C </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">":" OR END-OF-LINE. THE ADDRESS OF THIS LOCATION IS</span>
<span class="number">062C 062C </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">LEFT ON THE STACK WHEN A STATEMENT IS EXECUTED SO</span>
<span class="number">062C 062C </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IT CAN MERELY DO A RETURN WHEN IT IS DONE.</span>
<span class="number">062C 062C </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">NEWSTT:</span><span class="mnemonic">        </span>                          
<span class="number">062C      </span><span class="colon">: </span><span class="hex">CD 25 1A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> ISCNTC                   
<span class="number">062F      </span><span class="colon">: </span><span class="hex">22 CE 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (SAVTXT),hl       <span class="comment">;USED BY CONTINUE AND INPUT AND CLEAR AND PRINT USING</span>
<span class="number">     062C </span><span class="colon">: </span><span class="hex">22 CE 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">     062F </span><span class="colon">: </span><span class="hex">CD C2 1F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> INCNTC            <span class="comment">;;*** might be [M65] ISCNTC</span>
<span class="number">0632 0632 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;;Get Terminator</span>
<span class="number">0633 0633 </span><span class="colon">: </span><span class="hex">FE 3A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> ':'               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS IT A COLON?</span>
<span class="number">0635 0635 </span><span class="colon">: </span><span class="hex">28 14      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,GONE            <span class="comment">;      </span>
<span class="number">0637 0637 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;      </span>
<span class="number">0638 0638 </span><span class="colon">: </span><span class="hex">C2 C4 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,SNERR          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MUST BE A ZERO</span>
<span class="number">063B 063B </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">063C 063C </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">[M80] </span><span class="label">GONE4: </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF POINTER IS ZERO, END OF PROGRAM</span>
<span class="number">063D 063D </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">063E 063E </span><span class="colon">: </span><span class="hex">B6         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> (hl)              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">OR IN HIGH PART</span>
<span class="number">063F 063F </span><span class="colon">: </span><span class="hex">CA 29 0C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,ENDCON          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FIX SYNTAX ERROR IN UNENDED ERROR ROUTINE</span>
<span class="number">0642 0642 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">0643 0643 </span><span class="colon">: </span><span class="hex">5E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,(hl)            <span class="comment">;      </span>
<span class="number">0644 0644 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">0645 0645 </span><span class="colon">: </span><span class="hex">56         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET LINE # IN [D,E]</span>
<span class="number">0646 0646 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[H,L]=LINE #</span>
<span class="number">0647 0647 </span><span class="colon">: </span><span class="hex">22 4D 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CURLIN),hl       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SETUP CURLIN WITH THE CURRENT LINE #</span>
<span class="number">064A 064A </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;;DE=Line#, HL=Text Pointer</span>
<span class="number">064B 064B </span><span class="colon">06</span><span class="hex">4B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">064B 064B </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">[M80] </span><span class="label">GONE:  </span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE STATEMENT TYPE</span>
<span class="number">064C 064C </span><span class="colon">: </span><span class="hex">11 2C 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,NEWSTT         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUSH ON A RETURN ADDRESS OF NEWSTT</span>
<span class="number">064F 064F </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">STATEMENT</span>
<span class="number">0650 0650 </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">[M80] </span><span class="label">GONE3: </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF A TERMINATOR TRY AGAIN</span>
<span class="number">0651 0651 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">"IF" COMES HERE                   </span>
<span class="number">0651 0651 </span><span class="colon">: </span><span class="hex">D6 80      </span><span class="source">[M80] </span><span class="label">GONE2: </span><span class="mnemonic"> sub    </span> $80               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"ON ... GOTO" AND "ON ... GOSUB" COME HERE</span>
<span class="number">0653 0653 </span><span class="colon">: </span><span class="hex">DA 31 07   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> c,LET             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MUST BE A LET</span>
<span class="number">0656 0656 </span><span class="colon">: </span><span class="hex">FE 20      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> TABTK-$80         <span class="comment">;;End of Statement Tokens</span>
<span class="number">0658 0658 </span><span class="colon">: </span><span class="hex">F7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> HOOKDO            <span class="comment">;;Handle Extended BASIC Statement Tokens</span>
<span class="number">0659 0659 </span><span class="colon">: </span><span class="hex">17         </span><span class="source">{~~~} </span><span class="label">HOOK23:</span><span class="mnemonic"> byte   </span> 23                <span class="comment">;      </span>
<span class="number">065A 065A </span><span class="colon">: </span><span class="hex">D2 C4 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,SNERR          <span class="comment">;;Not a Statement Token</span>
<span class="number">065D 065D </span><span class="colon">: </span><span class="hex">07         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rlca   </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MULTIPLY BY 2</span>
<span class="number">065E 065E </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a               <span class="comment">;      </span>
<span class="number">065F 065F </span><span class="colon">: </span><span class="hex">06 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,0               <span class="comment">;;Offset = (Token - 128) * 2</span>
<span class="number">0661 0661 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;      </span>
<span class="number">0662 0662 </span><span class="colon">: </span><span class="hex">21 D5 01   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,STMDSP         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">STATEMENT DISPATCH TABLE</span>
<span class="number">0665 0665 </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Add Offset to Table and Dispatch       </span>
<span class="number">0665 0665 </span><span class="colon">= </span><span class="hex">09         </span><span class="source">[~~~] </span><span class="label">GONE5: </span><span class="mnemonic"> add    </span> hl,bc             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ADD ON OFFSET</span>
<span class="number">0666 0666 </span><span class="colon">: </span><span class="hex">4E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUSH THE ADDRESS TO GO TO ONTO</span>
<span class="number">0667 0667 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE STACK</span>
<span class="number">0668 0668 </span><span class="colon">: </span><span class="hex">46         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUSHM SAVES BYTES BUT NOT SPEED</span>
<span class="number">0669 0669 </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;      </span>
<span class="number">066A 066A </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RESTORE THE TEXT POINTER</span>
<span class="number">066B 066B </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Execute Statement                      </span>
<span class="number">066B 066B </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">NEWSTT FALLS INTO CHRGET. THIS FETCHES THE FIRST CHAR AFTER</span>
<span class="number">066B 066B </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE STATEMENT TOKEN AND THE CHRGET'S "RET" DISPATCHES TO STATEMENT</span>
<span class="number">066B 066B </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Skip Statement Token and Execute       </span>
<span class="number">066B 066B </span><span class="colon">= </span><span class="hex">23         </span><span class="source">[M80] </span><span class="label">CHRGTR:</span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DUPLICATION OF CHRGET RST FOR SPEED</span>
<span class="number">066C 066C </span><span class="colon">= </span><span class="hex">7E         </span><span class="source">[M80] </span><span class="label">CHRGT2:</span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;Alternate CHRGOT</span>
<span class="number">066D 066D </span><span class="colon">: </span><span class="hex">FE 3A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> ':'               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE CHRGET RST FOR EXPLANATION</span>
<span class="number">066F 066F </span><span class="colon">: </span><span class="hex">D0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nc                <span class="comment">;      </span>
<span class="number">0670 0670 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHRCON IS THE CONTINUATION OF THE CHRGET RST</span>
<span class="number">0670 0670 </span><span class="colon">: </span><span class="hex">FE 20      </span><span class="source">[M80] </span><span class="label">CHRCON:</span><span class="mnemonic"> cp     </span> ' '               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MUST SKIP SPACES</span>
<span class="number">0672 0672 </span><span class="colon">: </span><span class="hex">28 F7      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,CHRGTR          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET ANOTHER CHARACTER</span>
<span class="number">0674 0674 </span><span class="colon">: </span><span class="hex">FE 30      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> '0'               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALL CHARS .GT. "9" HAVE RET'D SO</span>
<span class="number">0676 0676 </span><span class="colon">: </span><span class="hex">3F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ccf    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TURN CARRY ON IF NUMERIC.</span>
<span class="number">0677 0677 </span><span class="colon">: </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALSO, SETZ IF NULL.</span>
<span class="number">0678 0678 </span><span class="colon">: </span><span class="hex">3D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> a                 <span class="comment">;      </span>
<span class="number">0679 0679 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">{M80} </span><span class="label">CHRRTS:</span><span class="mnemonic"> ret    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RETURN TO CALLER.</span>
<span class="number">067A 067A </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">067A 067A </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">INTIDX READS A FORMULA FROM THE CURRENT POSITION AND</span>
<span class="number">067A 067A </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">TURNS IT INTO A POSITIVE INTEGER  </span>
<span class="number">067A 067A </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">LEAVING THE RESULT IN [D,E].  NEGATIVE ARGUMENTS</span>
<span class="number">067A 067A </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ARE NOT ALLOWED. [H,L] POINTS TO THE TERMINATING</span>
<span class="number">067A 067A </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHARACTER OF THE FORMULA ON RETURN.</span>
<span class="number">067A 067A </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">067A 067A </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">      </span><span class="label">INTIDX:</span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;      </span>
<span class="number">067B 067B </span><span class="colon">: </span><span class="hex">CD 72 09   </span><span class="source">      </span><span class="label">INTID2:</span><span class="mnemonic"> call   </span> FRMNUM            <span class="comment">;{M80} READ FORMULA AND GET RESULT AS INTEGER IN [D,E]</span>
<span class="number">067E 067E </span><span class="colon">: </span><span class="hex">EF         </span><span class="source">      </span><span class="label">INTFR2:</span><span class="mnemonic"> rst    </span> FSIGN             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DON'T ALLOW NEGATIVE NUMBERS</span>
<span class="number">067F 067F </span><span class="colon">: </span><span class="hex">FA 97 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> m,FCERR           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TOO BIG. FUNCTION CALL ERROR</span>
<span class="number">0682 0682 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0682 0682 </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Convert FAC to Integer and Return in [D,E]</span>
<span class="number">0682 0682 </span><span class="colon">= </span><span class="hex">3A E7 38   </span><span class="source">[M80] </span><span class="label">FRCINT:</span><span class="mnemonic"> ld     </span> a,(FAC)           <span class="comment">;      </span>
<span class="number">0685 0685 </span><span class="colon">: </span><span class="hex">FE 90      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 144               <span class="comment">;</span><span class="source">[M65] </span><span class="comment">FAC .GT. 32767?</span>
<span class="number">0687 0687 </span><span class="colon">: </span><span class="hex">DA 86 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> c,QINT            <span class="comment">;</span><span class="source">[M65] </span><span class="comment">GO TO QINT AND SHOVE IT</span>
<span class="number">068A 068A </span><span class="colon">: </span><span class="hex">01 80 90   </span><span class="source">{~~~} </span><span class="label">FRCIN1:</span><span class="mnemonic"> ld     </span> bc,$9080          <span class="comment">;      </span>
<span class="number">068D 068D </span><span class="colon">: </span><span class="hex">11 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,$0000          <span class="comment">;</span><span class="source">[M65] </span><span class="comment">-32768</span>
<span class="number">0690 0690 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;      </span>
<span class="number">0691 0691 </span><span class="colon">: </span><span class="hex">CD 5B 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FCOMP             <span class="comment">;</span><span class="source">[M65] </span><span class="comment">SEE IF FAC=[B,C,D,E]</span>
<span class="number">0694 0694 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;      </span>
<span class="number">0695 0695 </span><span class="colon">: </span><span class="hex">51         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,c               <span class="comment">;      </span>
<span class="number">0696 0696 </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;</span><span class="source">[M65] </span><span class="comment">NO, FAC IS TOO BIG.</span>
<span class="number">0697 0697 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0697 0697 </span><span class="colon">= </span><span class="hex">1E 08      </span><span class="source">[M80] </span><span class="label">FCERR: </span><span class="mnemonic"> ld     </span> e,ERRFC           <span class="comment">;</span><span class="source">[M65] </span><span class="comment">"FUNCTION CALL" ERROR</span>
<span class="number">0699 0699 </span><span class="colon">: </span><span class="hex">C3 DB 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> ERROR             <span class="comment">;      </span>
<span class="number">069C 069C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">069C 069C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> LINGET READS A LINE # FROM THE CURRENT TEXT POSITION</span>
<span class="number">069C 069C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">069C 069C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> LINE NUMBERS RANGE FROM 0 TO 65529</span>
<span class="number">069C 069C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">069C 069C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> THE ANSWER IS RETURNED IN [D,E]. </span>
<span class="number">069C 069C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> [H,L] IS UPDATED TO POINT TO THE TERMINATING CHARACTER</span>
<span class="number">069C 069C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> AND [A] CONTAINS THE TERMINATING CHARACTER WITH CONDITION</span>
<span class="number">069C 069C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> CODES SET UP TO REFLECT ITS VALUE.</span>
<span class="number">069C 069C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;                                        </span>
<span class="number">069C 069C </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Back Up and Read Line Number           </span>
<span class="number">069C 069C </span><span class="colon">= </span><span class="hex">2B         </span><span class="source">[M80] </span><span class="label">SCNLIN:</span><span class="mnemonic"> dec    </span> hl                       
<span class="number">069D 069D </span><span class="colon">: </span><span class="hex">11 00 00   </span><span class="source">[M80] </span><span class="label">LINGET:</span><span class="mnemonic"> ld     </span> de,0              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ASSUME START LIST AT ZERO</span>
<span class="number">06A0 06A0 </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">(M80) </span><span class="label">MORLIN:</span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;;Get next character</span>
<span class="number">06A1 06A1 </span><span class="colon">: </span><span class="hex">D0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WAS IT A DIGIT</span>
<span class="number">06A2 06A2 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;      </span>
<span class="number">06A3 06A3 </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;      </span>
<span class="number">06A4 06A4 </span><span class="colon">: </span><span class="hex">21 98 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,0+6552         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF THE LINE # IS TOO BIG</span>
<span class="number">06A7 06A7 </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;      </span>
<span class="number">06A8 06A8 </span><span class="colon">: </span><span class="hex">38 11      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,POPHSR          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">YES, DON'T SCAN ANY MORE DIGITS AND GIVE SYNTAX ERROR</span>
<span class="number">06AA 06AA </span><span class="colon">: </span><span class="hex">62         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,d               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE [D,E]</span>
<span class="number">06AB 06AB </span><span class="colon">: </span><span class="hex">6B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,e               <span class="comment">;      </span>
<span class="number">06AC 06AC </span><span class="colon">: </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de             <span class="comment">;      </span>
<span class="number">06AD 06AD </span><span class="colon">: </span><span class="hex">29         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,hl             <span class="comment">;      </span>
<span class="number">06AE 06AE </span><span class="colon">: </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de             <span class="comment">;      </span>
<span class="number">06AF 06AF </span><span class="colon">: </span><span class="hex">29         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUTTING [D,E]*10 INTO [H,L]</span>
<span class="number">06B0 06B0 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;      </span>
<span class="number">06B1 06B1 </span><span class="colon">: </span><span class="hex">D6 30      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> '0'               <span class="comment">;      </span>
<span class="number">06B3 06B3 </span><span class="colon">: </span><span class="hex">5F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,a               <span class="comment">;      </span>
<span class="number">06B4 06B4 </span><span class="colon">: </span><span class="hex">16 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,0               <span class="comment">;      </span>
<span class="number">06B6 06B6 </span><span class="colon">: </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ADD THE NEW DIGIT</span>
<span class="number">06B7 06B7 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;      </span>
<span class="number">06B8 06B8 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET BACK TEXT POINTER</span>
<span class="number">06B9 06B9 </span><span class="colon">: </span><span class="hex">18 E5      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> MORLIN            <span class="comment">;      </span>
<span class="number">06BB 06BB </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">(M80) </span><span class="label">POPHSR:</span><span class="mnemonic"> pop    </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET OFF TERMINATING DIGIT</span>
<span class="number">06BC 06BC </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET BACK OLD TEXT POINTER</span>
<span class="number">06BD 06BD </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">06BE 06BE </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">06BE 06BE </span><span class="colon">: </span><span class="hex">F7         </span><span class="source">[M80] </span><span class="label">RUN:   </span><span class="mnemonic"> rst    </span> HOOKDO            <span class="comment">;Call Hook Routine</span>
<span class="number">06BF 06BF </span><span class="colon">: </span><span class="hex">18         </span><span class="source">{~~~} </span><span class="label">HOOK24:</span><span class="mnemonic"> byte   </span> 24                <span class="comment">;      </span>
<span class="number">06C0 06C0 </span><span class="colon">: </span><span class="hex">CA CB 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,RUNC            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NO LINE # ARGUMENT</span>
<span class="number">06C3 06C3 </span><span class="colon">: </span><span class="hex">CD CF 0B   </span><span class="source">{M80} </span><span class="label">CONRUN:</span><span class="mnemonic"> call   </span> CLEARC            <span class="comment">;RESET THE STACK,DATPTR,VARIABLES ...</span>
<span class="number">06C6 06C6 </span><span class="colon">: </span><span class="hex">01 2C 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> bc,NEWSTT         <span class="comment">;      </span>
<span class="number">06C9 06C9 </span><span class="colon">: </span><span class="hex">18 10      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> RUNC2             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT "NEWSTT" ON AND FALL INTO "GOTO"</span>
<span class="number">06CB 06CB </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">06CB 06CB </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">GOSUB STATEMENT                   </span>
<span class="number">06CB 06CB </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">A "GOSUB" ENTRY ON THE STACK HAS THE FOLLOWING FORMAT</span>
<span class="number">06CB 06CB </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">06CB 06CB </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">LOW ADDRESS                       </span>
<span class="number">06CB 06CB </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">06CB 06CB </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> A TOKEN EQUAL TO $GOSUB 1 BYTE   </span>
<span class="number">06CB 06CB </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> THE LINE # OF THE THE "GOSUB" STATEMENT 2 BYTES</span>
<span class="number">06CB 06CB </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> A POINTER INTO THE TEXT OF THE "GOSUB" 2 BYTES</span>
<span class="number">06CB 06CB </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">06CB 06CB </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">HIGH ADDRESS                      </span>
<span class="number">06CB 06CB </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">06CB 06CB </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">TOTAL 5 BYTES                     </span>
<span class="number">06CB 06CB </span><span class="colon">: </span><span class="hex">0E 03      </span><span class="source">[M80] </span><span class="label">GOSUB: </span><span class="mnemonic"> ld     </span> c,3               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"GOSUB" ENTRIES ARE 5 BYTES LONG</span>
<span class="number">06CD 06CD </span><span class="colon">: </span><span class="hex">CD A0 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GETSTK            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE SURE THERE IS ROOM</span>
<span class="number">06D0 06D0 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POP OFF RETURN ADDRESS OF "NEWSTT"</span>
<span class="number">06D1 06D1 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">REALLY PUSH THE TEXT POINTER</span>
<span class="number">06D2 06D2 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE TEXT POINTER</span>
<span class="number">06D3 06D3 </span><span class="colon">: </span><span class="hex">2A 4D 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(CURLIN)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE CURRENT LINE #</span>
<span class="number">06D6 06D6 </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT CURLIN ON THE STACK AND [H,L]=TEXT PTR</span>
<span class="number">06D7 06D7 </span><span class="colon">: </span><span class="hex">3E 8C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,GOSUTK          <span class="comment">;      </span>
<span class="number">06D9 06D9 </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT GOSUB TOKEN ON THE STACK</span>
<span class="number">06DA 06DA </span><span class="colon">: </span><span class="hex">33         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> sp                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE GOSUB TOKEN TAKES ONLY ONE BYTE</span>
<span class="number">06DB 06DB </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">06DB 06DB </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">[M80] </span><span class="label">RUNC2: </span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RESTORE RETURN ADDRESS OF "NEWSTT"</span>
<span class="number">06DC 06DC </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">06DC 06DC </span><span class="colon">: </span><span class="hex">CD 9C 06   </span><span class="source">[M80] </span><span class="label">GOTO:  </span><span class="mnemonic"> call   </span> SCNLIN            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PICK UP THE LINE # AND PUT IT IN [D,E]</span>
<span class="number">06DF 06DF </span><span class="colon">: </span><span class="hex">CD 1E 07   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> REM               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SKIP TO THE END OF THIS LINE</span>
<span class="number">06E2 06E2 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINT AT THE LINK BEYOND IT</span>
<span class="number">06E3 06E3 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE POINTER</span>
<span class="number">06E4 06E4 </span><span class="colon">: </span><span class="hex">2A 4D 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(CURLIN)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE CURRENT LINE #</span>
<span class="number">06E7 06E7 </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;;Is target line less than current line</span>
<span class="number">06E8 06E8 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[H,L]=CURRENT POINTER</span>
<span class="number">06E9 06E9 </span><span class="colon">: </span><span class="hex">DC A2 04   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> c,LOOP            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEARCH FROM THIS POINT</span>
<span class="number">06EC 06EC </span><span class="colon">: </span><span class="hex">D4 9F 04   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> nc,FNDLIN         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEARCH FROM THE BEGINNING -- ACTUALLY</span>
<span class="number">06EF 06EF </span><span class="colon">: </span><span class="hex">60         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[H,L]= POINTER TO THE START OF THE MATCHED LINE</span>
<span class="number">06F0 06F0 </span><span class="colon">: </span><span class="hex">69         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,c               <span class="comment">;      </span>
<span class="number">06F1 06F1 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;      </span>
<span class="number">06F2 06F2 </span><span class="colon">: </span><span class="hex">D8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> c                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GO TO NEWSTT</span>
<span class="number">06F3 06F3 </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">;{M80} GIVE A "US" ERROR                 </span>
<span class="number">06F3 06F3 </span><span class="colon">= </span><span class="hex">1E 0E      </span><span class="source">[M80] </span><span class="label">USERR: </span><span class="mnemonic"> ld     </span> e,ERRUS           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">C=MATCH, SO IF NO MATCH WE</span>
<span class="number">06F5 06F5 </span><span class="colon">: </span><span class="hex">C3 DB 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> ERROR             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GIVE A "US" ERROR</span>
<span class="number">06F8 06F8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">06F8 06F8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">RETURN STATEMENT                  </span>
<span class="number">06F8 06F8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE "GOSUB" FOR THE FORMAT OF THE STACK ENTRY</span>
<span class="number">06F8 06F8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">"RETURN" RESTORES THE LINE NUMBER AND TEXT POINTER ON THE STACK</span>
<span class="number">06F8 06F8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">AFTER ELIMINATING ALL THE "FOR" ENTRIES IN FRONT OF THE "GOSUB"</span>
<span class="number">06F8 06F8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ENTRY                             </span>
<span class="number">06F8 06F8 </span><span class="colon">: </span><span class="hex">C0         </span><span class="source">[M80] </span><span class="label">RETURN:</span><span class="mnemonic"> ret    </span> nz                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">BLOW HIM UP IF THERE ISN'T A TERMINATOR</span>
<span class="number">06F9 06F9 </span><span class="colon">: </span><span class="hex">16 FF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,255             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE SURE VARIABLE POINTER IN [D,E] NEVER GETS MATCHED</span>
<span class="number">06FB 06FB </span><span class="colon">: </span><span class="hex">CD 9F 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FNDFOR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GO PAST ALL THE "FOR" ENTRIES</span>
<span class="number">06FE 06FE </span><span class="colon">: </span><span class="hex">F9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> sp,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">UPDATE THE STACK</span>
<span class="number">06FF 06FF </span><span class="colon">: </span><span class="hex">FE 8C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> GOSUTK            <span class="comment">;      </span>
<span class="number">0701 0701 </span><span class="colon">: </span><span class="hex">1E 04      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,ERRRG           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ERROR ERRRG IS "RETURN WITHOUT GOSUB"</span>
<span class="number">0703 0703 </span><span class="colon">: </span><span class="hex">C2 DB 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,ERROR          <span class="comment">;      </span>
<span class="number">0706 0706 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;GET LINE # "GOSUB" WAS FROM</span>
<span class="number">0707 0707 </span><span class="colon">: </span><span class="hex">22 4D 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CURLIN),hl       <span class="comment">;PUT IT INTO CURLIN</span>
<span class="number">070A 070A </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">070B 070B </span><span class="colon">: </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,h               <span class="comment">;      </span>
<span class="number">070C 070C </span><span class="colon">: </span><span class="hex">B5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> l                 <span class="comment">;;Is line number $FFFF</span>
<span class="number">070D 070D </span><span class="colon">: </span><span class="hex">20 07      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,RETU1          <span class="comment">;;No, carry on</span>
<span class="number">070F 070F </span><span class="colon">: </span><span class="hex">3A CC 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(USFLG)         <span class="comment">;      </span>
<span class="number">0712 0712 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;;Is flag set?</span>
<span class="number">0713 0713 </span><span class="colon">: </span><span class="hex">C2 01 04   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,STPRDY         <span class="comment">;;Yes, abort to direct mode</span>
<span class="number">0716 0716 </span><span class="colon">: </span><span class="hex">21 2C 06   </span><span class="source">(M65) </span><span class="label">RETU1: </span><span class="mnemonic"> ld     </span> hl,NEWSTT         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT RETURN ADDRESS OF "NEWSTT" BACK ON STACK</span>
<span class="number">0719 0719 </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET TEXT POINTER FROM "GOSUB"</span>
<span class="number">071A 071A </span><span class="colon">: </span><span class="hex">3E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $3E               <span class="comment">;{M80} "LD A," AROUND POP HL</span>
<span class="number">071B 071B </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">[M80] </span><span class="label">DATAH: </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET TEXT POINTER OFF STACK</span>
<span class="number">071C 071C </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;The DATA Statement                     </span>
<span class="number">071C 071C </span><span class="colon">= </span><span class="hex">01         </span><span class="source">[M80] </span><span class="label">DATA:  </span><span class="mnemonic"> byte   </span> $01               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"LD BC," TO PICK UP ":" INTO C AND SKIP</span>
<span class="number">071D 071D </span><span class="colon">: </span><span class="hex">3A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> ':'               <span class="comment">;{M80} ":" ONLY APPLIES IF QUOTES HAVE MATCHED UP</span>
<span class="number">071E 071E </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;The REM Statement                      </span>
<span class="number">071E 071E </span><span class="colon">: </span><span class="hex">0E         </span><span class="source">[M80] </span><span class="label">REM:   </span><span class="mnemonic"> byte   </span> $0E               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"LD C,"   THE ONLY TERMINATOR IS ZERO</span>
<span class="number">071F 071F </span><span class="colon">: </span><span class="hex">00         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 0                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NO-OPERATION "DATA" ACTUALLY EXECUTES THIS 0</span>
<span class="number">0720 0720 </span><span class="colon">: </span><span class="hex">06 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,0               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">INSIDE QUOTES THE ONLY TERMINATOR IS ZERO</span>
<span class="number">0722 0722 </span><span class="colon">: </span><span class="hex">79         </span><span class="source">(M80) </span><span class="label">EXCHQT:</span><span class="mnemonic"> ld     </span> a,c               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WHEN A QUOTE IS SEEN THE SECOND</span>
<span class="number">0723 0723 </span><span class="colon">: </span><span class="hex">48         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TERMINATOR IS TRADED, SO IN "DATA"</span>
<span class="number">0724 0724 </span><span class="colon">: </span><span class="hex">47         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">COLONS INSIDE QUOTATIONS WILL HAVE NO EFFECT</span>
<span class="number">0725 0725 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">(M80) </span><span class="label">REMER: </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET A CHAR</span>
<span class="number">0726 0726 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ZERO IS ALWAYS A TERMINATOR</span>
<span class="number">0727 0727 </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;      </span>
<span class="number">0728 0728 </span><span class="colon">: </span><span class="hex">B8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> b                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TEST FOR THE OTHER TERMINATOR</span>
<span class="number">0729 0729 </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;      </span>
<span class="number">072A 072A </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">072B 072B </span><span class="colon">: </span><span class="hex">FE 22      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> '"'               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS IT A QUOTE?</span>
<span class="number">072D 072D </span><span class="colon">: </span><span class="hex">28 F3      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,EXCHQT          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF SO TIME TO TRADE</span>
<span class="number">072F 072F </span><span class="colon">: </span><span class="hex">18 F4      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> REMER             <span class="comment">;      </span>
<span class="number">0731 0731 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0731 0731 </span><span class="colon">: </span><span class="hex">CD D1 10   </span><span class="source">[M80] </span><span class="label">LET:   </span><span class="mnemonic"> call   </span> PTRGET            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET POINTER TO VARIABLE INTO [D,E]</span>
<span class="number">0734 0734 </span><span class="colon">: </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK            <span class="comment">;</span><span class="source">[M80] </span><span class="comment"></span>
<span class="number">0735 0735 </span><span class="colon">: </span><span class="hex">B0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> EQUATK            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHECK FOR "="</span>
<span class="number">0736 0736 </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE VARIABLE POINTER</span>
<span class="number">0737 0737 </span><span class="colon">: </span><span class="hex">3A AB 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(VALTYP)        <span class="comment">;{M80} REMEMBER THE VARIABLE TYPE</span>
<span class="number">073A 073A </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;      </span>
<span class="number">073B 073B </span><span class="colon">: </span><span class="hex">CD 85 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FRMEVL            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE VALUE OF THE FORMULA</span>
<span class="number">073E 073E </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE VALTYP OF THE VARIABLE INTO [A] INTO FAC</span>
<span class="number">073F 073F </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[H,L]=POINTER TO VARIABLE, TEXT POINTER ON TOP OF STACK</span>
<span class="number">0740 0740 </span><span class="colon">: </span><span class="hex">22 CE 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (SAVTXT),hl       <span class="comment">;</span><span class="source">[???] </span><span class="comment">PLACE TO SAVE THE VALUE</span>
<span class="number">0743 0743 </span><span class="colon">: </span><span class="hex">1F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rra    </span>                   <span class="comment">;      </span>
<span class="number">0744 0744 </span><span class="colon">: </span><span class="hex">CD 77 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CHKVAL            <span class="comment">;</span><span class="source">[M65] </span><span class="comment">MAKE SURE "VALTYP" MATCHES CARRY AND SET ZERO FLAG FOR NUMERIC</span>
<span class="number">0747 0747 </span><span class="colon">: </span><span class="hex">CA 79 07   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,COPNUM          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NUMERIC, SO FORCE IT AND COPY</span>
<span class="number">074A 074A </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">074A 074A </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">[M80] </span><span class="label">INPCOM:</span><span class="mnemonic"> push   </span> hl                <span class="comment">;      </span>
<span class="number">074B 074B </span><span class="colon">: </span><span class="hex">2A E4 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(FACLO)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET POINTER TO THE DESCRIPTOR OF THE RESULT</span>
<span class="number">074E 074E </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE POINTER AT THE DESCRIPTOR</span>
<span class="number">074F 074F </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">0750 0750 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">0751 0751 </span><span class="colon">: </span><span class="hex">5E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,(hl)            <span class="comment">;      </span>
<span class="number">0752 0752 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">0753 0753 </span><span class="colon">: </span><span class="hex">56         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,(hl)            <span class="comment">;      </span>
<span class="number">0754 0754 </span><span class="colon">: </span><span class="hex">2A 4F 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(TXTTAB)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF THE DATA IS IN BUF, COPY</span>
<span class="number">0757 0757 </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SINCE BUF CHANGES ALL THE TIME</span>
<span class="number">0758 0758 </span><span class="colon">: </span><span class="hex">30 0E      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,INBUFC         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GO COPY, IF DATA REALLY IS IN BUF</span>
<span class="number">075A 075A </span><span class="colon">: </span><span class="hex">2A DA 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(STREND)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF IT POINTS INTO STRING SPACE</span>
<span class="number">075D 075D </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF NOT DON'T COPY</span>
<span class="number">075E 075E </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET BACK THE POINTER AT THE DESCRIPTOR</span>
<span class="number">075F 075F </span><span class="colon">: </span><span class="hex">30 0F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,DNTCPY         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DON'T COPY LITERALS</span>
<span class="number">0761 0761 </span><span class="colon">: </span><span class="hex">21 BD 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,DSCTMP         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NOW, SEE IF ITS A VARIABLE BY SEEING IF THE DESCRIPTOR</span>
<span class="number">0764 0764 </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS IN THE TEMPORARY STORAGE AREA (BELOW DSCTMP)</span>
<span class="number">0765 0765 </span><span class="colon">: </span><span class="hex">30 09      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,DNTCPY         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DON'T COPY IF ITS NOT A VARIABLE</span>
<span class="number">0767 0767 </span><span class="colon">: </span><span class="hex">3E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $3E               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SKIP THE NEXT BYTE WITH A "MVI A,"</span>
<span class="number">0768 0768 </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">[M80] </span><span class="label">INBUFC:</span><span class="mnemonic"> pop    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE POINTER TO THE DESCRIPTOR IN [D,E]</span>
<span class="number">0769 0769 </span><span class="colon">: </span><span class="hex">CD E4 0F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FRETMS            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FREE UP A TEMORARY POINTING INTO BUF</span>
<span class="number">076C 076C </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">STRCPY COPIES [H,L]</span>
<span class="number">076D 076D </span><span class="colon">: </span><span class="hex">CD 39 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> STRCPY            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">COPY VARIABLES IN STRING SPACE OR STRINGS WITH DATA IN BUF</span>
<span class="number">0770 0770 </span><span class="colon">: </span><span class="hex">CD E4 0F   </span><span class="source">(M80) </span><span class="label">DNTCPY:</span><span class="mnemonic"> call   </span> FRETMS            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FREE UP TEMPORARY WITHOUT FREEING UP ANY STRING SPACE</span>
<span class="number">0773 0773 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment"></span>
<span class="number">0774 0774 </span><span class="colon">: </span><span class="hex">CD 3D 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVE              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">COPY A DESCRIPTOR OR A VALUE</span>
<span class="number">0777 0777 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE TEXT POINTER BACK</span>
<span class="number">0778 0778 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">0779 0779 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0779 0779 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">[M80] </span><span class="label">COPNUM:</span><span class="mnemonic"> push   </span> hl                       
<span class="number">077A 077A </span><span class="colon">: </span><span class="hex">CD 3A 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVMF             <span class="comment">;COPY A DESCRIPTOR OR A VALUE</span>
<span class="number">077D 077D </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;FOR "FOR" POP OFF POINTER AT LOOP VARIABLE INTO [D,E]</span>
<span class="number">077E 077E </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;GET THE TEXT POINTER BACK</span>
<span class="number">077F 077F </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">0780 0780 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0780 0780 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;{M80} ON..GOTO, ON GOSUB CODE           </span>
<span class="number">0780 0780 </span><span class="colon">: </span><span class="hex">F7         </span><span class="source">[M80] </span><span class="label">ONGOTO:</span><span class="mnemonic"> rst    </span> HOOKDO            <span class="comment">;      </span>
<span class="number">0781 0781 </span><span class="colon">: </span><span class="hex">19         </span><span class="source">{~~~} </span><span class="label">HOOK25:</span><span class="mnemonic"> byte   </span> 25                <span class="comment">;      </span>
<span class="number">0782 0782 </span><span class="colon">: </span><span class="hex">CD 54 0B   </span><span class="source">{M80} </span><span class="label">NTOERR:</span><span class="mnemonic"> call   </span> GETBYT            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET VALUE INTO [E]</span>
<span class="number">0785 0785 </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Execute ON..GOTO                       </span>
<span class="number">0785 0785 </span><span class="colon">= </span><span class="hex">7E         </span><span class="source">      </span><span class="label">OMGOTO </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE TERMINATOR BACK</span>
<span class="number">0786 0786 </span><span class="colon">: </span><span class="hex">47         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THIS CHARACTER FOR LATER</span>
<span class="number">0787 0787 </span><span class="colon">: </span><span class="hex">FE 8C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> GOSUTK            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">AN "ON ... GOSUB" PERHAPS?</span>
<span class="number">0789 0789 </span><span class="colon">: </span><span class="hex">28 03      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,ISGOSU          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">YES, SOME FEATURE USE</span>
<span class="number">078B 078B </span><span class="colon">: </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK            <span class="comment">;      </span>
<span class="number">078C 078C </span><span class="colon">: </span><span class="hex">88         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> GOTOTK            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">OTHERWISE MUST BE "GOTO"</span>
<span class="number">078D 078D </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">BACK UP CHARACTER POINTER</span>
<span class="number">078E 078E </span><span class="colon">: </span><span class="hex">4B         </span><span class="source">(M80) </span><span class="label">ISGOSU:</span><span class="mnemonic"> ld     </span> c,e               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET COUNT INTO [C]</span>
<span class="number">078F 078F </span><span class="colon">: </span><span class="hex">0D         </span><span class="source">(M80) </span><span class="label">LOOPON:</span><span class="mnemonic"> dec    </span> c                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF ENOUGH SKIPS</span>
<span class="number">0790 0790 </span><span class="colon">: </span><span class="hex">78         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT DISPATCH CHARACTER IN PLACE</span>
<span class="number">0791 0791 </span><span class="colon">: </span><span class="hex">CA 51 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,GONE2           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF DONE, GO OFF</span>
<span class="number">0794 0794 </span><span class="colon">: </span><span class="hex">CD 9D 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> LINGET            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SKIP OVER A LINE #</span>
<span class="number">0797 0797 </span><span class="colon">: </span><span class="hex">FE 2C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> ','               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS IT A COMMA?</span>
<span class="number">0799 0799 </span><span class="colon">: </span><span class="hex">C0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nz                <span class="comment">;{M80} NO COMMA MUST BE THE END OF THE LINE</span>
<span class="number">079A 079A </span><span class="colon">: </span><span class="hex">18 F3      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> LOOPON            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CONTINUE GOBBLING LINE #S</span>
<span class="number">079C 079C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">079C 079C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF ... THEN CODE                  </span>
<span class="number">079C 079C </span><span class="colon">: </span><span class="hex">CD 85 09   </span><span class="source">[M80] </span><span class="label">IFS:   </span><span class="mnemonic"> call   </span> FRMEVL            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">EVALUATE A FORMULA</span>
<span class="number">079F 079F </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET TERMINATING CHARACTER OF FORMULA</span>
<span class="number">07A0 07A0 </span><span class="colon">: </span><span class="hex">FE 88      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> GOTOTK            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALLOW "GOTO" AS WELL</span>
<span class="number">07A2 07A2 </span><span class="colon">: </span><span class="hex">28 03      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,OKGOTO          <span class="comment">;      </span>
<span class="number">07A4 07A4 </span><span class="colon">: </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK            <span class="comment">;      </span>
<span class="number">07A5 07A5 </span><span class="colon">: </span><span class="hex">A5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> THENTK            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MUST HAVE A THEN</span>
<span class="number">07A6 07A6 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;      </span>
<span class="number">07A7 07A7 </span><span class="colon">: </span><span class="hex">CD 75 09   </span><span class="source">[M80] </span><span class="label">OKGOTO:</span><span class="mnemonic"> call   </span> CHKNUM            <span class="comment">;</span><span class="source">[M65] </span><span class="comment">0=FALSE. ALL OTHERS TRUE</span>
<span class="number">07AA 07AA </span><span class="colon">: </span><span class="hex">EF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> FSIGN             <span class="comment">;      </span>
<span class="number">07AB 07AB </span><span class="colon">: </span><span class="hex">CA 1E 07   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,REM             <span class="comment">;</span><span class="source">[M65] </span><span class="comment">SKIP REST OF STATEMENT</span>
<span class="number">07AE 07AE </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">{M80} </span><span class="label">DOCOND:</span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PICK UP THE FIRST LINE # CHARACTER</span>
<span class="number">07AF 07AF </span><span class="colon">: </span><span class="hex">DA DC 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> c,GOTO            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DO A "GOTO"</span>
<span class="number">07B2 07B2 </span><span class="colon">: </span><span class="hex">C3 50 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> GONE3             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">EXECUTE STATEMENT, NOT GOTO</span>
<span class="number">07B5 07B5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">07B5 07B5 </span><span class="colon">: </span><span class="hex">3E 01      </span><span class="source">[M80] </span><span class="label">LPRINT:</span><span class="mnemonic"> ld     </span> a,1               <span class="comment">;SAY NON ZERO</span>
<span class="number">07B7 07B7 </span><span class="colon">: </span><span class="hex">32 47 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (PRTFLG),a        <span class="comment">;SAVE AWAY</span>
<span class="number">07BA 07BA </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">[M80] </span><span class="label">NEWCHR:</span><span class="mnemonic"> dec    </span> hl                <span class="comment">;      </span>
<span class="number">07BB 07BB </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET ANOTHER CHARACTER</span>
<span class="number">07BC 07BC </span><span class="colon">: </span><span class="hex">F7         </span><span class="source">[M80] </span><span class="label">PRINT: </span><span class="mnemonic"> rst    </span> HOOKDO            <span class="comment">;      </span>
<span class="number">07BD 07BD </span><span class="colon">: </span><span class="hex">06         </span><span class="source">{~~~} </span><span class="label">HOOK6: </span><span class="mnemonic"> byte   </span> 6                 <span class="comment">;      </span>
<span class="number">07BE 07BE </span><span class="colon">: </span><span class="hex">CC EA 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> z,CRDO            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PRINT CRLF IF END WITHOUT PUNCTUATION</span>
<span class="number">07C1 07C1 </span><span class="colon">: </span><span class="hex">CA 66 08   </span><span class="source">(M80) </span><span class="label">PRINTC:</span><span class="mnemonic"> jp     </span> z,FINPRT          <span class="comment">;{M80} FINISH BY RESETTING FLAGS, TERMINATOR SHOULD NOY CRLF</span>
<span class="number">07C4 07C4 </span><span class="colon">: </span><span class="hex">FE A0      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> TABTK             <span class="comment">;      </span>
<span class="number">07C6 07C6 </span><span class="colon">: </span><span class="hex">CA 3A 08   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,TABER           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE TAB FUNCTION?</span>
<span class="number">07C9 07C9 </span><span class="colon">: </span><span class="hex">FE A3      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> SPCTK             <span class="comment">;      </span>
<span class="number">07CB 07CB </span><span class="colon">: </span><span class="hex">CA 3A 08   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,TABER           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE SPC FUNCTION?</span>
<span class="number">07CE 07CE </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;{M80} SAVE THE TEXT POINTER</span>
<span class="number">07CF 07CF </span><span class="colon">: </span><span class="hex">FE 2C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> ','               <span class="comment">;      </span>
<span class="number">07D1 07D1 </span><span class="colon">: </span><span class="hex">28 44      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,COMPRT          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS IT A COMMA?</span>
<span class="number">07D3 07D3 </span><span class="colon">: </span><span class="hex">FE 3B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> $3B               <span class="comment">;{M80} IS IT A ";"</span>
<span class="number">07D5 07D5 </span><span class="colon">: </span><span class="hex">CA 61 08   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,NOTABR          <span class="comment">;      </span>
<span class="number">07D8 07D8 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET RID OF OLD TEXT POINTER</span>
<span class="number">07D9 07D9 </span><span class="colon">: </span><span class="hex">CD 85 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FRMEVL            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">EVALUATE THE FORMULA</span>
<span class="number">07DC 07DC </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE TEXT POINTER</span>
<span class="number">07DD 07DD </span><span class="colon">: </span><span class="hex">3A AB 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(VALTYP)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF WE HAVE A STRING</span>
<span class="number">07E0 07E0 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;      </span>
<span class="number">07E1 07E1 </span><span class="colon">: </span><span class="hex">C2 11 08   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,STRDON         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF SO, PRINT SPECIALY</span>
<span class="number">07E4 07E4 </span><span class="colon">: </span><span class="hex">CD 80 16   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FOUT              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE A NUMBER INTO A STRING</span>
<span class="number">07E7 07E7 </span><span class="colon">: </span><span class="hex">CD 5F 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> STRLIT            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE IT  A STRING</span>
<span class="number">07EA 07EA </span><span class="colon">: </span><span class="hex">36 20      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),' '          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT A SPACE AT THE END</span>
<span class="number">07EC 07EC </span><span class="colon">: </span><span class="hex">2A E4 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(FACLO)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SIZE BYTE IS FIRST IN DESCRIPTOR</span>
<span class="number">07EF 07EF </span><span class="colon">: </span><span class="hex">3A 47 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(PRTFLG)        <span class="comment">;      </span>
<span class="number">07F2 07F2 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;      </span>
<span class="number">07F3 07F3 </span><span class="colon">: </span><span class="hex">28 08      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,ISTTY           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">LPT OR TTY?</span>
<span class="number">07F5 07F5 </span><span class="colon">: </span><span class="hex">3A 46 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(LPTPOS)        <span class="comment">;      </span>
<span class="number">07F8 07F8 </span><span class="colon">: </span><span class="hex">86         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,(hl)            <span class="comment">;      </span>
<span class="number">07F9 07F9 </span><span class="colon">: </span><span class="hex">FE 84      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> LPTSIZ            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHECK FOR OVERLAP</span>
<span class="number">07FB 07FB </span><span class="colon">: </span><span class="hex">18 0D      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> LINCHK            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">START ON A NEW LINE</span>
<span class="number">07FD 07FD </span><span class="colon">: </span><span class="hex">3A 48 38   </span><span class="source">(M80) </span><span class="label">ISTTY: </span><span class="mnemonic"> ld     </span> a,(LINLEN)        <span class="comment">;      </span>
<span class="number">0800 0800 </span><span class="colon">: </span><span class="hex">47         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,a               <span class="comment">;      </span>
<span class="number">0801 0801 </span><span class="colon">: </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NO OVERFLOW LINE WIDTH?</span>
<span class="number">0802 0802 </span><span class="colon">: </span><span class="hex">28 09      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,LINCH2          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">YES</span>
<span class="number">0804 0804 </span><span class="colon">: </span><span class="hex">3A 00 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(TTYPOS)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE WHERE WE ARE</span>
<span class="number">0807 0807 </span><span class="colon">: </span><span class="hex">86         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,(hl)            <span class="comment">;      </span>
<span class="number">0808 0808 </span><span class="colon">: </span><span class="hex">3D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ACTUALLY EQUAL TO LINE LENGTH IS OK</span>
<span class="number">0809 0809 </span><span class="colon">: </span><span class="hex">B8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> b                 <span class="comment">;      </span>
<span class="number">080A 080A </span><span class="colon">: </span><span class="hex">D4 EA 19   </span><span class="source">(M80) </span><span class="label">LINCHK:</span><span class="mnemonic"> call   </span> nc,CRDO           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF SO CRLF</span>
<span class="number">080D 080D </span><span class="colon">: </span><span class="hex">CD A0 0E   </span><span class="source">(M80) </span><span class="label">LINCH2:</span><span class="mnemonic"> call   </span> STRPRT            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PRINT THE NUMBER</span>
<span class="number">0810 0810 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;      </span>
<span class="number">0811 0811 </span><span class="colon">: </span><span class="hex">C4 A0 0E   </span><span class="source">(M80) </span><span class="label">STRDON:</span><span class="mnemonic"> call   </span> nz,STRPRT         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PRINT THE NUMBER</span>
<span class="number">0814 0814 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;      </span>
<span class="number">0815 0815 </span><span class="colon">: </span><span class="hex">18 A3      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> NEWCHR            <span class="comment">;</span><span class="source">[M80[ </span><span class="comment">PRINT SOME MORE</span>
<span class="number">0817 0817 </span><span class="colon">: </span><span class="hex">3A 47 38   </span><span class="source">(M80) </span><span class="label">COMPRT:</span><span class="mnemonic"> ld     </span> a,(PRTFLG)        <span class="comment">;</span><span class="source">[M80[ </span><span class="comment">OUTPUT TO THE LINE PRINTER?</span>
<span class="number">081A 081A </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80[ </span><span class="comment">NON-ZERO MEANS YES</span>
<span class="number">081B 081B </span><span class="colon">: </span><span class="hex">28 08      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,ISCTTY          <span class="comment">;</span><span class="source">[M80[ </span><span class="comment">NO, DO TELETYPE COMMA</span>
<span class="number">081D 081D </span><span class="colon">: </span><span class="hex">3A 46 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(LPTPOS)        <span class="comment">;</span><span class="source">[M80[ </span><span class="comment">ARE WE USING INFINITE WIDTH?</span>
<span class="number">0820 0820 </span><span class="colon">: </span><span class="hex">FE 70      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 112               <span class="comment">;</span><span class="source">[M80[ </span><span class="comment">CHECK IF NO MORE COMMA FIELDS</span>
<span class="number">0822 0822 </span><span class="colon">: </span><span class="hex">C3 2D 08   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> CHKCOM            <span class="comment">;</span><span class="source">[M80[ </span><span class="comment">USE TELETYPE CHECK</span>
<span class="number">0825 0825 </span><span class="colon">: </span><span class="hex">3A 49 38   </span><span class="source">(M80) </span><span class="label">ISCTTY:</span><span class="mnemonic"> ld     </span> a,(CLMLST)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POSITION OF LAST COMMA COLUMN</span>
<span class="number">0828 0828 </span><span class="colon">: </span><span class="hex">47         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,a               <span class="comment">;      </span>
<span class="number">0829 0829 </span><span class="colon">: </span><span class="hex">3A 00 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(TTYPOS)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET TELETYPE POSITION</span>
<span class="number">082C 082C </span><span class="colon">: </span><span class="hex">B8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> b                 <span class="comment">;      </span>
<span class="number">082D 082D </span><span class="colon">: </span><span class="hex">D4 EA 19   </span><span class="source">(M80) </span><span class="label">CHKCOM:</span><span class="mnemonic"> call   </span> nc,CRDO           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TYPE CRLF</span>
<span class="number">0830 0830 </span><span class="colon">: </span><span class="hex">D2 61 08   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,NOTABR         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND QUIT IF BEYOND THE LAST COMMA FIELD</span>
<span class="number">0833 0833 </span><span class="colon">: </span><span class="hex">D6 0E      </span><span class="source">(M80) </span><span class="label">MORCOM:</span><span class="mnemonic"> sub    </span> CLMWID            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET [A] MODULUS CLMWID</span>
<span class="number">0835 0835 </span><span class="colon">: </span><span class="hex">30 FC      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,MORCOM         <span class="comment">;      </span>
<span class="number">0837 0837 </span><span class="colon">: </span><span class="hex">2F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cpl    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FILL OUT TO AN EVEN CLMWID: CLMWID-[A] MOD CLMWID SPACES</span>
<span class="number">0838 0838 </span><span class="colon">: </span><span class="hex">18 20      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> ASPA2             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GO PRINT [A]+1 SPACES</span>
<span class="number">083A 083A </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">(M80) </span><span class="label">TABER: </span><span class="mnemonic"> push   </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">REMEMBER IF [A]=SPCTK OR TABTK</span>
<span class="number">083B 083B </span><span class="colon">: </span><span class="hex">CD 53 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GTBYTC            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">EVALUATE THE ARGUMENT</span>
<span class="number">083E 083E </span><span class="colon">: </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK            <span class="comment">;      </span>
<span class="number">083F 083F </span><span class="colon">: </span><span class="hex">29         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> ')'               <span class="comment">;      </span>
<span class="number">0840 0840 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;      </span>
<span class="number">0841 0841 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET BACK SPCTK OR TABTK</span>
<span class="number">0842 0842 </span><span class="colon">: </span><span class="hex">D6 A3      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> SPCTK             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WAS IT SPCTK?</span>
<span class="number">0844 0844 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE TEXT POINTER</span>
<span class="number">0845 0845 </span><span class="colon">: </span><span class="hex">28 0F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,DOSIZT          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">VALUE IN [A]</span>
<span class="number">0847 0847 </span><span class="colon">: </span><span class="hex">3A 47 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(PRTFLG)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">LINE PRINTER OR TTY?</span>
<span class="number">084A 084A </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NON-ZERO MEANS LPT</span>
<span class="number">084B 084B </span><span class="colon">: </span><span class="hex">CA 53 08   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,TTYIST          <span class="comment">;      </span>
<span class="number">084E 084E </span><span class="colon">: </span><span class="hex">3A 46 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(LPTPOS)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET LINE PRINTER POSITION</span>
<span class="number">0851 0851 </span><span class="colon">: </span><span class="hex">18 03      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> DOSIZT            <span class="comment">;      </span>
<span class="number">0853 0853 </span><span class="colon">: </span><span class="hex">3A 00 38   </span><span class="source">(M80) </span><span class="label">TTYIST:</span><span class="mnemonic"> ld     </span> a,(TTYPOS)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET TELETYPE PRINT POSITION</span>
<span class="number">0856 0856 </span><span class="colon">: </span><span class="hex">2F         </span><span class="source">(M80) </span><span class="label">DOSIZT:</span><span class="mnemonic"> cpl    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PRINT [E]-[A] SPACES</span>
<span class="number">0857 0857 </span><span class="colon">: </span><span class="hex">83         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,e               <span class="comment">;      </span>
<span class="number">0858 0858 </span><span class="colon">: </span><span class="hex">30 07      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,NOTABR         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PRINT IF PAST CURRENT</span>
<span class="number">085A 085A </span><span class="colon">: </span><span class="hex">3C         </span><span class="source">(M80) </span><span class="label">ASPA2: </span><span class="mnemonic"> inc    </span> a                 <span class="comment">;      </span>
<span class="number">085B 085B </span><span class="colon">: </span><span class="hex">47         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[B]=NUMBER OF SPACES TO PRINT</span>
<span class="number">085C 085C </span><span class="colon">: </span><span class="hex">3E 20      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,' '             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[A]=SPACE</span>
<span class="number">085E 085E </span><span class="colon">: </span><span class="hex">DF         </span><span class="source">(M80) </span><span class="label">REPOUT:</span><span class="mnemonic"> rst    </span> OUTCHR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PRINT [A]</span>
<span class="number">085F 085F </span><span class="colon">: </span><span class="hex">10 FD      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> djnz   </span> REPOUT            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DECREMENT THE COUNT</span>
<span class="number">0861 0861 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">(M80) </span><span class="label">NOTABR:</span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PICK UP TEXT POINTER</span>
<span class="number">0862 0862 </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND THE NEXT CHARACTER</span>
<span class="number">0863 0863 </span><span class="colon">: </span><span class="hex">C3 C1 07   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> PRINTC            <span class="comment">;{M80} WE JUST PRINTED SPACES, DON'T CALL CRDO IF END OF THE LINE</span>
<span class="number">0866 0866 </span><span class="colon">: </span><span class="hex">F7         </span><span class="source">(M80) </span><span class="label">FINPRT:</span><span class="mnemonic"> rst    </span> HOOKDO            <span class="comment">;      </span>
<span class="number">0867 0867 </span><span class="colon">: </span><span class="hex">07         </span><span class="source">{~~~} </span><span class="label">HOOK7: </span><span class="mnemonic"> byte   </span> 7                 <span class="comment">;      </span>
<span class="number">0868 0868 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;      </span>
<span class="number">0869 0869 </span><span class="colon">: </span><span class="hex">32 47 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (PRTFLG),a        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ZERO OUT PTRFIL</span>
<span class="number">086C 086C </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">086D 086D </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">086D 086D </span><span class="colon">: </span><span class="hex">3F 52 65 64</span><span class="source">      </span><span class="label">TRYAGN:</span><span class="mnemonic"> byte   </span> "?Redo from start",13,10,0
<span class="number">0871 0871 </span><span class="colon">: </span><span class="hex">6F 20 66 72</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0875 0875 </span><span class="colon">: </span><span class="hex">6F 6D 20 73</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0879 0879 </span><span class="colon">: </span><span class="hex">74 61 72 74</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">087D 087D </span><span class="colon">: </span><span class="hex">0D 0A 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0880 0880 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0880 0880 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> HERE WHEN THE DATA THAT WAS TYPED IN OR IN "DATA" STATEMENTS</span>
<span class="number">0880 0880 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> IS IMPROPERLY FORMATTED. FOR "INPUT" WE START AGAIN.</span>
<span class="number">0880 0880 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> FOR "READ" WE GIVE A SYNTAX ERROR AT THE DATA LINE.</span>
<span class="number">0880 0880 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">0880 0880 </span><span class="colon">: </span><span class="hex">F7         </span><span class="source">      </span><span class="label">TRMNOK:</span><span class="mnemonic"> rst    </span> HOOKDO            <span class="comment">;      </span>
<span class="number">0881 0881 </span><span class="colon">: </span><span class="hex">08         </span><span class="source">{~~~} </span><span class="label">HOOK8: </span><span class="mnemonic"> byte   </span> 8                 <span class="comment">;      </span>
<span class="number">0882 0882 </span><span class="colon">: </span><span class="hex">3A CD 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(FLGINP)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WAS IT READ OR INPUT?</span>
<span class="number">0885 0885 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ZERO=INPUT</span>
<span class="number">0886 0886 </span><span class="colon">: </span><span class="hex">C2 BE 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,DATSNE         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GIVE ERROR AT DATA LINE</span>
<span class="number">0889 0889 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET RID OF THE POINTER INTO THE VARIABLE LIST</span>
<span class="number">088A 088A </span><span class="colon">: </span><span class="hex">21 6D 08   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,TRYAGN         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PRINT "?REDO FROM START"</span>
<span class="number">088D 088D </span><span class="colon">: </span><span class="hex">CD 9D 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> STROUT            <span class="comment">;      </span>
<span class="number">0890 0890 </span><span class="colon">: </span><span class="hex">C3 01 0C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> GTMPRT            <span class="comment">;      </span>
<span class="number">0893 0893 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0893 0893 </span><span class="colon">: </span><span class="hex">F7         </span><span class="source">[M80] </span><span class="label">INPUT: </span><span class="mnemonic"> rst    </span> HOOKDO            <span class="comment">;      </span>
<span class="number">0894 0894 </span><span class="colon">: </span><span class="hex">1A         </span><span class="source">{~~~} </span><span class="label">HOOK26:</span><span class="mnemonic"> byte   </span> 26                <span class="comment">;      </span>
<span class="number">0895 0895 </span><span class="colon">: </span><span class="hex">CD 45 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> ERRDIR            <span class="comment">;</span><span class="source">[M65] </span><span class="comment">DIRECT IS NOT OK</span>
<span class="number">0898 0898 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;      </span>
<span class="number">0899 0899 </span><span class="colon">: </span><span class="hex">FE 22      </span><span class="source">{M80} </span><span class="label">QTINP: </span><span class="mnemonic"> cp     </span> '"'               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS IT A QUOTE?</span>
<span class="number">089B 089B </span><span class="colon">: </span><span class="hex">3E 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,0               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">BE TALKATIVE</span>
<span class="number">089D 089D </span><span class="colon">: </span><span class="hex">C2 AA 08   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,NOTQTI         <span class="comment">;</span><span class="source">[M65] </span><span class="comment">NO MESSAGE</span>
<span class="number">08A0 08A0 </span><span class="colon">: </span><span class="hex">CD 60 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> STRLTI            <span class="comment">;</span><span class="source">[M65] </span><span class="comment">LITERALIZE THE STRING IN TEXT</span>
<span class="number">08A3 08A3 </span><span class="colon">: </span><span class="hex">CF         </span><span class="source">{M80} </span><span class="label">NTICMA:</span><span class="mnemonic"> rst    </span> SYNCHK            <span class="comment">;      </span>
<span class="number">08A4 08A4 </span><span class="colon">: </span><span class="hex">3B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> ';'               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MUST END WITH SEMICOLON</span>
<span class="number">08A5 08A5 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">{M80} </span><span class="label">INPCMA:</span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">REMEMBER WHERE IT ENDED</span>
<span class="number">08A6 08A6 </span><span class="colon">: </span><span class="hex">CD A0 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> STRPRT            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PRINT IT OUT</span>
<span class="number">08A9 08A9 </span><span class="colon">: </span><span class="hex">3E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $3E               <span class="comment">;;[LD A,] over next instruction</span>
<span class="number">08AA 08AA </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">(M80) </span><span class="label">NOTQTI:</span><span class="mnemonic"> push   </span> hl                <span class="comment">;{M80} SAVE TEXT POINTER</span>
<span class="number">08AB 08AB </span><span class="colon">: </span><span class="hex">CD 5B 0D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> QINLIN            <span class="comment">;</span><span class="source">[M65] </span><span class="comment">TYPE "?" AND INPUT A LINE OF TEXT.</span>
<span class="number">08AE 08AE </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;{M80} GET BACK THE TEXT POINTER</span>
<span class="number">08AF 08AF </span><span class="colon">: </span><span class="hex">DA 26 0C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> c,STPEND          <span class="comment">;{M80} IF CONTROL-C, STOP</span>
<span class="number">08B2 08B2 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">08B3 08B3 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;      </span>
<span class="number">08B4 08B4 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;      </span>
<span class="number">08B5 08B5 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;      </span>
<span class="number">08B6 08B6 </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;      </span>
<span class="number">08B7 08B7 </span><span class="colon">: </span><span class="hex">CA 1B 07   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,DATAH           <span class="comment">;      </span>
<span class="number">08BA 08BA </span><span class="colon">: </span><span class="hex">36 2C      </span><span class="source">{M80} </span><span class="label">INPCN3:</span><span class="mnemonic"> ld     </span> (hl),','          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SETUP COMMA AT BUFMIN</span>
<span class="number">08BC 08BC </span><span class="colon">: </span><span class="hex">18 05      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> INPCON            <span class="comment">;      </span>
<span class="number">08BE 08BE </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">08BE 08BE </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">READ STATEMENT                    </span>
<span class="number">08BE 08BE </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IN THE PROCESSING OF DATA AND READ STATEMENTS:</span>
<span class="number">08BE 08BE </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ONE POINTER POINTS TO THE DATA (IE THE NUMBERS BEING FETCHED)</span>
<span class="number">08BE 08BE </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND ANOTHER POINTS TO THE LIST OF VARIABLES</span>
<span class="number">08BE 08BE </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">08BE 08BE </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE POINTER INTO THE DATA ALWAYS STARTS POINTING TO A</span>
<span class="number">08BE 08BE </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">TERMINATOR -- A , : OR END-OF-LINE</span>
<span class="number">08BE 08BE </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">[M80] </span><span class="label">READ:  </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE TEXT POINTER</span>
<span class="number">08BF 08BF </span><span class="colon">: </span><span class="hex">2A DC 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(DATPTR)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET LAST DATA LOCATION</span>
<span class="number">08C2 08C2 </span><span class="colon">: </span><span class="hex">F6         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $F6               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"ORI" TO SET [A] NON-ZERO</span>
<span class="number">08C3 08C3 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">(M80) </span><span class="label">INPCON:</span><span class="mnemonic"> xor    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET FLAG THAT THIS IS AN INPUT</span>
<span class="number">08C4 08C4 </span><span class="colon">: </span><span class="hex">32 CD 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (FLGINP),a        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">STORE THE FLAG</span>
<span class="number">08C7 08C7 </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[H,L]=VARIABLE LIST POINTER</span>
<span class="number">08C8 08C8 </span><span class="colon">: </span><span class="hex">01         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $01               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"LD BC," OVER THE NEXT 2</span>
<span class="number">08C9 08C9 </span><span class="colon">: </span><span class="hex">CF         </span><span class="source">[M80] </span><span class="label">LOPDT2:</span><span class="mnemonic"> rst    </span> SYNCHK                   
<span class="number">0BCA 0BCA </span><span class="colon">: </span><span class="hex">2C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> ','               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE SURE THERE IS A ","</span>
<span class="number">08CB 08CB </span><span class="colon">: </span><span class="hex">CD D1 10   </span><span class="source">{M80} </span><span class="label">LOPDAT:</span><span class="mnemonic"> call   </span> PTRGET            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE POINTER TO A VARIABLE INTO [D,E]</span>
<span class="number">08CE 08CE </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;;Swap with Data List Pointer</span>
<span class="number">08CF 08CF </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">NOTE AT THIS POINT WE HAVE A VARIABLE WHICH WANTS DATA</span>
<span class="number">08CF 08CF </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND SO WE MUST GET DATA OR COMPLAIN</span>
<span class="number">08CF 08CF </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE POINTER TO THE VARIABLE</span>
<span class="number">08D0 08D0 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">READ DATA LIST TERMINATOR</span>
<span class="number">08D1 08D1 </span><span class="colon">: </span><span class="hex">FE 2C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> ','               <span class="comment">;      </span>
<span class="number">08D3 08D3 </span><span class="colon">: </span><span class="hex">28 1B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,DATBK           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">A COMMA SO A VALUE MUST FOLLOW</span>
<span class="number">08D5 08D5 </span><span class="colon">: </span><span class="hex">3A CD 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(FLGINP)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE WHAT TYPE OF STATEMENT THIS WAS</span>
<span class="number">08D8 08D8 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;;???ZERO FOR INPUT, OTHERWISE READ</span>
<span class="number">08D9 08D9 </span><span class="colon">: </span><span class="hex">C2 53 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,DATLOP         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEARCH FOR ANOTHER DATA STATEMENT</span>
<span class="number">08DC08DC  </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">08DC 08DC </span><span class="colon">: </span><span class="hex">3E 3F      </span><span class="source">{M80} </span><span class="label">GETAGN:</span><span class="mnemonic"> ld     </span> a,'?'             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TYPE "?" AND INPUT A LINE OF TEXT</span>
<span class="number">08DE 08DE </span><span class="colon">: </span><span class="hex">DF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> OUTCHR            <span class="comment">;      </span>
<span class="number">08DF 08DF </span><span class="colon">: </span><span class="hex">CD 5B 0D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> QINLIN            <span class="comment">;      </span>
<span class="number">08E2 08E2 </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;      </span>
<span class="number">08E3 08E3 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TAKE OFF SINCE MAYBE LEAVING</span>
<span class="number">08E4 08E4 </span><span class="colon">: </span><span class="hex">DA 26 0C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> c,STPEND          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF EMPTY LEAVE</span>
<span class="number">08E7 08E7 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">08E8 08E8 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;      </span>
<span class="number">08E9 08E9 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;      </span>
<span class="number">08EA 08EA </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;      </span>
<span class="number">08EB 08EB </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT BACK  SINCE DIDN'T LEAVE</span>
<span class="number">08EC 08EC </span><span class="colon">: </span><span class="hex">CA 1B 07   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,DATAH                  
<span class="number">08EF 08EF </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;{M80} SAVE THE POINTER TO THE VARIABLE</span>
<span class="number">08F0 08F0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">08F0 08F0 </span><span class="colon">: </span><span class="hex">F7         </span><span class="source">[M80] </span><span class="label">DATBK: </span><span class="mnemonic"> rst    </span> HOOKDO            <span class="comment">;;Call Extended Hook 28</span>
<span class="number">08F1 08F1 </span><span class="colon">: </span><span class="hex">1C         </span><span class="source">{~~~} </span><span class="label">HOOK28:</span><span class="mnemonic"> byte   </span> 28                <span class="comment">;      </span>
<span class="number">08F2 08F2 </span><span class="colon">: </span><span class="hex">3A AB 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(VALTYP)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS IT A STRING?</span>
<span class="number">08F5 08F5 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;      </span>
<span class="number">08F6 08F6 </span><span class="colon">: </span><span class="hex">28 1F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,NUMINS          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF NUMERIC, USE FIN TO GET IT</span>
<span class="number">08F8 08F8 </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;      </span>
<span class="number">08F9 08F9 </span><span class="colon">: </span><span class="hex">57         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ASSUME QUOTED STRING</span>
<span class="number">08FA 08FA </span><span class="colon">: </span><span class="hex">47         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SETUP TERMINATORS</span>
<span class="number">08FB 08FB </span><span class="colon">: </span><span class="hex">FE 22      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> '"'               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">QUOTE ?</span>
<span class="number">08FD 08FD </span><span class="colon">: </span><span class="hex">28 0C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,NOWGET          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TERMINATORS OK</span>
<span class="number">08FF 08FF </span><span class="colon">: </span><span class="hex">3A CD 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(FLGINP)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">INPUT SHOULDN'T TERMINATE ON ":"</span>
<span class="number">0902 0902 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF READ OR INPUT</span>
<span class="number">0903 0903 </span><span class="colon">: </span><span class="hex">57         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET D TO ZERO FOR INPUT</span>
<span class="number">0904 0904 </span><span class="colon">: </span><span class="hex">28 02      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,NCOLST          <span class="comment">;      </span>
<span class="number">0906 0906 </span><span class="colon">: </span><span class="hex">16 3A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,':'             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">UNQUOTED STRING TERMINATORS</span>
<span class="number">0908 0908 </span><span class="colon">: </span><span class="hex">06 2C      </span><span class="source">(M80) </span><span class="label">NCOLST:</span><span class="mnemonic"> ld     </span> b,','             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ARE COLON AND COMMA</span>
<span class="number">090A 090A </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">START CHARACTER MUST BE INCLUDED IN THE QUOTED STRING</span>
<span class="number">090B 090B </span><span class="colon">: </span><span class="hex">CD 63 0E   </span><span class="source">(M80) </span><span class="label">NOWGET:</span><span class="mnemonic"> call   </span> STRLT2            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE STRING DESCRIPTOR FOR VALUE AND COPY IF NECESSARY</span>
<span class="number">090E 090E </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;      </span>
<span class="number">090F 090F </span><span class="colon">: </span><span class="hex">21 20 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,STRDN2         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RETURN LOC</span>
<span class="number">0912 0912 </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[H,L]=PLACE TO STORE VARIABLE VALUE</span>
<span class="number">0913 0913 </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TEXT POINTER GOES ON</span>
<span class="number">0914 0914 </span><span class="colon">: </span><span class="hex">C3 4A 07   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> INPCOM            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DO ASSIGNMENT</span>
<span class="number">0917 0917 </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">(M80) </span><span class="label">NUMINS:</span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;      </span>
<span class="number">0918 0918 </span><span class="colon">: </span><span class="hex">CD E5 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FIN               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CALL # INPUTTER</span>
<span class="number">091B 091B </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;*** tail end of [M80] FIN?</span>
<span class="number">091C 091C </span><span class="colon">: </span><span class="hex">CD 3A 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVMF             <span class="comment">;      </span>
<span class="number">091F 091F </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;      </span>
<span class="number">0920 0920 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">(M80) </span><span class="label">STRDN2:</span><span class="mnemonic"> dec    </span> hl                <span class="comment">;      </span>
<span class="number">0921 0921 </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;      </span>
<span class="number">0922 0922 </span><span class="colon">: </span><span class="hex">28 05      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,TRMOK           <span class="comment">;      </span>
<span class="number">0924 0924 </span><span class="colon">: </span><span class="hex">FE 2C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> ','               <span class="comment">;      </span>
<span class="number">0926 0926 </span><span class="colon">: </span><span class="hex">C2 80 08   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,TRMNOK         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ENDED PROPERLY?</span>
<span class="number">0929 0929 </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">[M80] </span><span class="label">TRMOK: </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;      </span>
<span class="number">092A 092A </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">LOOK AT TERMINATOR</span>
<span class="number">092B 092B </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND SET UP CONDITION CODES</span>
<span class="number">092C 092C </span><span class="colon">: </span><span class="hex">C2 C9 08   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,LOPDT2         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NOT ENDING, CHECK FOR COMMA AND GET ANOTHER VARIABLE</span>
<span class="number">092F 092F </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POP OFF THE POINTER INTO DATA</span>
<span class="number">0930 0930 </span><span class="colon">: </span><span class="hex">3A CD 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(FLGINP)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FETCH THE STATEMENT TYPE FLAG</span>
<span class="number">0933 0933 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;      </span>
<span class="number">0934 0934 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">INPUT STATEMENT</span>
<span class="number">0935 0935 </span><span class="colon">: </span><span class="hex">C2 1A 0C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,RESFIN         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">UPDATE DATPTR</span>
<span class="number">0938 0938 </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE TEXT POINTER</span>
<span class="number">0939 0939 </span><span class="colon">: </span><span class="hex">B6         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> (hl)              <span class="comment">;      </span>
<span class="number">093A 093A </span><span class="colon">: </span><span class="hex">21 42 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,EXIGNT         <span class="comment">;      </span>
<span class="number">093D 093D </span><span class="colon">: </span><span class="hex">C4 9D 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> nz,STROUT         <span class="comment">;</span><span class="source">[M65] </span><span class="comment">TYPE "?EXTRA IGNORED"</span>
<span class="number">0940 0940 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;      </span>
<span class="number">0941 0941 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;</span><span class="source">[M65[ </span><span class="comment">DO NEXT STATEMENT</span>
<span class="number">0942 0942 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0942 0942 </span><span class="colon">: </span><span class="hex">3F 45 78 74</span><span class="source">[M65] </span><span class="label">EXIGNT:</span><span class="mnemonic"> byte   </span> "?Extra ignored",13,10,0 
<span class="number">0946 0946 </span><span class="colon">: </span><span class="hex">72 61 20 69</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">094A 094A </span><span class="colon">: </span><span class="hex">67 6E 6F 72</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">094E 094E </span><span class="colon">: </span><span class="hex">65 64 0D 0A</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0952 0952 </span><span class="colon">: </span><span class="hex">00         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0953 0953 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0953 0953 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE SEARCH FOR DATA STATMENTS IS MADE BY USING THE EXECUTION CODE</span>
<span class="number">0953 0953 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">FOR DATA TO SKIP OVER STATEMENTS. THE START WORD OF EACH STATEMENT</span>
<span class="number">0953 0953 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS COMPARED WITH $DATA. EACH NEW LINE NUMBER</span>
<span class="number">0953 0953 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS STORED IN DATLIN SO THAT IF AN ERROR OCCURS WHILE READING</span>
<span class="number">0953 0953 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">DATA THE ERROR MESSAGE WILL GIVE THE LINE NUMBER OF THE</span>
<span class="number">0953 0953 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ILL-FORMATTED DATA                </span>
<span class="number">0953 0953 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">0953 0953 </span><span class="colon">: </span><span class="hex">CD 1C 07   </span><span class="source">[M80] </span><span class="label">DATLOP:</span><span class="mnemonic"> call   </span> DATA              <span class="comment">;      </span>
<span class="number">0956 0956 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;      </span>
<span class="number">0957 0957 </span><span class="colon">: </span><span class="hex">20 11      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,NOWLIN         <span class="comment">;      </span>
<span class="number">0959 0959 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">095A 095A </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;      </span>
<span class="number">095B 095B </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">095C 095C </span><span class="colon">: </span><span class="hex">B6         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> (hl)              <span class="comment">;      </span>
<span class="number">095D 095D </span><span class="colon">: </span><span class="hex">1E 06      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,ERROD           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NO DATA IS ERROR ERROD</span>
<span class="number">095F 095F </span><span class="colon">: </span><span class="hex">CA DB 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,ERROR           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF SO COMPLAIN</span>
<span class="number">0962 0962 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SKIP PAST LINE #</span>
<span class="number">0963 0963 </span><span class="colon">: </span><span class="hex">5E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET DATA LINE #</span>
<span class="number">0964 0964 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">0965 0965 </span><span class="colon">: </span><span class="hex">56         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,(hl)            <span class="comment">;      </span>
<span class="number">0966 0966 </span><span class="colon">: </span><span class="hex">ED 53 C9 38</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (DATLIN),de       <span class="comment">;      </span>
<span class="number">096A 096A </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">      </span><span class="label">NOWLIN:</span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE STATEMENT TYPE</span>
<span class="number">096B 096B </span><span class="colon">: </span><span class="hex">FE 83      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> DATATK            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS IS "DATA"?</span>
<span class="number">096D 096D </span><span class="colon">: </span><span class="hex">20 E4      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,DATLOP         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NOT DATA SO LOOK SOME MORE</span>
<span class="number">096F 096F </span><span class="colon">: </span><span class="hex">C3 F0 08   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> DATBK             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CONTINUE READING</span>
<span class="number">0972 0972 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0972 0972 </span><span class="colon">  </span><span class="hex">           </span><span class="source">   +  </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">THESE ROUTINES CHECK FOR CERTAIN "VALTYP".</span>
<span class="number">0972 0972 </span><span class="colon">  </span><span class="hex">           </span><span class="source">   |  </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">[C] IS NOT PRESERVED.             </span>
<span class="number">0972 0972 </span><span class="colon">  </span><span class="hex">           </span><span class="source">   |  </span><span class="comment">;                                        </span>
<span class="number">0972 0972 </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Evaluate a Number                      </span>
<span class="number">0972 0972 </span><span class="colon">= </span><span class="hex">CD 85 09   </span><span class="source">[M65] </span><span class="label">FRMNUM:</span><span class="mnemonic"> call   </span> FRMEVL            <span class="comment">;{M80} EVALUATE A FORMULA</span>
<span class="number">0975 0975 </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Issue "TM" Error if Not a Number       </span>
<span class="number">0975 0975 </span><span class="colon">= </span><span class="hex">F6         </span><span class="source">[M65] </span><span class="label">CHKNUM:</span><span class="mnemonic"> byte   </span> $F6               <span class="comment">;;"OR $37" to skip next instruction</span>
<span class="number">0976 0976 </span><span class="colon">: </span><span class="hex">37         </span><span class="source">[M65] </span><span class="label">CHKSTR:</span><span class="mnemonic"> scf    </span>                   <span class="comment">;;Set Carry to match strings</span>
<span class="number">0977 0977 </span><span class="colon">: </span><span class="hex">3A AB 38   </span><span class="source">[M65] </span><span class="label">CHKVAL:</span><span class="mnemonic"> ld     </span> a,(VALTYP)        <span class="comment">;      </span>
<span class="number">097A 097A </span><span class="colon">: </span><span class="hex">8F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> adc    </span> a,a               <span class="comment">;;Shift Left and Copy in Cary</span>
<span class="number">097B 097B </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;;Set Flags</span>
<span class="number">097C 097C </span><span class="colon">: </span><span class="hex">E8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> pe                <span class="comment">;;Return if Overflow</span>
<span class="number">097D 097D </span><span class="colon">: </span><span class="hex">C3 D9 03   </span><span class="source">[M65] </span><span class="label">CHKERR:</span><span class="mnemonic"> jp     </span> TMERR             <span class="comment">;;Else TYPE MISMATCH Error</span>
<span class="number">0980 0980 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0980 0980 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE FORMULA EVALUATOR STARTS WITH </span>
<span class="number">0980 0980 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">[H,L] POINTING TO THE FIRST CHARACTER OF THE FORMULA.</span>
<span class="number">0980 0980 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">AT THE END [H,L] POINTS TO THE TERMINATOR.</span>
<span class="number">0980 0980 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE RESULT IS LEFT IN THE FAC.    </span>
<span class="number">0980 0980 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ON RETURN [A] DOES NOT REFLECT THE TERMINATING CHARACTER</span>
<span class="number">0980 0980 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">0980 0980 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE FORMULA EVALUATOR USES THE OPERATOR TABLE (OPTAB)</span>
<span class="number">0980 0980 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">TO DETERMINE PRECEDENCE AND DISPATCH ADDRESSES FOR</span>
<span class="number">0980 0980 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">EACH OPERATOR.                    </span>
<span class="number">0980 0980 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">A TEMPORARY RESULT ON THE STACK HAS THE FOLLOWING FORMAT</span>
<span class="number">0980 0980 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">0980 0980 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE ADDRESS OF 'RETAOP' -- THE PLACE TO RETURN ON COMPLETION</span>
<span class="number">0980 0980 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">OF OPERATOR APPLICATION           </span>
<span class="number">0980 0980 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">0980 0980 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE FLOATING POINT TEMPORARY RESULT</span>
<span class="number">0980 0980 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">0980 0980 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE ADDRESS OF THE OPERATOR ROUNTINE</span>
<span class="number">0980 0980 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">0980 0980 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE PRECEDENCE OF THE OPERATOR    </span>
<span class="number">0980 0980 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">0980 0980 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">TOTAL 10 BYTES                    </span>
<span class="number">0980 0980 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">0980 0980 </span><span class="colon">: </span><span class="hex">CF         </span><span class="source">[M80] </span><span class="label">FRMEQL:</span><span class="mnemonic"> rst    </span> SYNCHK            <span class="comment">;      </span>
<span class="number">0981 0981 </span><span class="colon">: </span><span class="hex">B0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> EQUATK            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHECK FOR EQUAL SIGN</span>
<span class="number">0982 0982 </span><span class="colon">: </span><span class="hex">01         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $01               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"LD BC," OVER THE NEXT 2</span>
<span class="number">0983 0983 </span><span class="colon">: </span><span class="hex">CF         </span><span class="source">[M80] </span><span class="label">FRMPRN:</span><span class="mnemonic"> rst    </span> SYNCHK            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET PAREN BEFORE FORMULA</span>
<span class="number">0984 0984 </span><span class="colon">: </span><span class="hex">28         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> '('               <span class="comment">;      </span>
<span class="number">0985 0985 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0985 0985 </span><span class="colon">- </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Evaluate Formula                       </span>
<span class="number">0985 0985 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">THE FORMULA EVALUATOR STARTS WITH </span>
<span class="number">0985 0985 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">[H,L] POINTING TO THE FIRST CHARACTER OF THE FORMULA.</span>
<span class="number">0985 0985 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">AT THE END [H,L] POINTS TO THE TERMINATOR.</span>
<span class="number">0985 0985 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">THE RESULT IS LEFT IN THE FAC.    </span>
<span class="number">0985 0985 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">ON RETURN [A] DOES NOT REFLECT THE TERMINATOR.</span>
<span class="number">0985 0985 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">0985 0985 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">THE FORMULA EVALUATOR USES THE OPERATOR LIST (OPTAB)</span>
<span class="number">0985 0985 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">TO DETERMINE PRECEDENCE AND DISPATCH ADDRESSES FOR</span>
<span class="number">0985 0985 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">EACH OPERATOR.                    </span>
<span class="number">0985 0985 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">A TEMPORARY RESULT ON THE STACK HAS THE FOLLOWING FORMAT.</span>
<span class="number">0985 0985 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">      THE ADDRESS OF THE OPERATOR ROUTINE.</span>
<span class="number">0985 0985 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">      THE FLOATING POINT TEMPORARY RESULT.</span>
<span class="number">0985 0985 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">      THE PRECEDENCE OF THE OPERATOR.</span>
<span class="number">0985 0985 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">0985 0985 </span><span class="colon">= </span><span class="hex">2B         </span><span class="source">[M80] </span><span class="label">FRMEVL:</span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">BACK UP CHARACTER POINTER</span>
<span class="number">0986 0986 </span><span class="colon">: </span><span class="hex">16 00      </span><span class="source">[M80] </span><span class="label">FRMCHK:</span><span class="mnemonic"> ld     </span> d,0               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">INITIAL DUMMY PRECEDENCE IS 0</span>
<span class="number">0988 0988 </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">[M80] </span><span class="label">LPOPER:</span><span class="mnemonic"> push   </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE PRECEDENCE</span>
<span class="number">0989 0989 </span><span class="colon">: </span><span class="hex">0E 01      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,1               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">EXTRA SPACE NEEDED FOR RETURN ADDRESS</span>
<span class="number">098B 098B </span><span class="colon">: </span><span class="hex">CD A0 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GETSTK            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE SURE THERE IS ROOM FOR RECURSIVE CALLS</span>
<span class="number">098E 098E </span><span class="colon">: </span><span class="hex">CD FD 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> EVAL              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">EVALUATE SOMETHING</span>
<span class="number">0991 0991 </span><span class="colon">: </span><span class="hex">22 D0 38   </span><span class="source">[N80] </span><span class="label">TSTOP: </span><span class="mnemonic"> ld     </span> (TENP2),hl        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE TEXT POINTER</span>
<span class="number">0994 0994 </span><span class="colon">: </span><span class="hex">2A D0 38   </span><span class="source">[M80] </span><span class="label">RETAOP:</span><span class="mnemonic"> ld     </span> hl,(TENP2)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RESTORE TEXT PTR</span>
<span class="number">0997 0997 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POP OFF THE PRECEDENCE OF OLDOP</span>
<span class="number">0998 0998 </span><span class="colon">: </span><span class="hex">78         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,b               <span class="comment">;      </span>
<span class="number">0999 0999 </span><span class="colon">: </span><span class="hex">FE 78      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> $78               <span class="comment">;      </span>
<span class="number">099B 099B </span><span class="colon">: </span><span class="hex">D4 75 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> nc,CHKNUM         <span class="comment">;      </span>
<span class="number">099E 099E </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">{M80} </span><span class="label">NOTSTV </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET NEXT CHARACTER</span>
<span class="number">099F 099F </span><span class="colon">: </span><span class="hex">22 C3 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (TENP3),hl        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE UPDATED CHARACTER POINTER</span>
<span class="number">09A2 09A2 </span><span class="colon">: </span><span class="hex">FE A8      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> PLUSTK            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS IT AN OPERATOR?</span>
<span class="number">09A4 09A4 </span><span class="colon">: </span><span class="hex">D8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> c                 <span class="comment">;      </span>
<span class="number">09A5 09A5 </span><span class="colon">: </span><span class="hex">FE B2      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> LESSTK+1          <span class="comment">;      </span>
<span class="number">09A7 09A7 </span><span class="colon">: </span><span class="hex">D0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NO, ALL DONE</span>
<span class="number">09A8 09A8 </span><span class="colon">: </span><span class="hex">FE AF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> GREATK            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SOME KIND OF RELATIONAL?</span>
<span class="number">09AA 09AA </span><span class="colon">: </span><span class="hex">D2 E2 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,DORELS         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">YES, DO IT</span>
<span class="number">09AD 09AD </span><span class="colon">: </span><span class="hex">D6 A8      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> PLUSTK            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SUBTRACT OFFSET FOR FIRST ARITHMETIC</span>
<span class="number">09AF 09AF </span><span class="colon">: </span><span class="hex">5F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MUST MULTIPLY BY 3</span>
<span class="number">09B0 09B0 </span><span class="colon">: </span><span class="hex">20 08      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,NTPLUS         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NOT ADDITION OP</span>
<span class="number">09B2 09B2 </span><span class="colon">: </span><span class="hex">3A AB 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(VALTYP)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF LEFT PART IS STRING</span>
<span class="number">09B5 09B5 </span><span class="colon">: </span><span class="hex">3D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF LEFT PART IS STRING</span>
<span class="number">09B6 09B6 </span><span class="colon">: </span><span class="hex">7B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,e               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">REFETCH OP-VALUE</span>
<span class="number">09B7 09B7 </span><span class="colon">: </span><span class="hex">CA 7C 0F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,CAT             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MUST BE CAT</span>
<span class="number">09BA 09BA </span><span class="colon">: </span><span class="hex">07         </span><span class="source">(M80) </span><span class="label">NTPLUS:</span><span class="mnemonic"> rlca   </span>                   <span class="comment">;</span><span class="source">[M65] </span><span class="comment">MULTIPLY BY 2</span>
<span class="number">09BB 09BB </span><span class="colon">: </span><span class="hex">83         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,e               <span class="comment">;</span><span class="source">[M65] </span><span class="comment">BY THREE.</span>
<span class="number">09BC 09BC </span><span class="colon">: </span><span class="hex">5F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,a               <span class="comment">;</span><span class="source">[M65] </span><span class="comment">SET UP FOR LATER</span>
<span class="number">09BD 09BD </span><span class="colon">: </span><span class="hex">21 4C 03   </span><span class="source">{M65} </span><span class="label">QPREC1:</span><span class="mnemonic"> ld     </span> hl,OPTAB          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CREATE INDEX INTO OPTAB</span>
<span class="number">09C0 09C0 </span><span class="colon">: </span><span class="hex">16 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,0               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE HIGH BYTE OF OFFSET=0</span>
<span class="number">09C2 09C2 </span><span class="colon">: </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ADD IN CALCULATED OFFSET</span>
<span class="number">09C3 09C3 </span><span class="colon">: </span><span class="hex">78         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[A] GETS OLD PRECEDENCE</span>
<span class="number">09C4 09C4 </span><span class="colon">: </span><span class="hex">56         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">REMEMBER NEW PRECEDENCE</span>
<span class="number">09C5 09C5 </span><span class="colon">: </span><span class="hex">BA         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> d                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">OLD-NEW</span>
<span class="number">09C6 09C6 </span><span class="colon">: </span><span class="hex">D0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">APPLY OLD OP IF >= PRECEDENCE</span>
<span class="number">09C7 09C7 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">09C8 09C8 </span><span class="colon">: </span><span class="hex">CD 75 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CHKNUM            <span class="comment">;      </span>
<span class="number">09CB 09CB </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">09CB 09CB </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">[M80] </span><span class="label">FINTMP:</span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THESE THINGS FOR RETAOP</span>
<span class="number">09CC 09CC </span><span class="colon">: </span><span class="hex">01 94 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> bc,RETAOP         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GENERAL OPERATOR APPLICATION ROUTINE -- DOES TYPE CONVERSIONS</span>
<span class="number">09CF 09CF </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE PLACE TO GO</span>
<span class="number">09D0 09D0 </span><span class="colon">: </span><span class="hex">43         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,e               <span class="comment">;;Save dispatch offset and precedence</span>
<span class="number">09D1 09D1 </span><span class="colon">: </span><span class="hex">4A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,d               <span class="comment">;      </span>
<span class="number">09D2 09D2 </span><span class="colon">: </span><span class="hex">CD 13 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> PUSHF             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT FAC ON STACK</span>
<span class="number">09D5 09D5 </span><span class="colon">: </span><span class="hex">58         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,b               <span class="comment">;      </span>
<span class="number">09D6 09D6 </span><span class="colon">: </span><span class="hex">51         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,c               <span class="comment">;;Restore dispatch offset and precedence</span>
<span class="number">09D7 09D7 </span><span class="colon">: </span><span class="hex">4E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,(hl)            <span class="comment">;;Load FINRE2 address from FINREA into BC</span>
<span class="number">09D8 09D8 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">09D9 09D9 </span><span class="colon">: </span><span class="hex">46         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,(hl)            <span class="comment">;      </span>
<span class="number">09DA 09DA </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;;Now HL contains FINRE2 address</span>
<span class="number">09DB 09DB </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;;Push FINRE2 address</span>
<span class="number">09DC 09DC </span><span class="colon">: </span><span class="hex">2A C3 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(TENP3)        <span class="comment">;REGET THE TEXT POINTER</span>
<span class="number">09DF 09DF </span><span class="colon">: </span><span class="hex">C3 88 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> LPOPER            <span class="comment">;PUSH ON THE PRECEDENCE AND READ MORE FORMULA</span>
<span class="number">09E2 09E2 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">09E2 09E2 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Evaluate Logical Operators             </span>
<span class="number">09E2 09E2 </span><span class="colon">: </span><span class="hex">16 00      </span><span class="source">[M80] </span><span class="label">DORELS:</span><span class="mnemonic"> ld     </span> d,0               <span class="comment">;{M80} ASSUME NO RELATION OPS, SETUP HIGH ORDER OF INDEX INTO OPTAB</span>
<span class="number">09E4 09E4 </span><span class="colon">: </span><span class="hex">D6 AF      </span><span class="source">(M80) </span><span class="label">LOPREL:</span><span class="mnemonic"> sub    </span> GREATK            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS THIS ONE RELATION?</span>
<span class="number">09E6 09E6 </span><span class="colon">: </span><span class="hex">DA D0 0A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> c,FINREL          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RELATIONS ALL THROUGH</span>
<span class="number">09E9 09E9 </span><span class="colon">: </span><span class="hex">FE 03      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> LESSTK-GREATK+1   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS IT REALLY RELATIONAL?</span>
<span class="number">09EB 09EB </span><span class="colon">: </span><span class="hex">D2 D0 0A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,FINREL         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NO JUST BIG</span>
<span class="number">09EE 09EE </span><span class="colon">: </span><span class="hex">FE 01      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 1                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET UP BITS BY MAPPING</span>
<span class="number">09F0 09F0 </span><span class="colon">: </span><span class="hex">17         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rla    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">0 TO 1 1 TO 2 AND 2 TO 4</span>
<span class="number">09F1 09F1 </span><span class="colon">: </span><span class="hex">AA         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> d                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">BRING IN THE OLD BITS</span>
<span class="number">09F2 09F2 </span><span class="colon">: </span><span class="hex">BA         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> d                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE SURE RESULT IS BIGGER</span>
<span class="number">09F3 09F3 </span><span class="colon">: </span><span class="hex">57         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE MASK</span>
<span class="number">09F4 09F4 </span><span class="colon">: </span><span class="hex">DA C4 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> c,SNERR           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DON'T ALLOW TWO OF THE SAME</span>
<span class="number">09F7 09F7 </span><span class="colon">: </span><span class="hex">22 C3 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (TENP3),hl        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE CHARACTER POINTER</span>
<span class="number">09FA 09FA </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE NEXT CANDIDATE</span>
<span class="number">09FB 09FB </span><span class="colon">: </span><span class="hex">18 E7      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> LOPREL            <span class="comment">;      </span>
<span class="number">09FD 09FD </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">09FD 09FD </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">EVALUATE VARIABLE, CONSTANT, FUNCTION CALL</span>
<span class="number">09FD 09FD </span><span class="colon">: </span><span class="hex">F7         </span><span class="source">[M80] </span><span class="label">EVAL:  </span><span class="mnemonic"> rst    </span> HOOKDO            <span class="comment">;      </span>
<span class="number">09FE 09FE </span><span class="colon">: </span><span class="hex">09         </span><span class="source">{~~~} </span><span class="label">HOOK9: </span><span class="mnemonic"> byte   </span> 9                 <span class="comment">;      </span>
<span class="number">09FF 09FF </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;      </span>
<span class="number">0A00 0A00 </span><span class="colon">: </span><span class="hex">32 AB 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (VALTYP),a        <span class="comment">;</span><span class="source">[M65] </span><span class="comment">ASSUME VALUE WILL BE NUMERIC</span>
<span class="number">0A03 0A03 </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;      </span>
<span class="number">0A04 0A04 </span><span class="colon">: </span><span class="hex">CA D6 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,MOERR           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TEST FOR MISSING OPERAND - IF NONE GIVE ERROR</span>
<span class="number">0A07 0A07 </span><span class="colon">: </span><span class="hex">DA E5 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> c,FIN             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF NUMERIC, INTERPRET CONSTANT</span>
<span class="number">0A0A 0A0A </span><span class="colon">: </span><span class="hex">CD C6 0C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> ISLETC            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">VARIABLE NAME?</span>
<span class="number">0A0D 0A0D </span><span class="colon">: </span><span class="hex">D2 4E 0A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,ISVAR          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">AN ALPHABETIC CHARACTER MEANS YES</span>
<span class="number">0A10 0A10 </span><span class="colon">: </span><span class="hex">FE A8      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> PLUSTK            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IGNORE "+"</span>
<span class="number">0A12 0A12 </span><span class="colon">: </span><span class="hex">28 E9      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,EVAL            <span class="comment">;      </span>
<span class="number">0A14 0A14 </span><span class="colon">: </span><span class="hex">FE 2E      </span><span class="source">{M65} </span><span class="label">QDOT:  </span><span class="mnemonic"> cp     </span> '.'               <span class="comment">;</span><span class="source">[M65] </span><span class="comment">LEADING CHARACTER OF CONSTANT?</span>
<span class="number">0A16 0A16 </span><span class="colon">: </span><span class="hex">CA E5 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,FIN             <span class="comment">;      </span>
<span class="number">0A19 0A19 </span><span class="colon">: </span><span class="hex">FE A9      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> MINUTK            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NEGATION?</span>
<span class="number">0A1B 0A1B </span><span class="colon">: </span><span class="hex">CA 3D 0A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,DOMIN           <span class="comment">;</span><span class="source">[M65] </span><span class="comment">SHO IS.</span>
<span class="number">0A1E 0A1E </span><span class="colon">: </span><span class="hex">FE 22      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> '"'               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">STRING CONSTANT?</span>
<span class="number">0A20 0A20 </span><span class="colon">: </span><span class="hex">CA 60 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,STRLTI          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF SO BUILD A TEMPORARY DESCRIPTOR</span>
<span class="number">0A23 0A23 </span><span class="colon">: </span><span class="hex">FE A6      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> NOTTK             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHECK FOR "NOT" OPERATOR</span>
<span class="number">0A25 0A25 </span><span class="colon">: </span><span class="hex">CA 05 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,NOTER           <span class="comment">;      </span>
<span class="number">0A28 0A28 </span><span class="colon">: </span><span class="hex">FE A4      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> INKETK            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">INKEY$ FUNCTION?</span>
<span class="number">0A2A 0A2A </span><span class="colon">: </span><span class="hex">CA FB 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,INKEY           <span class="comment">;      </span>
<span class="number">0A2D 0A2D </span><span class="colon">: </span><span class="hex">FE A2      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> FNTK              <span class="comment">;      </span>
<span class="number">0A2F 0A2F </span><span class="colon">: </span><span class="hex">CA 40 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,FNDOER          <span class="comment">;      </span>
<span class="number">0A32 0A32 </span><span class="colon">: </span><span class="hex">D6 B2      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> ONEFUN            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS IT A FUNCTION CALL</span>
<span class="number">0A34 0A34 </span><span class="colon">: </span><span class="hex">D2 5F 0A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,ISFUN          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">YES, DO IT</span>
<span class="number">0A37 0A37 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ONLY POSSIBILITY LEFT IS A FORMULA IN PARENTHESES</span>
<span class="number">0A37 0A37 </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Recursively Evaluate Formula in Parentheses</span>
<span class="number">0A37 0A37 </span><span class="colon">= </span><span class="hex">CD 83 09   </span><span class="source">[M80] </span><span class="label">PARCHK:</span><span class="mnemonic"> call   </span> FRMPRN            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RECURSIVELY EVALUATE THE FORMULA</span>
<span class="number">0A3A 0A3A </span><span class="colon">: </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK            <span class="comment">;      </span>
<span class="number">0A3B 0A3B </span><span class="colon">: </span><span class="hex">29         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> ')'               <span class="comment">;      </span>
<span class="number">0A3C 0A3C </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">0A3D 0A3D </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0A3D 0A3D </span><span class="colon">: </span><span class="hex">16 7D      </span><span class="source">[M80] </span><span class="label">DOMIN: </span><span class="mnemonic"> ld     </span> d,125             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">A PRECEDENCE BELOW ^ BUT ABOVE ALL ELSE</span>
<span class="number">0A3F 0A3F </span><span class="colon">: </span><span class="hex">CD 88 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> LPOPER            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SO ^ GREATER THAN UNARY MINUS</span>
<span class="number">0A42 0A42 </span><span class="colon">: </span><span class="hex">2A D0 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(TENP2)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET TEXT POINTER</span>
<span class="number">0A45 0A45 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;      </span>
<span class="number">0A46 0A46 </span><span class="colon">: </span><span class="hex">CD 0B 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> NEG               <span class="comment">;      </span>
<span class="number">0A49 0A49 </span><span class="colon">: </span><span class="hex">CD 75 09   </span><span class="source">[M80] </span><span class="label">LABBCK:</span><span class="mnemonic"> call   </span> CHKNUM            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FUNCTIONS THAT DON'T RETURN</span>
<span class="number">0A4C 0A4C </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">STRING VALUES COME BACK HERE</span>
<span class="number">0A4D 0A4D </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">0A4E 0A4E </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0A4E 0A4E </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Get Variable Value or String Pointer   </span>
<span class="number">0A4E 0A4E </span><span class="colon">= </span><span class="hex">CD D1 10   </span><span class="source">[M80] </span><span class="label">ISVAR: </span><span class="mnemonic"> call   </span> PTRGET            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET A POINTER TO THE VARIABLE IN [D,E]</span>
<span class="number">0A51 0A51 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">[M80] </span><span class="label">RETVAR:</span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE TEXT POINTER</span>
<span class="number">0A52 0A52 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;{M80} PUT THE POINTER TO THE VARIABLE OR STRING DESCRIPTOR</span>
<span class="number">0A53 0A53 </span><span class="colon">: </span><span class="hex">22 E4 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (FACLO),hl        <span class="comment">;</span><span class="source">[M80]I</span><span class="comment">N CASE IT'S STRING STORE POINTER TO THE DESCRIPTOR IN FACLO.</span>
<span class="number">0A56 0A56 </span><span class="colon">: </span><span class="hex">3A AB 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(VALTYP)        <span class="comment">;</span><span class="source">[M80]F</span><span class="comment">OR STRINGS WE JUST LEAVE</span>
<span class="number">0A59 0A59 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80]A</span><span class="comment"> POINTER IN THE FAC</span>
<span class="number">0A5A 0A5A </span><span class="colon">: </span><span class="hex">CC 20 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> z,MOVFM           <span class="comment">;</span><span class="source">[M80]T</span><span class="comment">HE FAC USING [H,L] AS THE POINTER.</span>
<span class="number">0A5D 0A5D </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80]R</span><span class="comment">ESTORE THE TEXT POINTER</span>
<span class="number">0A5E 0A5E </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">0A5F 0A5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0A5F 0A5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">MOST FUNCTIONS TAKE A SINGLE ARGUMENT.</span>
<span class="number">0A5F 0A5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE RETURN ADDRESS OF THESE FUNCTIONS IS A SMALL ROUTINE</span>
<span class="number">0A5F 0A5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THAT CHECKS TO MAKE SURE VALTYP IS 0 (NUMERIC) AND POPS OFF</span>
<span class="number">0A5F 0A5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE TEXT POINTER. SO NORMAL FUNCTIONS THAT RETURN STRING RESULTS (I.E. CHR$)</span>
<span class="number">0A5F 0A5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">MUST POP OFF THE RETURN ADDRESS OF LABBCK, AND POP OFF THE</span>
<span class="number">0A5F 0A5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">TEXT POINTER AND THEN RETURN TO FRMEVL.</span>
<span class="number">0A5F 0A5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">0A5F 0A5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE SO CALLED "FUNNY" FUNCTIONS CAN TAKE MORE THAN ONE ARGUMENT.</span>
<span class="number">0A5F 0A5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE FIRST OF WHICH MUST BE STRING AND THE SECOND OF WHICH</span>
<span class="number">0A5F 0A5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">MUST BE A NUMBER BETWEEN 0 AND 256. THE TEXT POINTER IS</span>
<span class="number">0A5F 0A5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">PASSED TO THESE FUNCTIONS SO ADDITIONAL ARGUMENTS</span>
<span class="number">0A5F 0A5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">CAN BE READ. THE TEXT POINTER IS PASSED IN [D,E].</span>
<span class="number">0A5F 0A5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE CLOSE PARENTHESIS MUST BE CHECKED AND RETURN IS DIRECTLY</span>
<span class="number">0A5F 0A5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">TO FRMEVL WITH [H,L] SETUP AS THE TEXT POINTER POINTING BEYOND THE ")".</span>
<span class="number">0A5F 0A5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE POINTER TO THE DESCRIPTOR OF THE STRING ARGUMENT</span>
<span class="number">0A5F 0A5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS STORED ON THE STACK UNDERNEATH THE VALUE OF THE INTEGER</span>
<span class="number">0A5F 0A5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ARGUMENT (2 BYTES)                </span>
<span class="number">0A5F 0A5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;                                        </span>
<span class="number">0A5F 0A5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">NUMGFN </span><span class="mnemonic"> =      </span> (CHRTK-ONEFUN)*2+1       
<span class="number">0A5F 0A5F </span><span class="colon">: </span><span class="hex">F7         </span><span class="source">[M80] </span><span class="label">ISFUN: </span><span class="mnemonic"> rst    </span> HOOKDO            <span class="comment">;      </span>
<span class="number">0A60 0A60 </span><span class="colon">: </span><span class="hex">1B         </span><span class="source">{~~~} </span><span class="label">HOOK27 </span><span class="mnemonic"> byte   </span> 27                <span class="comment">;      </span>
<span class="number">0A61 0A61 </span><span class="colon">: </span><span class="hex">FE 18      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> POINTK-ONEFUN     <span class="comment">;;Is it POINT()</span>
<span class="number">0A63 0A63 </span><span class="colon">: </span><span class="hex">CA 68 1A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,POINT           <span class="comment">;;Yes, go do it</span>
<span class="number">0A66 0A66 </span><span class="colon">: </span><span class="hex">06 00      </span><span class="source">{M80} </span><span class="label">NTMRND:</span><span class="mnemonic"> ld     </span> b,0               <span class="comment">;      </span>
<span class="number">0A68 0A68 </span><span class="colon">: </span><span class="hex">07         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rlca   </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MULTIPLY BY 2</span>
<span class="number">0A69 0A69 </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a               <span class="comment">;      </span>
<span class="number">0A6A 0A6A </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE FUNCTION # ON THE STACK</span>
<span class="number">0A6B 0A6B </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;      </span>
<span class="number">0A6C 0A6C </span><span class="colon">: </span><span class="hex">79         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,c               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">LOOK AT FUNCTION #</span>
<span class="number">0A6D 0A6D </span><span class="colon">: </span><span class="hex">FE 29      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> NUMGFN            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS IT PAST LASNUM?</span>
<span class="number">0A6F 0A6F </span><span class="colon">: </span><span class="hex">38 16      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,OKNORM          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NO, MUST BE A NORMAL FUNCTION</span>
<span class="number">0A71 0A71 </span><span class="colon">: </span><span class="hex">CD 83 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FRMPRN            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">EAT OPEN PAREN AND FIRST ARG</span>
<span class="number">0A74 0A74 </span><span class="colon">: </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK            <span class="comment">;      </span>
<span class="number">0A75 0A75 </span><span class="colon">: </span><span class="hex">2C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> ','               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TWO ARGS SO COMMA MUST DELIMIT</span>
<span class="number">0A76 0A76 </span><span class="colon">: </span><span class="hex">CD 76 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CHKSTR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE SURE THE FIRST ONE WAS STRING</span>
<span class="number">0A79 0A79 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[D,E]=TXTPTR</span>
<span class="number">0A7A 0A7A </span><span class="colon">: </span><span class="hex">2A E4 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(FACLO)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET PTR AT STRING DESCRIPTOR</span>
<span class="number">0A7D 0A7D </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET FUNCTION #, SAVE THE STRING PTR</span>
<span class="number">0A7E 0A7E </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT THE FUNCTION # ON</span>
<span class="number">0A7F 0A7F </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[H,L]=TXTPTR</span>
<span class="number">0A80 0A80 </span><span class="colon">: </span><span class="hex">CD 54 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GETBYT            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[E]=VALUE OF FORMULA</span>
<span class="number">0A83 0A83 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TEXT POINTER INTO [D,E], [H,L]=INT VALUE OF SECOND ARGUMENT</span>
<span class="number">0A84 0A84 </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE INT VALUE OF SECOND ARG. [H,L]=FUNCTION NUMBER</span>
<span class="number">0A85 0A85 </span><span class="colon">: </span><span class="hex">18 08      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> FINGO             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DISPATCH TO FUNCTION</span>
<span class="number">0A87 0A87 </span><span class="colon">: </span><span class="hex">CD 37 0A   </span><span class="source">[M80] </span><span class="label">OKNORM:</span><span class="mnemonic"> call   </span> PARCHK            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHECK OUT THE ARGUMEN AND MAKE SURE ITS FOLLOWED BY ")"</span>
<span class="number">0A8A 0A8A </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[H,L]=FUNCTION # AND SAVE TEXT POINTER</span>
<span class="number">0A8B 0A8B </span><span class="colon">: </span><span class="hex">11 49 0A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,LABBCK         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RETURN ADDRESS</span>
<span class="number">0A8E 0A8E </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE THEM REALLY COME BACK</span>
<span class="number">0A8F 0A8F </span><span class="colon">: </span><span class="hex">01 15 02   </span><span class="source">(M80) </span><span class="label">FINGO: </span><span class="mnemonic"> ld     </span> bc,FUNDSP         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FUNCTION DISPATCH TABLE</span>
<span class="number">0A92 0A92 </span><span class="colon">: </span><span class="hex">09         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,bc             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ADD ON THE OFFSET</span>
<span class="number">0A93 0A93 </span><span class="colon">: </span><span class="hex">4E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,(hl)            <span class="comment">;{M80} FASTER THAN "PUSH HL"</span>
<span class="number">0A94 0A94 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">0A95 0A95 </span><span class="colon">: </span><span class="hex">66         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,(hl)            <span class="comment">;      </span>
<span class="number">0A96 0A96 </span><span class="colon">: </span><span class="hex">69         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,c               <span class="comment">;      </span>
<span class="number">0A97 0A97 </span><span class="colon">: </span><span class="hex">E9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> (hl)              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GO PERFORM THE FUNCTION</span>
<span class="number">0A98 0A98 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0A98 0A98 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE FOLOWING ROUTINE IS CALLED FROM FIN</span>
<span class="number">0A98 0A98 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">TO SCAN LEADING SIGNS FOR NUMBERS.</span>
<span class="number">0A98 0A98 </span><span class="colon">: </span><span class="hex">15         </span><span class="source">[M80] </span><span class="label">MINPLS:</span><span class="mnemonic"> dec    </span> d                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET SIGN OF EXPONENT FLAG</span>
<span class="number">0A99 0A99 </span><span class="colon">: </span><span class="hex">FE A9      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> MINUTK            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NEGATIVE EXPONENT?</span>
<span class="number">0A9B 0A9B </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;      </span>
<span class="number">0A9C 0A9C </span><span class="colon">: </span><span class="hex">FE 2D      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> '-'               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NO, RESET FLAG</span>
<span class="number">0A9E 0A9E </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;      </span>
<span class="number">0A9F 0A9F </span><span class="colon">: </span><span class="hex">14         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> d                 <span class="comment">;      </span>
<span class="number">0AA0 0AA0 </span><span class="colon">: </span><span class="hex">FE 2B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> '+'               <span class="comment">;      </span>
<span class="number">0AA2 0AA2 </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;      </span>
<span class="number">0AA3 0AA3 </span><span class="colon">: </span><span class="hex">FE A8      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> PLUSTK            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IGNORE "+"</span>
<span class="number">0AA5 0AA5 </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;      </span>
<span class="number">0AA6 0AA6 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHECK IF LAST CHARACTER WAS A DIGIT</span>
<span class="number">0AA7 0AA7 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RETURN WITH NON-ZERO SET</span>
<span class="number">0AA8 0AA8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0AA8 0AA8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;AND and OR Operators                   </span>
<span class="number">0AA8 0AA8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">0AA8 0AA8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">DANDOR APPLIES THE "AND" AND "OR" OPERATOR</span>
<span class="number">0AA8 0AA8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND SHOULD BE USED TO IMPLEMENT ALL LOGICAL OPERATORS.</span>
<span class="number">0AA8 0AA8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">WHENEVER AN OPERATOR IS APPLIED, ITS PRECEDENCE IS IN [B].</span>
<span class="number">0AA8 0AA8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THIS FACT IS USED TO DISTINGUISH BETWEEN "AND" AND "OR".</span>
<span class="number">0AA8 0AA8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE RIGHT HAND ARGUMENT IS COERCED TO INTEGER, JUST AS</span>
<span class="number">0AA8 0AA8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE LEFT HAND ONE WAS WHEN IT WAS PUSHED ON THE STACK.</span>
<span class="number">0AA8 0AA8 </span><span class="colon">: </span><span class="hex">F6         </span><span class="source">[M65] </span><span class="label">OROP:  </span><span class="mnemonic"> byte   </span> $F6               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">OR $AF" TO SET THE PRECEDENCE "OR"=70</span>
<span class="number">0AA9 0AA9 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">[M65] </span><span class="label">ANDOP: </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;;leave 0 in A for AND</span>
<span class="number">0AAA 0AAA </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">[M80] </span><span class="label">DANDOR:</span><span class="mnemonic"> push   </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE PRECEDENCE or Operator...</span>
<span class="number">0AAB 0AAB </span><span class="colon">: </span><span class="hex">CD 75 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CHKNUM            <span class="comment">;</span><span class="source">[M65] </span><span class="comment">MUST BE NUMBER</span>
<span class="number">0AAE 0AAE </span><span class="colon">: </span><span class="hex">CD 82 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FRCINT            <span class="comment">;COERCE RIGHT HAND ARGUMENT TO INTEGER</span>
<span class="number">0AB1 0AB1 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;GET BACK THE PRECEDENCE TO DISTINGUISH "AND" AND "OR"</span>
<span class="number">0AB2 0AB2 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;      </span>
<span class="number">0AB3 0AB3 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;      </span>
<span class="number">0AB4 0AB4 </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;      </span>
<span class="number">0AB5 0AB5 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;      </span>
<span class="number">0AB6 0AB6 </span><span class="colon">: </span><span class="hex">CD 23 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVFR             <span class="comment">;      </span>
<span class="number">0AB9 0AB9 </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;      </span>
<span class="number">0ABA 0ABA </span><span class="colon">: </span><span class="hex">CD 82 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FRCINT            <span class="comment">;      </span>
<span class="number">0ABD 0ABD </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;      </span>
<span class="number">0ABE 0ABE </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;      </span>
<span class="number">0ABF 0ABF </span><span class="colon">: </span><span class="hex">79         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,c               <span class="comment">;      </span>
<span class="number">0AC0 0AC0 </span><span class="colon">: </span><span class="hex">21 21 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,GIVINT         <span class="comment">;{M80} PLACE TO JUMP WHEN DONE</span>
<span class="number">0AC3 0AC3 </span><span class="colon">: </span><span class="hex">C2 CB 0A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,NOTAND         <span class="comment">;      </span>
<span class="number">0AC6 0AC6 </span><span class="colon">: </span><span class="hex">A3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> and    </span> e                 <span class="comment">;      </span>
<span class="number">0AC7 0AC7 </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a               <span class="comment">;      </span>
<span class="number">0AC8 0AC8 </span><span class="colon">: </span><span class="hex">78         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,b               <span class="comment">;      </span>
<span class="number">0AC9 0AC9 </span><span class="colon">: </span><span class="hex">A2         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> and    </span> d                 <span class="comment">;      </span>
<span class="number">0ACA 0ACA </span><span class="colon">: </span><span class="hex">E9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> (hl)              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RETURN THE INTEGER [A,L]</span>
<span class="number">0ACB 0ACB </span><span class="colon">: </span><span class="hex">B3         </span><span class="source">[M80] </span><span class="label">NOTAND:</span><span class="mnemonic"> or     </span> e                 <span class="comment">;      </span>
<span class="number">0ACC 0ACC </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a               <span class="comment">;      </span>
<span class="number">0ACD 0ACD </span><span class="colon">: </span><span class="hex">78         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,b               <span class="comment">;      </span>
<span class="number">0ACE 0ACE </span><span class="colon">: </span><span class="hex">B2         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> d                 <span class="comment">;      </span>
<span class="number">0ACF 0ACF </span><span class="colon">: </span><span class="hex">E9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> (hl)              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RETURN THE INTEGER [A,L]</span>
<span class="number">0AD0 0AD0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0AD0 0AD0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">HERE TO BUILD AN ENTRY FOR A RELATIONAL OPERATOR</span>
<span class="number">0AD0 0AD0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">STRINGS ARE TREATED SPECIALLY. NUMERIC COMPARES ARE DIFFERENT</span>
<span class="number">0AD0 0AD0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">FROM MOST OPERATOR ENTRIES ONLY IN THE FACT THAT AT THE</span>
<span class="number">0AD0 0AD0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">BOTTOM INSTEAD OF HAVING RETAOP, DOCMP AND THE RELATIONAL</span>
<span class="number">0AD0 0AD0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">BITS ARE STORED. STRINGS HAVE STRCMP,THE POINTER AT THE STRING DESCRIPTOR,</span>
<span class="number">0AD0 0AD0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">DOCMP AND THE RELATIONAL BITS.    </span>
<span class="number">0AD0 0AD0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">0AD0 0AD0 </span><span class="colon">: </span><span class="hex">21 E2 0A   </span><span class="source">[M80] </span><span class="label">FINREL:</span><span class="mnemonic"> ld     </span> hl,FINREA                
<span class="number">0AD3 0AD3 </span><span class="colon">: </span><span class="hex">3A AB 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(VALTYP)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF WE HAVE A NUMERIC COMPARE</span>
<span class="number">0AD6 0AD6 </span><span class="colon">: </span><span class="hex">1F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rra    </span>                   <span class="comment">;{M65} GET VALUE TYPE INTO CARRY</span>
<span class="number">0AD7 0AD7 </span><span class="colon">: </span><span class="hex">7A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,d               <span class="comment">;      </span>
<span class="number">0AD8 0AD8 </span><span class="colon">: </span><span class="hex">17         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rla    </span>                   <span class="comment">;{M65} PUT VALTYP INTO LOW ORDER BIT OF MASK</span>
<span class="number">0AD9 0AD9 </span><span class="colon">: </span><span class="hex">5F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DISPATCH OFFSET FOR COMPARES IN APPLOP</span>
<span class="number">0ADA 0ADA </span><span class="colon">: </span><span class="hex">16 64      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,100             <span class="comment">;{MM80] [A]=OLD PRECEDENCE</span>
<span class="number">0ADC 0ADC </span><span class="colon">: </span><span class="hex">78         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,b               <span class="comment">;      </span>
<span class="number">0ADD 0ADD </span><span class="colon">: </span><span class="hex">BA         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> d                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RELATIONALS HAVE PRECEDENCE 100</span>
<span class="number">0ADE 0ADE </span><span class="colon">: </span><span class="hex">D0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">APPLY EARLIER OPERATOR IF IT HAS HIGHER PRECEDENCE</span>
<span class="number">0ADF 0ADF </span><span class="colon">: </span><span class="hex">C3 CB 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> FINTMP            <span class="comment">;      </span>
<span class="number">0AE2 0AE2 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0AE2 0AE2 </span><span class="colon">: </span><span class="hex">E4 0A      </span><span class="source">      </span><span class="label">FINREA:</span><span class="mnemonic"> word   </span> FINRE2                   
<span class="number">0AE4 0AE4 </span><span class="colon">: </span><span class="hex">79         </span><span class="source">(M65) </span><span class="label">FINRE2:</span><span class="mnemonic"> ld     </span> a,c                      
<span class="number">0AE5 0AE5 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                        
<span class="number">0AE6 0AE6 </span><span class="colon">: </span><span class="hex">1F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rra    </span>                          
<span class="number">0AE7 0AE7 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                       
<span class="number">0AE8 0AE8 </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                       
<span class="number">0AE9 0AE9 </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                       
<span class="number">0AEA 0AEA </span><span class="colon">: </span><span class="hex">CD 77 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CHKVAL            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF WE HAVE A NUMERIC COMPARE</span>
<span class="number">0AED 0AED </span><span class="colon">: </span><span class="hex">21 FB 0A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,DOCMP          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ROUTINE TO TAKE COMPARE ROUTINE RESULTAND RELATIONAL BITS AND RETURN THE ANSWER</span>
<span class="number">0AF0 0AF0 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                       
<span class="number">0AF1 0AF1 </span><span class="colon">: </span><span class="hex">CA 5B 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,FCOMP           <span class="comment">;{M89} COMPARE NUMBERS RETURNING $7F IF FAC IS LESS THAN THE REGISTERS</span>
<span class="number">0AF4 0AF4 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                        
<span class="number">0AF5 0AF5 </span><span class="colon">: </span><span class="hex">32 AB 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (VALTYP),a               
<span class="number">0AF8 0AF8 </span><span class="colon">: </span><span class="hex">C3 FC 0D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> STRCMP                   
<span class="number">0AFB 0AFB </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0AFB 0AFB </span><span class="colon">: </span><span class="hex">3C         </span><span class="source">[M80] </span><span class="label">DOCMP: </span><span class="mnemonic"> inc    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SETUP BITS</span>
<span class="number">0AFC 0AFC </span><span class="colon">: </span><span class="hex">8F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> adc    </span> a,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">4=LESS 2=EQUAL 1=GREATER</span>
<span class="number">0AFD 0AFD </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WHAT DID HE WANT?</span>
<span class="number">0AFE 0AFE </span><span class="colon">: </span><span class="hex">A0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> and    </span> b                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ANY BITS MATCH?</span>
<span class="number">0AFF 0AFF </span><span class="colon">: </span><span class="hex">C6 FF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,$FF             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAP 0 TO 0</span>
<span class="number">0B01 0B01 </span><span class="colon">: </span><span class="hex">9F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sbc    </span> a,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND ALL OTHERS TO 377</span>
<span class="number">0B02 0B02 </span><span class="colon">: </span><span class="hex">C3 F6 14   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> FLOAT             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CONVERT [A] TO AN INTEGER SIGNED</span>
<span class="number">0B05 0B05 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0B05 0B05 </span><span class="colon">: </span><span class="hex">16 5A      </span><span class="source">[M80] </span><span class="label">NOTER: </span><span class="mnemonic"> ld     </span> d,90              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"NOT" HAS PRECEDENCE 90, SO FORMULA EVALUATION</span>
<span class="number">0B07 0B07 </span><span class="colon">: </span><span class="hex">CD 88 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> LPOPER            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS ENTERED WITH A DUMMY ENTRY OF 90 ON THE STACK</span>
<span class="number">0B0A 0B0A </span><span class="colon">: </span><span class="hex">CD 75 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CHKNUM            <span class="comment">;</span><span class="source">[M65] </span><span class="comment">MUST BE NUMBER</span>
<span class="number">0B0D 0B0D </span><span class="colon">: </span><span class="hex">CD 82 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FRCINT            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">COERCE THE ARGUMENT TO INTEGER</span>
<span class="number">0B10 0B10 </span><span class="colon">: </span><span class="hex">7B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,e               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">COMPLEMENT [D,E]</span>
<span class="number">0B11 0B11 </span><span class="colon">: </span><span class="hex">2F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cpl    </span>                   <span class="comment">;      </span>
<span class="number">0B12 0B12 </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a               <span class="comment">;      </span>
<span class="number">0B13 0B13 </span><span class="colon">: </span><span class="hex">7A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,d               <span class="comment">;      </span>
<span class="number">0B14 0B14 </span><span class="colon">: </span><span class="hex">2F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cpl    </span>                   <span class="comment">;      </span>
<span class="number">0B15 0B15 </span><span class="colon">: </span><span class="hex">CD 21 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GIVINT            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">UPDATE THE FAC</span>
<span class="number">0B18 0B18 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">        ;[M80] FRMEVL, AFTER SEEING THE PRECEDENCE OF 90 THINKS IT IS APPLYING AN OPERATOR</span>
<span class="number">0B18 0B18 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">        ;[M80] SO IT HAS THE TEXT POINTER IN TEMP2 SO RETURN TO REFETCH IT</span>
<span class="number">0B18 0B18 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;      </span>
<span class="number">0B19 0B19 </span><span class="colon">: </span><span class="hex">C3 94 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> RETAOP            <span class="comment">;      </span>
<span class="number">0B1C 0B1C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0B1C 0B1C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;{M80} SUBTRACTS [D,E] FROM [H,L] AND FLOAT THE RESULT LEAVING IT IN FAC</span>
<span class="number">0B1C 0B1C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;;Named GIVDBL in [M80] and [GWB] but Aquarius only supports floats</span>
<span class="number">0B1C 0B1C </span><span class="colon">: </span><span class="hex">7D         </span><span class="source">      </span><span class="label">GIVFLT:</span><span class="mnemonic"> ld     </span> a,l               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[H,L]=[H,L]-[D,E]</span>
<span class="number">0B1D 0B1D </span><span class="colon">: </span><span class="hex">93         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> e                 <span class="comment">;      </span>
<span class="number">0B1E 0B1E </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a               <span class="comment">;      </span>
<span class="number">0B1F 0B1F </span><span class="colon">: </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,h               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE HIGH BYTE IN [H]</span>
<span class="number">0B20 0B20 </span><span class="colon">: </span><span class="hex">9A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sbc    </span> a,d               <span class="comment">;      </span>
<span class="number">0B21 0B21 </span><span class="colon">: </span><span class="hex">41         </span><span class="source">[M80] </span><span class="label">GIVINT:</span><span class="mnemonic"> ld     </span> b,c               <span class="comment">;;Float Integer MSB=[A], LSB=[C]</span>
<span class="number">0B22 0B22 </span><span class="colon">: </span><span class="hex">50         </span><span class="source">[~~~] </span><span class="label">FLOATB:</span><span class="mnemonic"> ld     </span> d,b               <span class="comment">;;Float Integer MSB=[A], LSB=[B]</span>
<span class="number">0B23 0B23 </span><span class="colon">= </span><span class="hex">1E 00      </span><span class="source">[~~~] </span><span class="label">FLOATD:</span><span class="mnemonic"> ld     </span> e,0               <span class="comment">;;Float Integer MSB=[A], LSB=[D]</span>
<span class="number">0B25 0B25 </span><span class="colon">: </span><span class="hex">21 AB 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,VALTYP         <span class="comment">;      </span>
<span class="number">0B28 0B28 </span><span class="colon">: </span><span class="hex">73         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),e            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET VALTYP TO "FLOATING POINT"</span>
<span class="number">0B29 0B29 </span><span class="colon">: </span><span class="hex">06 90      </span><span class="source">{M80} </span><span class="label">INEGAD:</span><span class="mnemonic"> ld     </span> b,144             <span class="comment">;{M80} SET EXPONENT</span>
<span class="number">0B2B 0B2B </span><span class="colon">: </span><span class="hex">C3 FB 14   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> FLOATR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GO FLOAT THE NUMBER</span>
<span class="number">02BE 02BE </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0B2E 0B2E </span><span class="colon">: </span><span class="hex">3A 46 38   </span><span class="source">[M80] </span><span class="label">LPOS:  </span><span class="mnemonic"> ld     </span> a,(LPTPOS)        <span class="comment">;{M80} GET PRINT HEAD POSITION</span>
<span class="number">0B31 0B31 </span><span class="colon">: </span><span class="hex">18 03      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> SNGFLT            <span class="comment">;      </span>
<span class="number">0B33 0B33 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0B33 0B33 </span><span class="colon">: </span><span class="hex">3A 00 38   </span><span class="source">[M80] </span><span class="label">POS:   </span><span class="mnemonic"> ld     </span> a,(TTYPOS)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET TELETYPE POSITION</span>
<span class="number">0B36 0B36 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0B36 0B36 </span><span class="colon">: </span><span class="hex">47         </span><span class="source">[M80] </span><span class="label">SNGFLT:</span><span class="mnemonic"> ld     </span> b,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE [A] AN UNSIGNED INTEGER</span>
<span class="number">0B37 0B37 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;      </span>
<span class="number">0B38 0B38 </span><span class="colon">: </span><span class="hex">C3 22 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> FLOATB            <span class="comment">;      </span>
<span class="number">0B3B 0B3B </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0B3B 0B3B </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;DEF FNx Stub                           </span>
<span class="number">0B3B 0B3B </span><span class="colon">: </span><span class="hex">F7         </span><span class="source">[M80] </span><span class="label">DEF:   </span><span class="mnemonic"> rst    </span> HOOKDO            <span class="comment">;;If not hooked</span>
<span class="number">0B3C 0B3C </span><span class="colon">: </span><span class="hex">0F         </span><span class="source">{~~~} </span><span class="label">HOOK15:</span><span class="mnemonic"> byte   </span> 15                       
<span class="number">0B3D 0B3D </span><span class="colon">: </span><span class="hex">C3 C4 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> SNERR             <span class="comment">;;Syntax Error</span>
<span class="number">0B40 0B40 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0B40 0B40 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;FNx Stub                               </span>
<span class="number">0B40 0B40 </span><span class="colon">: </span><span class="hex">F7         </span><span class="source">[M80] </span><span class="label">FNDOER:</span><span class="mnemonic"> rst    </span> HOOKDO            <span class="comment">;;If not hooked</span>
<span class="number">0B41 0B41 </span><span class="colon">: </span><span class="hex">10         </span><span class="source">{~~~} </span><span class="label">HOOK16:</span><span class="mnemonic"> byte   </span> 16                       
<span class="number">0B42 0B42 </span><span class="colon">: </span><span class="hex">C3 C4 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> SNERR             <span class="comment">;;Syntax Error</span>
<span class="number">0B45 0B45 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0B45 0B45 </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">SUBROUTINE TO SEE IF WE ARE IN DIRECT MODE AND COMPLAIN IF SO.</span>
<span class="number">0B45 0B45 </span><span class="colon">= </span><span class="hex">E5         </span><span class="source">[M65] </span><span class="label">ERRDIR:</span><span class="mnemonic"> push   </span> hl                <span class="comment">;      </span>
<span class="number">0B46 0B46 </span><span class="colon">: </span><span class="hex">2A 4D 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(CURLIN)       <span class="comment">;</span><span class="source">[M65] </span><span class="comment">DIR MODE HAS [CURLIN]=$FFFF</span>
<span class="number">0B49 0B49 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M65] </span><span class="comment">SO NOW, IS RESULT ZERO?</span>
<span class="number">0B4A 0B4A </span><span class="colon">: </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,h               <span class="comment">;      </span>
<span class="number">0B4B 0B4B </span><span class="colon">: </span><span class="hex">B5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> l                 <span class="comment">;      </span>
<span class="number">0B4C 0B4C </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;      </span>
<span class="number">0B4D 0B4D </span><span class="colon">: </span><span class="hex">C0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nz                <span class="comment">;</span><span class="source">[M65] </span><span class="comment">YES</span>
<span class="number">0B4E 0B4E </span><span class="colon">: </span><span class="hex">1E 16      </span><span class="source">{~~~} </span><span class="label">IDERR: </span><span class="mnemonic"> ld     </span> e,ERRID           <span class="comment">;</span><span class="source">[M65] </span><span class="comment">INPUT DIRECT ERROR CODE</span>
<span class="number">0B50 0B50 </span><span class="colon">: </span><span class="hex">C3 DB 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> ERROR             <span class="comment">;      </span>
<span class="number">0B53 0B53 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0B53 0B53 </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">[M80] </span><span class="label">GTBYTC:</span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;      </span>
<span class="number">0B54 0B54 </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Evaluate 8 bit Numeric Value           </span>
<span class="number">0B54 0B54 </span><span class="colon">= </span><span class="hex">CD 72 09   </span><span class="source">[M80] </span><span class="label">GETBYT:</span><span class="mnemonic"> call   </span> FRMNUM            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">EVALUATE A FORMULA</span>
<span class="number">0B57 0B57 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Convert FAC to Byte in [A]             </span>
<span class="number">0B57 0B57 </span><span class="colon">: </span><span class="hex">CD 7E 06   </span><span class="source">[M80] </span><span class="label">CONINT:</span><span class="mnemonic"> call   </span> INTFR2            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CONVERT THE FAC TO AN INTEGER IN [D,E]</span>
<span class="number">0B5A 0B5A </span><span class="colon">: </span><span class="hex">7A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,d               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET THE CONDITION CODES BASED ON THE HIGH ORDER</span>
<span class="number">0B5B 0B5B </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;      </span>
<span class="number">0B5C 0B5C </span><span class="colon">: </span><span class="hex">C2 97 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,FCERR          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WASN'T ERROR</span>
<span class="number">0B5F 0B5F </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">fUNCTIONS CAN GET HERE WITH BAD [H,L] BUT NOT SERIOUS</span>
<span class="number">0B60 0B60 </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET CONDITION CODES ON TERMINATOR</span>
<span class="number">0B61 0B61 </span><span class="colon">: </span><span class="hex">7B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,e               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RETURN THE RESULT IN [A] AND [E]</span>
<span class="number">0B62 0B62 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">0B63 0B63 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0B63 0B63 </span><span class="colon">: </span><span class="hex">CD 82 06   </span><span class="source">[M80] </span><span class="label">PEEK:  </span><span class="mnemonic"> call   </span> FRCINT            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET AN INTEGER IN [D,E]</span>
<span class="number">0B66 0B66 </span><span class="colon">: </span><span class="hex">CD 88 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> PROMEM            <span class="comment">;{M80} DONT ALLOW IF PROTECTED MEMORY</span>
<span class="number">0B69 0B69 </span><span class="colon">: </span><span class="hex">1A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(de)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE VALUE TO RETURN</span>
<span class="number">0B6A 0B6A </span><span class="colon">: </span><span class="hex">C3 36 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> SNGFLT            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND FLOAT IT</span>
<span class="number">0B6D 0B6D </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0B6D 0B6D </span><span class="colon">: </span><span class="hex">CD 72 09   </span><span class="source">[M80] </span><span class="label">POKE:  </span><span class="mnemonic"> call   </span> FRMNUM            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">READ A FORMULA</span>
<span class="number">0B70 0B70 </span><span class="colon">: </span><span class="hex">CD 82 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FRCINT            <span class="comment">;{M80} FORCE VALUE INTO INT IN [D,E]</span>
<span class="number">0B73 0B73 </span><span class="colon">: </span><span class="hex">CD 88 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> PROMEM            <span class="comment">;{M80} DONT ALLOW IF PROTECTED MEMORY</span>
<span class="number">0B76 0B76 </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT VALUE ON STACK</span>
<span class="number">0B77 0B77 </span><span class="colon">: </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK            <span class="comment">;      </span>
<span class="number">0B78 0B78 </span><span class="colon">: </span><span class="hex">2C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> ','               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHECK FOR A COMMA</span>
<span class="number">0B79 0B79 </span><span class="colon">: </span><span class="hex">CD 54 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GETBYT                   
<span class="number">0B7C 0B7C </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE ADDRESS BACK</span>
<span class="number">0B7D 0B7D </span><span class="colon">: </span><span class="hex">12         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (de),a            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">STORE IT AWAY</span>
<span class="number">0B7E 0B7E </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SCANNED EVERYTHING</span>
<span class="number">0B7F 0B7F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0B7F 0B7F </span><span class="colon">: </span><span class="hex">CD 85 09   </span><span class="source">{~~~} </span><span class="label">FRMINT:</span><span class="mnemonic"> call   </span> FRMEVL            <span class="comment">;;Orphan Code: 9 Bytes</span>
<span class="number">0B82 0B82 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                       
<span class="number">0B83 0B83 </span><span class="colon">: </span><span class="hex">CD 82 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FRCINT                   
<span class="number">0B86 0B86 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">0B87 0B87 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">0B88 0B88 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0B88 0B88 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Check for illegal Address in PEEK and POKE</span>
<span class="number">0B88 0B88 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;;Label based on {M80] PRODIR           </span>
<span class="number">0B88 0B88 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">PROMEM:</span><span class="mnemonic"> push   </span> hl                <span class="comment">;      </span>
<span class="number">0B89 0B89 </span><span class="colon">: </span><span class="hex">21 FF 2F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,$2FFF          <span class="comment">;      </span>
<span class="number">0B8C 0B8C </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;{M80} IS [D.E] LESS THAN 3000H?</span>
<span class="number">0B8D 0B8D </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;      </span>
<span class="number">0B8E 0B8E </span><span class="colon">: </span><span class="hex">D2 97 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,FCERR          <span class="comment">;{M80} YES, BLOW HIM UP NOW</span>
<span class="number">0B91 0B91 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">0B92 0B92 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0B92 0B92 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THIS IS THE BLOCK TRANSFER ROUTINE</span>
<span class="number">0B92 0B92 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IT MAKES SPACE BY SHOVING EVERYTHING FORWARD</span>
<span class="number">0B92 0B92 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">0B92 0B92 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">[H,L] = DESTINATION OF HIGH ADDRESS</span>
<span class="number">0B92 0B92 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">[D,E] = LOW ADDRESS TO BE TRANSFERRED</span>
<span class="number">0B92 0B92 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">[B,C] = HIGH ADDRESS TO BE TRANSFERRED</span>
<span class="number">0B92 0B92 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">0B92 0B92 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">A CHECK IS MADE TO MAKE SURE A REASONABLE AMOUNT</span>
<span class="number">0B92 0B92 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">OF SPACE REMAINS BETWEEN THE TOP OF THE STACK AND</span>
<span class="number">0B92 0B92 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE HIGHEST LOCATION TRANSFERRED INTO</span>
<span class="number">0B92 0B92 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">0B92 0B92 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ON EXIT [H,L]=[D,E]=LOW [B,C]=LOCATION LOW WAS MOVED INTO</span>
<span class="number">0B92 0B92 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">0B92 0B92 </span><span class="colon">: </span><span class="hex">CD A9 0B   </span><span class="source">[M80] </span><span class="label">BLTU:  </span><span class="mnemonic"> call   </span> REASON            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHECK DESTINATION TO MAKE SURE STACK WON'T BE OVERRUN</span>
<span class="number">0B95 0B95 </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">;Execute Block Transfer                  </span>
<span class="number">0B95 0B95 </span><span class="colon">= </span><span class="hex">C5         </span><span class="source">[M80] </span><span class="label">BLTUC: </span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">EXCHANGE [B,C] AND [H,L]</span>
<span class="number">0B96 0B96 </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;      </span>
<span class="number">0B97 0B97 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;      </span>
<span class="number">0B98 0B98 </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">(M80) </span><span class="label">BLTLOP:</span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF WE ARE DONE</span>
<span class="number">0B99 0B99 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE WORD TO TRANSFER</span>
<span class="number">0B9A 0B9A </span><span class="colon">: </span><span class="hex">02         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (bc),a            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TRANSFER IT</span>
<span class="number">0B9B 0B9B </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;      </span>
<span class="number">0B9C 0B9C </span><span class="colon">: </span><span class="hex">0B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> bc                <span class="comment">;      </span>
<span class="number">0B9D 0B9D </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">BACKUP FOR NEXT GUY</span>
<span class="number">0B9E 0B9E </span><span class="colon">: </span><span class="hex">18 F8      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> BLTLOP            <span class="comment">;      </span>
<span class="number">0BA0 0BA0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0BA0 0BA0 </span><span class="colon">- </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Check Stack Size                       </span>
<span class="number">0BA0 0BA0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THIS ROUTINE IS USED TO MAKE SURE A CERTAIN NUMBER</span>
<span class="number">0BA0 0BA0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">OF LOCATIONS REMAIN AVAILABLE FOR THE</span>
<span class="number">0BA0 0BA0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">STACK. THE CALL IS :              </span>
<span class="number">0BA0 0BA0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">      LD      C,number of 2 byte entries necessary</span>
<span class="number">0BA0 0BA0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">      CALL    GETSTK              </span>
<span class="number">0BA0 0BA0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">0BA0 0BA0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THIS ROUTINE MUST BE CALLED BY ANY ROUTINE WHICH PUTS</span>
<span class="number">0BA0 0BA0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">AN ARBITRARY AMOUNT OF STUFF ON THE STACK</span>
<span class="number">0BA0 0BA0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">(I.E. ANY RECURSIVE ROUTINE LIKE FRMEVL)</span>
<span class="number">0BA0 0BA0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IT IS ALSO CALLED BY ROUTINES SUCH AS "GOSUB" AND "FOR"</span>
<span class="number">0BA0 0BA0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">WHICH MAKE PERMANENT ENTRIES ON THE STACK</span>
<span class="number">0BA0 0BA0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ROUTINES WHICH MERELY USE AND FREE UP THE GUARANTEED</span>
<span class="number">0BA0 0BA0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">NUMLEV STACK LOCATIONS NEED NOT CALL THIS</span>
<span class="number">0BA0 0BA0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">0BA0 0BA0 </span><span class="colon">= </span><span class="hex">E5         </span><span class="source">      </span><span class="label">GETSTK:</span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE [H,L]</span>
<span class="number">0BA1 0BA1 </span><span class="colon">: </span><span class="hex">2A DA 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(STREND)       <span class="comment">;      </span>
<span class="number">0BA4 0BA4 </span><span class="colon">: </span><span class="hex">06 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,0               <span class="comment">;      </span>
<span class="number">0BA6 0BA6 </span><span class="colon">: </span><span class="hex">09         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,bc             <span class="comment">;      </span>
<span class="number">0BA7 0BA7 </span><span class="colon">: </span><span class="hex">09         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,bc             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF WE CAN HAVE THIS MANY</span>
<span class="number">0BA8 0BA8 </span><span class="colon">: </span><span class="hex">3E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $3E               <span class="comment">;;"LD A," over next instruction</span>
<span class="number">0BA9 0BA9 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">REASON:</span><span class="mnemonic"> push   </span> hl                <span class="comment">;;Save text pointer</span>
<span class="number">0BAA 0BAA </span><span class="colon">: </span><span class="hex">3E D0      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,208             <span class="comment">;</span><span class="source">[M80] </span><span class="comment"> EXAMINE [H,L] TO MAKE SURE</span>
<span class="number">0BAC 0BAC </span><span class="colon">: </span><span class="hex">95         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> l                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment"> AT LEAST 104 LOCATIONS</span>
<span class="number">0BAD 0BAD </span><span class="colon">: </span><span class="hex">6F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment"> REMAIN BETWEEN IT AND THE</span>
<span class="number">0BAE 0BAE </span><span class="colon">: </span><span class="hex">3E FF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,$FF             <span class="comment">;</span><span class="source">[M80] </span><span class="comment"> TOP OF THE STACK</span>
<span class="number">0BB0 0BB0 </span><span class="colon">: </span><span class="hex">9C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sbc    </span> a,h               <span class="comment">;      </span>
<span class="number">0BB1 0BB1 </span><span class="colon">: </span><span class="hex">67         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NOW SEE IF [SP] IS LARGER</span>
<span class="number">0BB2 0BB2 </span><span class="colon">: </span><span class="hex">38 03      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,OMERR           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IN CASE [H,L] WAS TOO BIG</span>
<span class="number">0BB4 0BB4 </span><span class="colon">: </span><span class="hex">39         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,sp             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF SO, CARRY WILL BE SET</span>
<span class="number">0BB5 0BB5 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET BACK ORIGINAL [H,L]</span>
<span class="number">0BB6 0BB6 </span><span class="colon">: </span><span class="hex">D8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> c                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WAS OK?</span>
<span class="number">0BB7 0BB7 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0BB7 0BB7 </span><span class="colon">= </span><span class="hex">11 0C 00   </span><span class="source">[M80] </span><span class="label">OMERR: </span><span class="mnemonic"> ld     </span> de,ERROM          <span class="comment">;;"OUT OF MEMORY" Error</span>
<span class="number">0BBA 0BBA </span><span class="colon">: </span><span class="hex">C3 DB 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> ERROR             <span class="comment">;      </span>
<span class="number">0BBD 0BBD </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0BBD 0BBD </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE "NEW" COMMAND CLEARS THE PROGRAM TEXT AS WELL AS VARIABLE SPACE</span>
<span class="number">0BBD 0BBD </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;SCRATH is the entry point from the Statement Dispatch Table for the NEW command</span>
<span class="number">0BBD 0BBD </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;SCRTCH is the entry point from an aborted CLOAD command</span>
<span class="number">0BBD 0BBD </span><span class="colon">: </span><span class="hex">C0         </span><span class="source">[M80] </span><span class="label">SCRATH:</span><span class="mnemonic"> ret    </span> nz                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE SURE THERE IS A TERMINATOR</span>
<span class="number">0BBE 0BBE </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Execute NEW Command                    </span>
<span class="number">0BBE 0BBE </span><span class="colon">= </span><span class="hex">F7         </span><span class="source">[M80] </span><span class="label">SCRTCH:</span><span class="mnemonic"> rst    </span> HOOKDO            <span class="comment">;Call Hook Dispatch Routine</span>
<span class="number">0BBF 0BBF </span><span class="colon">: </span><span class="hex">0C         </span><span class="source">{~~~} </span><span class="label">HOOK12:</span><span class="mnemonic"> byte   </span> 12                <span class="comment">;      </span>
<span class="number">0BC0 0BC0 </span><span class="colon">: </span><span class="hex">2A 4F 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(TXTTAB)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET POINTER TO START OF TEXT</span>
<span class="number">0BC3 0BC3 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET [A]=0</span>
<span class="number">0BC4 0BC4 </span><span class="colon">: </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE AT END OFF TEXT</span>
<span class="number">0BC5 0BC5 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">BUMP POINTER</span>
<span class="number">0BC6 0BC6 </span><span class="colon">: </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE ZERO</span>
<span class="number">0BC7 0BC7 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">BUMP POINTER</span>
<span class="number">0BC8 0BC8 </span><span class="colon">: </span><span class="hex">22 D6 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (VARTAB),hl       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NEW START OF VARIABLES</span>
<span class="number">0BC8 0BC8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0BC8 0BC8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Clear Variablea, Reset Stack, and Reset Text Pointer</span>
<span class="number">0BC8 0BC8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Leaves BASIC program intact            </span>
<span class="number">0BC8 0BC8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Entry Point from RUN and FINI          </span>
<span class="number">0BCB 0BCB </span><span class="colon">: </span><span class="hex">2A 4F 38   </span><span class="source">[M80] </span><span class="label">RUNC:  </span><span class="mnemonic"> ld     </span> hl,(TXTTAB)     ;[M80] POINT AT THE START OF TEXT
<span class="number">0BCE 0BCE </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl              ;        
<span class="number">0BCF 0BCF </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0BCF 0BCF </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">CLEARC IS A SUBROUTINE WHICH INITIALIZES THE VARIABLE AND</span>
<span class="number">0BCF 0BCF </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ARRAY SPACE BY RESETING ARYTAB [THE END OF SIMPLE VARIABLE SPACE]</span>
<span class="number">0BCF 0BCF </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND STREND [THE END OF ARRAY STORAGE]. IT FALLS INTO STKINI</span>
<span class="number">0BCF 0BCF </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">WHICH RESETS THE STACK. [H,L] IS PRESERVED.</span>
<span class="number">0BCF 0BCF </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">0BCF 0BCF </span><span class="colon">: </span><span class="hex">22 CE 38   </span><span class="source">[M80] </span><span class="label">CLEARC:</span><span class="mnemonic"> ld     </span> (SAVTXT),hl       <span class="comment">;      </span>
<span class="number">0BD2 0BD2 </span><span class="colon">: </span><span class="hex">2A AD 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(MEMSIZ)       <span class="comment">;</span><span class="source">[M65] </span><span class="comment">FREE UP STRING SPACE</span>
<span class="number">0BD5 0BD5 </span><span class="colon">: </span><span class="hex">22 C1 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (FRETOP),hl       <span class="comment">;      </span>
<span class="number">0BD8 0BD8 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">{M80} </span><span class="label">GODFRE:</span><span class="mnemonic"> xor    </span> a                 <span class="comment">;      </span>
<span class="number">0BD9 0BD9 </span><span class="colon">: </span><span class="hex">CD 05 0C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> RESTOR            <span class="comment">;</span><span class="source">[M65] </span><span class="comment">RESTOR DATA</span>
<span class="number">0BDC 0BDC </span><span class="colon">: </span><span class="hex">2A D6 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(VARTAB)       <span class="comment">;</span><span class="source">[M65] </span><span class="comment">LIBERATE THE</span>
<span class="number">0BDF 0BDF </span><span class="colon">: </span><span class="hex">22 D8 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (ARYTAB),hl       <span class="comment">;</span><span class="source">[M65] </span><span class="comment">VARIABLES AND</span>
<span class="number">0BE2 0BE2 </span><span class="colon">: </span><span class="hex">22 DA 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (STREND),hl       <span class="comment">;</span><span class="source">[M65] </span><span class="comment">ARRAYS</span>
<span class="number">0BE5 0BE5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0BE5 0BE5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;; Reset Stack Pointer                   </span>
<span class="number">0BE5 0BE5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">STKINI RESETS THE STACK POINTER ELIMINATING</span>
<span class="number">0BE5 0BE5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">GOSUB & FOR CONTEXT.  STRING TEMPORARIES ARE FREED</span>
<span class="number">0BE5 0BE5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">UP, SUBFLG IS RESET, CONTINUING IS DISALLOWED,</span>
<span class="number">0BE5 0BE5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND A DUMMY ENTRY IS PUT ON THE STACK. THIS IS SO</span>
<span class="number">0BE5 0BE5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">FNDFOR WILL ALWAYS FIND A NON-"FOR" ENTRY AT THE BOTTOM</span>
<span class="number">0BE5 0BE5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">OF THE STACK. [A]=0 AND [D,E] IS PRESERVED.</span>
<span class="number">0BE5 0BE5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">0BE5 0BE5 </span><span class="colon">= </span><span class="hex">C1         </span><span class="source">[M80] </span><span class="label">STKINI:</span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET RETURN ADDRESS HERE</span>
<span class="number">0BE6 0BE6 </span><span class="colon">: </span><span class="hex">2A 4B 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(TOPMEM)       <span class="comment">;      </span>
<span class="number">0BE9 0BE9 </span><span class="colon">: </span><span class="hex">F9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> sp,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">INITIALIZE STACK</span>
<span class="number">0BEA      </span><span class="colon">: </span><span class="hex">21 B1 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,TEMPST                
<span class="number">0BED      </span><span class="colon">: </span><span class="hex">22 AF 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (TEMPPT),hl              
<span class="number">     0BEA </span><span class="colon">: </span><span class="hex">CD D8 1F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> STKSAV            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE SURE SAVSTK OK JUST IN CASE.</span>
<span class="number">     0BED </span><span class="colon">: </span><span class="hex">22 AF 38   </span><span class="source">{M80} </span><span class="label">STKERR:</span><span class="mnemonic"> ld     </span> (TEMPPT),hl       <span class="comment">;      </span>
<span class="number">0BF0 0BF0 </span><span class="colon">: </span><span class="hex">CD BE 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FINLPT            <span class="comment">;{M80] BACK TO NORMAL PRINT MODE</span>
<span class="number">0BF3 0BF3 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ZERO OUT A</span>
<span class="number">0BF4 0BF4 </span><span class="colon">: </span><span class="hex">6F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ZERO OUT H</span>
<span class="number">0BF5 0BF5 </span><span class="colon">: </span><span class="hex">67         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ZERO OUT L</span>
<span class="number">0BF6 0BF6 </span><span class="colon">: </span><span class="hex">22 D4 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (OLDTXT),hl       <span class="comment">;      </span>
<span class="number">0BF9 0BF9 </span><span class="colon">: </span><span class="hex">32 CB 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (SUBFLG),a        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALLOW SUBSCRIPTS</span>
<span class="number">0BFC 0BFC </span><span class="colon">: </span><span class="hex">22 DE 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (VARNAM),hl       <span class="comment">;      </span>
<span class="number">0BFF 0BFF </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT ZERO (NON $FOR,$GOSUB) ON THE STACK</span>
<span class="number">0C00 0C00 </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT RETURN ADDRESS BACK ON</span>
<span class="number">0C01 0C01 </span><span class="colon">: </span><span class="hex">2A CE 38   </span><span class="source">[M80] </span><span class="label">GTMPRT:</span><span class="mnemonic"> ld     </span> hl,(SAVTXT)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET SAVED [H,L]</span>
<span class="number">0C04 0C04 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">0C05 0C05 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0C05 0C05 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;The RESTORE Command                    </span>
<span class="number">0C05 0C05 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">[M80] </span><span class="label">RESTOR:</span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE [H,L] IN [D,E]</span>
<span class="number">0C06 0C06 </span><span class="colon">: </span><span class="hex">2A 4F 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(TXTTAB)       <span class="comment">;      </span>
<span class="number">0C09 0C09 </span><span class="colon">: </span><span class="hex">28 0E      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,BGNRST          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RESTORE DATA POINTER TO BEGINNING OF PROGRAM</span>
<span class="number">0C0B 0C0B </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TEXT POINTER BACK TO [H,L]</span>
<span class="number">0C0C 0C0C </span><span class="colon">: </span><span class="hex">CD 9C 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SCNLIN            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE FOLLOWING LINE NUMBER</span>
<span class="number">0C0F 0C0F </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE TEXT POINTER</span>
<span class="number">0C10 0C10 </span><span class="colon">: </span><span class="hex">CD 9F 04   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FNDLIN            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FIND THE LINE NUMBER</span>
<span class="number">0C13 0C13 </span><span class="colon">: </span><span class="hex">60         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET POINTER TO LINE IN [H,L]</span>
<span class="number">0C14 0C14 </span><span class="colon">: </span><span class="hex">69         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,c               <span class="comment">;      </span>
<span class="number">0C15 0C15 </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TEXT POINTER BACK TO [D,E]</span>
<span class="number">0C16 0C16 </span><span class="colon">: </span><span class="hex">D2 F3 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,USERR          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SHOULD HAVE FOUND LINE</span>
<span class="number">0C19 0C19 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">(M80) </span><span class="label">BGNRST:</span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">INITIALIZE DATPTR TO [TXTTAB]-1</span>
<span class="number">0C1A 0C1A </span><span class="colon">: </span><span class="hex">22 DC 38   </span><span class="source">[M80] </span><span class="label">RESFIN:</span><span class="mnemonic"> ld     </span> (DATPTR),hl       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">READ FINISHES COME TO RESFIN</span>
<span class="number">0C1D 0C1D </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE TEXT POINTER BACK</span>
<span class="number">0C1E 0C1E </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">0C1F 0C1F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0C1F 0C1F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;The STOP and END Statements            </span>
<span class="number">0C1F 0C1F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;STOPC is entry point to END from WARMST</span>
<span class="number">0C1F 0C1F </span><span class="colon">: </span><span class="hex">C0         </span><span class="source">[M80] </span><span class="label">STOP:  </span><span class="mnemonic"> ret    </span> nz                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE SURE "STOP" STATEMENTS HAVE A TERMINATOR</span>
<span class="number">0C20 0C20 </span><span class="colon">: </span><span class="hex">F6         </span><span class="source">[M65] </span><span class="label">STOPC: </span><span class="mnemonic"> byte   </span> $F6               <span class="comment">;;"OR" to skip next instruction</span>
<span class="number">0C21 0C21 </span><span class="colon">: </span><span class="hex">C0         </span><span class="source">[M80] </span><span class="label">ENDS:  </span><span class="mnemonic"> ret    </span> nz                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE SURE "END" STATEMENTS HAVE A TERMINATOR</span>
<span class="number">0C22 0C22 </span><span class="colon">: </span><span class="hex">22 CE 38   </span><span class="source">{M80} </span><span class="label">CONSTP:</span><span class="mnemonic"> ld     </span> (SAVTXT),hl       <span class="comment">;      </span>
<span class="number">0C25 0C25 </span><span class="colon">: </span><span class="hex">21         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $21               <span class="comment">;{M80} SKIP OVER OR USING "LD H,"</span>
<span class="number">0C26 0C26 </span><span class="colon">: </span><span class="hex">F6 FF      </span><span class="source">[M80] </span><span class="label">STPEND:</span><span class="mnemonic"> or     </span> $FF               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET NON-ZERO TO FORCE PRINTING OF BREAK MESSAGE</span>
<span class="number">0C28 0C28 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POP OFF NEWSTT ADDRESS</span>
<span class="number">0C29 0C29 </span><span class="colon">: </span><span class="hex">2A 4D 38   </span><span class="source">[M80] </span><span class="label">ENDCON:</span><span class="mnemonic"> ld     </span> hl,(CURLIN)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE CURLIN</span>
<span class="number">0C2C 0C2C </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;{M80} SAVE MESSAGE FLAG, ZERO MEANS DON'T PRINT "BREAK"</span>
<span class="number">0C2D 0C2D </span><span class="colon">: </span><span class="hex">7D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,l               <span class="comment">;      </span>
<span class="number">0C2E 0C2E </span><span class="colon">: </span><span class="hex">A4         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> and    </span> h                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF DIRECT</span>
<span class="number">0C2F 0C2F </span><span class="colon">: </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a                 <span class="comment">;      </span>
<span class="number">0C30 0C30 </span><span class="colon">: </span><span class="hex">28 09      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,DIRIS           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF NOT SET UP FOR CONTINUE</span>
<span class="number">0C32 0C32 </span><span class="colon">: </span><span class="hex">22 D2 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (OLDLIN),hl       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE OLD LINE #</span>
<span class="number">0C35 0C35 </span><span class="colon">: </span><span class="hex">2A CE 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(SAVTXT)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET POINTER TO START OF STATEMENT</span>
<span class="number">0C38 0C38 </span><span class="colon">: </span><span class="hex">22 D4 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (OLDTXT),hl       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE IT</span>
<span class="number">0C3B 0C3B </span><span class="colon">: </span><span class="hex">CD BE 19   </span><span class="source">[M80] </span><span class="label">DIRIS: </span><span class="mnemonic"> call   </span> FINLPT            <span class="comment">;{M80} BACK TO NORMAL PRINT MODE</span>
<span class="number">0C3E 0C3E </span><span class="colon">: </span><span class="hex">CD DE 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CRDONZ            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PRINT CR IF TTYPOS .NE. 0</span>
<span class="number">0C41 0C41 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET BACK ^C FLAG</span>
<span class="number">0C42 0C42 </span><span class="colon">: </span><span class="hex">21 73 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,BRKTXT         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"BREAK"</span>
<span class="number">0C45 0C45 </span><span class="colon">: </span><span class="hex">C2 F4 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,ERRFN1         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CALL STROUT AND FALL INTO READY</span>
<span class="number">0C48 0C48 </span><span class="colon">: </span><span class="hex">C3 02 04   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> READY             <span class="comment">;      </span>
<span class="number">0C4B 0C4B </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0C4B 0C4B </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;The CONT Command                       </span>
<span class="number">0C4B 0C4B </span><span class="colon">: </span><span class="hex">2A D4 38   </span><span class="source">[M80] </span><span class="label">CONT:  </span><span class="mnemonic"> ld     </span> hl,(OLDTXT)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ZERO INDICATES THERE IS NOTHING TO CONTINUE</span>
<span class="number">0C4E 0C4E </span><span class="colon">: </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,h               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"STOP","END",TYPING CRLF</span>
<span class="number">0C4F 0C4F </span><span class="colon">: </span><span class="hex">B5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> l                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TO "INPUT" AND ^C SETUP OLDTXT</span>
<span class="number">0C50 0C50 </span><span class="colon">: </span><span class="hex">11 20 00   </span><span class="source">{M80} </span><span class="label">RESERR:</span><span class="mnemonic"> ld     </span> de,ERRCN          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"CAN'T CONTINUE"</span>
<span class="number">0C53 0C53 </span><span class="colon">: </span><span class="hex">CA DB 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,ERROR           <span class="comment">;      </span>
<span class="number">0C56 0C56 </span><span class="colon">: </span><span class="hex">ED 5B D2 38</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,(OLDLIN)       <span class="comment">;      </span>
<span class="number">0C5A 0C5A </span><span class="colon">: </span><span class="hex">ED 53 4D 38</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CURLIN),de       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET UP OLD LINE # AS CURRENT LINE #</span>
<span class="number">0C5E 0C5E </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">0C5F 0C5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0C5F 0C5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;This looks like orphan code            </span>
<span class="number">0C5F 0C5F </span><span class="colon">: </span><span class="hex">C3 97 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> FCERR                    
<span class="number">0C62 0C62 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0C62 0C62 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;CSAVE* and CLOAD*                      </span>
<span class="number">0C62 0C62 </span><span class="colon">  </span><span class="hex">3E         </span><span class="source">      </span><span class="label">CSARY: </span><span class="mnemonic"> byte   </span> $3E               <span class="comment">;;"LD A," sets A = 62 for CSAVE*</span>
<span class="number">0C63 0C63 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">CLARY: </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;;Set A = 0 for CLOAD*</span>
<span class="number">0C64 0C64 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;;Set flags</span>
<span class="number">0C65 0C65 </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;;and save them</span>
<span class="number">0C66 0C66 </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;;Skip '*'</span>
<span class="number">0C67 0C67 </span><span class="colon">: </span><span class="hex">3E 01      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,1               <span class="comment">;      </span>
<span class="number">0C69 0C69 </span><span class="colon">: </span><span class="hex">32 CB 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (SUBFLG),a        <span class="comment">;;Don't look for '(' after variable name</span>
<span class="number">0C6C 0C6C </span><span class="colon">: </span><span class="hex">CD D1 10   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> PTRGET            <span class="comment">;;Get pointer to variable</span>
<span class="number">0C6F 0C6F </span><span class="colon">: </span><span class="hex">C2 97 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,FCERR          <span class="comment">;;Doesn't exist? FC Error</span>
<span class="number">0C72 0C72 </span><span class="colon">: </span><span class="hex">32 CB 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (SUBFLG),a        <span class="comment">;;Turn subscripts back on</span>
<span class="number">0C75 0C75 </span><span class="colon">: </span><span class="hex">CD 75 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CHKNUM            <span class="comment">;;Must be numeric variable or TM Error</span>
<span class="number">0C78 0C78 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;      </span>
<span class="number">0C79 0C79 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;;Text Pointer</span>
<span class="number">0C7A 0C7A </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;;CSAVE/CLOAD flag</span>
<span class="number">0C7B 0C7B </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;;Pointer to Number of Dimensions</span>
<span class="number">0C7C 0C7C </span><span class="colon">: </span><span class="hex">06 23      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,'#'             <span class="comment">;      </span>
<span class="number">0C7E 0C7E </span><span class="colon">: </span><span class="hex">28 12      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,CLARYP          <span class="comment">;;If flag is 0, do CLOAD</span>
<span class="number">0C80 0C80 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Write Array Header to Tape             </span>
<span class="number">0C80 0C80 </span><span class="colon">: </span><span class="hex">CD 7F 1B   </span><span class="source">{~~~} </span><span class="label">CSARYH:</span><span class="mnemonic"> call   </span> PRECRD            <span class="comment">;;"Press <RECORD>" and wait for RETURN</span>
<span class="number">0C83 0C83 </span><span class="colon">: </span><span class="hex">CD BC 1B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> WRSYNC            <span class="comment">;;Write SYNC to tape</span>
<span class="number">0C86 0C86 </span><span class="colon">: </span><span class="hex">78         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,b               <span class="comment">;;Write filename "######"</span>
<span class="number">0C87 0C87 </span><span class="colon">: </span><span class="hex">CD 87 1B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> WRBYT2            <span class="comment">;      </span>
<span class="number">0C8A 0C8A </span><span class="colon">: </span><span class="hex">CD 87 1B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> WRBYT2            <span class="comment">;      </span>
<span class="number">0C8D 0C8D </span><span class="colon">: </span><span class="hex">CD 87 1B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> WRBYT2            <span class="comment">;      </span>
<span class="number">0C90 0C90 </span><span class="colon">: </span><span class="hex">18 11      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> RWARY             <span class="comment">;;Write Array</span>
<span class="number">0C92 0C92 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Read Array Header from Tape            </span>
<span class="number">0C92 0C92 </span><span class="colon">: </span><span class="hex">CD 2E 1B   </span><span class="source">(~~~) </span><span class="label">CLARYP:</span><span class="mnemonic"> call   </span> PPLAY             <span class="comment">;;"Press <PLAY>", wait for RETURN</span>
<span class="number">0C95 0C95 </span><span class="colon">: </span><span class="hex">CD CE 1B   </span><span class="source">{~~~} </span><span class="label">CLARYH:</span><span class="mnemonic"> call   </span> RDSYNC            <span class="comment">;;Wait for SYNC</span>
<span class="number">0C98 0C98 </span><span class="colon">: </span><span class="hex">0E 06      </span><span class="source">(~~~) </span><span class="label">CLARYF:</span><span class="mnemonic"> ld     </span> c,6               <span class="comment">;;Look for filename "@@@@@@"</span>
<span class="number">0C9A 0C9A </span><span class="colon">: </span><span class="hex">CD 4D 1B   </span><span class="source">(~~~) </span><span class="label">CLARYL:</span><span class="mnemonic"> call   </span> RDBYTE                   
<span class="number">0C9D 0C9D </span><span class="colon">: </span><span class="hex">B8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> b                        
<span class="number">0C9E 0C9E </span><span class="colon">: </span><span class="hex">20 F8      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,CLARYF                
<span class="number">0CA0 0CA0 </span><span class="colon">: </span><span class="hex">0D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> c                        
<span class="number">0CA1 0CA1 </span><span class="colon">: </span><span class="hex">20 F7      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,CLARYL                
<span class="number">0CA3 0CA3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Read Array from or Write Array to Tape </span>
<span class="number">0CA3 0CA3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;DE=End of Array+1, Stack: Array Pointer, CSAVE Flag, Text Pointer</span>
<span class="number">0CA3 0CA3 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">RWARY: </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;;Restore Array Pointer</span>
<span class="number">0CA4 0CA4 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;;DE = Array Pointer, HL = Array Length</span>
<span class="number">0CA5 0CA5 </span><span class="colon">: </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de             <span class="comment">;;HL = End of Array plus 1</span>
<span class="number">0CA6 0CA6 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;;HL = Array Pointer, DE = End of Array</span>
<span class="number">0CA7 0CA7 </span><span class="colon">: </span><span class="hex">4E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,(hl)            <span class="comment">;      </span>
<span class="number">0CA8 0CA8 </span><span class="colon">: </span><span class="hex">06 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,0               <span class="comment">;;BC = Number of Dimensions</span>
<span class="number">0CAA 0CAA </span><span class="colon">: </span><span class="hex">09         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,bc             <span class="comment">;;Each dimension size is two bytes</span>
<span class="number">0CAB 0CAB </span><span class="colon">: </span><span class="hex">09         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,bc             <span class="comment">;;So add twice</span>
<span class="number">0CAC 0CAC </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;;Add one more for Number of Dimensions</span>
<span class="number">0CAD 0CAD </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;HL=Start Address, DE=End Address+1, Stack: CSAVE Flag Z, Text Pointer</span>
<span class="number">0CAD 0CAD </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">(~~~) </span><span class="label">RWMEM: </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;;Are we there yet?</span>
<span class="number">0CAE 0CAE </span><span class="colon">: </span><span class="hex">28 0D      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,RWARYD          <span class="comment">;;Yes, you can get out</span>
<span class="number">0CB0 0CB0 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;;Get CSAVE/CLOAD flag</span>
<span class="number">0CB1 0CB1 </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;;And save it again</span>
<span class="number">0CB2 0CB2 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;;Read byte from array</span>
<span class="number">0CB3 0CB3 </span><span class="colon">: </span><span class="hex">C4 8A 1B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> nz,WRBYTE         <span class="comment">;;If CSAVE* write to tape</span>
<span class="number">0CB6 0CB6 </span><span class="colon">: </span><span class="hex">CC 4D 1B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> z,RDBYTE          <span class="comment">;;If CLOAD* read from tape</span>
<span class="number">0CB9 0CB9 </span><span class="colon">: </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a            <span class="comment">;;Write byte into array</span>
<span class="number">0CBA 0CBA </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;;Bump pointer</span>
<span class="number">0CBB 0CBB </span><span class="colon">: </span><span class="hex">18 F0      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> RWMEM             <span class="comment">;;and do next byte</span>
<span class="number">0CBD 0CBD </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">(~~~) </span><span class="label">RWARYD:</span><span class="mnemonic"> pop    </span> af                <span class="comment">;;Get CSAVE/CLOAD flag</span>
<span class="number">0CBE 0CBE </span><span class="colon">: </span><span class="hex">C2 1C 1C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,WRTAIL         <span class="comment">;;If CSAVE* write trailer and return</span>
<span class="number">0CC1 0CC1 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;;Restore text pointer</span>
<span class="number">0CC2 0CC2 </span><span class="colon">: </span><span class="hex">C3 7E 1B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> RWARYR            <span class="comment">;;and Return</span>
<span class="number">0CC5 0CC5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;                                        </span>
<span class="number">0CC5 0CC5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">TEST FOR A LETTER / CARRY ON=NOT A LETTER</span>
<span class="number">0CC5 0CC5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">              CARRY OFF=A LETTER  </span>
<span class="number">0CC5 0CC5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">0CC5 0CC5 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">[M80] </span><span class="label">ISLET: </span><span class="mnemonic"> ld     </span> a,(hl)                   
<span class="number">0CC6 0CC6 </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Test if A is letter                    </span>
<span class="number">0CC6 0CC6 </span><span class="colon">= </span><span class="hex">FE 41      </span><span class="source">[M65] </span><span class="label">ISLETC:</span><span class="mnemonic"> cp     </span> 'A'                      
<span class="number">0CC8 0CC8 </span><span class="colon">: </span><span class="hex">D8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> c               ;[M80] IF LESS THAN "A", RETURN EARLY
<span class="number">0CC9 0CC9 </span><span class="colon">: </span><span class="hex">FE 5B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 'Z'+1                    
<span class="number">0CCB 0CCB </span><span class="colon">: </span><span class="hex">3F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ccf    </span>                          
<span class="number">0CCC 0CCC </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">0CCD 0CCD </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;                                        </span>
<span class="number">0CCD 0CCD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THIS CODE IS FOR THE "CLEAR" COMMAND WITH AN ARGUMENT</span>
<span class="number">0CCD 0CCD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">TO CHANGE THE AMOUNT OF STRING SPACE ALLOCATED.</span>
<span class="number">0CCD 0CCD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF NO FORMULA IS GIVEN THE AMOUNT OF STRING SPACE</span>
<span class="number">0CCD 0CCD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">REMAINS UNCHANGED.                </span>
<span class="number">0CCD 0CCD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">0CCD 0CCD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Second Parameter is End of Basic Memory</span>
<span class="number">0CCD 0CCD </span><span class="colon">: </span><span class="hex">F7         </span><span class="source">(M80) </span><span class="label">CLEAR: </span><span class="mnemonic"> rst    </span> HOOKDO            <span class="comment">;;Call Hook Dispatch Routine</span>
<span class="number">0CCE 0CCE </span><span class="colon">: </span><span class="hex">0B         </span><span class="source">{~~~} </span><span class="label">HOOK11:</span><span class="mnemonic"> byte   </span> 11                <span class="comment">;      </span>
<span class="number">0CCF 0CCF </span><span class="colon">: </span><span class="hex">CA CF 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,CLEARC          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF NO FORMULA JUST CLEAR</span>
<span class="number">0CD2 0CD2 </span><span class="colon">: </span><span class="hex">CD 7B 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> INTID2            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET AN INTEGER INTO [D,E]</span>
<span class="number">0CD5 0CD5 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;;Back up text pointer</span>
<span class="number">0CD6 0CD6 </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF ITS THE END</span>
<span class="number">0CD7 0CD7 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;;Save text pointer</span>
<span class="number">0CD8 0CD8 </span><span class="colon">: </span><span class="hex">2A AD 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(MEMSIZ)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET HIGHEST ADDRESS</span>
<span class="number">0CDB 0CDB </span><span class="colon">: </span><span class="hex">28 0E      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,CLEARS          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SHOULD FINISH THERE</span>
<span class="number">0CDD 0CDD </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;;Restore Text Pointer</span>
<span class="number">0CDE 0CDE </span><span class="colon">: </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK            <span class="comment">;;Require a Comma</span>
<span class="number">0CDF 0CDF </span><span class="colon">: </span><span class="hex">2C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> ','               <span class="comment">;      </span>
<span class="number">0CE0 0CE0 </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;;Save String Size</span>
<span class="number">0CE1 0CE1 </span><span class="colon">: </span><span class="hex">CD 7B 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> INTID2            <span class="comment">;;Get Top of Memory</span>
<span class="number">0CE4 0CE4 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;;Back up text pointer</span>
<span class="number">0CE5 0CE5 </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;;Check next character</span>
<span class="number">0CE6 0CE6 </span><span class="colon">: </span><span class="hex">C2 C4 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,SNERR          <span class="comment">;{M80} IF NOT TERMINATOR, GOOD BYE</span>
<span class="number">0CE9 0CE9 </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;;Get String Size, Save Text Pointer</span>
<span class="number">0CEA 0CEA </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;;DE=String Size, HL=Top of Memory</span>
<span class="number">0CEB 0CEB </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Set VARTAB, TOPMEM, and MEMSIZ         </span>
<span class="number">0CEB 0CEB </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;On Entry HL = top of memory, from MEMSIZ or second parameter</span>
<span class="number">0CEB 0CEB </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;         DE = string space, from the first parameter</span>
<span class="number">0CEB 0CEB </span><span class="colon">: </span><span class="hex">7D         </span><span class="source">(M80) </span><span class="label">CLEARS:</span><span class="mnemonic"> ld     </span> a,l               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SUBTRACT [H,L]-[D,E] INTO [D,E]</span>
<span class="number">0CEC 0CEC </span><span class="colon">: </span><span class="hex">93         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> e                 <span class="comment">;      </span>
<span class="number">0CED 0CED </span><span class="colon">: </span><span class="hex">5F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,a               <span class="comment">;;Leaving start of String Space in [D,E]</span>
<span class="number">0CEE 0CEE </span><span class="colon">: </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,h               <span class="comment">;      </span>
<span class="number">0CEF 0CEF </span><span class="colon">: </span><span class="hex">9A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sbc    </span> a,d               <span class="comment">;      </span>
<span class="number">0CF0 0CF0 </span><span class="colon">: </span><span class="hex">57         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,a               <span class="comment">;      </span>
<span class="number">0CF1 0CF1 </span><span class="colon">: </span><span class="hex">DA B7 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> c,OMERR           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WANTED MORE THAN TOTAL!</span>
<span class="number">0CF4 0CF4 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE MEMSIZ</span>
<span class="number">0CF5 0CF5 </span><span class="colon">: </span><span class="hex">2A D6 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(VARTAB)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TOP LOCATION IN USE</span>
<span class="number">0CF8 0CF8 </span><span class="colon">: </span><span class="hex">01 28 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> bc,40             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TOP LOCATION IN USE</span>
<span class="number">0CFB 0CFB </span><span class="colon">: </span><span class="hex">09         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,bc             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">LEAVE BREATHING ROOM</span>
<span class="number">0CFC 0CFC </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ROOM?</span>
<span class="number">0CFD 0CFD </span><span class="colon">: </span><span class="hex">D2 B7 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,OMERR          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NO, DON'T EVEN CLEAR</span>
<span class="number">0D00 0D00 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NEW STACK LOCATION [H,L]</span>
<span class="number">0D01 0D01 </span><span class="colon">: </span><span class="hex">22 4B 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (TOPMEM),hl       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET UP NEW STACK LOCATION</span>
<span class="number">0D04 0D04 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET BACK MEMSIZ</span>
<span class="number">0D05 0D05 </span><span class="colon">: </span><span class="hex">22 AD 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (MEMSIZ),hl       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET IT UP, MUST BE OK</span>
<span class="number">0D08 0D08 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">REGAIN THE TEXT POINTER</span>
<span class="number">0D09 0D09 </span><span class="colon">: </span><span class="hex">C3 CF 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> CLEARC            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GO CLEAR</span>
<span class="number">0D0C 0D0C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0D0C 0D0C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;DE = HL - DE  *** Orphan Code - 7 bytes</span>
<span class="number">0D0C 0D0C </span><span class="colon">: </span><span class="hex">7D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,l                      
<span class="number">0D0D 0D0D </span><span class="colon">: </span><span class="hex">93         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> e                        
<span class="number">0D0E 0D0E </span><span class="colon">: </span><span class="hex">5F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,a                      
<span class="number">0D0F 0D0F </span><span class="colon">: </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,h                      
<span class="number">0D10 0D10 </span><span class="colon">: </span><span class="hex">9A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sbc    </span> a,d                      
<span class="number">0D11 0D11 </span><span class="colon">: </span><span class="hex">57         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,a                      
<span class="number">0D12 0D12 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">0D13 0D13 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0D13 0D13 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;The NEXT STATEMENT                     </span>
<span class="number">0D13 0D13 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;See FOR for description of the stack entry</span>
<span class="number">0D13 0D13 </span><span class="colon">: </span><span class="hex">11 00 00   </span><span class="source">[M80] </span><span class="label">NEXT:  </span><span class="mnemonic"> ld     </span> de,0              <span class="comment">;{M80} FOR "NEXT" WITHOUT ARGS CALL FNDFOR WITH [D,E]=0</span>
<span class="number">0D16 0D16 </span><span class="colon">: </span><span class="hex">C4 D1 10   </span><span class="source">(M80) </span><span class="label">NEXTC: </span><span class="mnemonic"> call   </span> nz,PTRGET         <span class="comment">;{M80} GET POINTER TO LOOP VARIABLE INTO [D,E]</span>
<span class="number">0D19 0D19 </span><span class="colon">: </span><span class="hex">22 CE 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (SAVTXT),hl       <span class="comment">;{M80} SAVE TEXT POINTER IN CASE LOOP TERMINATES</span>
<span class="number">0D1C 0D1C </span><span class="colon">: </span><span class="hex">CD 9F 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FNDFOR            <span class="comment">;{M80} LOOK FOR ENTRY WHOSE VARIABLE NAME MATCHES THIS ONES</span>
<span class="number">0D1F 0D1F </span><span class="colon">: </span><span class="hex">C2 CA 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,NFERR          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"NEXT WITHOUT FOR"</span>
<span class="number">0D22 0D22 </span><span class="colon">: </span><span class="hex">F9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> sp,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SETUP STACK POINTER BY CHOPPING AT THIS POINT</span>
<span class="number">0D23 0D23 </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT THE VARIABLE PTR BACK ON</span>
<span class="number">0D24 0D24 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;      </span>
<span class="number">0D25 0D25 </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;      </span>
<span class="number">0D26 0D26 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">0D27 0D27 </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;{M80} PUT POINTER TO LOOP VARIABLE ONTO STACK</span>
<span class="number">0D28 0D28 </span><span class="colon">: </span><span class="hex">CD 20 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVFM             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">STEP VALUE INTO THE FAC</span>
<span class="number">0D2B 0D2B </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;{M80} PUT POINTER INTO FOR ENTRY ONTO STACK</span>
<span class="number">0D2C 0D2C </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;{M80} PUT POINTER TO LOOP VARIABLE BACK ONTO STACK</span>
<span class="number">0D2D 0D2D </span><span class="colon">: </span><span class="hex">CD 53 12   </span><span class="source">{M80} </span><span class="label">NXTDO: </span><span class="mnemonic"> call   </span> FADDS             <span class="comment">;      </span>
<span class="number">0D30 0D30 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;{M80} POP OFF POINTER TO LOOP VARIABLE</span>
<span class="number">0D31 0D31 </span><span class="colon">: </span><span class="hex">CD 3A 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVMF             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MOV FAC INTO LOOP VARIABLE</span>
<span class="number">0D34 0D34 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE ENTRY POINTER</span>
<span class="number">0D35 0D35 </span><span class="colon">: </span><span class="hex">CD 31 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVRM             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE FINAL INTO THE REGISTERS</span>
<span class="number">0D38 0D38 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE ENTRY POINTER</span>
<span class="number">0D39 0D39 </span><span class="colon">: </span><span class="hex">CD 5B 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FCOMP             <span class="comment">;{M80} RETURN 255 IF FAC < REGISTERS, 0 IF =, 1 IF ></span>
<span class="number">0D3C 0D3C </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">{M80} </span><span class="label">FINNXT:</span><span class="mnemonic"> pop    </span> hl                <span class="comment">;{M80} POP OFF "FOR" POINTER NOW POINTING PAST FINAL VALUE</span>
<span class="number">0D3D 0D3D </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE SIGN OF THE INCREMENT</span>
<span class="number">0D3E 0D3E </span><span class="colon">: </span><span class="hex">90         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> b                 <span class="comment">;{M80} SUBTRACT SIGN FROM (CURRENT VALUE-FINAL VALUE)</span>
<span class="number">0D3F 0D3F </span><span class="colon">: </span><span class="hex">CD 31 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVRM             <span class="comment">;{M80} "FOR" LINE # INTO [D,E], TEXT POINTER INTO [B,C]</span>
<span class="number">0D42 0D42 </span><span class="colon">: </span><span class="hex">28 09      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,LOOPDN          <span class="comment">;{M80} IF ZERO THEN THE LOOP IS FINISHED</span>
<span class="number">0D44 0D44 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;      </span>
<span class="number">0D45 0D45 </span><span class="colon">: </span><span class="hex">22 4D 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CURLIN),hl       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">STORE THE LINE #</span>
<span class="number">0D48 0D48 </span><span class="colon">: </span><span class="hex">69         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,c               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SETUP THE TEXT POINTER</span>
<span class="number">0D49 0D49 </span><span class="colon">: </span><span class="hex">60         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,b               <span class="comment">;      </span>
<span class="number">0D4A 0D4A </span><span class="colon">: </span><span class="hex">C3 28 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> NXTCON            <span class="comment">;      </span>
<span class="number">0D4D 0D4D </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0D4D 0D4D </span><span class="colon">: </span><span class="hex">F9         </span><span class="source">(M80) </span><span class="label">LOOPDN:</span><span class="mnemonic"> ld     </span> sp,hl             <span class="comment">;{M80} ELIMINATE FOR ENTRY SINCE [H,L] MOVED ALL THE WAY THE ENTRY</span>
<span class="number">0D4E 0D4E </span><span class="colon">: </span><span class="hex">2A CE 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(SAVTXT)       <span class="comment">;UPDATE SAVED STACK</span>
<span class="number">0D51 0D51 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;IS THERE A COMMA AT THE END</span>
<span class="number">0D52 0D52 </span><span class="colon">: </span><span class="hex">FE 2C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> ','               <span class="comment">;IF SO LOOK AT ANOTHER</span>
<span class="number">0D54 0D54 </span><span class="colon">: </span><span class="hex">C2 2C 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,NEWSTT         <span class="comment">;VARIABLE NAME TO "NEXT"</span>
<span class="number">0D57 0D57 </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;READ FIRST CHARCTER</span>
<span class="number">0D58 0D58 </span><span class="colon">: </span><span class="hex">CD 16 0D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> NEXTC             <span class="comment">;DO NEXT, BUT DON'T ALLOW BLANK VARIABLE NAME</span>
<span class="number">0D5B 0D5B </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0D5B 0D5B </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Input Line                             </span>
<span class="number">0D5B 0D5B </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THIS IS THE LINE INPUT ROUTINE IT READS CHARACTERS INTO BUF</span>
<span class="number">0D5B 0D5B </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE ROUTINE IS ENTERED AT INLIN, AT QINLIN TO TYPE A QUESTION MARK</span>
<span class="number">0D5B 0D5B </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND A SPACE FIRST                 </span>
<span class="number">0D5B 0D5B </span><span class="colon">: </span><span class="hex">3E 3F      </span><span class="source">[M80] </span><span class="label">QINLIN:</span><span class="mnemonic"> ld     </span> a,'?'             <span class="comment">;      </span>
<span class="number">0D5D 0D5D </span><span class="colon">: </span><span class="hex">DF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> OUTCHR            <span class="comment">;      </span>
<span class="number">0D5E 0D5E </span><span class="colon">: </span><span class="hex">3E 20      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,' '             <span class="comment">;      </span>
<span class="number">0D60 0D60 </span><span class="colon">: </span><span class="hex">DF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> OUTCHR            <span class="comment">;      </span>
<span class="number">0D61 0D61 </span><span class="colon">: </span><span class="hex">C3 85 0D   </span><span class="source">{M65} </span><span class="label">GINLIN:</span><span class="mnemonic"> jp     </span> INLIN             <span class="comment">;;;For relative jumps</span>
<span class="number">0D64 0D64 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0D64 0D64 </span><span class="colon">: </span><span class="hex">3A 4A 38   </span><span class="source">[M80] </span><span class="label">RUBOUT:</span><span class="mnemonic"> ld     </span> a,(RUBSW)         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ARE WE ALREADY RUBBING OUT?</span>
<span class="number">0D67 0D67 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET CC'S</span>
<span class="number">0D68 0D68 </span><span class="colon">: </span><span class="hex">3E 5C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,'\'             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET READY TO TYPE BACKSLASH</span>
<span class="number">0D6A 0D6A </span><span class="colon">: </span><span class="hex">32 4A 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (RUBSW),a         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE RUBSW NON-ZERO IF NOT ALREADY</span>
<span class="number">0D6D 0D6D </span><span class="colon">: </span><span class="hex">20 05      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,NOTBEG         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NOT RUBBING BACK TO BEGGINING</span>
<span class="number">0D6F 0D6F </span><span class="colon">: </span><span class="hex">05         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> b                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">AT BEGINNING OF LINE?</span>
<span class="number">0D70 0D70 </span><span class="colon">: </span><span class="hex">28 13      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,INLIN           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET FIRST BYTE IN BUF TO ZERO</span>
<span class="number">0D72 0D72 </span><span class="colon">: </span><span class="hex">DF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> OUTCHR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEND BACKSLASH</span>
<span class="number">0D73 0D73 </span><span class="colon">: </span><span class="hex">04         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> b                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">EFFECTIVELY SKIP NEXT INSTRUCTION</span>
<span class="number">0D74 0D74 </span><span class="colon">: </span><span class="hex">05         </span><span class="source">(M80) </span><span class="label">NOTBEG:</span><span class="mnemonic"> dec    </span> b                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">BACK UP CHAR COUNT BY 1</span>
<span class="number">0D75 0D75 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND LINE POSIT</span>
<span class="number">0D76 0D76 </span><span class="colon">: </span><span class="hex">28 09      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,INLINN          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND RE-SET UP INPUT</span>
<span class="number">0D78 0D78 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">OTHERWISE GET CHAR TO ECHO</span>
<span class="number">0D79 0D79 </span><span class="colon">: </span><span class="hex">DF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> OUTCHR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEND IT</span>
<span class="number">0D7A 0D7A </span><span class="colon">: </span><span class="hex">18 12      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> INLINC            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND GET NEXT CHAR</span>
<span class="number">0D7C 0D7C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0D7C 0D7C </span><span class="colon">: </span><span class="hex">05         </span><span class="source">[M65] </span><span class="label">LINLIN:</span><span class="mnemonic"> dec    </span> b                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">AT START OF LINE?</span>
<span class="number">0D7D 0D7D </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">{M80} </span><span class="label">LINLN2:</span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M65] </span><span class="comment">BACKARROW SO BACKUP PNTR AND</span>
<span class="number">0D7E 0D7E </span><span class="colon">: </span><span class="hex">DF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> OUTCHR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEND BACKSPACE</span>
<span class="number">0D7F 0D7F </span><span class="colon">: </span><span class="hex">20 0D      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,INLINC         <span class="comment">;      </span>
<span class="number">0D81 0D81 </span><span class="colon">: </span><span class="hex">DF         </span><span class="source">(M80) </span><span class="label">INLINN:</span><span class="mnemonic"> rst    </span> OUTCHR            <span class="comment">;      </span>
<span class="number">0D82 0D82 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0D82 0D82 </span><span class="colon">: </span><span class="hex">CD EA 19   </span><span class="source">[M80] </span><span class="label">INLINU:</span><span class="mnemonic"> call   </span> CRDO              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TYPE A CRLF</span>
<span class="number">0D85 0D85 </span><span class="colon">: </span><span class="hex">21 60 38   </span><span class="source">[M80] </span><span class="label">INLIN: </span><span class="mnemonic"> ld     </span> hl,BUF            <span class="comment">;      </span>
<span class="number">0D88 0D88 </span><span class="colon">: </span><span class="hex">06 01      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,1               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHARACTER COUNT</span>
<span class="number">0D8A 0D8A </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CLEAR TYPE AHEAD CHAR</span>
<span class="number">0D8B 0D8B </span><span class="colon">: </span><span class="hex">32 4A 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (RUBSW),a         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">LIKE SO</span>
<span class="number">0D8E 0D8E </span><span class="colon">: </span><span class="hex">CD DA 19   </span><span class="source">[M80] </span><span class="label">INLINC:</span><span class="mnemonic"> call   </span> INCHR             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET A CHAR</span>
<span class="number">0D91 0D91 </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">{M80} </span><span class="label">INLNC1:</span><span class="mnemonic"> ld     </span> c,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE CURRENT CHAR IN [C]</span>
<span class="number">0D92 0D92 </span><span class="colon">: </span><span class="hex">FE 7F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 127               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHARACTER DELETE?</span>
<span class="number">0D94 0D94 </span><span class="colon">: </span><span class="hex">28 CE      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,RUBOUT          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DO IT</span>
<span class="number">0D96 0D96 </span><span class="colon">: </span><span class="hex">3A 4A 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(RUBSW)         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">BEEN DOING A RUBOUT?</span>
<span class="number">0D99 0D99 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET CC'S</span>
<span class="number">0D9A 0D9A </span><span class="colon">: </span><span class="hex">28 07      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,NOTRUB          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NOPE.</span>
<span class="number">0D9C 0D9C </span><span class="colon">: </span><span class="hex">3E 5C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,'\'             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET READY TO TYPE SLASH</span>
<span class="number">0D9E 0D9E </span><span class="colon">: </span><span class="hex">DF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> OUTCHR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEND IT</span>
<span class="number">0D9F 0D9F </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CLEAR RUBSW</span>
<span class="number">0DA0 0DA0 </span><span class="colon">: </span><span class="hex">32 4A 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (RUBSW),a         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">LIKE SO</span>
<span class="number">0DA3 0DA3 </span><span class="colon">: </span><span class="hex">79         </span><span class="source">(M80) </span><span class="label">NOTRUB:</span><span class="mnemonic"> ld     </span> a,c               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET BACK CURRENT CHAR</span>
<span class="comment">;;;The following comment is in both [M65] and [M80], so it likely ended up in the Aquarius</span>
<span class="comment">;;;source code as well. Bob Albrecht is a key figure in the early history of microcomputers.</span>
<span class="comment">;;;He founded the People's Computer Company, a newsletter that operated with a walk-in</span>
<span class="comment">;;;storefront to teach children "about having fun with computers" and later became</span>
<span class="comment">;;;Dr. Dobb's Journal of Computer Calisthenics and Orthodontia.  He brought the first</span>
<span class="comment">;;;Altair 8800 to the Homebrew Computer Club and was one of the main supporters</span>
<span class="comment">;;;of the effort to make Tiny BASIC a standard on many early machines.</span>
<span class="number">0DA4 0DA4 </span><span class="colon">: </span><span class="hex">FE 07      </span><span class="source">{M80} </span><span class="label">CHKFUN:</span><span class="mnemonic"> cp     </span> 7                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS IT BOB ALBRECHT RINGING THE BELL</span>
<span class="number">0DA6 0DA6 </span><span class="colon">: </span><span class="hex">28 41      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,GOODCH          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FOR SCHOOL KIDS?</span>
<span class="number">0DA8 0DA8 </span><span class="colon">: </span><span class="hex">FE 03      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 3                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CONTROL-C?</span>
<span class="number">0DAA 0DAA </span><span class="colon">: </span><span class="hex">CC EA 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> z,CRDO            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TYPE CHAR, AND CRLFT</span>
<span class="number">0DAD 0DAD </span><span class="colon">: </span><span class="hex">37         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> scf    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RETURN WITH CARRY ON</span>
<span class="number">0DAE 0DAE </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF IT WAS CONTROL-C</span>
<span class="number">0DAF 0DAF </span><span class="colon">: </span><span class="hex">FE 0D      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 13                <span class="comment">;      </span>
<span class="number">0DB1 0DB1 </span><span class="colon">: </span><span class="hex">CA E5 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,FININL          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS IT A CARRIAGE RETURN?</span>
<span class="number">0DB4 0DB4 </span><span class="colon">: </span><span class="hex">FE 15      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 21                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">;LINE DELETE? (CONTROL-U)</span>
<span class="number">0DB6 0DB6 </span><span class="colon">: </span><span class="hex">CA 82 0D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,INLINU          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GO DO IT</span>
<span class="number">0DB9 0DB9 </span><span class="colon">: </span><span class="hex">00         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> nop    </span>                   <span class="comment">;;;Whatever was removed isn't in the</span>
<span class="number">0DBA 0DBA </span><span class="colon">: </span><span class="hex">00         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> nop    </span>                   <span class="comment">;;;available source codes</span>
<span class="number">0DBB 0DBB </span><span class="colon">: </span><span class="hex">00         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> nop    </span>                   <span class="comment">;      </span>
<span class="number">0DBC 0DBC </span><span class="colon">: </span><span class="hex">00         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> nop    </span>                   <span class="comment">;      </span>
<span class="number">0DBD 0DBD </span><span class="colon">: </span><span class="hex">00         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> nop    </span>                   <span class="comment">;      </span>
<span class="number">0DBE 0DBE </span><span class="colon">: </span><span class="hex">FE 08      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 8                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">BACKSPACE? (CONTROL-H)?</span>
<span class="number">0DC0 0DC0 </span><span class="colon">: </span><span class="hex">CA 7C 0D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,LINLIN          <span class="comment">;</span><span class="source">[M65] </span><span class="comment">YES</span>
<span class="number">0DC3 0DC3 </span><span class="colon">: </span><span class="hex">FE 18      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 24                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">AT START OF LINE?</span>
<span class="number">0DC5 0DC5 </span><span class="colon">: </span><span class="hex">20 05      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,NTCTLX         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS IT CONTROL-X (LINE DELETE)</span>
<span class="number">0DC7 0DC7 </span><span class="colon">: </span><span class="hex">3E 23      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,'#'             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEND NUMBER SIGN</span>
<span class="number">0DC9 0DC9 </span><span class="colon">: </span><span class="hex">C3 81 0D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> INLINN            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEND # SIGN AND ECHO</span>
<span class="number">0DCC 0DCC </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0DCC 0DCC </span><span class="colon">: </span><span class="hex">FE 12      </span><span class="source">(M80) </span><span class="label">NTCTLX:</span><span class="mnemonic"> cp     </span> 18                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CONTROL-R?</span>
<span class="number">0DCE 0DCE </span><span class="colon">: </span><span class="hex">20 14      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,NTCTLR         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NO</span>
<span class="number">0DD0 0DD0 </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE [B,C]</span>
<span class="number">0DD1 0DD1 </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE [D,E]</span>
<span class="number">0DD2 0DD2 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE [H,L]</span>
<span class="number">0DD3 0DD3 </span><span class="colon">: </span><span class="hex">36 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),0            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">STORE TERMINATOR</span>
<span class="number">0DD5 0DD5 </span><span class="colon">: </span><span class="hex">CD EA 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CRDO              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DO CRLF</span>
<span class="number">0DD8 0DD8 </span><span class="colon">: </span><span class="hex">21 60 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,BUF            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINT TO START OF BUFFER</span>
<span class="number">0DDB 0DDB </span><span class="colon">: </span><span class="hex">CD 9D 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> STROUT            <span class="comment">;;Print It</span>
<span class="number">0DDE 0DDE </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RESTORE [H,L]</span>
<span class="number">0DDF 0DDF </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RESTORE [D,E]</span>
<span class="number">0DE0 0DE0 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RESTORE [B,C]</span>
<span class="number">0DE1 0DE1 </span><span class="colon">: </span><span class="hex">C3 8E 0D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> INLINC            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET NEXT CHAR</span>
<span class="number">0DE4 0DE4 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0DE4 0DE4 </span><span class="colon">: </span><span class="hex">FE 20      </span><span class="source">(M80) </span><span class="label">NTCTLR:</span><span class="mnemonic"> cp     </span> ' '               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHECK FOR FUNNY CHARACTERS</span>
<span class="number">0DE6 0DE6 </span><span class="colon">: </span><span class="hex">DA 8E 0D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> c,INLINC          <span class="comment">;      </span>
<span class="number">0DE9 0DE9 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0DE9 0DE9 </span><span class="colon">: </span><span class="hex">78         </span><span class="source">(M80) </span><span class="label">GOODCH:</span><span class="mnemonic"> ld     </span> a,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET CURRENT LENGTH</span>
<span class="number">0DEA 0DEA </span><span class="colon">: </span><span class="hex">FE 49      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> ENDBUF-BUF        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">;Set Carry if longer than Buffer</span>
<span class="number">0DEC 0DEC </span><span class="colon">: </span><span class="hex">3E 07      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,7               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET BELL CHAR</span>
<span class="number">0DEE 0DEE </span><span class="colon">: </span><span class="hex">D2 F8 0D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,OUTBEL         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NO CAUSE FOR BELL</span>
<span class="number">0DF1 0DF1 </span><span class="colon">: </span><span class="hex">79         </span><span class="source">{M80} </span><span class="label">OUTBND:</span><span class="mnemonic"> ld     </span> a,c               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RESTORE  CURRENT CHARACTER INTO [A]</span>
<span class="number">0DF2 0DF2 </span><span class="colon">: </span><span class="hex">71         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),c            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">STORE THIS CHARACTER</span>
<span class="number">0DF3 0DF3 </span><span class="colon">: </span><span class="hex">32 CC 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (USFLG),a         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FLAG THAT VALUE HAS BEEN PRINTED</span>
<span class="number">0DF6 0DF6 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">INCREMENT CHARACTER COUNT</span>
<span class="number">0DF7 0DF7 </span><span class="colon">: </span><span class="hex">04         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> b                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">BUMP POINTER INTO BUF</span>
<span class="number">0DF8 0DF8 </span><span class="colon">: </span><span class="hex">DF         </span><span class="source">(M80) </span><span class="label">OUTBEL:</span><span class="mnemonic"> rst    </span> OUTCHR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEND THE CHAR</span>
<span class="number">0DF9 0DF9 </span><span class="colon">: </span><span class="hex">C3 8E 0D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> INLINC            <span class="comment">;{M80} GET NEXT CHAR</span>
<span class="number">0DFC 0DFC </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0DFC 0DFC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE FOLLOWING ROUTINE COMPARES TWO STRINGS</span>
<span class="number">0DFC 0DFC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ONE WITH DESC IN [D,E] OTHER WITH DESC. IN [FACLO, FACLO+1]</span>
<span class="number">0DFC 0DFC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">A=0 IF STRINGS EQUAL              </span>
<span class="number">0DFC 0DFC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;{M80} A=127 IF B,C,D,E .GT. FACLO       </span>
<span class="number">0DFC 0DFC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;{M80} A=1 IF B,C,D,E .LT. FACLO         </span>
<span class="number">0DFC 0DFC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">0DFC 0DFC </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">[M80] </span><span class="label">STRCMP:</span><span class="mnemonic"> push   </span> de                       
<span class="number">0DFD 0DFD </span><span class="colon">: </span><span class="hex">CD C9 0F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FREFAC            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FREE UP FAC STRING, GET POINTER TO DESCRIPTOR IN [H,L]</span>
<span class="number">0E00 0E00 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE LENGTH OF THE FAC STRING IN [A]</span>
<span class="number">0E01 0E01 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">0E02 0E02 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">0E03 0E03 </span><span class="colon">: </span><span class="hex">4E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE POINTER AT THE FAC STRING DATA IN [B,C]</span>
<span class="number">0E04 0E04 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">0E05 0E05 </span><span class="colon">: </span><span class="hex">46         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,(hl)            <span class="comment">;      </span>
<span class="number">0E06 0E06 </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE STACK STRING POINTER</span>
<span class="number">0E07 0E07 </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE POINTER AT THE FAC STRING DATA</span>
<span class="number">0E08 0E08 </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE FAC STRING LENGTH</span>
<span class="number">0E09 0E09 </span><span class="colon">: </span><span class="hex">CD CD 0F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FRETMP            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FREE UP STACK STRING, RETURN POINTER TO DESCRIPTOR IN [H,L]</span>
<span class="number">0E0C 0E0C </span><span class="colon">: </span><span class="hex">CD 31 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVRM             <span class="comment">;      </span>
<span class="number">0E0F 0E0F </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;      </span>
<span class="number">0E10 0E10 </span><span class="colon">: </span><span class="hex">57         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,a               <span class="comment">;      </span>
<span class="number">0E11 0E11 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET BACK 2ND CHARACTER POINTER</span>
<span class="number">0E12 0E12 </span><span class="colon">: </span><span class="hex">7B         </span><span class="source">(M80) </span><span class="label">CSLOOP:</span><span class="mnemonic"> ld     </span> a,e               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">BOTH STRINGS ENDED</span>
<span class="number">0E13 0E13 </span><span class="colon">: </span><span class="hex">B2         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> d                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TEST BY OR'ING THE LENGTHS TOGETHER</span>
<span class="number">0E14 0E14 </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF SO, RETURN WITH A ZERO</span>
<span class="number">0E15 0E15 </span><span class="colon">: </span><span class="hex">7A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,d               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET FACLO STRING LENGTH</span>
<span class="number">0E16 0E16 </span><span class="colon">: </span><span class="hex">D6 01      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> 1                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET CARRY AND MAKE [A]=255 IF [D]=0</span>
<span class="number">0E18 0E18 </span><span class="colon">: </span><span class="hex">D8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> c                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RETURN IF THAT STRING ENDED</span>
<span class="number">0E19 0E19 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MUST NOT HAVE BEEN ZERO, TEST CASE</span>
<span class="number">0E1A 0E1A </span><span class="colon">: </span><span class="hex">BB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> e                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">OF B,C,D,E STRING HAVING ENDED FIRST</span>
<span class="number">0E1B 0E1B </span><span class="colon">: </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RETURN WITH A=1</span>
<span class="number">0E1C 0E1C </span><span class="colon">: </span><span class="hex">D0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TEST THE CONDITION</span>
<span class="number">0E1D 0E1D </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">HERE WHEN NEITHER STRING ENDED    </span>
<span class="number">0E1D 0E1D </span><span class="colon">: </span><span class="hex">15         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> d                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DECREMENT BOTH CHARACTER COUNTS</span>
<span class="number">0E1E 0E1E </span><span class="colon">: </span><span class="hex">1D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> e                 <span class="comment">;      </span>
<span class="number">0E1F 0E1F </span><span class="colon">: </span><span class="hex">0A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(bc)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET CHARACTER FROM B,C,D,E STRING</span>
<span class="number">0E20 0E20 </span><span class="colon">: </span><span class="hex">03         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> bc                <span class="comment">;      </span>
<span class="number">0E21 0E21 </span><span class="colon">: </span><span class="hex">BE         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> (hl)              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">COMPARE WITH FACLO STRING</span>
<span class="number">0E22 0E22 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">BUMP POINTERS (INX DOESNT CLOBBER CC'S)</span>
<span class="number">0E23 0E23 </span><span class="colon">: </span><span class="hex">28 ED      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,CSLOOP          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF BOTH THE SAME, MUST BE MORE TO STRINGS</span>
<span class="number">0E25 0E25 </span><span class="colon">: </span><span class="hex">3F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ccf    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">HERE WHEN STRINGS DIFFER</span>
<span class="number">0E26 0E26 </span><span class="colon">: </span><span class="hex">C3 F1 14   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> SIGNS             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET [A] ACCORDING TO CARRY</span>
<span class="number">0E29 0E29 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0E29 0E29 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;CONVERT NUMBER TO STRING               </span>
<span class="number">0E29 0E29 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE STR$ FUNCTION TAKES A NUMBER AND GIVES A STRING WITH</span>
<span class="number">0E29 0E29 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE CHARACTERS THE OUTPUT OF THE NUMBER WOULD HAVE GIVEN</span>
<span class="number">0E29 0E29 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;; TIMSTR can be used to return the string at [HL] from a function</span>
<span class="number">0E29 0E29 </span><span class="colon">: </span><span class="hex">CD 75 09   </span><span class="source">[M65] </span><span class="label">STR:   </span><span class="mnemonic"> call   </span> CHKNUM            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS A NUMERIC</span>
<span class="number">0E2C 0E2C </span><span class="colon">: </span><span class="hex">CD 80 16   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FOUT              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DO ITS OUTPUT</span>
<span class="number">0E2F 0E2F </span><span class="colon">: </span><span class="hex">CD 5F 0E   </span><span class="source">{M65} </span><span class="label">TIMSTR:</span><span class="mnemonic"> call   </span> STRLIT            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SCAN IT AND TURN IT INTO A STRING</span>
<span class="number">0E32 0E32 </span><span class="colon">: </span><span class="hex">CD C9 0F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FREFAC            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FREE UP THE TEMP</span>
<span class="number">0E35 0E35 </span><span class="colon">: </span><span class="hex">01 1D 10   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> bc,FINBCK         <span class="comment">;      </span>
<span class="number">0E38 0E38 </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET UP ANSWER IN NEW TEMP</span>
<span class="number">0E39 0E39 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0E39 0E39 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;COPY A STRING                          </span>
<span class="number">0E39 0E39 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">STRCPY CREATES A COPY OF THE STRING</span>
<span class="number">0E39 0E39 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">WHOSE DESCRIPTOR IS POINTED TO BY [H,L].</span>
<span class="number">0E39 0E39 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ON RETURN [D,E] POINTS TO DSCTMP  </span>
<span class="number">0E39 0E39 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">WHICH HAS THE STRING INFO (LENGTH,WHERE COPIED TO)</span>
<span class="number">0E39 0E39 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">0E39 0E39 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">[M80] </span><span class="label">STRCPY:</span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET LENGTH</span>
<span class="number">0E3A 0E3A </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MOVE UP TO THE POINTER</span>
<span class="number">0E3B 0E3B </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET POINTER TO POINTER OF ARG</span>
<span class="number">0E3C 0E3C </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE SPACE</span>
<span class="number">0E3D 0E3D </span><span class="colon">: </span><span class="hex">CD B3 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GETSPA            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FIND OUT WHERE STRING TO COPY</span>
<span class="number">0E40 0E40 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;      </span>
<span class="number">0E41 0E41 </span><span class="colon">: </span><span class="hex">4E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,(hl)            <span class="comment">;      </span>
<span class="number">0E42 0E42 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">0E43 0E43 </span><span class="colon">: </span><span class="hex">46         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,(hl)            <span class="comment">;      </span>
<span class="number">0E44 0E44 </span><span class="colon">: </span><span class="hex">CD 53 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> STRAD2            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SETUP DSCTMP</span>
<span class="number">0E47 0E47 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE POINTER TO DSCTMP</span>
<span class="number">0E48 0E48 </span><span class="colon">: </span><span class="hex">6F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET CHARACTER COUNT INTO [L]</span>
<span class="number">0E49 0E49 </span><span class="colon">: </span><span class="hex">CD BD 0F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVSTR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MOVE THE CHARS IN</span>
<span class="number">0E4C 0E4C </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RESTORE POINTER TO DSCTMP</span>
<span class="number">0E4D 0E4D </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RETURN</span>
<span class="number">0E4E 0E4E </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0E4E 0E4E </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">"STRINI" GET STRING SPACE FOR THE CREATION OF A STRING AND</span>
<span class="number">0E4E 0E4E </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">CREATES A DESCRIPTOR FOR IT IN "DSCTMP".</span>
<span class="number">0E4E 0E4E </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Returns String Text Address in [DE], Descriptor Address in [HL]</span>
<span class="number">0E4E 0E4E </span><span class="colon">: </span><span class="hex">3E 01      </span><span class="source">[M80] </span><span class="label">STRIN1:</span><span class="mnemonic"> ld     </span> a,1               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE ONE CHAR STRING (CHR$, INKEY$)</span>
<span class="number">0E50 0E50 </span><span class="colon">: </span><span class="hex">CD B3 0E   </span><span class="source">[M80] </span><span class="label">STRINI:</span><span class="mnemonic"> call   </span> GETSPA            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET SOME STRING SPACE ([A] CHARS)</span>
<span class="number">0E53 0E53 </span><span class="colon">: </span><span class="hex">21 BD 38   </span><span class="source">[M80] </span><span class="label">STRAD2:</span><span class="mnemonic"> ld     </span> hl,DSCTMP         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET DESC. TEMP</span>
<span class="number">0E56 0E56 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">{M80} </span><span class="label">STRADI:</span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE DESC. POINTER</span>
<span class="number">0E57 0E57 </span><span class="colon">: </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE CHARACTER COUNT</span>
<span class="number">0E58 0E58 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">0E59 0E59 </span><span class="colon">= </span><span class="hex">23         </span><span class="source">      </span><span class="label">STRADX:</span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">STORE [D,E]=POINTER TO FREE SPACE</span>
<span class="number">0E5A 0E5A </span><span class="colon">: </span><span class="hex">73         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),e            <span class="comment">;      </span>
<span class="number">0E5B 0E5B </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">0E5C 0E5C </span><span class="colon">: </span><span class="hex">72         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),d            <span class="comment">;      </span>
<span class="number">0E5D 0E5D </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND RESTORE [H,L] AS THE DESCRIPTOR POINTER</span>
<span class="number">0E5E 0E5E </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">0E5F 0E5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0E5F 0E5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Build Descriptor for String Litersl    </span>
<span class="number">0E5F 0E5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">STRLT2 TAKES THE STRING LITERAL WHOSE FIRST CHARACTER</span>
<span class="number">0E5F 0E5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS POINTED BY [H,L]+1 AND BUILDS A DESCRIPTOR FOR IT.</span>
<span class="number">0E5F 0E5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE DESCRIPTOR IS INITIALLY BUILT IN DSCTMP, BUT PUTNEW</span>
<span class="number">0E5F 0E5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">TRANSFERS IT INTO A TEMPORARY AND LEAVES A POINTER</span>
<span class="number">0E5F 0E5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">AT THE TEMPORARY IN FACLO. THE CHARACTERS OTHER THAN</span>
<span class="number">0E5F 0E5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ZERO THAT TERMINATE THE STRING SHOULD BE SET UP IN [B]</span>
<span class="number">0E5F 0E5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND [D]. IT THE TERMINATOR IS A QUOTE, THE QUOTE IS SKIPPED</span>
<span class="number">0E5F 0E5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">OVER. LEADING QUOTES SHOULD BE SKIPPED BEFORE CALL. ON RETURN</span>
<span class="number">0E5F 0E5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE CHARACTER AFTER THE STRING LITERAL IS POINTED TO</span>
<span class="number">0E5F 0E5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">BY [H,L] AND IS IN [A], BUT THE CONDITION CODES ARE</span>
<span class="number">0E5F 0E5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">NOT SET UP.                       </span>
<span class="number">0E5F 0E5F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">0E5F 0E5F </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">[M80] </span><span class="label">STRLIT:</span><span class="mnemonic"> dec    </span> hl                <span class="comment">;;Back up to '"'</span>
<span class="number">0E60 0E60 </span><span class="colon">: </span><span class="hex">06 22      </span><span class="source">[M80] </span><span class="label">STRLTI:</span><span class="mnemonic"> ld     </span> b,'"'             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ASSUME STR ENDS ON QUOTE</span>
<span class="number">0E62 0E62 </span><span class="colon">: </span><span class="hex">50         </span><span class="source">{M80} </span><span class="label">STRLT3:</span><span class="mnemonic"> ld     </span> d,b               <span class="comment">;      </span>
<span class="number">0E63 0E63 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">[M80] </span><span class="label">STRLT2:</span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE POINTER TO START OF LITERAL</span>
<span class="number">0E64 0E64 </span><span class="colon">: </span><span class="hex">0E FF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,255             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">INITIALIZE CHARACTER COUNT</span>
<span class="number">0E66 0E66 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">(M80) </span><span class="label">STRGET:</span><span class="mnemonic"> inc    </span> hl                <span class="comment">;;Move past '"'</span>
<span class="number">0E67 0E67 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET CHAR</span>
<span class="number">0E68 0E68 </span><span class="colon">: </span><span class="hex">0C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> c                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">BUMP CHARACTER COUNT</span>
<span class="number">0E69 0E69 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF 0, (END OF LINE) DONE</span>
<span class="number">0E6A 0E6A </span><span class="colon">: </span><span class="hex">28 06      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,STRFIN          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TEST</span>
<span class="number">0E6C 0E6C </span><span class="colon">: </span><span class="hex">BA         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> d                 <span class="comment">;      </span>
<span class="number">0E6D 0E6D </span><span class="colon">: </span><span class="hex">28 03      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,STRFIN          <span class="comment">;      </span>
<span class="number">0E6F 0E6F </span><span class="colon">: </span><span class="hex">B8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> b                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CLOSING QUOTE</span>
<span class="number">0E70 0E70 </span><span class="colon">: </span><span class="hex">20 F4      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,STRGET         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NO, GO BACK FOR MORE</span>
<span class="number">0E72 0E72 </span><span class="colon">: </span><span class="hex">FE 22      </span><span class="source">(M80) </span><span class="label">STRFIN:</span><span class="mnemonic"> cp     </span> '"'               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF QUOTE TERMINATES THE STRING</span>
<span class="number">0E74 0E74 </span><span class="colon">: </span><span class="hex">CC 6B 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> z,CHRGTR          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SKIP OVER THE QUOTE</span>
<span class="number">0E77 0E77 </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE POINTER AT END OF STRING</span>
<span class="number">0E78 0E78 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">0E79 0E79 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET POINTER TO TEMP</span>
<span class="number">0E7A 0E7A </span><span class="colon">: </span><span class="hex">79         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,c               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET CHARACTER COUNT IN A</span>
<span class="number">0E7B 0E7B </span><span class="colon">: </span><span class="hex">CD 53 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> STRAD2            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE STR INFO</span>
<span class="number">0E7E 0E7E </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0E7E 0E7E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Set Pointer to Temporary String Descriptor</span>
<span class="number">0E7E 0E7E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">SOME STRING FUNCTION IS RETURNING A RESULT IN DSCTMP</span>
<span class="number">0E7E 0E7E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">WE WANT TO SETUP A TEMP DESCRIPTOR WITH DCSTMP IN IT</span>
<span class="number">0E7E 0E7E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT A POINTER TO THE DESCRIPTOR IN FACLO AND FLAG THE</span>
<span class="number">0E7E 0E7E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">RESULT AS TYPE STRING             </span>
<span class="number">0E7E 0E7E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0E7E 0E7E </span><span class="colon">: </span><span class="hex">11 BD 38   </span><span class="source">[M80] </span><span class="label">PUTNEW:</span><span class="mnemonic"> ld     </span> de,DSCTMP         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[D,E] POINT AT RESULT DESCRIPTOR</span>
<span class="number">0E81 0E81 </span><span class="colon">: </span><span class="hex">2A AF 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(TEMPPT)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[H,L]=POINTER TO FIRST FREE TEMP</span>
<span class="number">0E84 0E84 </span><span class="colon">: </span><span class="hex">22 E4 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (FACLO),hl        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINTER AT WHERE RESULT DESCRIPTOR WILL BE</span>
<span class="number">0E87 0E87 </span><span class="colon">: </span><span class="hex">3E 01      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,1               <span class="comment">;      </span>
<span class="number">0E89 0E89 </span><span class="colon">: </span><span class="hex">32 AB 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (VALTYP),a        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FLAG THIS AS A STRING</span>
<span class="number">0E8C 0E8C </span><span class="colon">: </span><span class="hex">CD 3D 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVE              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND MOVE THE VALUE INTO A TEMPORARY</span>
<span class="number">0E8F 0E8F </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;;IF TEMPPT POINTS TO DSCTMP, THERE ARE NO FREE TEMPS</span>
<span class="number">0E90 0E90 </span><span class="colon">: </span><span class="hex">22 AF 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (TEMPPT),hl       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE NEW TEMPORARY POINTER</span>
<span class="number">0E93 0E93 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE TEXT POINTER</span>
<span class="number">0E94 0E94 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET CURRENT CHARACTER INTO [A]</span>
<span class="number">0E95 0E95 </span><span class="colon">: </span><span class="hex">C0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nz                <span class="comment">;      </span>
<span class="number">0E96 0E96 </span><span class="colon">: </span><span class="hex">11 1E 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,ERRST          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"STRING TEMPORARY" ERROR</span>
<span class="number">0E99 0E99 </span><span class="colon">: </span><span class="hex">C3 DB 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> ERROR             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GO TELL HIM</span>
<span class="number">0E9C 0E9C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0E9C 0E9C </span><span class="colon">- </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Output String                          </span>
<span class="number">0E9C 0E9C </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">PRINT THE STRING POINTED TO BY [H,L] WHICH ENDS WITH A ZERO</span>
<span class="number">0E9C 0E9C </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF THE STRING IS BELOW DSCTMP IT WILL BE COPIED INTO STRING SPACE</span>
<span class="number">0E9C 0E9C </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">0E9C 0E9C </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">STROUI:</span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINT AT NEXT CHARACTER</span>
<span class="number">0E9D 0E9D </span><span class="colon">= </span><span class="hex">CD 5F 0E   </span><span class="source">[M80] </span><span class="label">STROUT:</span><span class="mnemonic"> call   </span> STRLIT            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET A STRING LITERAL</span>
<span class="number">0EA0 0EA0 </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">; PRINT THE STRING WHOSE DESCRIPTOR IS POINTED TO BY FACLO.</span>
<span class="number">0EA0 0EA0 </span><span class="colon">= </span><span class="hex">CD C9 0F   </span><span class="source">[M80] </span><span class="label">STRPRT:</span><span class="mnemonic"> call   </span> FREFAC            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RETURN TEMP POINTER BY FACLO</span>
<span class="number">0EA3 0EA3 </span><span class="colon">: </span><span class="hex">CD 31 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVRM             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[D]=LENGTH [B,C]=POINTER AT DATA</span>
<span class="number">0EA6 0EA6 </span><span class="colon">: </span><span class="hex">1C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> e                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHECK FOR NULL STRING</span>
<span class="number">0EA7 0EA7 </span><span class="colon">: </span><span class="hex">1D         </span><span class="source">[M80] </span><span class="label">STRPR2:</span><span class="mnemonic"> dec    </span> e                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DECREMENT THE LENGTH</span>
<span class="number">0EA8 0EA8 </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALL DONE</span>
<span class="number">0EA9 0EA9 </span><span class="colon">: </span><span class="hex">0A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(bc)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET CHARACTER TO PRINT</span>
<span class="number">0EAA 0EAA </span><span class="colon">: </span><span class="hex">DF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> OUTCHR            <span class="comment">;      </span>
<span class="number">0EAB 0EAB </span><span class="colon">: </span><span class="hex">FE 0D      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 13                <span class="comment">;      </span>
<span class="number">0EAD 0EAD </span><span class="colon">: </span><span class="hex">CC F0 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> z,CRFIN           <span class="comment">;</span><span class="source">[M65] </span><span class="comment">TYPE REST OF CARRIAGE RETURN</span>
<span class="number">0EB0 0EB0 </span><span class="colon">: </span><span class="hex">03         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINT TO THE NEXT CHARACTER</span>
<span class="number">0EB1 0EB1 </span><span class="colon">: </span><span class="hex">18 F4      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> STRPR2            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND PRINT IT...</span>
<span class="number">0EB3 0EB3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0EB3 0EB3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">GETSPA - GET SPACE FOR CHARACTER STRING</span>
<span class="number">0EB3 0EB3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAY FORCE GARBAGE COLLECTION.     </span>
<span class="number">0EB3 0EB3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">0EB3 0EB3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"># OF CHARS (BYTES) IN [A]         </span>
<span class="number">0EB3 0EB3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">RETURNS WITH POINTER IN [D,E] OTHERWISE IF CANT GET SPACE</span>
<span class="number">0EB3 0EB3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">BLOWS OFF TO "OUT OF STRING SPACE" TYPE ERROR.</span>
<span class="number">0EB3 0EB3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">0EB3 0EB3 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">[M80] </span><span class="label">GETSPA:</span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MUST BE NON ZERO. SIGNAL NO GARBAG YET</span>
<span class="number">0EB4 0EB4 </span><span class="colon">: </span><span class="hex">0E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $0E               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"MVI C" AROUND THE NEXT BYTE</span>
<span class="number">0EB5 0EB5 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">[M80] </span><span class="label">TRYGI2:</span><span class="mnemonic"> pop    </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IN CASE COLLECTED WHAT WAS LENGTH?</span>
<span class="number">0EB6 0EB6 </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE IT BACK</span>
<span class="number">0EB7 0EB7 </span><span class="colon">: </span><span class="hex">2A 4B 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(TOPMEM)       <span class="comment">;      </span>
<span class="number">0EBA 0EBA </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IN [D,E]</span>
<span class="number">0EBB 0EBB </span><span class="colon">: </span><span class="hex">2A C1 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(FRETOP)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET TOP OF FREE SPACE IN [H,L]</span>
<span class="number">0EBE 0EBE </span><span class="colon">: </span><span class="hex">2F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cpl    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">-# OF CHARS</span>
<span class="number">0EBF 0EBF </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IN [B,C]</span>
<span class="number">0EC0 0EC0 </span><span class="colon">: </span><span class="hex">06 FF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,$FF             <span class="comment">;      </span>
<span class="number">0EC2 0EC2 </span><span class="colon">: </span><span class="hex">09         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,bc             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SUBTRACT FROM TOP OF FREE</span>
<span class="number">0EC3 0EC3 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">0EC4 0EC4 </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">COMPARE THE TWO</span>
<span class="number">0EC5 0EC5 </span><span class="colon">: </span><span class="hex">38 07      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,GARBAG          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NOT ENOUGH ROOM FOR STRING, OFFAL TIME</span>
<span class="number">0EC7 0EC7 </span><span class="colon">: </span><span class="hex">22 C1 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (FRETOP),hl       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE NEW BOTTOM OF MEMORY</span>
<span class="number">0ECA 0ECA </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MOVE BACK TO POINT TO STRING</span>
<span class="number">0ECB 0ECB </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RETURN WITH POINTER IN [D,E]</span>
<span class="number">0ECC 0ECC </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;      </span>
<span class="number">0ECD 0ECD </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">0ECE 0ECE </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0ECE 0ECE </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;Garbage Collector - Removes Orphaned Strings</span>
<span class="number">0ECE 0ECE </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">[M80] </span><span class="label">GARBAG:</span><span class="mnemonic"> pop    </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">HAVE WE COLLECTED BEFORE?</span>
<span class="number">0ECF 0ECF </span><span class="colon">: </span><span class="hex">11 1A 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,ERRSO          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET READY FOR OUT OF STRING SPACE ERROR</span>
<span class="number">0ED2 0ED2 </span><span class="colon">: </span><span class="hex">CA DB 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,ERROR           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GO TELL USER HE LOST</span>
<span class="number">0ED5 0ED5 </span><span class="colon">: </span><span class="hex">BF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET ZERO FLAG TO SAY WEVE GARBAGED</span>
<span class="number">0ED6 0ED6 </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE FLAG BACK ON STACK</span>
<span class="number">0ED7 0ED7 </span><span class="colon">: </span><span class="hex">01 B5 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> bc,TRYGI2         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PLACE FOR GARBAG TO RETURN TO.</span>
<span class="number">0EDA 0EDA </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE ON STACK</span>
<span class="number">0EDB 0EDB </span><span class="colon">: </span><span class="hex">2A AD 38   </span><span class="source">[M80] </span><span class="label">GARBA2:</span><span class="mnemonic"> ld     </span> hl,(MEMSIZ)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">START FROM TOP DOWN</span>
<span class="number">0EDE 0EDE </span><span class="colon">: </span><span class="hex">22 C1 38   </span><span class="source">(M80) </span><span class="label">FNDVAR:</span><span class="mnemonic"> ld     </span> (FRETOP),hl       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">LIKE SO</span>
<span class="number">0EE1 0EE1 </span><span class="colon">: </span><span class="hex">21 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,0              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET DOUBLE ZERO</span>
<span class="number">0EE4 0EE4 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAY DIDNT SEE VARS THIS PASS</span>
<span class="number">0EE5 0EE5 </span><span class="colon">: </span><span class="hex">2A DA 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(STREND)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FORCE DVARS TO IGNORE STRINGS IN PROGRAM TEXT</span>
<span class="number">0EE8 0EE8 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FORCE FIND HIGH ADDRESS</span>
<span class="number">0EE9 0EE9 </span><span class="colon">: </span><span class="hex">21 B1 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,TEMPST         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET START OF STRING TEMPS</span>
<span class="number">0EEC 0EEC </span><span class="colon">: </span><span class="hex">ED 5B AF 38</span><span class="source">(M80) </span><span class="label">TVAR:  </span><span class="mnemonic"> ld     </span> de,(TEMPPT)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF DONE</span>
<span class="number">0EF0 0EF0 </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TEST</span>
<span class="number">0EF1 0EF1 </span><span class="colon">: </span><span class="hex">01 EC 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> bc,TVAR           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FORCE JUMP TO TVAR</span>
<span class="number">0EF4 0EF4 </span><span class="colon">: </span><span class="hex">C2 32 0F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,DVAR2          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DO TEMP VAR GARBAGE COLLECT</span>
<span class="number">0EF7 0EF7 </span><span class="colon">: </span><span class="hex">2A D6 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(VARTAB)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET STARTING POINT IN [H,L]</span>
<span class="number">0EFA 0EFA </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0EFA 0EFA </span><span class="colon">: </span><span class="hex">ED 5B D8 38</span><span class="source">(M80) </span><span class="label">SVAR:  </span><span class="mnemonic"> ld     </span> de,(ARYTAB)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET STOPPING LOCATION</span>
<span class="number">0EFE 0EFE </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF AT END OF SIMPS</span>
<span class="number">0EFF 0EFF </span><span class="colon">: </span><span class="hex">28 0A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,ARYVA4          <span class="comment">;      </span>
<span class="number">0F01 0F01 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;{M80} BUMP POINTER</span>
<span class="number">0F02 0F02 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET VALTYP</span>
<span class="number">0F03 0F03 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINT AT THE VALUE</span>
<span class="number">0F04 0F04 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;      </span>
<span class="number">0F05 0F05 </span><span class="colon">: </span><span class="hex">CD 35 0F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> DVARS             <span class="comment">;      </span>
<span class="number">0F08 0F08 </span><span class="colon">: </span><span class="hex">18 F0      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> SVAR              <span class="comment">;      </span>
<span class="number">0F0A 0F0A </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;;Subsection of [M80] ARYVAR            </span>
<span class="number">0F0A 0F0A </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">(M80) </span><span class="label">ARYVA2:</span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET RID OF STACK GARBAGE</span>
<span class="number">0F0B 0F0B </span><span class="colon">: </span><span class="hex">ED 5B DA 38</span><span class="source">(M80) </span><span class="label">ARYVA4:</span><span class="mnemonic"> ld     </span> de,(STREND)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET RID OF STACK GARBAGE</span>
<span class="number">0F0F 0F0F </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF DONE WITH ARRAYS</span>
<span class="number">0F10 0F10 </span><span class="colon">: </span><span class="hex">CA 57 0F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,GRBPAS          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">YES, SEE IF DONE COLLECTING</span>
<span class="number">0F13 0F13 </span><span class="colon">: </span><span class="hex">CD 31 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVRM             <span class="comment">;      </span>
<span class="number">0F16 0F16 </span><span class="colon">: </span><span class="hex">7A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,d               <span class="comment">;      </span>
<span class="number">0F17 0F17 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;      </span>
<span class="number">0F18 0F18 </span><span class="colon">: </span><span class="hex">09         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,bc             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ADDING BASE TO LENGTH</span>
<span class="number">0F19 0F19 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment"></span>
<span class="number">0F1A 0F1A </span><span class="colon">: </span><span class="hex">F2 0A 0F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> p,ARYVA2          <span class="comment">;;Loop </span>
<span class="number">0F1D 0F1D </span><span class="colon">: </span><span class="hex">22 C5 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (TEMP8),hl        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE END OF ARRAY</span>
<span class="number">0F20 0F20 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET BACK CURRENT POSITION</span>
<span class="number">0F21 0F21 </span><span class="colon">: </span><span class="hex">4E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PICK UP NUMBER OF DIMS</span>
<span class="number">0F22 0F22 </span><span class="colon">: </span><span class="hex">06 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,0               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE DOUBLE WITH HIGH ZERO</span>
<span class="number">0F24 0F24 </span><span class="colon">: </span><span class="hex">09         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,bc             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GO PAST DIMS</span>
<span class="number">0F25 0F25 </span><span class="colon">: </span><span class="hex">09         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,bc             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">BY ADDING ON TWICE #DIMS (2 BYTE GUYS)</span>
<span class="number">0F26 0F26 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ONE MORE TO ACCOUNT FOR #DIMS.</span>
<span class="number">0F27 0F27 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">(M80) </span><span class="label">ARYSTR:</span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE CURRENT POSIT IN [D,E]</span>
<span class="number">0F28 0F28 </span><span class="colon">: </span><span class="hex">2A C5 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(TEMP8)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET END OF ARRAY</span>
<span class="number">0F2B 0F2B </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FIX [H,L] BACK TO CURRENT</span>
<span class="number">0F2C 0F2C </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF AT END OF ARRAY</span>
<span class="number">0F2D 0F2D </span><span class="colon">: </span><span class="hex">28 DC      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,ARYVA4          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">END OF ARRAY, TRY NEXT ARRAY</span>
<span class="number">0F2F 0F2F </span><span class="colon">: </span><span class="hex">01 27 0F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> bc,ARYSTR         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ADDR OF WHERE TO RETURN TO</span>
<span class="number">0F32 0F32 </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">(M80) </span><span class="label">DVAR2: </span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GOES ON STACK</span>
<span class="number">0F33 0F33 </span><span class="colon">: </span><span class="hex">F6 80      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> $80               <span class="comment">;;Set Flags</span>
<span class="number">0F35 0F35 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">[M80] </span><span class="label">DVARS: </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET VALTYP</span>
<span class="number">0F36 0F36 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">BUMP POINTER TWICE</span>
<span class="number">0F37 0F37 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">0F38 0F38 </span><span class="colon">: </span><span class="hex">5E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[D,E]=AMOUNT TO SKIP</span>
<span class="number">0F39 0F39 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">0F3A 0F3A </span><span class="colon">: </span><span class="hex">56         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,(hl)            <span class="comment">;      </span>
<span class="number">0F3B 0F3B </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">0F3C 0F3C </span><span class="colon">: </span><span class="hex">F0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> p                 <span class="comment">;      </span>
<span class="number">0F3D 0F3D </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;      </span>
<span class="number">0F3E 0F3E </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NULL STRING, RETURN</span>
<span class="number">0F3F 0F3F </span><span class="colon">: </span><span class="hex">44         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,h               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MOVE [B,C] BACK TO [H,L]</span>
<span class="number">0F40 0F40 </span><span class="colon">: </span><span class="hex">4D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,l               <span class="comment">;      </span>
<span class="number">0F41 0F41 </span><span class="colon">: </span><span class="hex">2A C1 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(FRETOP)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET POINTER TO TOP OF STRING FREE SPACE</span>
<span class="number">0F44 0F44 </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS THIS STRINGS POINTER .LT. FRETOP</span>
<span class="number">0F45 0F45 </span><span class="colon">: </span><span class="hex">60         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MOVE [B,C] BACK TO [H,L]</span>
<span class="number">0F46 0F46 </span><span class="colon">: </span><span class="hex">69         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,c               <span class="comment">;      </span>
<span class="number">0F47 0F47 </span><span class="colon">: </span><span class="hex">D8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> c                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF NOT, NO NEED TO MESS WITH IT FURTHUR</span>
<span class="number">0F48 0F48 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET RETURN ADDRESS OFF STACK</span>
<span class="number">0F49 0F49 </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET MAX SEEN SO FAR & SAVE RETURN ADDRESS</span>
<span class="number">0F4A 0F4A </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">LETS SEE</span>
<span class="number">0F4B 0F4B </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE MAX SEEN & GET RETURN ADDRESS OFF STACK</span>
<span class="number">0F4C 0F4C </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE RETURN ADDRESS BACK</span>
<span class="number">0F4D 0F4D </span><span class="colon">: </span><span class="hex">60         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MOVE [B,C] BACK TO [H,L]</span>
<span class="number">0F4E 0F4E </span><span class="colon">: </span><span class="hex">69         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,c               <span class="comment">;</span><span class="source">[     </span><span class="comment"></span>
<span class="number">0F4F 0F4F </span><span class="colon">: </span><span class="hex">D0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF NOT, LETS LOOK AT NEXT VAR</span>
<span class="number">0F50 0F50 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET RETURN ADDR OFF STACK</span>
<span class="number">0F51 0F51 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POP OFF MAX SEEN</span>
<span class="number">0F52 0F52 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND VARIABLE POINTER</span>
<span class="number">0F53 0F53 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE NEW VARIABLE POINTER</span>
<span class="number">0F54 0F54 </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND NEW MAX POINTER</span>
<span class="number">0F55 0F55 </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE RETURN ADDRESS BACK</span>
<span class="number">0F56 0F56 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND RETURN</span>
<span class="number">0F57 0F57 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0F57 0F57 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">HERE WHEN MADE ONE COMPLETE PASS THRU STRING VARS</span>
<span class="number">0F57 0F57 </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">[M80] </span><span class="label">GRBPAS:</span><span class="mnemonic"> pop    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POP OFF MAX POINTER</span>
<span class="number">0F58 0F58 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND GET VARIABLE POINTER</span>
<span class="number">0F59 0F59 </span><span class="colon">: </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,h               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET LOW IN</span>
<span class="number">0F5A 0F5A </span><span class="colon">: </span><span class="hex">B5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> l                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF ZERO POINTER</span>
<span class="number">0F5B 0F5B </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF END OF COLLECTION, THEN MAYBE RETURN TO GETSPA</span>
<span class="number">0F5C 0F5C </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CURRENTLY JUST PAST THE DESCRIPTOR</span>
<span class="number">0F5D 0F5D </span><span class="colon">: </span><span class="hex">46         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[B]=HIGH BYTE OF DATA POINTER</span>
<span class="number">0F5E 0F5E </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;      </span>
<span class="number">0F5F 0F5F </span><span class="colon">: </span><span class="hex">4E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[B,C]=POINTER AT STRING DATA</span>
<span class="number">0F60 0F60 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE LOCATION TO UPDTE POINTER AFTER STRING IS MOVED</span>
<span class="number">0F61 0F61 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;      </span>
<span class="number">0F62 0F62 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;      </span>
<span class="number">0F63 0F63 </span><span class="colon">: </span><span class="hex">6E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[L]=STRING LENGTH</span>
<span class="number">0F64 0F64 </span><span class="colon">: </span><span class="hex">26 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,0               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[H,L] GET CHARACTER COUNT</span>
<span class="number">0F66 0F66 </span><span class="colon">: </span><span class="hex">09         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,bc             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[H,L]=POINTER BEYOND STRING</span>
<span class="number">0F67 0F67 </span><span class="colon">: </span><span class="hex">50         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,b               <span class="comment">;      </span>
<span class="number">0F68 0F68 </span><span class="colon">: </span><span class="hex">59         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,c               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[D,E]=ORIGINAL POINTER</span>
<span class="number">0F69 0F69 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DON'T MOVE ONE BEYOND STRING</span>
<span class="number">0F6A 0F6A </span><span class="colon">: </span><span class="hex">44         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,h               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET TOP OF STRING IN [B,C]</span>
<span class="number">0F6B 0F6B </span><span class="colon">: </span><span class="hex">4D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,l               <span class="comment">;      </span>
<span class="number">0F6C 0F6C </span><span class="colon">: </span><span class="hex">2A C1 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(FRETOP)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET TOP OF FREE SPACE</span>
<span class="number">0F6F 0F6F </span><span class="colon">: </span><span class="hex">CD 95 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> BLTUC             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MOVE STRING</span>
<span class="number">0F72 0F72 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET BACK POINTER TO DESC.</span>
<span class="number">0F73 0F73 </span><span class="colon">: </span><span class="hex">71         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),c            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE FIXED ADDR</span>
<span class="number">0F74 0F74 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MOVE POINTER</span>
<span class="number">0F75 0F75 </span><span class="colon">: </span><span class="hex">70         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),b            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">HIGH PART</span>
<span class="number">0F76 0F76 </span><span class="colon">: </span><span class="hex">60         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,b               <span class="comment">;      </span>
<span class="number">0F77 0F77 </span><span class="colon">: </span><span class="hex">69         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,c               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[H,L]=NEW POINTER</span>
<span class="number">0F78 0F78 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FIX UP FRETOP</span>
<span class="number">0F79 0F79 </span><span class="colon">: </span><span class="hex">C3 DE 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> FNDVAR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND TRY TO FIND HIGH AGAIN</span>
<span class="number">0FC7 0FC7 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;                                        </span>
<span class="number">0FC7 0FC7 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">STRING CONCATENATION              </span>
<span class="number">0FC7 0FC7 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE FOLLOWING ROUTINE CONCATENATES TWO STRINGS</span>
<span class="number">0FC7 0FC7 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE FACLO CONTAINS THE FIRST ONE AT THIS POINT,</span>
<span class="number">0FC7 0FC7 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">[H,L] POINTS  BEYOND THE + SIGN AFTER IT</span>
<span class="number">0FC7 0FC7 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;                                        </span>
<span class="number">0F7C 0F7C </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">[M80] </span><span class="label">CAT:   </span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT OLD PRECEDENCE BACK ON</span>
<span class="number">0F7D 0F7D </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE TEXT POINTER</span>
<span class="number">0F7E 0F7E </span><span class="colon">: </span><span class="hex">2A E4 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(FACLO)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET POINTER TO STRING DESC.</span>
<span class="number">0F81 0F81 </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE ON STACK & GET TEXT POINTER BACK</span>
<span class="number">0F82 0F82 </span><span class="colon">: </span><span class="hex">CD FD 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> EVAL              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">EVALUATE REST OF FORMULA</span>
<span class="number">0F85 0F85 </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE TEXT POINTER, GET BACK DESC.</span>
<span class="number">0F86 0F86 </span><span class="colon">: </span><span class="hex">CD 76 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CHKSTR            <span class="comment">;      </span>
<span class="number">0F89 0F89 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;      </span>
<span class="number">0F8A 0F8A </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE DESC. POINTER.</span>
<span class="number">0F8B 0F8B </span><span class="colon">: </span><span class="hex">2A E4 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(FACLO)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET POINTER TO 2ND DESC.</span>
<span class="number">0F8E 0F8E </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE IT</span>
<span class="number">0F8F 0F8F </span><span class="colon">: </span><span class="hex">86         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ADD TWO LENGTHS TOGETHER</span>
<span class="number">0F90 0F90 </span><span class="colon">: </span><span class="hex">11 1C 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,ERRLS          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF RESULT .LT. 256</span>
<span class="number">0F93 0F93 </span><span class="colon">: </span><span class="hex">DA DB 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> c,ERROR           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ERROR "LONG STRING"</span>
<span class="number">0F96 0F96 </span><span class="colon">: </span><span class="hex">CD 50 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> STRINI            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET INITIAL STRING</span>
<span class="number">0F99 0F99 </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET 2ND DESC.</span>
<span class="number">0F9A 0F9A </span><span class="colon">: </span><span class="hex">CD CD 0F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FRETMP            <span class="comment">;      </span>
<span class="number">0F9D 0F9D </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE POINTER TO IT</span>
<span class="number">0F9E 0F9E </span><span class="colon">: </span><span class="hex">CD CC 0F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FRETM2            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FREE UP 1ST TEMP</span>
<span class="number">0FA1 0FA1 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE DESC. POINTER (FIRST)</span>
<span class="number">0FA2 0FA2 </span><span class="colon">: </span><span class="hex">2A BF 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(DSCTMP+2)     <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET POINTER TO FIRST</span>
<span class="number">0FA5 0FA5 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IN [D,E]</span>
<span class="number">0FA6 0FA6 </span><span class="colon">: </span><span class="hex">CD B4 0F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVINS            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MOVE IN THE FIRST STRING</span>
<span class="number">0FA9 0FA9 </span><span class="colon">: </span><span class="hex">CD B4 0F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVINS            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND THE SECOND</span>
<span class="number">0FAC 0FAC </span><span class="colon">: </span><span class="hex">21 91 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,TSTOP          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CAT REENTERS FORMULA EVALUATION AT TSTOP</span>
<span class="number">0FAF 0FAF </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;      </span>
<span class="number">0FB0 0FB0 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TEXT POINTER OFF FIRST</span>
<span class="number">0FB1 0FB1 </span><span class="colon">: </span><span class="hex">C3 7E 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> PUTNEW            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">THEN RETURN ADDRESS OF TSTOP</span>
<span class="number">0FB4 0FB4 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0FB4 0FB4 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">[M80] </span><span class="label">MOVINS:</span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET RETURN ADDR</span>
<span class="number">0FB5 0FB5 </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT BACK, BUT GET DESC.</span>
<span class="number">0FB6 0FB6 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[A]=STRING LENGTH</span>
<span class="number">0FB7 0FB7 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">0FB8 0FB8 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">0FB9 0FB9 </span><span class="colon">: </span><span class="hex">4E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[B,C]=POINTER AT STRING DATA</span>
<span class="number">0FBA 0FBA </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">0FBB 0FBB </span><span class="colon">: </span><span class="hex">46         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,(hl)            <span class="comment">;      </span>
<span class="number">0FBC 0FBC </span><span class="colon">: </span><span class="hex">6F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[L]=STRING LENGTH</span>
<span class="number">0FBD 0FBD </span><span class="colon">: </span><span class="hex">2C         </span><span class="source">[M80] </span><span class="label">MOVSTR:</span><span class="mnemonic"> inc    </span> l                 <span class="comment">;;Copying [L] Bytes from [BC] to [DE]</span>
<span class="number">0FBE 0FBE </span><span class="colon">: </span><span class="hex">2D         </span><span class="source">(M80) </span><span class="label">MOVLP: </span><span class="mnemonic"> dec    </span> l                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET CC'S</span>
<span class="number">0FBF 0FBF </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">0, NO BYTE TO MOVE</span>
<span class="number">0FC0 0FC0 </span><span class="colon">: </span><span class="hex">0A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(bc)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET CHAR</span>
<span class="number">0FC1 0FC1 </span><span class="colon">: </span><span class="hex">12         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (de),a            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE IT</span>
<span class="number">0FC2 0FC2 </span><span class="colon">: </span><span class="hex">03         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MOVE POINTERS</span>
<span class="number">0FC3 0FC3 </span><span class="colon">: </span><span class="hex">13         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> de                <span class="comment">;      </span>
<span class="number">0FC4 0FC4 </span><span class="colon">: </span><span class="hex">18 F8      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> MOVLP             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">KEEP DOING IT</span>
<span class="number">0FC6 0FC6 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0FC6 0FC6 </span><span class="colon">- </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">FREE UP STRING TEMPORARY          </span>
<span class="number">0FC6 0FC6 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">FRESTR, FREFAC, FRETMP, FRETMS    </span>
<span class="number">0FC6 0FC6 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">FRETMP IS PASSED A POINTER TO A STRING DESCRIPTOR IN [D,E]</span>
<span class="number">0FC6 0FC6 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THIS VALUE IS RETURNED IN [H,L]. ALL THE OTHER REGISTERS ARE MODIFIED.</span>
<span class="number">0FC6 0FC6 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">A CHECK TO IS MADE TO SEE IF THE STRING DESCRIPTOR [D,E] POINTS</span>
<span class="number">0FC6 0FC6 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">TO IS THE LAST TEMPORARY DESCRIPTOR ALLOCATED BY PUTNEW.</span>
<span class="number">0FC6 0FC6 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF SO, THE TEMPORARY IS FREED UP BY THE UPDATING OF TEMPPT.</span>
<span class="number">0FC6 0FC6 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF A TEMPORARY IS FREED UP, A FURTHER CHECK IS MADE TO SEE IF THE</span>
<span class="number">0FC6 0FC6 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">STRING DATA THAT THAT STRING TEMPORARY POINTED TO IS THE</span>
<span class="number">0FC6 0FC6 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE LOWEST PART OF STRING SPACE IN USE.</span>
<span class="number">0FC6 0FC6 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF SO, FRETMP IS UPDATED TO REFLECT THE FACT THAT THAT SPACE IS NO</span>
<span class="number">0FC6 0FC6 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">LONGER IN USE.                    </span>
<span class="number">0FC6 0FC6 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">0FC6 0FC6 </span><span class="colon">= </span><span class="hex">CD 76 09   </span><span class="source">[M80] </span><span class="label">FRESTR:</span><span class="mnemonic"> call   </span> CHKSTR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE SURE ITS A STRING</span>
<span class="number">0FC9 0FC9 </span><span class="colon">: </span><span class="hex">2A E4 38   </span><span class="source">[M80] </span><span class="label">FREFAC:</span><span class="mnemonic"> ld     </span> hl,(FACLO)        <span class="comment">;      </span>
<span class="number">0FCC 0FCC </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">[M80] </span><span class="label">FRETM2:</span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FREE UP THE TEMP IN THE FACLO</span>
<span class="number">0FCD 0FCD </span><span class="colon">: </span><span class="hex">CD E4 0F   </span><span class="source">[M80] </span><span class="label">FRETMP:</span><span class="mnemonic"> call   </span> FRETMS            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FREE UP THE TEMPORARY</span>
<span class="number">0FD0 0FD0 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT THE STRING POINTER INTO [H,L]</span>
<span class="number">0FD1 0FD1 </span><span class="colon">: </span><span class="hex">C0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nz                <span class="comment">;      </span>
<span class="number">0FD2 0FD2 </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE [D,E] TO RETURN IN [H,L]</span>
<span class="number">0FD3 0FD3 </span><span class="colon">: </span><span class="hex">50         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[D,E]=POINTER AT STRING</span>
<span class="number">0FD4 0FD4 </span><span class="colon">: </span><span class="hex">59         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,c               <span class="comment">;      </span>
<span class="number">0FD5 0FD5 </span><span class="colon">: </span><span class="hex">1B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SUBTRACT ONE</span>
<span class="number">0FD6 0FD6 </span><span class="colon">: </span><span class="hex">4E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[C]=LENGTH OF THE STRING FREED UP</span>
<span class="number">0FD7 0FD7 </span><span class="colon">: </span><span class="hex">2A C1 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(FRETOP)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF ITS THE FIRST ONE IN STRING SPACE</span>
<span class="number">0FDA 0FDA </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;      </span>
<span class="number">0FDB 0FDB </span><span class="colon">: </span><span class="hex">20 05      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,NOTLST         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NO SO DON'T ADD</span>
<span class="number">0FDD 0FDD </span><span class="colon">: </span><span class="hex">47         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE [B]=0</span>
<span class="number">0FDE 0FDE </span><span class="colon">: </span><span class="hex">09         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,bc             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ADD</span>
<span class="number">0FDF 0FDF </span><span class="colon">: </span><span class="hex">22 C1 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (FRETOP),hl       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND UPDATE FRETOP</span>
<span class="number">0FE2 0FE2 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">(M80) </span><span class="label">NOTLST:</span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET POINTER AT CURRENT DESCRIPTOR</span>
<span class="number">0FE3 0FE3 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">0FE4 0FE4 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0FE4 0FE4 </span><span class="colon">: </span><span class="hex">2A AF 38   </span><span class="source">[M80] </span><span class="label">FRETMS:</span><span class="mnemonic"> ld     </span> hl,(TEMPPT)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET TEMP POINTER</span>
<span class="number">0FE7 0FE7 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">LOOK AT WHAT IS IN THE LAST TEMP</span>
<span class="number">0FE8 0FE8 </span><span class="colon">: </span><span class="hex">46         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[B,C]=POINTER AT STRING</span>
<span class="number">0FE9 0FE9 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DECREMENT TEMPPT BY STRSIZ</span>
<span class="number">0FEA 0FEA </span><span class="colon">: </span><span class="hex">4E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,(hl)            <span class="comment">;      </span>
<span class="number">0FEB 0FEB </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;      </span>
<span class="number">0FEC 0FEC </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;      </span>
<span class="number">0FED 0FED </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF [D,E] POINT AT THE LAST</span>
<span class="number">0FEE 0FEE </span><span class="colon">: </span><span class="hex">C0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nz                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RETURN NOW IF NOW FREEING DONE</span>
<span class="number">0FEF 0FEF </span><span class="colon">: </span><span class="hex">22 AF 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (TEMPPT),hl       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">UPDATE THE TEMP POINTER SINCE</span>
<span class="number">0FF2 0FF2 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">0FF3 0FF3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">0FF3 0FF3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE FUNCTION LEN($)               </span>
<span class="number">0FF3 0FF3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">RETURNS THE LENGTH OF THE STRING PASSED AS AN ARGUMENT</span>
<span class="number">0FF3 0FF3 </span><span class="colon">: </span><span class="hex">01 36 0B   </span><span class="source">[M80] </span><span class="label">LEN:   </span><span class="mnemonic"> ld     </span> bc,SNGFLT         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CALL SNGFLT WHEN DONE</span>
<span class="number">0FF6 0FF6 </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">LIKE SO</span>
<span class="number">0FF7 0FF7 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;Return Length of String pointed to by FAC in [A]</span>
<span class="number">0FF7 0FF7 </span><span class="colon">: </span><span class="hex">CD C6 0F   </span><span class="source">[M80] </span><span class="label">LEN1:  </span><span class="mnemonic"> call   </span> FRESTR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FREE UP TEMP POINTED TO BY FACLO</span>
<span class="number">0FFA 0FFA </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FORCE NUMERIC FLAG</span>
<span class="number">0FFB 0FFB </span><span class="colon">: </span><span class="hex">57         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET HIGH OF [D,E] TO ZERO FOR VAL</span>
<span class="number">0FFC 0FFC </span><span class="colon">: </span><span class="hex">32 AB 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (VALTYP),a        <span class="comment">;      </span>
<span class="number">0FFF 0FFF </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;      </span>
<span class="number">1000 1000 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET CONDITION CODES ON LENGTH</span>
<span class="number">1001 1001 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RETURN</span>
<span class="number">1002 1002 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1002 1002 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE FOLLOWING IS THE ASC($) FUNCTION.</span>
<span class="number">1002 1002 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IT RETURNS AN INTEGER WHICH IS THE DECIMAL ASCII EQUIVALENT</span>
<span class="number">1002 1002 </span><span class="colon">: </span><span class="hex">01 36 0B   </span><span class="source">[M80] </span><span class="label">ASC:   </span><span class="mnemonic"> ld     </span> bc,SNGFLT         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WHERE TO GO WHEN DONE</span>
<span class="number">1005 1005 </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE RETURN ADDR ON STACK</span>
<span class="number">1006 1006 </span><span class="colon">: </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Return [DE] = Pointer to String Text, [A]=First Character</span>
<span class="number">1006 1006 </span><span class="colon">: </span><span class="hex">CD F7 0F   </span><span class="source">[M80] </span><span class="label">ASC2:  </span><span class="mnemonic"> call   </span> LEN1              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET UP ORIGINAL STR</span>
<span class="number">1009 1009 </span><span class="colon">: </span><span class="hex">CA 97 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,FCERR           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NULL STR, BAD ARG.</span>
<span class="number">100C 100C </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">BUMP POINTER</span>
<span class="number">100D 100D </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">100E 100E </span><span class="colon">: </span><span class="hex">5E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[D,E]=POINTER AT STRING DATA</span>
<span class="number">100F 100F </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">1010 1010 </span><span class="colon">: </span><span class="hex">56         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,(hl)            <span class="comment">;      </span>
<span class="number">1011 1011 </span><span class="colon">: </span><span class="hex">1A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(de)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[A]=FIRST CHARACTER</span>
<span class="number">1012 1012 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">1013 1013 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1013 1013 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;CHR$ Function                          </span>
<span class="number">1013 1013 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHR$(#) CREATES A STRING WHICH CONTAINS AS ITS ONLY</span>
<span class="number">1013 1013 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHARACTER THE ASCII EQUIVALENT OF THE INTEGER ARG (#)</span>
<span class="number">1013 1013 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">WHICH MUST BE .LE. 255.           </span>
<span class="number">1013 1013 </span><span class="colon">: </span><span class="hex">CD 4E 0E   </span><span class="source">[M65] </span><span class="label">CHR:   </span><span class="mnemonic"> call   </span> STRIN1            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET STRING IN DSCTMP</span>
<span class="number">1016 1016 </span><span class="colon">: </span><span class="hex">CD 57 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CONINT            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET INTEGER IN RANGE</span>
<span class="number">1019 1019 </span><span class="colon">: </span><span class="hex">2A BF 38   </span><span class="source">[M80] </span><span class="label">SETSTR:</span><span class="mnemonic"> ld     </span> hl,(DSCTMP+2)     <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET ADDR OF STR</span>
<span class="number">101C 101C </span><span class="colon">: </span><span class="hex">73         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),e            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE ASCII BYTE</span>
<span class="number">101D 101D </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">[M80] </span><span class="label">FINBCK:</span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RETURN TO HIGHER LEVEL & SKIP THE CHKNUM CALL</span>
<span class="number">101E 101E </span><span class="colon">: </span><span class="hex">C3 7E 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> PUTNEW            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GO CALL PUTNEW</span>
<span class="number">1021 1021 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1021 1021 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE FOLLOWING IS THE LEFT$($,#) FUNCTION.</span>
<span class="number">1021 1021 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IT TAKES THE LEFTMOST # CHARS OF THE STR.</span>
<span class="number">1021 1021 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF # IS .GT. THAN THE LEN OF THE STR, IT RETURNS THE WHOLE STR.</span>
<span class="number">1021 1021 </span><span class="colon">: </span><span class="hex">CD A0 10   </span><span class="source">[M65] </span><span class="label">LEFT:  </span><span class="mnemonic"> call   </span> PREAM             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TEST THE PARAMETERS</span>
<span class="number">1024 1024 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">LEFT NEVER CHANGES STRING POINTER</span>
<span class="number">1025 1025 </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">[M80] </span><span class="label">LEFT3: </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE TEXT POINTER</span>
<span class="number">1026 1026 </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">OFFSET NOW IN [C]</span>
<span class="number">1027 1027 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">[M80] </span><span class="label">LEFT2: </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE DESC. FOR  FRETMP</span>
<span class="number">1028 1028 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET STRING LENGTH</span>
<span class="number">1029 1029 </span><span class="colon">: </span><span class="hex">B8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> b                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ENTIRE STRING WANTED?</span>
<span class="number">102A 102A </span><span class="colon">: </span><span class="hex">38 02      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,ALLSTR          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF #CHARS ASKED FOR.GE.LENGTH,YES</span>
<span class="number">102C 102C </span><span class="colon">: </span><span class="hex">78         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET TRUNCATED LENGTH OF STRING</span>
<span class="number">102D 102D </span><span class="colon">: </span><span class="hex">11         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $11               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SKIP OVER MVI USING "LD D,"</span>
<span class="number">102E 102E </span><span class="colon">: </span><span class="hex">0E 00      </span><span class="source">[M80] </span><span class="label">ALLSTR:</span><span class="mnemonic"> ld     </span> c,0               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE OFFSET ZERO</span>
<span class="number">1030 1030 </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE OFFSET ON STACK</span>
<span class="number">1031 1031 </span><span class="colon">: </span><span class="hex">CD B3 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GETSPA            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET SPACE FOR NEW STRING</span>
<span class="number">1034 1034 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET BACK OFFSET</span>
<span class="number">1035 1035 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET BACK DESC POINTER.</span>
<span class="number">1036 1036 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">BUT KEEP ON STACK</span>
<span class="number">1037 1037 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MOVE TO STRING POINTER FIELD</span>
<span class="number">1038 1038 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">1039 1039 </span><span class="colon">: </span><span class="hex">46         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET POINTER LOW</span>
<span class="number">103A 103A </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">103B 103B </span><span class="colon">: </span><span class="hex">66         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINTER HIGH</span>
<span class="number">103C 103C </span><span class="colon">: </span><span class="hex">68         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET LOW IN  L</span>
<span class="number">103D 103D </span><span class="colon">: </span><span class="hex">06 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,0               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET READY TO ADD OFFSET TO POINTER</span>
<span class="number">103F 103F </span><span class="colon">: </span><span class="hex">09         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,bc             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ADD  IT</span>
<span class="number">1040 1040 </span><span class="colon">: </span><span class="hex">44         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,h               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET OFFSET POINTER IN [B,C]</span>
<span class="number">1041 1041 </span><span class="colon">: </span><span class="hex">4D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,l               <span class="comment">;      </span>
<span class="number">1042 1042 </span><span class="colon">: </span><span class="hex">CD 53 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> STRAD2            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE INFO IN DSCTMP</span>
<span class="number">1045 1045 </span><span class="colon">: </span><span class="hex">6F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET#  OF CHARS TO  MOVE IN L</span>
<span class="number">1046 1046 </span><span class="colon">: </span><span class="hex">CD BD 0F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVSTR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MOVE THEM IN</span>
<span class="number">1049 1049 </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET BACK DESC. POINTER</span>
<span class="number">104A 104A </span><span class="colon">: </span><span class="hex">CD CD 0F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FRETMP            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FREE IT UP.</span>
<span class="number">104D 104D </span><span class="colon">: </span><span class="hex">C3 7E 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> PUTNEW            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT TEMP IN TEMP LIST</span>
<span class="number">1050 1050 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1050 1050 </span><span class="colon">: </span><span class="hex">CD A0 10   </span><span class="source">[M80] </span><span class="label">RIGHT: </span><span class="mnemonic"> call   </span> PREAM             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHECK ARG</span>
<span class="number">1053 1053 </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET DESC. POINTER</span>
<span class="number">1054 1054 </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE BACK FOR LEFT</span>
<span class="number">1055 1055 </span><span class="colon">: </span><span class="hex">1A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(de)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET PRESENT LEN OF STR</span>
<span class="number">1056 1056 </span><span class="colon">: </span><span class="hex">90         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> b                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SUBTRACT 2ND PARM</span>
<span class="number">1057 1057 </span><span class="colon">: </span><span class="hex">18 CC      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> LEFT3             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CONTINUE WITH LEFT CODE</span>
<span class="number">1059 1059 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1059 1059 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">MID ($,#) RETURNS STR WITH CHARS FROM # POSITION ONWARD.</span>
<span class="number">1059 1059 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF # IS GT LEN($) THEN RETURN NULL STRING.</span>
<span class="number">1059 1059 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">MID ($,#,#) RETURNS STR WITH CHARS FROM # POSITION</span>
<span class="number">1059 1059 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">FOR #2 CHARS. IF #2 GOES PAST END OF STRING, RETURN</span>
<span class="number">1059 1059 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">AS MUCH AS POSSIBLE.              </span>
<span class="number">1059 1059 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">[M80] </span><span class="label">MID:   </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT THE TEXT POINTER IN [H,L]</span>
<span class="number">105A 105A </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE FIRST CHARACTER</span>
<span class="number">105B 105B </span><span class="colon">: </span><span class="hex">CD A3 10   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> PREAM2            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET OFFSET OFF STACK AND MAKE</span>
<span class="number">105E 105E </span><span class="colon">: </span><span class="hex">04         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> b                 <span class="comment">;      </span>
<span class="number">105F 105F </span><span class="colon">: </span><span class="hex">05         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> b                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF EQUAL TO ZERO</span>
<span class="number">1060 1060 </span><span class="colon">: </span><span class="hex">CA 97 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,FCERR           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IT MUST NOT BE 0</span>
<span class="number">1063 1063 </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;      </span>
<span class="number">1064 1064 </span><span class="colon">: </span><span class="hex">1E FF      </span><span class="source">{M80} </span><span class="label">MIDRST:</span><span class="mnemonic"> ld     </span> e,$FF             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF TWO ARG GUY, TRUNCATE</span>
<span class="number">1066 1066 </span><span class="colon">: </span><span class="hex">FE 29      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> ')'               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[E] SAYS USE ALL CHARS</span>
<span class="number">1068 1068 </span><span class="colon">: </span><span class="hex">28 05      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,MID2            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF ONE ARGUMENT THIS IS CORRECT</span>
<span class="number">106A 106A </span><span class="colon">: </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK            <span class="comment">;      </span>
<span class="number">106B 106B </span><span class="colon">: </span><span class="hex">2C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> ','               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">COMMA? MUST DELINEATE 3RD ARG</span>
<span class="number">106C 106C </span><span class="colon">: </span><span class="hex">CD 54 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GETBYT            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET ARGUMENT  IN  [E]</span>
<span class="number">106F 106F </span><span class="colon">: </span><span class="hex">CF         </span><span class="source">[M80] </span><span class="label">MID2:  </span><span class="mnemonic"> rst    </span> SYNCHK            <span class="comment">;      </span>
<span class="number">1070 1070 </span><span class="colon">: </span><span class="hex">29         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> ')'               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MUST BE FOLLOWED BY )</span>
<span class="number">1071 1071 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET OFFSET BACK IN A</span>
<span class="number">1072 1072 </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE TEXT POINTER, GET DESC.</span>
<span class="number">1073 1073 </span><span class="colon">: </span><span class="hex">01 27 10   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> bc,LEFT2          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WHERE TO RETURN TO.</span>
<span class="number">1076 1076 </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GOES ON STACK</span>
<span class="number">1077 1077 </span><span class="colon">: </span><span class="hex">3D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SUB ONE FROM OFFSET</span>
<span class="number">1078 1078 </span><span class="colon">: </span><span class="hex">BE         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> (hl)              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINTER PAST END OF STR?</span>
<span class="number">1079 1079 </span><span class="colon">: </span><span class="hex">06 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,0               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ASSUME NULL LENGTH STR</span>
<span class="number">107B 107B </span><span class="colon">: </span><span class="hex">D0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">YES, JUST USE NULL STR</span>
<span class="number">107C 107C </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE OFFSET OF CHARACTER POINTER</span>
<span class="number">107D 107D </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET PRESENT LEN OF STR</span>
<span class="number">107E 107E </span><span class="colon">: </span><span class="hex">91         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> c                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SUBTRACT INDEX (2ND ARG)</span>
<span class="number">107F 107F </span><span class="colon">: </span><span class="hex">BB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> e                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS IT TRUNCATION</span>
<span class="number">1080 1080 </span><span class="colon">: </span><span class="hex">47         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET CALCED LENGTH IN B</span>
<span class="number">1081 1081 </span><span class="colon">: </span><span class="hex">D8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> c                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF NOT USE PARTIAL STR</span>
<span class="number">1082 1082 </span><span class="colon">: </span><span class="hex">43         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,e               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">USE TRUNCATED LENGTH</span>
<span class="number">1083 1083 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RETURN TO LEFT2</span>
<span class="number">1084 1084 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1084 1084 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE VAL FUNCTION TAKES A STRING AND TURN IT INTO A NUMBER</span>
<span class="number">1084 1084 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">BY INTERPRETING THE ASCII DIGITS. ETC..</span>
<span class="number">1084 1084 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">EXCEPT FOR THE PROBLEM THAT A TERMINATOR MUST BE SUPPLIED</span>
<span class="number">1084 1084 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">BY REPLACING THE CHARACTER BEYOND THE STRING, VAL</span>
<span class="number">1084 1084 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS MERELY A CALL TO FLOATING INPUT (FIN).</span>
<span class="number">1084 1084 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">1084 1084 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF STRING IS HIGHEST IN STRING SPACE WE ARE MODIFYING [MEMSIZ]</span>
<span class="number">1084 1084 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND THIS IS WHY [MEMSIZ] CAN'T BE USED TO STORE STRING DATA</span>
<span class="number">1084 1084 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">BECAUSE WHAT IF THE USER TOOK VAL OFF THAT HIGH STRING</span>
<span class="number">1084 1084 </span><span class="colon">: </span><span class="hex">CD F7 0F   </span><span class="source">[M80] </span><span class="label">VAL:   </span><span class="mnemonic"> call   </span> LEN1              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DO SETUP, SET RESULT=REAL</span>
<span class="number">1087 1087 </span><span class="colon">: </span><span class="hex">CA C3 12   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,ZERO            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE SURE TYPE SET UP OK IN EXTENDED</span>
<span class="number">108A 108A </span><span class="colon">: </span><span class="hex">5F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET LENGTH OF STR</span>
<span class="number">108B 108B </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TO HANDLE THE FACT THE IF</span>
<span class="number">108C 108C </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">108D 108D </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;      </span>
<span class="number">108E 108E </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">108F 108F </span><span class="colon">: </span><span class="hex">66         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TWO STRINGS "1" AND "2"</span>
<span class="number">1090 1090 </span><span class="colon">: </span><span class="hex">6F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ARE STORED NEXT TO EACH OTHER</span>
<span class="number">1091 1091 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND FIN IS CALLED POINTING TO</span>
<span class="number">1092 1092 </span><span class="colon">: </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE FIRST TWELVE WILL BE RETURNED</span>
<span class="number">1093 1093 </span><span class="colon">: </span><span class="hex">46         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE IDEA IS TO STORE 0 IN THE</span>
<span class="number">1094 1094 </span><span class="colon">: </span><span class="hex">72         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),d            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">STRING BEYOND THE ONE VAL</span>
<span class="number">1095 1095 </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS BEING CALLED ON</span>
<span class="number">1096 1096 </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE FIRST CHARACTER OF THE NEXT STRING</span>
<span class="number">1097 1097 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">***CALL CHRGET TO MAKE SURE</span>
<span class="number">1098 1098 </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">VAL(" -3")=-3</span>
<span class="number">1099 1099 </span><span class="colon">: </span><span class="hex">CD E5 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FIN               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IN EXTENDED, GET ALL THE PRECISION WE CAN</span>
<span class="number">109C 109C </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE MODIFIED CHARACTER OF THE NEXT STRING INTO [B]</span>
<span class="number">109D 109D </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE POINTER TO THE MODIFIED CHARACTER</span>
<span class="number">109E 109E </span><span class="colon">: </span><span class="hex">70         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),b            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RESTORE THE CHARACTER</span>
<span class="number">109F 109F </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">10A0 10A0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">10A0 10A0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">USED BY RIGHT$ AND LEFT$ FOR PARAMETER CHECKING AND SETUP</span>
<span class="number">10A0 10A0 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">[M80] </span><span class="label">PREAM: </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT THE TEXT POINTER IN [H,L]</span>
<span class="number">10A1 10A1 </span><span class="colon">: </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK            <span class="comment">;      </span>
<span class="number">10A2 10A2 </span><span class="colon">: </span><span class="hex">29         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> ')'               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PARAM LIST SHOULD END</span>
<span class="number">10A3 10A3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">USED BY MID$ FOR PARAMETER CHECKING AND SETUP</span>
<span class="number">10A3 10A3 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">[M80] </span><span class="label">PREAM2:</span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET RETURN ADDR OFF STACK</span>
<span class="number">10A4 10A4 </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET LENGTH OF ARG OFF STACK</span>
<span class="number">10A5 10A5 </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE RETURN ADDR BACK ON</span>
<span class="number">10A6 10A6 </span><span class="colon">: </span><span class="hex">43         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,e               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE INIT LENGTH</span>
<span class="number">10A7 10A7 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">10A8 10A8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">10A8 10A8 </span><span class="colon">: </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M65] </span><span class="comment">FRE FUNCTION AND INTEGER TO FLOATING ROUTINES</span>
<span class="number">10A8 10A8 </span><span class="colon">: </span><span class="hex">2A DA 38   </span><span class="source">[M80] </span><span class="label">FRE:   </span><span class="mnemonic"> ld     </span> hl,(STREND)       <span class="comment">;      </span>
<span class="number">10AB 10AB </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;      </span>
<span class="number">10AC 10AC </span><span class="colon">: </span><span class="hex">21 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,0              <span class="comment">;      </span>
<span class="number">10AF 10AF </span><span class="colon">: </span><span class="hex">39         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,sp             <span class="comment">;      </span>
<span class="number">10B0 10B0 </span><span class="colon">: </span><span class="hex">3A AB 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(VALTYP)        <span class="comment">;      </span>
<span class="number">10B3 10B3 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;      </span>
<span class="number">10B4 10B4 </span><span class="colon">: </span><span class="hex">CA 1C 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,GIVFLT          <span class="comment">;      </span>
<span class="number">10B7 10B7 </span><span class="colon">: </span><span class="hex">CD C9 0F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FREFAC            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FREE UP ARGUMENT AND SETUP TO GIVE FREE STRING SPACE</span>
<span class="number">10BA 10BA </span><span class="colon">: </span><span class="hex">CD DB 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GARBA2            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DO GARBAGE COLLECTION</span>
<span class="number">10BD 10BD </span><span class="colon">: </span><span class="hex">ED 5B 4B 38</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,(TOPMEM)       <span class="comment">;      </span>
<span class="number">10C1 10C1 </span><span class="colon">: </span><span class="hex">2A C1 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(FRETOP)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TOP OF FREE AREA</span>
<span class="number">10C4 10C4 </span><span class="colon">: </span><span class="hex">C3 1C 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> GIVFLT            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RETURN [H,L]-[D,E]</span>
<span class="number">10C7 10C7 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">10C7 10C7 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">[M80] </span><span class="label">DIMCON:</span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF COMMA ENDED THIS VARIABLE</span>
<span class="number">10C8 10C8 </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;      </span>
<span class="number">10C9 10C9 </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF TERMINATOR, GOOD BYE</span>
<span class="number">10CA 10CA </span><span class="colon">: </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK            <span class="comment">;      </span>
<span class="number">10CB 10CB </span><span class="colon">: </span><span class="hex">2C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> ','               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MUST BE COMMA</span>
<span class="number">10CC 10CC </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">10CC 10CC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;{M80} DIMENSION                         </span>
<span class="number">10CC 10CC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE "DIM" CODE SETS DIMFLG AND THEN FALLS INTO THE VARIABLE</span>
<span class="number">10CC 10CC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEARCH ROUTINE. THE VARIABLE SEARCH ROUTINE LOOKS AT</span>
<span class="number">10CC 10CC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">DIMFLG AT THREE DIFFERENT POINTS: </span>
<span class="number">10CC 10CC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">10CC 10CC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> 1) IF AN ENTRY IS FOUND, DIMFLG BEING ON INDICATES</span>
<span class="number">10CC 10CC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">         A "DOUBLY DIMENSIONED" VARIABLE</span>
<span class="number">10CC 10CC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> 2) WHEN A NEW ENTRY IS BEING BUILT DIMFLG'S BEING ON</span>
<span class="number">10CC 10CC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">         INDICATES THE INDICES SHOULD BE USED FOR</span>
<span class="number">10CC 10CC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">         THE SIZE OF EACH INDICE. OTHERWISE THE DEFAULT</span>
<span class="number">10CC 10CC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">         OF TEN IS USED.          </span>
<span class="number">10CC 10CC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> 3) WHEN THE BUILD ENTRY CODE FINISHES, ONLY IF DIMFLG IS</span>
<span class="number">10CC 10CC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">         OFF WILL INDEXING BE DONE</span>
<span class="number">10CC 10CC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">10CC 10CC </span><span class="colon">: </span><span class="hex">01 C7 10   </span><span class="source">[M80] </span><span class="label">DIM:   </span><span class="mnemonic"> ld     </span> bc,DIMCON       ;[M80] PLACE TO COME BACK TO
<span class="number">10CF 10CF </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc              ;        
<span class="number">10D0 10D0 </span><span class="colon">: </span><span class="hex">F6         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $F6             ;;"OR" to skip next instruction
<span class="number">10D1 10D1 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">10D1 10D1 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;{M80} VARIABLE SEARCHING                </span>
<span class="number">10D1 10D1 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ROUTINE TO READ THE VARIABLE NAME AT THE CURRENT TEXT POSITION</span>
<span class="number">10D1 10D1 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND PUT A POINTER TO ITS VALUE IN [D,E]. [H,L] IS UPDATED</span>
<span class="number">10D1 10D1 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">TO POINT TO THE CHARACTER AFTER THE VARIABLE NAME.</span>
<span class="number">10D1 10D1 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">VALTYP IS SETUP. NOTE THAT EVALUATING SUBSCRIPTS IN</span>
<span class="number">10D1 10D1 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">A VARIABLE NAME CAN CAUSE RECURSIVE CALLS TO PTRGET SO AT</span>
<span class="number">10D1 10D1 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THAT POINT ALL VALUES MUST BE STORED ON THE STACK.</span>
<span class="number">10D1 10D1 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ON RETURN, [A] DOES NOT REFLECT THE VALUE OF THE TERMINATING CHARACTER</span>
<span class="number">10D1 10D1 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;VALTYP is set to 1 if a '$' follows the variable name, or 0 if one doesn't.</span>
<span class="number">10D1 10D1 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;  A pointer to the variable contents is returned in DE. The contents are a</span>
<span class="number">10D1 10D1 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;  four byte floating point number for numeric variables and a two byte</span>
<span class="number">10D1 10D1 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;  pointer to the string data for a string variable.</span>
<span class="number">10D1 10D1 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;If SUBFLG = 0 and a '(' follows the variable name, the array table is searched.</span>
<span class="number">10D1 10D1 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;  If the array is found, the indexes are evaluated and a pointer to the array</span>
<span class="number">10D1 10D1 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;  element is returned in DE.           </span>
<span class="number">10D1 10D1 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;If SUBFLG = 1, the array table is searched for the variable name.</span>
<span class="number">10D1 10D1 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;  If found, the pointer to the next array entry is returned in DE, and</span>
<span class="number">10D1 10D1 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;  a pointer to the number of dimensions is returned in BC.</span>
<span class="number">10D1 10D1 </span><span class="colon">- </span><span class="hex">           </span><span class="source">    - </span><span class="comment">;;Get Pointer to Variable                </span>
<span class="number">10D1 10D1 </span><span class="colon">= </span><span class="hex">AF         </span><span class="source">[M80] </span><span class="label">PTRGET:</span><span class="mnemonic"> xor    </span>  a                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE [A]=0</span>
<span class="number">10D2 10D2 </span><span class="colon">: </span><span class="hex">32 AA 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (DIMFLG),a        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FLAG IT AS SUCH</span>
<span class="number">10D5 10D5 </span><span class="colon">: </span><span class="hex">4E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET FIRST CHARACTER IN [C]</span>
<span class="number">10D1 10D1 </span><span class="colon">- </span><span class="hex">           </span><span class="source">    - </span><span class="comment">;;Get Pointer to Variable after Reading First Character</span>
<span class="number">10D6 10D6 </span><span class="colon">= </span><span class="hex">CD C5 0C   </span><span class="source">[M80] </span><span class="label">PTRGT2:</span><span class="mnemonic"> call   </span> ISLET             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHECK FOR LETTER</span>
<span class="number">10D9 10D9 </span><span class="colon">: </span><span class="hex">DA C4 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> c,SNERR           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MUST HAVE A LETTER</span>
<span class="number">10DC 10DC </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;      </span>
<span class="number">10DD 10DD </span><span class="colon">: </span><span class="hex">47         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ASSUME NO SECOND CHARACTER</span>
<span class="number">10DE 10DE </span><span class="colon">: </span><span class="hex">32 AB 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (VALTYP),a        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ZERO NAMCNT</span>
<span class="number">10E1 10E1 </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET CHAR</span>
<span class="number">10E2 10E2 </span><span class="colon">: </span><span class="hex">38 05      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,ISSEC           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">YES, WAS NUMERIC</span>
<span class="number">10E4 10E4 </span><span class="colon">: </span><span class="hex">CD C6 0C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> ISLETC            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET CARRY IF NOT ALPHABETIC</span>
<span class="number">10E7 10E7 </span><span class="colon">: </span><span class="hex">38 09      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,NOSEC           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALLOW ALPHABETICS</span>
<span class="number">10E9 10E9 </span><span class="colon">: </span><span class="hex">47         </span><span class="source">(M80) </span><span class="label">ISSEC: </span><span class="mnemonic"> ld     </span> b,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IT IS A NUMBER--SAVE IN B</span>
<span class="number">10EA 10EA </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">(M80) </span><span class="label">EATEM: </span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET CHAR</span>
<span class="number">10EB 10EB </span><span class="colon">: </span><span class="hex">38 FD      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,EATEM           <span class="comment">;</span><span class="source">[M65] </span><span class="comment">SKIP NUMERICS</span>
<span class="number">10ED 10ED </span><span class="colon">: </span><span class="hex">CD C6 0C   </span><span class="source">{M80} </span><span class="label">VMORC1:</span><span class="mnemonic"> call   </span> ISLETC            <span class="comment">;      </span>
<span class="number">10F0 10F0 </span><span class="colon">: </span><span class="hex">30 F8      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,EATEM          <span class="comment">;</span><span class="source">[M65] </span><span class="comment">SKIP ALPHABETICS</span>
<span class="number">10F2 10F2 </span><span class="colon">: </span><span class="hex">D6 24      </span><span class="source">(M80) </span><span class="label">NOSEC: </span><span class="mnemonic"> sub    </span> '$'               <span class="comment">;</span><span class="source">[M65] </span><span class="comment">IS IT A STRING?</span>
<span class="number">10F4 10F4 </span><span class="colon">: </span><span class="hex">20 08      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,NOTSTR         <span class="comment">;</span><span class="source">[M65] </span><span class="comment">IF NOT, [VALTYP]=0.</span>
<span class="number">10F6 10F6 </span><span class="colon">: </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a                 <span class="comment">;</span><span class="source">[M65] </span><span class="comment">SET [VALTYP]=1 (STRING !)</span>
<span class="number">10F7 10F7 </span><span class="colon">: </span><span class="hex">32 AB 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (VALTYP),a        <span class="comment">;      </span>
<span class="number">10FA 10FA </span><span class="colon">: </span><span class="hex">0F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rrca   </span>                   <span class="comment">;      </span>
<span class="number">10FB 10FB </span><span class="colon">: </span><span class="hex">80         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,b               <span class="comment">;      </span>
<span class="number">10FC 10FC </span><span class="colon">: </span><span class="hex">47         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,a               <span class="comment">;      </span>
<span class="number">10FD 10FD </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">READ PAST TYPE MARKER</span>
<span class="number">10FE 10FE </span><span class="colon">: </span><span class="hex">3A CB 38   </span><span class="source">(M65) </span><span class="label">NOTSTR:</span><span class="mnemonic"> ld     </span> a,(SUBFLG)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET FLAG WHETHER TO ALLOW ARRAYS</span>
<span class="number">1101 1101 </span><span class="colon">: </span><span class="hex">3D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF SUBFLG=1, "ERASE" HAS CALLED</span>
<span class="number">1102 1102 </span><span class="colon">: </span><span class="hex">CA A0 11   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,ERSFIN          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PTRGET, AND SPECIAL HANDLING MUST BE DONE</span>
<span class="number">1105 1105 </span><span class="colon">: </span><span class="hex">F2 0E 11   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> p,NOARYS          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NO ARRAYS ALLOWED</span>
<span class="number">1108 1108 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET CHAR BACK</span>
<span class="number">1109 1109 </span><span class="colon">: </span><span class="hex">D6 28      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> '('               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">(CHECK FOR "(") WON'T MATCH IF SUBFLG SET</span>
<span class="number">110B 110B </span><span class="colon">: </span><span class="hex">CA 7A 11   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,ISARY           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IT IS!</span>
<span class="number">110E 110E </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">110E 110E </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">(M80) </span><span class="label">NOARYS:</span><span class="mnemonic"> xor    </span> a                 <span class="comment">;</span><span class="source">[M80]A</span><span class="comment">LLOW PARENS AGAIN</span>
<span class="number">110F 110F </span><span class="colon">: </span><span class="hex">32 CB 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (SUBFLG),a        <span class="comment">;</span><span class="source">[M80]S</span><span class="comment">AVE IN FLAG LOCATION</span>
<span class="number">1112 1112 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE TEXT POINTER</span>
<span class="number">1113 1113 </span><span class="colon">: </span><span class="hex">50         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,b               <span class="comment">;;???Variable Name</span>
<span class="number">1114 1114 </span><span class="colon">: </span><span class="hex">59         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,c                      
<span class="number">1115 1115 </span><span class="colon">: </span><span class="hex">2A DE 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(VARNAM)              
<span class="number">1118 1118 </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR                   
<span class="number">1119 1119 </span><span class="colon">: </span><span class="hex">11 E0 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,VARPNT                
<span class="number">111C 111C </span><span class="colon">: </span><span class="hex">CA 1A 14   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,POPHRT                 
<span class="number">111F 111F </span><span class="colon">: </span><span class="hex">2A D8 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(ARYTAB)              
<span class="number">1122 1122 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;{M80} [D,E]=POINTER INTO ARRAYS</span>
<span class="number">1123 1123 </span><span class="colon">: </span><span class="hex">2A D6 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(VARTAB)       <span class="comment">;{M80} [H,L]=POINTER INTO SIMPLE VARIABLES</span>
<span class="number">1126 1126 </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">(M80) </span><span class="label">LOPFND:</span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;      </span>
<span class="number">1127 1127 </span><span class="colon">: </span><span class="hex">CA 3D 11   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,SMKVAR          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF SO, CREATE VARIABLE</span>
<span class="number">112A 112A </span><span class="colon">: </span><span class="hex">79         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,c               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ARE LOW BYTES DIFFERENT</span>
<span class="number">112B 112B </span><span class="colon">: </span><span class="hex">96         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> (hl)              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TEST</span>
<span class="number">112C 112C </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">112D 112D </span><span class="colon">: </span><span class="hex">C2 32 11   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,LOPFN2         <span class="comment">;{M80} NO</span>
<span class="number">1130 1130 </span><span class="colon">: </span><span class="hex">78         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ARE HIGH BYTES DIFFERENT</span>
<span class="number">1131 1131 </span><span class="colon">: </span><span class="hex">96         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> (hl)              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE SAME?</span>
<span class="number">1132 1132 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">(~~~) </span><span class="label">LOPFN2:</span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">1133 1133 </span><span class="colon">: </span><span class="hex">CA 6C 11   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,NTFPRT          <span class="comment">;{M80} YES</span>
<span class="number">1136 1136 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">1137 1137 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">1138 1138 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">1139 1139 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;;Skip past variable</span>
<span class="number">113A 113A </span><span class="colon">: </span><span class="hex">C3 26 11   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> LOPFND            <span class="comment">;      </span>
<span class="number">113D 113D </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">113D 113D </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">113D 113D </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">(M80) </span><span class="label">SMKVAR:</span><span class="mnemonic"> pop    </span> hl                <span class="comment">;      </span>
<span class="number">113E 113E </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;      </span>
<span class="number">113F 113F </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;      </span>
<span class="number">1140 1140 </span><span class="colon">: </span><span class="hex">11 51 0A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,RETVAR         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DID EVAL CALL US?</span>
<span class="number">1143 1143 </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF SO, DON'T MAKE A NEW VARIABLE</span>
<span class="number">1144 1144 </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RESTORE THE POSITION</span>
<span class="number">1145 1145 </span><span class="colon">: </span><span class="hex">CA 6F 11   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,FINZER          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE FAC ZERO (ALL TYPES) AND SKIP RETURN</span>
<span class="number">1148 1148 </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT RETURN ADDRESS BACK</span>
<span class="number">1149 1149 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT THE TEXT POINTER BACK</span>
<span class="number">114A 114A </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE LOOKS</span>
<span class="number">114B 114B </span><span class="colon">: </span><span class="hex">01 06 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> bc,6              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE THE LENGTH INCLUDE EVERYTHING UP BY</span>
<span class="number">114E 114E </span><span class="colon">: </span><span class="hex">2A DA 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(STREND)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE CURRENT END OF STORAGE</span>
<span class="number">1151 1151 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THIS #</span>
<span class="number">1152 1152 </span><span class="colon">: </span><span class="hex">09         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,bc             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ADD ON THE AMOUNT OF SPACE EXTRA NOW BEING USED</span>
<span class="number">1153 1153 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POP OFF HIGH ADDRESS TO MOVE</span>
<span class="number">1154 1154 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE NEW CANDIDATE FOR STREND</span>
<span class="number">1155 1155 </span><span class="colon">: </span><span class="hex">CD 92 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> BLTU              <span class="comment">;{M80} BLOCK TRANSFER AND CHECK FOR STACK OVERFLOW</span>
<span class="number">1158 1158 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[H,L]=NEW STREND</span>
<span class="number">1159 1159 </span><span class="colon">: </span><span class="hex">22 DA 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (STREND),hl       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">BLOCK TRANSFER WAS DONE, SO UPDATE POINTERS</span>
<span class="number">115C 115C </span><span class="colon">: </span><span class="hex">60         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET BACK [H,L] POINTING AT THE END</span>
<span class="number">115D 115D </span><span class="colon">: </span><span class="hex">69         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,c               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">OF THE NEW VARIABLE</span>
<span class="number">115E 115E </span><span class="colon">: </span><span class="hex">22 D8 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (ARYTAB),hl       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">UPDATE THE ARRAY TABLE POINTER</span>
<span class="number">1161 1161 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">(M80) </span><span class="label">ZEROER:</span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[H,L] IS RETURNED POINTING TO THE</span>
<span class="number">1162 1162 </span><span class="colon">: </span><span class="hex">36 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),0            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">END OF THE VARIABLE SO WE</span>
<span class="number">1164 1164 </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ZERO BACKWARDS TO [D,E] WHICH</span>
<span class="number">1165 1165 </span><span class="colon">: </span><span class="hex">20 FA      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,ZEROER         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINTS TO THE START OF THE VARIABLE</span>
<span class="number">1167 1167 </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;      </span>
<span class="number">1168 1168 </span><span class="colon">: </span><span class="hex">73         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),e            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT DESCRIPTION</span>
<span class="number">1169 1169 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">116A 116A </span><span class="colon">: </span><span class="hex">72         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),d            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">OF THIS VARIABLE INTO MEMORY</span>
<span class="number">116B 116B </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">116C 116C </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">(M80) </span><span class="label">NTFPRT:</span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TABLE POINTER BACK INTO [D,E]</span>
<span class="number">116D 116D </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET BACK THE TEXT POINTER</span>
<span class="number">116E 116E </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">116F116F  </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">116F 116F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">; MAKE ALL TYPES ZERO AND SKIP RETURN    </span>
<span class="number">116F 116F </span><span class="colon">: </span><span class="hex">32 E7 38   </span><span class="source">[M80] </span><span class="label">FINZER:</span><span class="mnemonic"> ld     </span> (FAC),a           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE FLOATS ZERO</span>
<span class="number">1172 1172 </span><span class="colon">: </span><span class="hex">21 6D 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,REDDY-1        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE IT A NULL STRING BY</span>
<span class="number">1175 1175 </span><span class="colon">: </span><span class="hex">22 E4 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (FACLO),hl        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINTING AT A ZERO</span>
<span class="number">1178 1178 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">{M80} </span><span class="label">POPHR2:</span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE TEXT POINTER</span>
<span class="number">1179 1179 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RETURN FROM EVAL</span>
<span class="number">117A 117A </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">117A 117A </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">FORMAT OF ARRAYS IN CORE          </span>
<span class="number">117A 117A </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">117A 117A </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">DESCRIPTOR                        </span>
<span class="number">117A 117A </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">      LOW BYTE = SECOND CHARCTER (200 BIT IS STRING FLAG)</span>
<span class="number">117A 117A </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">      HIGH BYTE = FIRST CHARACTER </span>
<span class="number">117A 117A </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">LENGTH OF ARRAY IN CORE IN BYTES (DOES NOT INCLUDE DESCRIPTOR)</span>
<span class="number">117A 117A </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">NUMBER OF DIMENSIONS 1 BYTE       </span>
<span class="number">117A 117A </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">FOR EACH DIMENSION STARTING WITH THE FIRST A LIST</span>
<span class="number">117A 117A </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">(2 BYTES EACH) OF THE MAX INDICE+1</span>
<span class="number">117A 117A </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE VALUES                        </span>
<span class="number">117A 117A </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">117A 117A </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">[M80] </span><span class="label">ISARY: </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE DIMFLG AND VALTYP FOR RECURSION</span>
<span class="number">117B 117B </span><span class="colon">: </span><span class="hex">2A AA 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(DIMFLG)       <span class="comment">;      </span>
<span class="number">117E 117E </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TEXT POINTER BACK INTO [H,L]</span>
<span class="number">117F 117F </span><span class="colon">: </span><span class="hex">57         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET # DIMENSIONS =0</span>
<span class="number">1180 1180 </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">[M80] </span><span class="label">INDLOP:</span><span class="mnemonic"> push   </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE NUMBER OF DIMENSIONS</span>
<span class="number">1181 1181 </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE LOOKS</span>
<span class="number">1182 1182 </span><span class="colon">: </span><span class="hex">CD 7A 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> INTIDX            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">EVALUATE INDICE INTO [D,E]</span>
<span class="number">1185 1185 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">{M80} </span><span class="label">OPTB0: </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POP OFF THE LOOKS</span>
<span class="number">1186 1186 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[A] = NUMBER OF DIMENSIONS SO FAR;</span>
<span class="number">1187 1187 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[D,E]=TEXT POINTER, [H,L]=INDICE</span>
<span class="number">1188 1188 </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT NDICE ON STACK, [H,L]=VALTYP & DIMFLG</span>
<span class="number">1189 1189 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RESAVE VALTYP AND DIMFLG</span>
<span class="number">118A 118A </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[H,L]=TEXT POINTER</span>
<span class="number">118B 118B </span><span class="colon">: </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">INCREMENT # OF DIMENSIONS</span>
<span class="number">118C 118C </span><span class="colon">: </span><span class="hex">57         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[D]=NUMBER OF DIMENSIONS</span>
<span class="number">118D 118D </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET TERMINATING CHARACTER</span>
<span class="number">118E 118E </span><span class="colon">: </span><span class="hex">FE 2C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> ','               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">A COMMA SO MORE INDICES FOLLOW?</span>
<span class="number">1190 1190 </span><span class="colon">: </span><span class="hex">CA 80 11   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,INDLOP          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF SO, READ MORE</span>
<span class="number">1193 1193 </span><span class="colon">: </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK            <span class="comment">;      </span>
<span class="number">1194 1194 </span><span class="colon">: </span><span class="hex">29         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> ')'               <span class="comment">;{M80} MAKE SURE THERE IS A BRACKET</span>
<span class="number">1195 1195 </span><span class="colon">: </span><span class="hex">22 D0 38   </span><span class="source">{M80} </span><span class="label">SUBSOK:</span><span class="mnemonic"> ld     </span> (TENP2),hl        <span class="comment">;</span><span class="source">[M80 ]</span><span class="comment">SAVE THE TEXT POINTER</span>
<span class="number">1198 1198 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80 ]</span><span class="comment">[H,L]= VALTYP & DIMFLG</span>
<span class="number">1199 1199 </span><span class="colon">: </span><span class="hex">22 AA 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (DIMFLG),hl       <span class="comment">;</span><span class="source">[M80 ]</span><span class="comment">SAVE VALTYP AND DIMFLG</span>
<span class="number">119C 119C </span><span class="colon">: </span><span class="hex">1E 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,0               <span class="comment">;{M80 }WHEN [D,E] IS POPPED INTO PSW, ZERO FLAG WON'T BE SET</span>
<span class="number">119E 119E </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;</span><span class="source">[M80 ]</span><span class="comment">SAVE NUMBER OF DIMENSIONS</span>
<span class="number">119F 119F </span><span class="colon">: </span><span class="hex">11         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $11               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"LD H," OVER THE NEXT TWO BYTES</span>
<span class="number">11A0 11A0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">11A0 11A0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Get Pointer to Array                   </span>
<span class="number">11A0 11A0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;BC = Array Variable Name on Entry      </span>
<span class="number">11A0 11A0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;     Pointer to Number of Dimensions on Exit</span>
<span class="number">11A0 11A0 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">[M80] </span><span class="label">ERSFIN:</span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE TEXT POINTER</span>
<span class="number">11A1 11A1 </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE A DUMMY NUMBER OF DIMENSIONS WITH THE ZERO FLAG SET</span>
<span class="number">11A2 11A2 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">11A2 11A2 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">AT THIS POINT [B,C]=LOOKS. THE TEXT POINTER IS IN TEMP2.</span>
<span class="number">11A2 11A2 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE INDICES ARE ALL ON THE STACK, FOLLOWED BY THE NUMBER OF DIMENSIONS.</span>
<span class="number">11A2 11A2 </span><span class="colon">: </span><span class="hex">2A D8 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(ARYTAB)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[H,L]=PLACE TO START THE SEARCH</span>
<span class="number">11A5 11A5 </span><span class="colon">: </span><span class="hex">3E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $3E               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"LD A," AROUND THE NEXT BYTE</span>
<span class="number">11A6 11A6 </span><span class="colon">: </span><span class="hex">19         </span><span class="source">(M80) </span><span class="label">LOPFDA:</span><span class="mnemonic"> add    </span> hl,de             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SKIP OVER THIS ARRAY SINCE IT'S NOT THE ONE</span>
<span class="number">11A7 11A7 </span><span class="colon">: </span><span class="hex">ED 5B DA 38</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,(STREND)       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE PLACE TO STOP INTO [H,L]</span>
<span class="number">11AB 11AB </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">STOPPING TIME?</span>
<span class="number">11AC 11AC </span><span class="colon">: </span><span class="hex">28 25      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,NOTFDD          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">YES, COULDN'T FIND THIS ARRAY</span>
<span class="number">11AE 11AE </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET FIRST CHARACTER</span>
<span class="number">11AF 11AF </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">11B0 11B0 </span><span class="colon">: </span><span class="hex">B9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> c                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF IT MATCHES</span>
<span class="number">11B1 11B1 </span><span class="colon">: </span><span class="hex">20 02      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,NMARY1         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NOT THIS ONE</span>
<span class="number">11B3 11B3 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET SECOND CHARACTER</span>
<span class="number">11B4 11B4 </span><span class="colon">: </span><span class="hex">B8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> b                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ANOTHER MATCH?</span>
<span class="number">11B5 11B5 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">(M80) </span><span class="label">NMARY1:</span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINT TO SIZE ENTRY</span>
<span class="number">11B6 11B6 </span><span class="colon">: </span><span class="hex">5E         </span><span class="source">{M80} </span><span class="label">CNOMAT:</span><span class="mnemonic"> ld     </span> e,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[D,E]=LENGTH</span>
<span class="number">11B7 11B7 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">OF THE ARRAY BEING LOOKED AT</span>
<span class="number">11B8 11B8 </span><span class="colon">: </span><span class="hex">56         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,(hl)                   
<span class="number">11B9 11B9 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">11BA 11BA </span><span class="colon">: </span><span class="hex">20 EA      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,LOPFDA         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF NO MATCH, SKIP THIS ONE AND TRY AGAIN</span>
<span class="number">11BC 11BC </span><span class="colon">: </span><span class="hex">3A AA 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(DIMFLG)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF CALLED BY "DIM"</span>
<span class="number">11BF 11BF </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ZERO MEANS NO</span>
<span class="number">11C0 11C0 </span><span class="colon">: </span><span class="hex">C2 CD 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,DDERR          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"REDIMENSIONED VARIABLE" IF "DIM" CALLING PTRGET</span>
<span class="number">11C3 11C3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">11C3 11C3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">TEMP2=THE TEXT POINTER            </span>
<span class="number">11C3 11C3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">WE HAVE LOCATED THE VARIABLE WE WERE LOOKING FOR</span>
<span class="number">11C3 11C3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">AT THIS POINT [H,L] POINTS BEYOND THE SIZE TO THE NUMBER OF DIMENSIONS</span>
<span class="number">11C3 11C3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE INDICES ARE ON THE STACK FOLLOWED BY THE NUMBER OF DIMENSIONS</span>
<span class="number">11C3 11C3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">11C3 11C3 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[A]=NUMBER OF DIMENSIONS</span>
<span class="number">11C4 11C4 </span><span class="colon">: </span><span class="hex">44         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,h               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET [B,C] TO POINT AT NUMBER OF DIMENSIONS</span>
<span class="number">11C5 11C5 </span><span class="colon">: </span><span class="hex">4D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,l                      
<span class="number">11C6 11C6 </span><span class="colon">: </span><span class="hex">CA 1A 14   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,POPHRT          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"ERASE" IS DONE, SO RETURN TO DO THE ACTUAL ERASURE</span>
<span class="number">11C9 11C9 </span><span class="colon">: </span><span class="hex">96         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> (hl)              <span class="comment">;{M80} MAKE SURE DIMENSIONS MATCH</span>
<span class="number">11CA 11CA </span><span class="colon">: </span><span class="hex">CA 2B 12   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,GETDEF          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">JUMP OFF AND READ E INDICES....</span>
<span class="number">11CD 11CD </span><span class="colon">: </span><span class="hex">11 10 00   </span><span class="source">[M80] </span><span class="label">BSERR: </span><span class="mnemonic"> ld     </span> de,ERRBS          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"SUBSCRIPT OUT OF RANGE"</span>
<span class="number">11D0 11D0 </span><span class="colon">: </span><span class="hex">C3 DB 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> ERROR                    
<span class="number">11D3 11D3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">11D3 11D3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">HERE WHEN VARIABLE IS NOT FOUND IN THE ARRAY TABLE</span>
<span class="number">11D3 11D3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">11D3 11D3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">BUILDING AN ENTRY:                </span>
<span class="number">11D3 11D3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">11D3 11D3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> PUT DOWN THE DESCRIPTOR          </span>
<span class="number">11D3 11D3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> SETUP NUMER OF DIMENSIONS        </span>
<span class="number">11D3 11D3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> MAKE SURE THERE IS ROOM FOR THE NEW ENTRY</span>
<span class="number">11D3 11D3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> REMEMBER VARPTR                  </span>
<span class="number">11D3 11D3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> TALLY=4 (VALTYP FOR THE EXTENDED)</span>
<span class="number">11D3 11D3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> SKIP 2 LOCS FOR LATER FILL IN -- THE SIZE</span>
<span class="number">11D3 11D3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">LOOP:    GET AN INDICE            </span>
<span class="number">11D3 11D3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> PUT NUMBER +1 DOWN AT VARPTR AND INCREMENT VARPTR</span>
<span class="number">11D3 11D3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> TALLY= TALLY * NUMBER+1          </span>
<span class="number">11D3 11D3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> DECREMENT NUMBER-DIMS            </span>
<span class="number">11D3 11D3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> JNZ     LOOP                     </span>
<span class="number">11D3 11D3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> CALL REASON WITH [H,L] REFLECTING LAST LOC OF VARIABLE</span>
<span class="number">11D3 11D3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> UPDATE STREND                    </span>
<span class="number">11D3 11D3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> ZERO BACKWARDS                   </span>
<span class="number">11D3 11D3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> MAKE TALLY INCLUDE MAXDIMS       </span>
<span class="number">11D3 11D3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> PUT DOWN TALLY                   </span>
<span class="number">11D3 11D3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> IF CALLED BY DIMENSION, RETURN   </span>
<span class="number">11D3 11D3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> OTHERWISE INDEX INTO THE VARIABLE AS IF IT</span>
<span class="number">11D3 11D3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> WERE FOUND ON THE INITIAL SEARCH </span>
<span class="number">11D3 11D3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">11D3 11D3 </span><span class="colon">: </span><span class="hex">11 04 00   </span><span class="source">[M80] </span><span class="label">NOTFDD:</span><span class="mnemonic"> ld     </span> de,4              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[D,E]=SIZE OF ONE VALUE (VALTYP)</span>
<span class="number">11D6 11D6 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[A]=NUMBER OF DIMENSIONS</span>
<span class="number">11D7 11D7 </span><span class="colon">: </span><span class="hex">CA 97 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,FCERR           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"ILLEGAL FUNCTION CALL"</span>
<span class="number">11DA 11DA </span><span class="colon">: </span><span class="hex">71         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),c            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT DOWN THE DESCRIPTOR</span>
<span class="number">11DB 11DB </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">11DC 11DC </span><span class="colon">: </span><span class="hex">70         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),b                   
<span class="number">11DD 11DD </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">11DE 11DE </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a               <span class="comment">;{M80} [C]=ENTRIES NEEDED TO STORE SIZE OF EACH DIMENSION</span>
<span class="number">11DF 11DF </span><span class="colon">: </span><span class="hex">CD A0 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GETSTK            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET SPACE FOR DIMENSION ENTRIES</span>
<span class="number">11E2 11E2 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SKIP OVER THE SIZE LOCATIONS</span>
<span class="number">11E3 11E3 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">11E4 11E4 </span><span class="colon">: </span><span class="hex">22 C3 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (TENP3),hl        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE LOCATION TO PUT THE SIZE IN</span>
<span class="number">11E7 11E7 </span><span class="colon">: </span><span class="hex">71         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),c            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">STORE THE NUMBER OF DIMENSIONS</span>
<span class="number">11E8 11E8 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">11E9 11E9 </span><span class="colon">: </span><span class="hex">3A AA 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(DIMFLG)        <span class="comment">;{M80} CALLED BY DIMENSION?</span>
<span class="number">11EC 11EC </span><span class="colon">: </span><span class="hex">17         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rla    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET CARRY IF SO</span>
<span class="number">11ED 11ED </span><span class="colon">: </span><span class="hex">79         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,c               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[A]=NUMBER OF DIMENSIONS</span>
<span class="number">11EE 11EE </span><span class="colon">: </span><span class="hex">01 0B 00   </span><span class="source">(M80) </span><span class="label">LOPPTA:</span><span class="mnemonic"> ld     </span> bc,11             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAP 0 TO 11 AND 1 TO 10</span>
<span class="number">11F1 11F1 </span><span class="colon">: </span><span class="hex">30 02      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,NOTDIM         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DEFAULT DIMENSIONS TO TEN</span>
<span class="number">11F3 11F3 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">(M80) </span><span class="label">POPDIM:</span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POP OFF AN INDICE INTO [B,C]</span>
<span class="number">11F4 11F4 </span><span class="colon">: </span><span class="hex">03         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ADD ONE TO IT FOR THE ZERO ENTRY</span>
<span class="number">11F5 11F5 </span><span class="colon">: </span><span class="hex">71         </span><span class="source">(M80) </span><span class="label">NOTDIM:</span><span class="mnemonic"> ld     </span> (hl),c            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT THE MAXIMUM DOWN</span>
<span class="number">11F6 11F6 </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE NUMBER OF DIMENSIONS AND DIMFLG (CARRY)</span>
<span class="number">11F7 11F7 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">11F8 11F8 </span><span class="colon">: </span><span class="hex">70         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),b                   
<span class="number">11F9 11F9 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">11FA 11FA </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                       
<span class="number">11FB 11FB </span><span class="colon">: </span><span class="hex">CD CA 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> UMULT             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MULTIPLY [B,C]=NEWMAX BY CURTOL=[D,E]</span>
<span class="number">11FE 11FE </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">11FF 11FF </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">1200 1200 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET NUMBER OF DIMENSIONS AND DIMFLG (CARRY) BACK</span>
<span class="number">1201 1201 </span><span class="colon">: </span><span class="hex">3D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DECREMENT THE NUMBER OF DIMENSIONS LEFT</span>
<span class="number">1202 1202 </span><span class="colon">: </span><span class="hex">20 EA      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,LOPPTA         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">HANDLE THE OTHER INDICES</span>
<span class="number">1204 1204 </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE DIMFLG (CARRY)</span>
<span class="number">1205 1205 </span><span class="colon">: </span><span class="hex">42         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,d               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[B,C]=SIZE</span>
<span class="number">1206 1206 </span><span class="colon">: </span><span class="hex">4B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,e                      
<span class="number">1207 1207 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[D,E]=START OF VALUES</span>
<span class="number">1208 1208 </span><span class="colon">: </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[H,L]=END OF VALUES</span>
<span class="number">1209 1209 </span><span class="colon">: </span><span class="hex">DA B7 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> c,OMERR           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">OUT OF MEMORY POINTER BEING GENERATED?</span>
<span class="number">120C 120C </span><span class="colon">: </span><span class="hex">CD A9 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> REASON            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF THERE IS ROOM FOR THE VALUES</span>
<span class="number">120F 120F </span><span class="colon">: </span><span class="hex">22 DA 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (STREND),hl       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">UPDATE THE END OF STORAGE</span>
<span class="number">1212 1212 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">(M80) </span><span class="label">ZERITA:</span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ZERO THE NEW ARRAY</span>
<span class="number">1213 1213 </span><span class="colon">: </span><span class="hex">36 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),000H                
<span class="number">1215 1215 </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">BACK AT THE BEGINNING?</span>
<span class="number">1216 1216 </span><span class="colon">: </span><span class="hex">20 FA      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,ZERITA         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NO, ZERO MORE</span>
<span class="number">1218 1218 </span><span class="colon">: </span><span class="hex">03         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> bc                <span class="comment">;(M80) ADD ONE TO INCLUDE BYTE FOR NUMBER OF DIMENSIONS</span>
<span class="number">1219 1219 </span><span class="colon">: </span><span class="hex">57         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,a               <span class="comment">;</span><span class="source">[M80[ </span><span class="comment">[D]=ZERO</span>
<span class="number">121A 121A </span><span class="colon">: </span><span class="hex">2A C3 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(TENP3)        <span class="comment">;</span><span class="source">[M80[ </span><span class="comment">GET A POINTER AT THE NUMBER OF DIMENSIONS</span>
<span class="number">121D 121D </span><span class="colon">: </span><span class="hex">5E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,(hl)            <span class="comment">;</span><span class="source">[M80[ </span><span class="comment">[E]=NUMBER OF DIMENSIONS</span>
<span class="number">121E 121E </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80[ </span><span class="comment">[H,L]=NUMBER OF DIMENSIONS</span>
<span class="number">121F 121F </span><span class="colon">: </span><span class="hex">29         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,hl             <span class="comment">;</span><span class="source">[M80[ </span><span class="comment">[H,L]=NUMBER OF DIMENSIONS TIMES TWO</span>
<span class="number">1220 1220 </span><span class="colon">: </span><span class="hex">09         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,bc             <span class="comment">;</span><span class="source">[M80[ </span><span class="comment">ADD ON THE SIZE TO GET THE TOTAL NUMBER OF BYTES USED</span>
<span class="number">1221 1221 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80[ </span><span class="comment">[D,E]=TOTAL SIZE</span>
<span class="number">1222 1222 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M80[ </span><span class="comment">BACK UP TO POINT TO LOCATION TO PUT</span>
<span class="number">1223 1223 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M80[ </span><span class="comment">THE SIZE OF THE ARRAY IN BYTES IN.</span>
<span class="number">1224 1224 </span><span class="colon">: </span><span class="hex">73         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),e            <span class="comment">;</span><span class="source">[M80[ </span><span class="comment">PUT DOWN THE SIZE</span>
<span class="number">1225 1225 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">1226 1226 </span><span class="colon">: </span><span class="hex">72         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),d                   
<span class="number">1227 1227 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">1228 1228 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET BACK DIMFLG (CARRY) AND SET [A]=0</span>
<span class="number">1229 1229 </span><span class="colon">: </span><span class="hex">38 21      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,FINNOW                 
<span class="number">122B 122B </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">122B 122B </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">AT THIS POINT [H,L] POINTS BEYOND THE SIZE TO THE NUMBER OF DIMENSIONS</span>
<span class="number">122B 122B </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">STRATEGY:                         </span>
<span class="number">122B 122B </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> NUMDIM=NUMBER OF DIMENSIONS      </span>
<span class="number">122B 122B </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> CURTOL=0                         </span>
<span class="number">122B 122B </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">INLPNM:GET A NEW INDICE           </span>
<span class="number">122B 122B </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> POP NEW MAX INTO CURMAX          </span>
<span class="number">122B 122B </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> MAKE SURE INDICE IS NOT TOO BIG  </span>
<span class="number">122B 122B </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> MUTLIPLY CURTOL BY CURMAX        </span>
<span class="number">122B 122B </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> ADD INDICE TO CURTOL             </span>
<span class="number">122B 122B </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> NUMDIM=NUMDIM-1                  </span>
<span class="number">122B 122B </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> JNZ     INLPNM                   </span>
<span class="number">122B 122B </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> USE CURTOL*4 (VALTYP FOR EXTENDED) AS OFFSET</span>
<span class="number">122B 122B </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;                                        </span>
<span class="number">122B 122B </span><span class="colon">: </span><span class="hex">47         </span><span class="source">[M80] </span><span class="label">GETDEF:</span><span class="mnemonic"> ld     </span> b,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[B,C]=CURTOL=ZERO</span>
<span class="number">122C 122C </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a                      
<span class="number">122D 122D </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[A]=NUMBER OF DIMENSIONS</span>
<span class="number">122E 122E </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINT PAST THE NUMBER OF DIMENSIONS</span>
<span class="number">122F 122F </span><span class="colon">: </span><span class="hex">16         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $16               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"LD D," AROUND THE NEXT BYTE</span>
<span class="number">1230 1230 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">[M80] </span><span class="label">INLPNM:</span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[H,L]= POINTER INTO VARIABLE ENTRY</span>
<span class="number">1231 1231 </span><span class="colon">: </span><span class="hex">5E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[D,E]=MAXIMUM FOR THE CURRENT INDICE</span>
<span class="number">1232 1232 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">1233 1233 </span><span class="colon">: </span><span class="hex">56         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,(hl)                   
<span class="number">1234 1234 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[H,L]=CURRENT INDICE</span>
<span class="number">1235 1235 </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINTER INTO THE VARIABLE GOES ON THE STACK</span>
<span class="number">1236 1236 </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE NUMBER OF DIMENSIONS</span>
<span class="number">1237 1237 </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF THE CURRENT INDICE IS TOO BIG</span>
<span class="number">1238 1238 </span><span class="colon">: </span><span class="hex">D2 CD 11   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,BSERR          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF SO "BAD SUBSCRIPT" ERROR</span>
<span class="number">123B 123B </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                       
<span class="number">123C 123C </span><span class="colon">: </span><span class="hex">CD CA 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> UMULT             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CURTOL=CURTOL*CURRENT MAXIMUM</span>
<span class="number">123F 123F </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                       
<span class="number">1240 1240 </span><span class="colon">: </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ADD THE INDICE TO CURTOL</span>
<span class="number">1241 1241 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE NUMBER OF DIMENSIONS IN [A]</span>
<span class="number">1242 1242 </span><span class="colon">: </span><span class="hex">3D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF ALL THE INDICES HAVE BEEN PROCESSED</span>
<span class="number">1243 1243 </span><span class="colon">: </span><span class="hex">44         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,h               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[B,C]=CURTOL IN CASE WE LOOP BACK</span>
<span class="number">1244 1244 </span><span class="colon">: </span><span class="hex">4D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,l                      
<span class="number">1245 1245 </span><span class="colon">: </span><span class="hex">20 E9      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,INLPNM         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PROCESS THE REST OF THE INDICES</span>
<span class="number">1247 1247 </span><span class="colon">: </span><span class="hex">29         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MULTIPLY BY TWO</span>
<span class="number">1248 1248 </span><span class="colon">: </span><span class="hex">29         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NOW MULTIPLIED BY FOUR</span>
<span class="number">1249 1249 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">{M80} </span><span class="label">DONMUL:</span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POP OFF THE ADDRESS OF WHERE THE VALUES BEGIN</span>
<span class="number">124A 124A </span><span class="colon">: </span><span class="hex">09         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,bc             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ADD IT ONTO CURTOL TO GET PLACE VALUE IS STORED</span>
<span class="number">124B 124B </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RETURN THE POINTER IN [D,E]</span>
<span class="number">124C 124C </span><span class="colon">: </span><span class="hex">2A D0 38   </span><span class="source">(M80) </span><span class="label">FINNOW:</span><span class="mnemonic"> ld     </span> hl,(TENP2)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">REGET THE TEXT POINTER</span>
<span class="number">124F 124F </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">MATHPK FOR BASIC MCS 8080  GATES/ALLEN/DAVIDOFF</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">EXTERNAL LOCATIONS USED BY THE MATH-PACKAGE</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE FLOATING ACCUMULATOR          </span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;(M80) FACLO:   [LOW ORDER OF MANTISSA (LO)]</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;(M80) FACMO:   [MIDDLE ORDER OF MANTISSA (MO)]</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;(M80) FACHO:   [HIGH ORDER OF MANTISSA (HO)]</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;(M80) FAC:     [EXPONENT]               </span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;(M80)          [TEMPORARY COMPLEMENT OF SIGN IN MSB]</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;(M80] ARGLO:           [LOCATION OF SECOND ARGUMENT]</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;(M80] ARG:                              </span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;(M80] FBUFFR:  BUFFER FOR FOUT          </span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE FLOATING POINT FORMAT IS AS FOLLOWS:</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE SIGN IS THE FIRST BIT OF THE MANTISSA</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE MANTISSA IS 24 BITS LONG      </span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE BINARY POINT IS TO THE LEFT OF THE MSB</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">NUMBER = MANTISSA * 2 ^ EXPONENT  </span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE MANTISSA IS POSITIVE, WITH A ONE ASSUMED TO BE WHERE THE SIGN BIT IS</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE SIGN OF THE EXPONENT IS THE FIRST BIT OF THE EXPONENT</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE EXPONENT IS STORED IN EXCESS 200 I.E. WITH A BIAS OF 200</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">SO, THE EXPONENT IS A SIGNED 8-BIT NUMBER WITH 200 ADDED TO IT</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">AN EXPONENT OF ZERO MEANS THE NUMBER IS ZERO, THE OTHER BYTES ARE IGNORED</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">TO KEEP THE SAME NUMBER IN THE FAC WHILE SHIFTING:</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> TO SHIFT RIGHT, EXP:=EXP+1       </span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> TO SHIFT LEFT,  EXP:=EXP-1       </span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">SO, IN MEMORY THE NUMBER LOOKS LIKE THIS:</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> [BITS 17-24 OF THE MANTISSA]     </span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> [BITS 9-16 OF THE MANTISSA]      </span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> [THE SIGN IN BIT 7, BITS 2-8 OF THE MANTISSA ARE IN BITS 6-0]</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> [THE EXPONENT AS A SIGNED NUMBER + 200]</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">(REMEMBER THAT BIT 1 OF THE MANTISSA IS ALWAYS A ONE)</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ARITHMETIC ROUTINE CALLING CONVENTIONS:</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">FOR ONE ARGUMENT FUNCTIONS:       </span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> THE ARGUMENT IS IN THE FAC, THE RESULT IS LEFT IN THE FAC</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">FOR TWO ARGUMENT OPERATIONS:      </span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> THE FIRST ARGUMENT IS IN B,C,D,E I.E. THE "REGISTERS"</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> THE SECOND ARGUMENT IS IN THE FAC</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> THE RESULT IS LEFT IN THE FAC    </span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE "S" ENTRY POINTS TO THE TWO ARGUMENT OPERATIONS HAVE (HL) POINTING TO</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE FIRST ARGUMENT INSTEAD OF THE FIRST ARGUMENT BEING IN THE REGISTERS.</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">MOVRM IS CALLED TO GET THE ARGUMENT IN THE REGISTERS.</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE "T" ENTRY POINTS ASSUME THE FIRST ARGUMENT IS ON THE STACK.</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">POPR IS USED TO GET THE ARGUMENT IN THE REGISTERS.</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">NOTE: THE "T" ENTRY POINTS SHOULD ALWAYS BE JUMPED TO AND NEVER CALLED</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">BECAUSE THE RETURN ADDRESS ON THE STACK WILL BE CONFUSED WITH THE NUMBER.</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ON THE STACK, THE TWO LO'S ARE PUSHED ON FIRST AND THEN THE HO AND SIGN.</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THIS IS DONE SO IF A NUMBER IS STORED IN MEMORY, IT CAN BE PUSHED ON THE</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">STACK WITH TWO PUSHM'S.  THE LOWER BYTE OF EACH PART IS IN THE LOWER</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">MEMORY ADDRESS SO WHEN THE NUMBER IS POPPED INTO THE REGISTERS, THE HIGHER</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ORDER BYTE WILL BE IN THE HIGHER ORDER REGISTER OF THE REGISTER PAIR, I.E.</span>
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE HIGHER ORDER BYTE WILL BE POPPED INTO B, D OR H.</span>
<span class="number">12501250  </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1250 1250 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">FLOATING POINT ADDITION AND SUBTRACTION</span>
<span class="number">1250 1250 </span><span class="colon">: </span><span class="hex">21 57 17   </span><span class="source">[M80] </span><span class="label">FADDH: </span><span class="mnemonic"> ld     </span> hl,FHALF          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ENTRY TO ADD 1/2</span>
<span class="number">1253 1253 </span><span class="colon">: </span><span class="hex">CD 31 15   </span><span class="source">[M80] </span><span class="label">FADDS: </span><span class="mnemonic"> call   </span> MOVRM             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET ARGUMENT INTO THE REGISTERS</span>
<span class="number">1256 1256 </span><span class="colon">: </span><span class="hex">18 09      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> FADD              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DO THE ADDITION</span>
<span class="number">12581258  </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1258 1258 </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">SUBTRACTION      FAC:=ARG-FAC     </span>
<span class="number">1258 1258 </span><span class="colon">= </span><span class="hex">CD 31 15   </span><span class="source">[M80] </span><span class="label">FSUBS: </span><span class="mnemonic"> call   </span> MOVRM             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ENTRY IF POINTER TO ARG IS IN (HL)</span>
<span class="number">125B 125B </span><span class="colon">: </span><span class="hex">21         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $21               <span class="comment">;;"LD HL," to skip next instruction</span>
<span class="number">125C 125C </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">[M80] </span><span class="label">FSUBT: </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;;ENTRY TO FSUB IF ARGUMENT IS ON STACK</span>
<span class="number">125D 125D </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                       
<span class="number">125E 125E </span><span class="colon">: </span><span class="hex">CD 0B 15   </span><span class="source">[M80] </span><span class="label">FSUB:  </span><span class="mnemonic"> call   </span> NEG               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NEGATE SECOND ARGUMENT</span>
<span class="number">12611261  </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1261 1261 </span><span class="colon">: </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ADDITION FAC:=ARG+FAC             </span>
<span class="number">1261 1261 </span><span class="colon">: </span><span class="hex">78         </span><span class="source">[M80] </span><span class="label">FADD:  </span><span class="mnemonic"> ld     </span> a,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHECK IF FIRST ARGUMENT IS ZERO</span>
<span class="number">1262 1262 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET EXPONENT</span>
<span class="number">1263 1263 </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IT IS, RESULT IS NUMBER IN FAC</span>
<span class="number">1264 1264 </span><span class="colon">: </span><span class="hex">3A E7 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(FAC)           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET EXPONENT</span>
<span class="number">1267 1267 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF THE NUMBER IS ZERO</span>
<span class="number">1268 1268 </span><span class="colon">: </span><span class="hex">CA 23 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,MOVFR           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IT IS, ANSWER IS IN REGISTERS</span>
<span class="number">126B 126B </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">126B 126B </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Align Numbers                          </span>
<span class="number">126B 126B </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">WE WANT TO GET THE SMALLER NUMBER IN THE REGISTERS SO WE CAN SHIFT IT RIGHT</span>
<span class="number">126B 126B </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND ALIGN THE BINARY POINTS OF THE TWO NUMBERS.  THEN WE CAN JUST ADD OR</span>
<span class="number">126B 126B </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">SUBTRACT THEM (DEPENDING ON THEIR SIGNS) BYTEWISE.</span>
<span class="number">126B 126B </span><span class="colon">: </span><span class="hex">90         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> b                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHECK RELATIVE SIZES</span>
<span class="number">126C 126C </span><span class="colon">: </span><span class="hex">30 0C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,FADD1          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS FAC SMALLER?</span>
<span class="number">126E 126E </span><span class="colon">: </span><span class="hex">2F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cpl    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">YES, NEGATE SHIFT COUNT</span>
<span class="number">126F 126F </span><span class="colon">: </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a                        
<span class="number">1270 1270 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SWITCH FAC AND REGISTERS, SAVE (DE)</span>
<span class="number">1271 1271 </span><span class="colon">: </span><span class="hex">CD 13 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> PUSHF             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT FAC ON STACK</span>
<span class="number">1274 1274 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET (DE) BACK WHERE IT BELONGS</span>
<span class="number">1275 1275 </span><span class="colon">: </span><span class="hex">CD 23 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVFR             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT REGISTERS IN THE FAC</span>
<span class="number">1278 1278 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                       
<span class="number">1279 1279 </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE OLD FAC IN THE REGISTERS</span>
<span class="number">127A 127A </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">127A 127A </span><span class="colon">: </span><span class="hex">FE 19      </span><span class="source">[M80] </span><span class="label">FADD1: </span><span class="mnemonic"> cp     </span> 25                <span class="comment">;ARE WE WITHIN 24 BITS?</span>
<span class="number">127C 127C </span><span class="colon">: </span><span class="hex">D0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nc                       
<span class="number">127D 127D </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;SAVE SHIFT COUNT</span>
<span class="number">127E 127E </span><span class="colon">: </span><span class="hex">CD 46 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> UNPACK            <span class="comment">;UNPACK THE NUMBERS</span>
<span class="number">1281 1281 </span><span class="colon">: </span><span class="hex">67         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,a               <span class="comment">;SAVE SUBTRACTION FLAG</span>
<span class="number">1282 1282 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;GET SHIFT COUNT BACK</span>
<span class="number">1283 1283 </span><span class="colon">: </span><span class="hex">CD 30 13   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SHIFTR            <span class="comment">;SHIFT REGISTERS RIGHT THE RIGHT AMOUNT</span>
<span class="number">1286 1286 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1286 1286 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Add or Subtract Numbers                </span>
<span class="number">1286 1286 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF THE NUMBERS HAVE THE SAME SIGN, THEN WE ADD THEM.  IF THE SIGNS ARE</span>
<span class="number">1286 1286 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">DIFFERENT, THEN WE HAVE TO SUBTRACT THEM.  WE HAVE TO DO THIS BECAUSE THE</span>
<span class="number">1286 1286 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">MANTISSAS ARE POSITIVE.  JUDGING BY THE EXPONENTS, THE LARGER NUMBER IS IN</span>
<span class="number">1286 1286 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE FAC, SO IF WE SUBTRACT, THE SIGN OF THE RESULT SHOULD BE THE SIGN OF THE</span>
<span class="number">1286 1286 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">FAC; HOWEVER, IF THE EXPONENTS ARE THE SAME, THE NUMBER IN THE REGISTERS</span>
<span class="number">1286 1286 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">COULD BE BIGGER, SO AFTER WE SUBTRACT THEM, WE HAVE TO CHECK IF THE RESULT</span>
<span class="number">1286 1286 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">WAS NEGATIVE.  IF IT WAS, WE NEGATE THE NUMBER IN THE REGISTERS AND</span>
<span class="number">1286 1286 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">COMPLEMENT THE SIGN OF THE FAC.  (HERE THE FAC IS UNPACKED)</span>
<span class="number">1286 1286 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF WE HAVE TO ADD THE NUMBERS, THE SIGN OF THE RESULT IS THE SIGN OF THE</span>
<span class="number">1286 1286 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">FAC.  SO, IN EITHER CASE, WHEN WE ARE ALL DONE, THE SIGN OF THE RESULT</span>
<span class="number">1286 1286 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">WILL BE THE SIGN OF THE FAC.      </span>
<span class="number">1286 1286 </span><span class="colon">: </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,h               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET SUBTRACTION FLAG</span>
<span class="number">1287 1287 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                        
<span class="number">1288 1288 </span><span class="colon">: </span><span class="hex">21 E4 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,FACLO          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET POINTER TO LO'S</span>
<span class="number">128B 128B </span><span class="colon">: </span><span class="hex">F2 9F 12   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> p,FADD3           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SUBTRACT IF THE SIGNS WERE DIFFERENT</span>
<span class="number">128E 128E </span><span class="colon">: </span><span class="hex">CD 10 13   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FADDA             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ADD THE NUMBERS</span>
<span class="number">1291 1291 </span><span class="colon">: </span><span class="hex">30 5E      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,ROUND          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ROUND RESULT IF THERE WAS NO OVERFLOW</span>
<span class="number">1293 1293 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">THERE WAS OVERFLOW</span>
<span class="number">1294 1294 </span><span class="colon">: </span><span class="hex">34         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> (hl)              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">INCREMENT EXPONENT</span>
<span class="number">1295 1295 </span><span class="colon">: </span><span class="hex">CA D3 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,OVERR                  
<span class="number">1298 1298 </span><span class="colon">: </span><span class="hex">2E 01      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,1               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SHIFT RESULT RIGHT ONE, SHIFT CARRY IN</span>
<span class="number">129A 129A </span><span class="colon">: </span><span class="hex">CD 52 13   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SHRADD                   
<span class="number">129D 129D </span><span class="colon">: </span><span class="hex">18 52      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> ROUND             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ROUND RESULT AND WE ARE DONE</span>
<span class="number">129F 129F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">129F 129F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">HERE TO SUBTRACT C,D,E,B FROM ((HL)+0,1,2),0</span>
<span class="number">129F 129F </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">[M80] </span><span class="label">FADD3: </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SUBTRACT NUMBERS, NEGATE UNDERFLOW BYTE</span>
<span class="number">12A0 12A0 </span><span class="colon">: </span><span class="hex">90         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> b                        
<span class="number">12A1 12A1 </span><span class="colon">: </span><span class="hex">47         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE IT</span>
<span class="number">12A2 12A2 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SUBTRACT LOW ORDERS</span>
<span class="number">12A3 12A3 </span><span class="colon">: </span><span class="hex">9B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sbc    </span> a,e                      
<span class="number">12A4 12A4 </span><span class="colon">: </span><span class="hex">5F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,a                      
<span class="number">12A5 12A5 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">UPDATE POINTER TO NEXT BYTE</span>
<span class="number">12A6 12A6 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SUBTRACT MIDDLE ORDERS</span>
<span class="number">12A7 12A7 </span><span class="colon">: </span><span class="hex">9A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sbc    </span> a,d                      
<span class="number">12A8 12A8 </span><span class="colon">: </span><span class="hex">57         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,a                      
<span class="number">12A9 12A9 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">UPDATE POINTER TO HIGH ORDERS</span>
<span class="number">12AA 12AA </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SUBTRACT HIGH ORDERS</span>
<span class="number">12AB 12AB </span><span class="colon">: </span><span class="hex">99         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sbc    </span> a,c                      
<span class="number">12AC 12AC </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a                      
<span class="number">12AD 12AD </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">12AD 12AD </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">BECAUSE WE WANT A POSITIVE MANTISSA, CHECK IF WE HAVE TO NEGATE THE NUMBER</span>
<span class="number">12AD 12AD </span><span class="colon">: </span><span class="hex">DC 1C 13   </span><span class="source">[M80] </span><span class="label">FADFLT:</span><span class="mnemonic"> call   </span> c,NEGR                   
<span class="number">12B0 1280 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">12B0 12B0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;NORMALIZE C,D,E,B                       </span>
<span class="number">12B0 12B0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;ALTERS A,B,C,D,E,H,L                    </span>
<span class="number">12B0 12B0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;HERE WE SHIFT THE MANTISSA LEFT UNTIL THE MSB IS A ONE.</span>
<span class="number">12B0 12B0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;EXCEPT IN 4K, THE IDEA IS TO SHIFT LEFT BY 8 AS MANY TIMES AS</span>
<span class="number">12B0 12B0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;POSSIBLE.                               </span>
<span class="number">12B0 12B0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">12B0 12B0 </span><span class="colon">: </span><span class="hex">68         </span><span class="source">[M80] </span><span class="label">NORMAL:</span><span class="mnemonic"> ld     </span> l,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT LOWEST 2 BYTES IN (HL)</span>
<span class="number">12B1 12B1 </span><span class="colon">: </span><span class="hex">63         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,e                      
<span class="number">12B2 12B2 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ZERO SHIFT COUNT</span>
<span class="number">12B3 12B3 </span><span class="colon">: </span><span class="hex">47         </span><span class="source">(M80) </span><span class="label">NORM1: </span><span class="mnemonic"> ld     </span> b,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE SHIFT COUNT</span>
<span class="number">12B4 12B4 </span><span class="colon">: </span><span class="hex">79         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,c               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DO WE HAVE 1 BYTE OF ZEROS</span>
<span class="number">12B5 12B5 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                        
<span class="number">12B6 12B6 </span><span class="colon">: </span><span class="hex">20 27      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,NORM3          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NO, SHIFT ONE PLACE AT A TIME</span>
<span class="number">12B8 12B8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    - </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THIS LOOP SPEEDS THINGS UP BY SHIFTING 8 PLACES AT ONE TIME</span>
<span class="number">12B8 12B8 </span><span class="colon">: </span><span class="hex">4A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,d               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">YES, SHIFT OVER 1 BYTE</span>
<span class="number">12B9 12B9 </span><span class="colon">: </span><span class="hex">54         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,h                      
<span class="number">12BA 12BA </span><span class="colon">: </span><span class="hex">65         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,l                      
<span class="number">12BB 12BB </span><span class="colon">: </span><span class="hex">6F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SHIFT IN 8 aS FOR THE LOW ORDER</span>
<span class="number">12BC 12BC </span><span class="colon">: </span><span class="hex">78         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">UPDATE SHIFT COUNT</span>
<span class="number">12BD 12BD </span><span class="colon">: </span><span class="hex">D6 08      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> 8                        
<span class="number">12BF 12BF </span><span class="colon">: </span><span class="hex">FE E0      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 224               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DID WE SHIFT IN 4 BYTES OF ZEROS?</span>
<span class="number">12C1 12C1 </span><span class="colon">: </span><span class="hex">20 F0      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,NORM1          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NO, TRY TO SHIFT OVER 8 MORE</span>
<span class="number">12C3 12C3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">12C3 12C3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ZERO FAC                          </span>
<span class="number">12C3 12C3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALTERS A ONLY                     </span>
<span class="number">12C3 12C3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">EXITS WITH A=0                    </span>
<span class="number">12C3 12C3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">BY OUR FLOATING POINT FORMAT, THE NUMBER IS ZERO IF THE EXPONENT IS ZERO</span>
<span class="number">12C3 12C3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">12C3 12C3 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">ZERO:  </span><span class="mnemonic"> xor    </span> a                  ;[M80] ZERO A
<span class="number">12C4 12C4 </span><span class="colon">: </span><span class="hex">32 E7 38   </span><span class="source">      </span><span class="label">ZERO0: </span><span class="mnemonic"> ld     </span> (FAC),a            ;[M80] ZERO THE FAC'S EXPONENT, ENTRY IF A=0
<span class="number">12C7 12C7 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                    ;[M80] ALL DONE
<span class="number">12C8 12C8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">12C8 12C8 </span><span class="colon">: </span><span class="hex">7C         </span><span class="source">[M80] </span><span class="label">NORM2: </span><span class="mnemonic"> ld     </span> a,h                ;[M80] CHECK FOR CASE OF NORMALIZING A SMALL INT
<span class="number">12C9 12C9 </span><span class="colon">: </span><span class="hex">B5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> l                        
<span class="number">12CA 12CA </span><span class="colon">: </span><span class="hex">B2         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> d                        
<span class="number">12CB 12CB </span><span class="colon">: </span><span class="hex">20 0A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,NORM2U          ;[M80] DO USUAL THING
<span class="number">12CD 12CD </span><span class="colon">: </span><span class="hex">79         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,c                ;[M80] GET BYTE TO SHIFT
<span class="number">12CE 12CE </span><span class="colon">: </span><span class="hex">05         </span><span class="source">(M80) </span><span class="label">NORM2F:</span><span class="mnemonic"> dec    </span> b                  ;[M80] DECRMENT SHIFT COUNT
<span class="number">12CF 12CF </span><span class="colon">: </span><span class="hex">17         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rla    </span>                    ;[M80] SHIFT LEFT
<span class="number">12D0 12D0 </span><span class="colon">: </span><span class="hex">30 FC      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,NORM2F          ;[M80] NORMALIZE LIKE SOB
<span class="number">12D2 12D2 </span><span class="colon">: </span><span class="hex">04         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> b                  ;[M80] CORRECT SHIFT COUNT
<span class="number">12D3 12D3 </span><span class="colon">: </span><span class="hex">1F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rra    </span>                    ;[M80] WE DID IT ONE TOO MANY TIMES
<span class="number">12D4 12D4 </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a                ;[M80] RESULT TO [C]
<span class="number">12D5 12D5 </span><span class="colon">: </span><span class="hex">18 0B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> NORM3A             ;[M80] ALL DONE
<span class="number">12D7 12D7 </span><span class="colon">: </span><span class="hex">05         </span><span class="source">(M80) </span><span class="label">NORM2U:</span><span class="mnemonic"> dec    </span> b                  ;[M80] DECREMENT SHIFT COUNT
<span class="number">12D8 12D8 </span><span class="colon">: </span><span class="hex">29         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,hl              ;[M80] ROTATE (HL) LEFT ONE, SHIFT IN A ZERO
<span class="number">12D9 12D9 </span><span class="colon">: </span><span class="hex">7A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,d                ;[M80] ROTATE NEXT HIGHER ORDER LEFT ONE
<span class="number">12DA 12DA </span><span class="colon">: </span><span class="hex">17         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rla    </span>                    ;     
<span class="number">12DB 12DB </span><span class="colon">: </span><span class="hex">57         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,a                ;     
<span class="number">12DC 12DC </span><span class="colon">: </span><span class="hex">79         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,c                ;[M80] ROTATE HIGH ORDER LEFT ONE
<span class="number">12DD 12DD </span><span class="colon">: </span><span class="hex">8F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> adc    </span> a,a                ;[M80] SET CONDITION CODES
<span class="number">12DE 12DE </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a                ;     
<span class="number">12DF 12DF </span><span class="colon">: </span><span class="hex">F2 C8 12   </span><span class="source">(M80) </span><span class="label">NORM3: </span><span class="mnemonic"> jp     </span> p,NORM2           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WE HAVE MORE NORMALIZATION TO DO</span>
<span class="number">12E2 12E2 </span><span class="colon">: </span><span class="hex">78         </span><span class="source">(M80) </span><span class="label">NORM3A:</span><span class="mnemonic"> ld     </span> a,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALL NORMALIZED, GET SHIFT COUNT</span>
<span class="number">12E3 12E3 </span><span class="colon">: </span><span class="hex">5C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,h               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT LO'S BACK IN E,B</span>
<span class="number">12E4 12E4 </span><span class="colon">: </span><span class="hex">45         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,l               <span class="comment">;      </span>
<span class="number">12E5 12E5 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHECK IF WE DID NO SHIFTING</span>
<span class="number">12E6 12E6 </span><span class="colon">: </span><span class="hex">28 09      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,ROUND           <span class="comment">;      </span>
<span class="number">12E8 12E8 </span><span class="colon">: </span><span class="hex">21 E7 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,FAC            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">LOOK AT FAC'S EXPONENT</span>
<span class="number">12EB 12EB </span><span class="colon">: </span><span class="hex">86         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">UPDATE EXPONENT</span>
<span class="number">12EC 12EC </span><span class="colon">: </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a            <span class="comment">;      </span>
<span class="number">12ED 12ED </span><span class="colon">: </span><span class="hex">30 D4      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,ZERO           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHECK FOR UNDERFLOW</span>
<span class="number">12EF 12EF </span><span class="colon">: </span><span class="hex">28 D2      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,ZERO            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NUMBER IS ZERO, ALL DONE</span>
<span class="number">12F1 12F1 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">12F1 12F1 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ROUND RESULT IN C,D,E,B AND PUT NUMBER IN THE FAC</span>
<span class="number">12F1 12F1 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALTERS A,B,C,D,E,H,L              </span>
<span class="number">12F1 12F1 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">WE ROUND C,D,E UP OR DOWN DEPENDING UPON THE MSB OF B</span>
<span class="number">12F1 12F1 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">12F1 12F1 </span><span class="colon">: </span><span class="hex">78         </span><span class="source">[M80] </span><span class="label">ROUND: </span><span class="mnemonic"> ld     </span> a,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF WE SHOULD ROUND UP</span>
<span class="number">12F2 12F2 </span><span class="colon">: </span><span class="hex">21 E7 38   </span><span class="source">[M80] </span><span class="label">ROUNDB:</span><span class="mnemonic"> ld     </span> hl,FAC            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ENTRY FROM FDIV, GET POINTER TO EXPONENT</span>
<span class="number">12F5 12F5 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                        
<span class="number">12F6 12F6 </span><span class="colon">: </span><span class="hex">FC 03 13   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> m,ROUNDA          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DO IT IF NECESSARY</span>
<span class="number">12F9 12F9 </span><span class="colon">: </span><span class="hex">46         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT EXPONENT IN B</span>
<span class="number">12FA 12FA </span><span class="colon">  </span><span class="hex">           </span><span class="source">    - </span><span class="comment">;</span><span class="source">[80] H</span><span class="comment">ERE WE PACK THE HO AND SIGN       </span>
<span class="number">12FA 12FA </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment"> POINT TO SIGN</span>
<span class="number">12FB 12FB </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment"> GET SIGN</span>
<span class="number">12FC 12FC </span><span class="colon">: </span><span class="hex">E6 80      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> and    </span> $80               <span class="comment">;</span><span class="source">[M80] </span><span class="comment"> GET RID OF UNWANTED BITS</span>
<span class="number">12FE 12FE </span><span class="colon">: </span><span class="hex">A9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> c                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment"> PACK SIGN AND HO</span>
<span class="number">12FF 12FF </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment"> SAVE IT IN C</span>
<span class="number">1300 1300 </span><span class="colon">: </span><span class="hex">C3 23 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> MOVFR             <span class="comment">;</span><span class="source">[M80] </span><span class="comment"> SAVE NUMBER IN FAC</span>
<span class="number">1303 1303 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1303 1303 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">SUBROUTNE FOR ROUND:  ADD ONE TO C,D,E</span>
<span class="number">1303 1303 </span><span class="colon">: </span><span class="hex">1C         </span><span class="source">      </span><span class="label">ROUNDA:</span><span class="mnemonic"> inc    </span> e                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ADD ONE TO THE LOW ORDER, ENTRY FROM QINT</span>
<span class="number">1304 1304 </span><span class="colon">: </span><span class="hex">C0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nz                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALL DONE IF IT IS NOT ZERO</span>
<span class="number">1305 1305 </span><span class="colon">: </span><span class="hex">14         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> d                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ADD ONE TO NEXT HIGHER ORDER</span>
<span class="number">1306 1306 </span><span class="colon">: </span><span class="hex">C0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nz                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALL DONE IF NO OVERFLOW</span>
<span class="number">1307 1307 </span><span class="colon">: </span><span class="hex">0C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> c                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ADD ONE TO THE HIGHEST ORDER</span>
<span class="number">1308 1308 </span><span class="colon">: </span><span class="hex">C0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nz                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RETURN IF NO OVEFLOW</span>
<span class="number">1309 1309 </span><span class="colon">: </span><span class="hex">0E 80      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,$80             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE NUMBER OVERFLOWED, SET NEW HIGH ORDER</span>
<span class="number">130B 130B </span><span class="colon">: </span><span class="hex">34         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> (hl)              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">UPDATE EXPONENT</span>
<span class="number">130C 130C </span><span class="colon">: </span><span class="hex">C0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nz                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RETURN IF IT DID NOT OVERFLOW</span>
<span class="number">130D 130D </span><span class="colon">: </span><span class="hex">C3 D3 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> OVERR             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">OVERFLOW</span>
<span class="number">1310 1310 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1310 1310 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ADD (HL)+2,1,0 TO C,D,E           </span>
<span class="number">1310 1310 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THIS CODE IS USED BY FADD, FOUT   </span>
<span class="number">1310 1310 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">[M80] </span><span class="label">FADDA: </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET LOWEST ORDER</span>
<span class="number">1311 1311 </span><span class="colon">: </span><span class="hex">83         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,e               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ADD IN OTHER LOWEST ORDER</span>
<span class="number">1312 1312 </span><span class="colon">: </span><span class="hex">5F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE IT</span>
<span class="number">1313 1313 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">UPDATE POINTER TO NEXT BYTE</span>
<span class="number">1314 1314 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ADD MIDDLE ORDERS</span>
<span class="number">1315 1315 </span><span class="colon">: </span><span class="hex">8A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> adc    </span> a,d                      
<span class="number">1316 1316 </span><span class="colon">: </span><span class="hex">57         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,a                      
<span class="number">1317 1317 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">UPDATE POINTER TO HIGH ORDER</span>
<span class="number">1318 1318 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ADD HIGH ORDERS</span>
<span class="number">1319 1319 </span><span class="colon">: </span><span class="hex">89         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> adc    </span> a,c                      
<span class="number">131A 131A </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a                      
<span class="number">131B 131B </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALL DONE</span>
<span class="number">131C 131C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">131C 131C </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">NEGATE NUMBER IN C,D,E,B          </span>
<span class="number">131C 131C </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THIS CODE IS USED BY FADD, QINT   </span>
<span class="number">131C 131C </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALTERS A,B,C,D,E,L                </span>
<span class="number">131C 131C </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">131C 131C </span><span class="colon">: </span><span class="hex">21 E8 38   </span><span class="source">[M80] </span><span class="label">NEGR:  </span><span class="mnemonic"> ld     </span> hl,FAC+1          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NEGATE FAC</span>
<span class="number">131F 131F </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET SIGN</span>
<span class="number">1320 1320 </span><span class="colon">: </span><span class="hex">2F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cpl    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">COMPLEMENT IT</span>
<span class="number">1321 1321 </span><span class="colon">: </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE IT AGAIN</span>
<span class="number">1322 1322 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ZERO A</span>
<span class="number">1323 1323 </span><span class="colon">: </span><span class="hex">6F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE ZERO IN L</span>
<span class="number">1324 1324 </span><span class="colon">: </span><span class="hex">90         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> b                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NEGATE LOWEST ORDER</span>
<span class="number">1325 1325 </span><span class="colon">: </span><span class="hex">47         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE IT</span>
<span class="number">1326 1326 </span><span class="colon">: </span><span class="hex">7D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,l               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET A ZERO</span>
<span class="number">1327 1327 </span><span class="colon">: </span><span class="hex">9B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sbc    </span> a,e               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NEGATE NEXT HIGHEST ORDER</span>
<span class="number">1328 1328 </span><span class="colon">: </span><span class="hex">5F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE IT</span>
<span class="number">1329 1329 </span><span class="colon">: </span><span class="hex">7D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,l               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET A ZERO</span>
<span class="number">132A 132A </span><span class="colon">: </span><span class="hex">9A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sbc    </span> a,d               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NEGATE NEXT HIGHEST ORDER</span>
<span class="number">132B 132B </span><span class="colon">: </span><span class="hex">57         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE IT</span>
<span class="number">132C 132C </span><span class="colon">: </span><span class="hex">7D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,l               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET ZERO BACK</span>
<span class="number">132D 132D </span><span class="colon">: </span><span class="hex">99         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sbc    </span> a,c               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NEGATE HIGHEST ORDER</span>
<span class="number">132E 132E </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE IT</span>
<span class="number">132F 132F </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALL DONE</span>
<span class="number">1330 1330 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1330 1330 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">SHIFT C,D,E RIGHT                 </span>
<span class="number">1330 1330 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">A = SHIFT COUNT                   </span>
<span class="number">1330 1330 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALTERS A,B,C,D,E,L                </span>
<span class="number">1330 1330 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE IDEA (EXCEPT IN 4K) IS TO SHIFT RIGHT 8 PLACES AS MANY TIMES AS</span>
<span class="number">1330 1330 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> POSSIBLE                         </span>
<span class="number">1330 1330 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">1330 1330 </span><span class="colon">: </span><span class="hex">06 00      </span><span class="source">[M80] </span><span class="label">SHIFTR:</span><span class="mnemonic"> ld     </span> b,0               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ZERO OVERFLOW BYTE</span>
<span class="number">1332 1332 </span><span class="colon">: </span><span class="hex">D6 08      </span><span class="source">(M80) </span><span class="label">SHFTR1:</span><span class="mnemonic"> sub    </span> 8                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CAN WE SHIFT IT 8 RIGHT?</span>
<span class="number">1334 1334 </span><span class="colon">: </span><span class="hex">38 07      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,SHFTR2          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NO, SHIFT IT ONE PLACE AT A TIME</span>
<span class="number">1334 1334 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    - </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THIS LOOP SPEEDS THINGS UP BY SHIFTING 8 PLACES AT ONE TIME</span>
<span class="number">1336 1336 </span><span class="colon">: </span><span class="hex">43         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,e               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SHIFT NUMBER 1 BYTE RIGHT</span>
<span class="number">1337 1337 </span><span class="colon">: </span><span class="hex">5A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,d                      
<span class="number">1338 1338 </span><span class="colon">: </span><span class="hex">51         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,c                      
<span class="number">1339 1339 </span><span class="colon">: </span><span class="hex">0E 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,0               <span class="comment">;</span><span class="source">[M80 P</span><span class="comment">UT 0 IN HO</span>
<span class="number">133B 133B </span><span class="colon">: </span><span class="hex">18 F5      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> SHFTR1            <span class="comment">;</span><span class="source">[M80 T</span><span class="comment">RY TO SHIFT 8 RIGHT AGAIN</span>
<span class="number">133D 133D </span><span class="colon">: </span><span class="hex">C6 09      </span><span class="source">(M80) </span><span class="label">SHFTR2:</span><span class="mnemonic"> add    </span> a,9               <span class="comment">;</span><span class="source">[M80 C</span><span class="comment">ORRECT SHIFT COUNT</span>
<span class="number">133F 133F </span><span class="colon">: </span><span class="hex">6F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,a               <span class="comment">;</span><span class="source">[M80 S</span><span class="comment">AVE SHIFT COUNT</span>
<span class="number">1340 1340 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    - </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">TEST FOR CASE (VERY COMMON) WHERE SHIFTING SMALL INTEGER RIGHT.</span>
<span class="number">1340 1340 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    - </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THIS HAPPENS IN FOR LOOPS, ETC.   </span>
<span class="number">1340 1340 </span><span class="colon">: </span><span class="hex">7A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,d               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF THREE LOWS ARE ZERO.</span>
<span class="number">1341 1341 </span><span class="colon">: </span><span class="hex">B3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> e                        
<span class="number">1342 1342 </span><span class="colon">: </span><span class="hex">B0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> b                        
<span class="number">1343 1343 </span><span class="colon">: </span><span class="hex">20 09      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,SHFTR3         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF SO, DO USUAL.</span>
<span class="number">1345 1345 </span><span class="colon">: </span><span class="hex">79         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,c               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET HIGH BYTE TO SHIFT</span>
<span class="number">1346 1346 </span><span class="colon">: </span><span class="hex">2D         </span><span class="source">(M80) </span><span class="label">SHFTRF:</span><span class="mnemonic"> dec    </span> l                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DONE SHIFTING?</span>
<span class="number">1347 1347 </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">YES, DONE</span>
<span class="number">1348 1348 </span><span class="colon">: </span><span class="hex">1F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rra    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ROTATE ONE RIGHT</span>
<span class="number">1349 1349 </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE RESULT</span>
<span class="number">134A 134A </span><span class="colon">: </span><span class="hex">30 FA      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,SHFTRF         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ZAP BACK AND DO NEXT ONE IF NONE</span>
<span class="number">134C 134C </span><span class="colon">: </span><span class="hex">18 06      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> SHFTC             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CONTINUE SHIFTING</span>
<span class="number">134E 134E </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">(M80) </span><span class="label">SHFTR3:</span><span class="mnemonic"> xor    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CLEAR CARRY</span>
<span class="number">134F 134F </span><span class="colon">: </span><span class="hex">2D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> l                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ARE WE DONE SHIFTING?</span>
<span class="number">1350 1350 </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RETURN IF WE ARE</span>
<span class="number">1351 1351 </span><span class="colon">: </span><span class="hex">79         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,c               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET HO</span>
<span class="number">1352 1352 </span><span class="colon">: </span><span class="hex">1F         </span><span class="source">[M80] </span><span class="label">SHRADD:</span><span class="mnemonic"> rra    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ENTRY FROM FADD, SHIFT IT RIGHT</span>
<span class="number">1353 1353 </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE IT</span>
<span class="number">1354 1354 </span><span class="colon">: </span><span class="hex">7A         </span><span class="source">(M80) </span><span class="label">SHFTC: </span><span class="mnemonic"> ld     </span> a,d               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SHIFT NEXT BYTE RIGHT</span>
<span class="number">1355 1355 </span><span class="colon">: </span><span class="hex">1F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rra    </span>                          
<span class="number">1356 1356 </span><span class="colon">: </span><span class="hex">57         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,a                      
<span class="number">1357 1357 </span><span class="colon">: </span><span class="hex">7B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,e               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SHIFT LOW ORDER RIGHT</span>
<span class="number">1358 1358 </span><span class="colon">: </span><span class="hex">1F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rra    </span>                          
<span class="number">1359 1359 </span><span class="colon">: </span><span class="hex">5F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,a                      
<span class="number">135A 135A </span><span class="colon">: </span><span class="hex">78         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SHIFT OVERFLOW BYTE RIGHT</span>
<span class="number">135B 135B </span><span class="colon">: </span><span class="hex">1F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rra    </span>                          
<span class="number">135C 135C </span><span class="colon">: </span><span class="hex">47         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,a                      
<span class="number">135D 135D </span><span class="colon">: </span><span class="hex">18 EF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> SHFTR3            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF WE ARE DONE</span>
<span class="number">135F 135F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">135F 135F </span><span class="colon">: </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">CONSTANTS USED BY LOG             </span>
<span class="number">135F 135F </span><span class="colon">: </span><span class="hex">00 00 00 81</span><span class="source">(M80) </span><span class="label">FONE:  </span><span class="mnemonic"> byte   </span> $00,$00,$00,$81 ;1       
<span class="number">1363 1363 </span><span class="colon">: </span><span class="hex">04         </span><span class="source">[M80] </span><span class="label">LOGP:  </span><span class="mnemonic"> byte   </span> 4                  ;[M80] HART 2524 COEFFICIENTS
<span class="number">1364 1364 </span><span class="colon">: </span><span class="hex">9A F7 19 83</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $9A,$F7,$19,$83    ;[M80] 4.8114746
<span class="number">1368 1368 </span><span class="colon">: </span><span class="hex">24 63 43 83</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $24,$63,$43,$83    ;[M80] 6.105852
<span class="number">136C 136C </span><span class="colon">: </span><span class="hex">75 CD 8D 84</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $75,$CD,$8D,$84    ;[M80] -8.86266
<span class="number">1370 1370 </span><span class="colon">: </span><span class="hex">A9 7F 83 82</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $A9,$7F,$83,$82    ;[M80] -2.054667
<span class="number">1374 1374 </span><span class="colon">: </span><span class="hex">04         </span><span class="source">[M80] </span><span class="label">LOGQ:  </span><span class="mnemonic"> byte   </span> 4                        
<span class="number">1375 1375 </span><span class="colon">: </span><span class="hex">00 00 00 81</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $00,$00,$00,$81    ;[M80] 1.0
<span class="number">1379 1379 </span><span class="colon">: </span><span class="hex">E2 B0 4D 83</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $E2,$B0,$4D,$83    ;[M80] 6.427842
<span class="number">137D 137D </span><span class="colon">: </span><span class="hex">0A 72 11 83</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $0A,$72,$11,$83    ;[M80] 4.545171
<span class="number">1381 1381 </span><span class="colon">: </span><span class="hex">F4 04 35 7F</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $F4,$04,$35,$7F    ;[M80] .3535534
<span class="number">1385 1385 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1385 1385 </span><span class="colon">: </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">NATURAL LOG FUNCTION              </span>
<span class="number">1385 1385 </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">CALCULATION IS BY:                </span>
<span class="number">1385 1385 </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> LN(F*2^N)=(N+LOG2(F))*LN(2)      </span>
<span class="number">1385 1385 </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">AN APPROXIMATION POLYNOMIAL IS USED TO CALCULATE LOG2(F)</span>
<span class="number">1385 1385 </span><span class="colon">: </span><span class="hex">EF         </span><span class="source">[M80] </span><span class="label">LOG:   </span><span class="mnemonic"> rst    </span> FSIGN             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHECK FOR A NEGATIVE OR ZERO ARGUMENT</span>
<span class="number">1386 1386 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET CC'S PROPERLY</span>
<span class="number">1387 1387 </span><span class="colon">: </span><span class="hex">EA 97 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> pe,FCERR          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FAC .LE. 0, BLOW HIM OUT OF THE WATER</span>
<span class="number">138A 138A </span><span class="colon">: </span><span class="hex">CD 95 13   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> LOG2                     
<span class="number">138D 138D </span><span class="colon">: </span><span class="hex">01 31 80   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> bc,$8031                 
<span class="number">1390 1390 </span><span class="colon">: </span><span class="hex">11 18 72   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,$7218          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET LN(2)</span>
<span class="number">1393 1393 </span><span class="colon">: </span><span class="hex">18 36      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> FMULT             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">COMPLETE LOG CALCULATION: USE HART 2524 CALCULATION</span>
<span class="number">1395 1395 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1395 1395 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">USE HART 2524 CALCULATION         </span>
<span class="number">1395 1395 </span><span class="colon">: </span><span class="hex">CD 2E 15   </span><span class="source">[M80] </span><span class="label">LOG2:  </span><span class="mnemonic"> call   </span> MOVRF             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MOVE FAC TO REGISTERS TOO</span>
<span class="number">1398 1398 </span><span class="colon">: </span><span class="hex">3E 80      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,080H                   
<span class="number">139A 139A </span><span class="colon">: </span><span class="hex">32 E7 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (FAC),a           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ZERO THE EXPONENT</span>
<span class="number">139D 139D </span><span class="colon">: </span><span class="hex">A8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> b                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">REMOVE 200 EXCESS FROM X</span>
<span class="number">139E 139E </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE EXPONENT</span>
<span class="number">139F 139F </span><span class="colon">: </span><span class="hex">CD 13 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> PUSHF             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE FAC (X)</span>
<span class="number">13A2 13A2 </span><span class="colon">: </span><span class="hex">21 63 13   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,LOGP           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINT TO P CONSTANTS</span>
<span class="number">13A5 13A5 </span><span class="colon">: </span><span class="hex">CD 46 18   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> POLY              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CALCULATE P(X)</span>
<span class="number">13A8 13A8 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FETCH X</span>
<span class="number">13A9 13A9 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUSHF WOULD ALTER DE</span>
<span class="number">13AA 13AA </span><span class="colon">: </span><span class="hex">CD 13 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> PUSHF             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUSH P(X) ON THE STACK</span>
<span class="number">13AD 13AD </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET LOW BYTES OF X TO (DE)</span>
<span class="number">13AE 13AE </span><span class="colon">: </span><span class="hex">CD 23 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVFR             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND MOVE TO FAC</span>
<span class="number">13B1 13B1 </span><span class="colon">: </span><span class="hex">21 74 13   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,LOGQ           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINT TO Q COEFFICIENTS</span>
<span class="number">13B4 13B4 </span><span class="colon">: </span><span class="hex">CD 46 18   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> POLY              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">COMPUTE Q(X)</span>
<span class="number">13B7 13B7 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FETCH P(X) TO REGISTERS</span>
<span class="number">13B8 13B8 </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;      </span>
<span class="number">13B9 13B9 </span><span class="colon">: </span><span class="hex">CD 2F 14   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FDIV              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CALCULATE P(X)/Q(X)</span>
<span class="number">13BC 13BC </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RE-FETCH EXPONENT</span>
<span class="number">13BD 13BD </span><span class="colon">: </span><span class="hex">CD 13 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> PUSHF             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE EVALUATION</span>
<span class="number">13C0 13C0 </span><span class="colon">: </span><span class="hex">CD F6 14   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FLOAT             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FLOAT THE EXPONENT</span>
<span class="number">13C3 13C3 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;      </span>
<span class="number">13C4 13C4 </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;      </span>
<span class="number">13C5 13C5 </span><span class="colon">: </span><span class="hex">C3 61 12   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> FADD              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET EVAL. BACK</span>
<span class="number">13C8 13C8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">13C8 13C8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;***Unused code?                        </span>
<span class="number">13C8 13C8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;;IMULT in [M80] fell into here         </span>
<span class="number">13C8 13C8 </span><span class="colon">: </span><span class="hex">21         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $21               <span class="comment">;;[LD HL.] to skip next two instructions</span>
<span class="number">13C9 13C9 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">(M80) </span><span class="label">FMULTT:</span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET FIRST ARGUMENT OFF STACK, ENTRY FROM POLYX</span>
<span class="number">13CA 13CA </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                       
<span class="number">13CB 13CB </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">13CB 13CB </span><span class="colon">- </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">MULTIPLICATION           FAC:=ARG*FAC</span>
<span class="number">13CB 13CB </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALTERS A,B,C,D,E,H,L              </span>
<span class="number">13CB 13CB </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">13CB 13CB </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE PRODUCT WILL BE FORMED IN C,D,E,B. THIS WILL BE IN C,H,L,B PART OF THE</span>
<span class="number">13CB 13CB </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">TIME IN ORDER TO USE THE "DAD" INSTRUCTION.  AT FMULT2, WE GET THE NEXT</span>
<span class="number">13CB 13CB </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">BYTE OF THE MANTISSA IN THE FAC TO MULTIPLY BY.  ((HL) POINTS TO IT)</span>
<span class="number">13CB 13CB </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">(THE FMULT2 SUBROUTINE PRESERVES (HL))  IN 8K, IF THE BYTE IS ZERO, WE JUST</span>
<span class="number">13CB 13CB </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">SHIFT THE PRODUCT 8 RIGHT.  THIS BYTE IS THEN SHIFTED RIGHT AND SAVED IN D</span>
<span class="number">13CB 13CB </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">(H IN 4K).  THE CARRY DETERMINES IF WE SHOULD ADD IN THE SECOND FACTOR</span>
<span class="number">13CB 13CB </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF WE DO, WE ADD IT TO C,H,L.  B IS ONLY USED TO DETERMINE WHICH WAY WE</span>
<span class="number">13CB 13CB </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ROUND.  WE THEN SHIFT C,H,L,B (C,D,E,B) IN 4K RIGHT ONE TO GET READY FOR THE</span>
<span class="number">13CB 13CB </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">NEXT TIME THROUGH THE LOOP.  NOTE THAT THE CARRY IS SHIFTED INTO THE MSB OF</span>
<span class="number">13CB 13CB </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">C.  E HAS A COUNT (L IN 4K) TO DETERMINE WHEN WE HAVE LOOKED AT ALL THE BITS</span>
<span class="number">13CB 13CB </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">OF D (H IN 4K).                   </span>
<span class="number">13CB 13CB </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">13CB 13CB </span><span class="colon">= </span><span class="hex">EF         </span><span class="source">[M80] </span><span class="label">FMULT: </span><span class="mnemonic"> rst    </span> FSIGN             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHECK IF FAC IS ZERO</span>
<span class="number">13CC 13CC </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF IT IS, RESULT IS ZERO</span>
<span class="number">13CD 13CD </span><span class="colon">: </span><span class="hex">2E 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,0               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ADD THE TWO EXPONENTS, L IS A FLAG</span>
<span class="number">13CF 13CF </span><span class="colon">: </span><span class="hex">CD AC 14   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MULDIV            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FIX UP THE EXPONENTS</span>
<span class="number">13D2 13D2 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    - </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE NUMBER IN THE REGISTERS SO WE CAN ADD IT FAST</span>
<span class="number">13D2 13D2 </span><span class="colon">: </span><span class="hex">79         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,c               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET HO</span>
<span class="number">13D3 13D3 </span><span class="colon">: </span><span class="hex">32 F6 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (RESHO),a         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">STORE HO OF REGISTERS</span>
<span class="number">13D6 13D6 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">STORE THE TWO LO'S OF THE REGISTERS</span>
<span class="number">13D7 13D7 </span><span class="colon">: </span><span class="hex">22 F7 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (RESMO),hl        <span class="comment">;      </span>
<span class="number">13DA 13DA </span><span class="colon">: </span><span class="hex">01 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> bc,0              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ZERO THE PRODUCT REGISTERS</span>
<span class="number">13DD 13DD </span><span class="colon">: </span><span class="hex">50         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,b               <span class="comment">;      </span>
<span class="number">13DE 13DE </span><span class="colon">: </span><span class="hex">58         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,b               <span class="comment">;      </span>
<span class="number">13DF 13DF </span><span class="colon">: </span><span class="hex">21 B0 12   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,NORMAL         <span class="comment">;      </span>
<span class="number">13E2 13E2 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment"> ON THE STACK</span>
<span class="number">13E3 13E3 </span><span class="colon">: </span><span class="hex">21 EB 13   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,FMULT2         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT FMULT2 ON THE STACK TWICE, SO AFTER</span>
<span class="number">13E6 13E6 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment"> WE MULTIPLY BY THE LO BYTE, WE WILL</span>
<span class="number">13E7 13E7 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment"> MULTIPLY BY THE MO AND HO</span>
<span class="number">13E8 13E8 </span><span class="colon">: </span><span class="hex">21 E4 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,FACLO          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET ADDRESS OF LO OF FAC</span>
<span class="number">13EB 13EB </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">(M80) </span><span class="label">FMULT2:</span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET BYTE TO MULTIPLY BY</span>
<span class="number">13EC 13EC </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MOVE POINTER TO NEXT BYTE</span>
<span class="number">13ED 13ED </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;      </span>
<span class="number">13EE 13EE </span><span class="colon">: </span><span class="hex">28 2C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,FMULT3          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ARE WE MULTIPLYING BY ZERO?</span>
<span class="number">13F0 13F0 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE POINTER</span>
<span class="number">13F1 13F1 </span><span class="colon">: </span><span class="hex">2E 08      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,8               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET UP A COUNT</span>
<span class="number">13F3 13F3 </span><span class="colon">: </span><span class="hex">1F         </span><span class="source">(M80) </span><span class="label">FMULT4:</span><span class="mnemonic"> rra    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ROTATE BYTE RIGHT</span>
<span class="number">13F4 13F4 </span><span class="colon">: </span><span class="hex">67         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE IT</span>
<span class="number">13F5 13F5 </span><span class="colon">: </span><span class="hex">79         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,c               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET HO</span>
<span class="number">13F6 13F6 </span><span class="colon">: </span><span class="hex">30 0B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,FMULT5         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DON'T ADD IN NUMBER IF BIT WAS ZERO</span>
<span class="number">13F8 13F8 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE COUNTERS</span>
<span class="number">13F9 13F9 </span><span class="colon">: </span><span class="hex">2A F7 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(RESMO)               
<span class="number">13FC 13FC </span><span class="colon">: </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de                    
<span class="number">13FD 13FD </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">13FE 13FE </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">13FF 13FF </span><span class="colon">: </span><span class="hex">3A F6 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(RESHO)                
<span class="number">1402 1402 </span><span class="colon">: </span><span class="hex">89         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> adc    </span> a,c                      
<span class="number">1403 1403 </span><span class="colon">: </span><span class="hex">1F         </span><span class="source">(M80) </span><span class="label">FMULT5:</span><span class="mnemonic"> rra    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ROTATE RESULT RIGHT ONE</span>
<span class="number">1404 1404 </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a               <span class="comment">;      </span>
<span class="number">1405 1405 </span><span class="colon">: </span><span class="hex">7A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,d               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ROTATE NEXT BYTE</span>
<span class="number">1406 1406 </span><span class="colon">: </span><span class="hex">1F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rra    </span>                   <span class="comment">;      </span>
<span class="number">1407 1407 </span><span class="colon">: </span><span class="hex">57         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,a               <span class="comment">;      </span>
<span class="number">1408 1408 </span><span class="colon">: </span><span class="hex">7B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,e               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ROTATE NEXT LOWER ORDER</span>
<span class="number">1409 1409 </span><span class="colon">: </span><span class="hex">1F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rra    </span>                   <span class="comment">;      </span>
<span class="number">140A 140A </span><span class="colon">: </span><span class="hex">5F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,a               <span class="comment">;      </span>
<span class="number">140B 140B </span><span class="colon">: </span><span class="hex">78         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ROTATE LO</span>
<span class="number">140C 140C </span><span class="colon">: </span><span class="hex">1F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rra    </span>                   <span class="comment">;      </span>
<span class="number">140D 140D </span><span class="colon">: </span><span class="hex">47         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,a               <span class="comment">;      </span>
<span class="number">140E 140E </span><span class="colon">: </span><span class="hex">E6 10      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> and    </span> 010H              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF WE ROTATED THRU ST</span>
<span class="number">1410 1410 </span><span class="colon">: </span><span class="hex">28 04      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,FML5B1          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF NOT DON'T WORRY</span>
<span class="number">1412 1412 </span><span class="colon">: </span><span class="hex">78         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RE FETCH LO</span>
<span class="number">1413 1413 </span><span class="colon">: </span><span class="hex">F6 20      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> 020H              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"OR" IN STICKY</span>
<span class="number">1415 1415 </span><span class="colon">: </span><span class="hex">47         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">BACK TO LO</span>
<span class="number">1416 1416 </span><span class="colon">: </span><span class="hex">2D         </span><span class="source">      </span><span class="label">FML5B1:</span><span class="mnemonic"> dec    </span> l                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ARE WE DONE?</span>
<span class="number">1417 1417 </span><span class="colon">: </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,h               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET NUMBER WE ARE MULTIPLYING BY</span>
<span class="number">1418 1418 </span><span class="colon">: </span><span class="hex">20 D9      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,FMULT4         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MULTIPLY AGAIN IF WE ARE NOT DONE</span>
<span class="number">141A 141A </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Pop [HL] and Return                    </span>
<span class="number">141A 141A </span><span class="colon">= </span><span class="hex">E1         </span><span class="source">[M80] </span><span class="label">POPHRT:</span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET POINTER TO NUMBER TO MULTIPLY BY</span>
<span class="number">141B 141B </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALL DONE</span>
<span class="number">141C 141C </span><span class="colon">: </span><span class="hex">43         </span><span class="source">[M80] </span><span class="label">FMULT3:</span><span class="mnemonic"> ld     </span> b,e               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MULTIPLY BY ZERO: SHIFT EVERYTHING 8 RIGHT</span>
<span class="number">141D 141D </span><span class="colon">: </span><span class="hex">5A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,d               <span class="comment">;      </span>
<span class="number">141E 141E </span><span class="colon">: </span><span class="hex">51         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,c               <span class="comment">;      </span>
<span class="number">141F 141F </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SHIFT IN 8 ZEROS ON THE LEFT</span>
<span class="number">1420 1420 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALL DONE</span>
<span class="number">1421 1421 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1421 1421 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> DIVIDE FAC BY 10                 </span>
<span class="number">1421 1421 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    - </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> ALTERS A,B,C,D,E,H,L             </span>
<span class="number">1421 1421 </span><span class="colon">: </span><span class="hex">CD 13 15   </span><span class="source">[M80] </span><span class="label">DIV10: </span><span class="mnemonic"> call   </span> PUSHF             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WE HAVE TO DIVIDE -- SAVE COUNT</span>
<span class="number">1424 1424 </span><span class="colon">: </span><span class="hex">01 20 84   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> bc,$8420          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">10.0</span>
<span class="number">1427 1427 </span><span class="colon">: </span><span class="hex">11 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,$0000                 
<span class="number">142A 142A </span><span class="colon">: </span><span class="hex">CD 23 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVFR             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MOVE TEN INTO THE FAC</span>
<span class="number">142D 142D </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">[M80] </span><span class="label">FDIVT: </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[F80] </span><span class="comment">GET NUMBER BACK IN REGISTERS</span>
<span class="number">142E 142E </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;</span><span class="source">[F80] </span><span class="comment">FALL INTO DIVIDE AND WE ARE DONE</span>
<span class="number">142F 142F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">142F 142F </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">DIVISION       FAC:=ARG/FAC       </span>
<span class="number">142F 142F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALTERS A,B,C,D,E,H,L              </span>
<span class="number">142F 142F </span><span class="colon">= </span><span class="hex">EF         </span><span class="source">[M80] </span><span class="label">FDIV:  </span><span class="mnemonic"> rst    </span> FSIGN             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHECK FOR DIVISION BY ZERO</span>
<span class="number">1430 1430 </span><span class="colon">: </span><span class="hex">CA C7 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,DV0ERR          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DON'T ALLOW DIVIDE BY ZERO</span>
<span class="number">1433 1433 </span><span class="colon">: </span><span class="hex">2E FF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,255             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SUBTRACT THE TWO EXPONENTS, L IS A FLAG</span>
<span class="number">1435 1435 </span><span class="colon">: </span><span class="hex">CD AC 14   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MULDIV            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FIX UP THE EXPONENTS AND THINGS</span>
<span class="number">1438 1438 </span><span class="colon">: </span><span class="hex">34         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> (hl)                     
<span class="number">1439 1439 </span><span class="colon">: </span><span class="hex">CA D3 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,OVERR           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">OVERFLOW</span>
<span class="number">143C 143C </span><span class="colon">: </span><span class="hex">34         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> (hl)                     
<span class="number">143D 143D </span><span class="colon">: </span><span class="hex">CA D3 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,OVERR           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">OVERFLOW</span>
<span class="number">1440 1440 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    - </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">HERE WE SAVE THE FAC IN MEMORY SO WE CAN SUBTRACT IT FROM THE NUMBER</span>
<span class="number">1440 1440 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    - </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IN THE REGISTERS QUICKLY.         </span>
<span class="number">1440 1440 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINT TO HO</span>
<span class="number">1441 1441 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET HO</span>
<span class="number">1442 1442 </span><span class="colon">: </span><span class="hex">32 19 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (FDIVA+1),a       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE IT</span>
<span class="number">1445 1445 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE MIDDLE ORDER</span>
<span class="number">1446 1446 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)                   
<span class="number">1447 1447 </span><span class="colon">: </span><span class="hex">32 15 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (FDIVB+1),a       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT IT WHERE NOTHING WILL HURT IT</span>
<span class="number">144A 144A </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE LO</span>
<span class="number">144B 144B </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)                   
<span class="number">144C 144C </span><span class="colon">: </span><span class="hex">32 11 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (FDIVC+1),a              
<span class="number">144F 144F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    - </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE NUMERATOR WILL BE KEPT IN B,H,L.  THE QUOTIENT WILL BE FORMED IN C,D,E.</span>
<span class="number">144F 144F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">TO GET A BIT OF THE QUOTIENT, WE FIRST SAVE B,H,L ON THE STACK, THEN</span>
<span class="number">144F 144F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">SUBTRACT THE DENOMINATOR THAT WE SAVED IN MEMORY.  THE CARRY INDICATES</span>
<span class="number">144F 144F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">WHETHER OR NOT B,H,L WAS BIGGER THAN THE DENOMINATOR.  IF B,H,L WAS BIGGER,</span>
<span class="number">144F 144F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE NEXT BIT OF THE QUOTIENT IS A ONE.  TO GET THE OLD B,H,L OFF THE STACK,</span>
<span class="number">144F 144F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">WE POP THEM INTO THE PSW.  IF THE DENOMINATOR WAS BIGGER, THE NEXT BIT OF</span>
<span class="number">144F 144F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE QUOTIENT IS ZERO, AND WE GET THE OLD B,H,L BACK BY POPPING IT OFF THE</span>
<span class="number">144F 144F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">STACK.  WE HAVE TO KEEP AN EXTRA BIT OF THE QUOTIENT IN FDIVG+1 IN CASE THE</span>
<span class="number">144F 144F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">DENOMINATOR WAS BIGGER,  THEN B,H,L WILL GET SHIFTED LEFT.  IF THE MSB  OF</span>
<span class="number">144F 144F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">B WAS ONE, IT HAS TO BE STORED SOMEWHERE, SO WE STORE IT IN FDIVG+1.  THEN</span>
<span class="number">144F 144F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE NEXT TIME THROUGH THE LOOP B,H,L WILL LOOK BIGGER BECAUSE IT HAS AN</span>
<span class="number">144F 144F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">EXTRA HO BIT IN FDIVG+1. WE ARE DONE DIVIDING WHEN THE MSB OF C IS A ONE.</span>
<span class="number">144F 144F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THIS OCCURS WHEN WE HAVE CALCULATED 24 BITS OF THE QUOTIENT.  WHEN WE JUMP</span>
<span class="number">144F 144F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">TO ROUND, THE 25TH BIT OF THE QUOTIENT DETERMINES WHETHER WE ROUND OR NOT.</span>
<span class="number">144F 144F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IT IS IN THE MSB OF A.  IF INITIALLY THE DENOMINATOR IS BIGGER THAN THE</span>
<span class="number">144F 144F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">NUMERATOR, THE FIRST BIT OF THE QUOTIENT WILL BE ZERO.  THIS MEANS WE</span>
<span class="number">144F 144F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">WILL GO THROUGH THE DIVIDE LOOP 26 TIMES, SINCE IT STOPS ON THE 25TH BIT</span>
<span class="number">144F 144F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">AFTER THE FIRST NON-ZERO BIT OF THE QUOTIENT.  SO, THIS QUOTIENT WILL LOOK</span>
<span class="number">144F 144F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">SHIFTED LEFT ONE FROM THE QUOTIENT OF TWO NUMBERS IN WHICH THE NUMERATOR IS</span>
<span class="number">144F 144F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">BIGGER.  THIS CAN ONLY OCCUR ON THE FIRST TIME THROUGH THE LOOP, SO C,D,E</span>
<span class="number">144F 144F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ARE ALL ZERO.  SO, IF WE FINISH THE LOOP AND C,D,E ARE ALL ZERO, THEN WE</span>
<span class="number">144F 144F </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">MUST DECREMENT THE EXPONENT TO CORRECT FOR THIS.</span>
<span class="number">144F 144F </span><span class="colon">: </span><span class="hex">41         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,c               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET NUMBER IN B,H,L</span>
<span class="number">1450 1450 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">1451 1451 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ZERO C,D,E AND HIGHEST ORDER</span>
<span class="number">1452 1452 </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a                      
<span class="number">1453 1453 </span><span class="colon">: </span><span class="hex">57         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,a                      
<span class="number">1454 1454 </span><span class="colon">: </span><span class="hex">5F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,a                      
<span class="number">1455 1455 </span><span class="colon">: </span><span class="hex">32 1C 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (FDIVG+1),a              
<span class="number">1458 1458 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">[M80] </span><span class="label">FDIV1: </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE LO'S OF NUMBER</span>
<span class="number">1459 1459 </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE HO OF NUMBER</span>
<span class="number">145A 145A </span><span class="colon">: </span><span class="hex">7D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,l               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SUBTRACT NUMBER THAT WAS IN FAC</span>
<span class="number">145B 145B </span><span class="colon">: </span><span class="hex">CD 10 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FDIVC             <span class="comment">;;Call Divide Routine in RAM for apeed</span>
<span class="number">145E 145E </span><span class="colon">: </span><span class="hex">DE 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sbc    </span> a,0               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SUBTRACT LO</span>
<span class="number">1460 1460 </span><span class="colon">: </span><span class="hex">3F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ccf    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET CARRY TO CORESPOND TO NEXT QUOTIENT BIT</span>
<span class="number">1461 1461 </span><span class="colon">: </span><span class="hex">30 07      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,FDIV2          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET OLD NUMBER BACK IF WE SUBTRACTED TOO MUCH</span>
<span class="number">1463 1463 </span><span class="colon">: </span><span class="hex">32 1C 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (FDIVG+1),a       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">UPDATE HIGHEST ORDER</span>
<span class="number">1466 1466 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE SUBTRACTION WAS GOOD</span>
<span class="number">1467 1467 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET PREVIOUS NUMBER OFF STACK</span>
<span class="number">1468 1468 </span><span class="colon">: </span><span class="hex">37         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> scf    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NEXT BIT IN QUOTIENT IS A ONE</span>
<span class="number">1469 1469 </span><span class="colon">: </span><span class="hex">D2         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $D2               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"JNC" AROUND NEXT 2 BYTES</span>
<span class="number">146A 146A </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">(M80) </span><span class="label">FDIV2: </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WE SUBTRACTED TOO MUCH</span>
<span class="number">146B 146B </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET OLD NUMBER BACK</span>
<span class="number">146C 146C </span><span class="colon">: </span><span class="hex">79         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,c               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ARE WE DONE?</span>
<span class="number">146D 146D </span><span class="colon">: </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET SIGN FLAG WITHOUT AFFECTING CARRY</span>
<span class="number">146E 146E </span><span class="colon">: </span><span class="hex">3D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> a                        
<span class="number">146F 146F </span><span class="colon">: </span><span class="hex">1F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rra    </span>                   <span class="comment">;</span><span class="source">[M80]P</span><span class="comment">UT CARRY IN MSB</span>
<span class="number">1470 1470 </span><span class="colon">: </span><span class="hex">F2 87 14   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> p,DIV2A           <span class="comment">;</span><span class="source">[M80]N</span><span class="comment">OT READY TO ROUND YET</span>
<span class="number">1473 1473 </span><span class="colon">: </span><span class="hex">17         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rla    </span>                   <span class="comment">;</span><span class="source">[M80]B</span><span class="comment">IT BACK TO CARRY</span>
<span class="number">1474 1474 </span><span class="colon">: </span><span class="hex">3A 1C 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(FDIVG+1)       <span class="comment">;</span><span class="source">[M80]F</span><span class="comment">ETCH EXTRA BIT</span>
<span class="number">1477 1477 </span><span class="colon">: </span><span class="hex">1F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rra    </span>                   <span class="comment">;</span><span class="source">[M80]B</span><span class="comment">OTH NOW IN A</span>
<span class="number">1478 1478 </span><span class="colon">: </span><span class="hex">E6 C0      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> and    </span> $C0               <span class="comment">;</span><span class="source">[M80]C</span><span class="comment">LEAR SUPERFLUOUS BITS</span>
<span class="number">147A 147A </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;</span><span class="source">[M80]S</span><span class="comment">AVE FOR LATER</span>
<span class="number">147B 147B </span><span class="colon">: </span><span class="hex">78         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,b               <span class="comment">;</span><span class="source">[M80]F</span><span class="comment">ETCH HO OF REMAINDER</span>
<span class="number">147C 147C </span><span class="colon">: </span><span class="hex">B4         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> h                 <span class="comment">;</span><span class="source">[M80]F</span><span class="comment">ETCH HO</span>
<span class="number">147D 147D </span><span class="colon">: </span><span class="hex">B5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> l                 <span class="comment">;</span><span class="source">[M80]S</span><span class="comment">EE IF OTHER REMAINDER BITS AND IF SO SET ST</span>
<span class="number">147E 147E </span><span class="colon">: </span><span class="hex">28 02      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,DIV2AA          <span class="comment">;</span><span class="source">[M80]I</span><span class="comment">F NOT IGNORE</span>
<span class="number">1480 1480 </span><span class="colon">: </span><span class="hex">3E 20      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,$20             <span class="comment">;</span><span class="source">[M80]S</span><span class="comment">T BIT</span>
<span class="number">1482 1482 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">(M80) </span><span class="label">DIV2AA:</span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80]A</span><span class="comment">ND THE REST OF REMAINDER</span>
<span class="number">1483 1483 </span><span class="colon">: </span><span class="hex">B4         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> h                 <span class="comment">;</span><span class="source">[M80]"</span><span class="comment">OR" IN REST</span>
<span class="number">1484 1484 </span><span class="colon">: </span><span class="hex">C3 F2 12   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> ROUNDB            <span class="comment">;</span><span class="source">[M80]U</span><span class="comment">SE REMAINDER</span>
<span class="number">1487 1487 </span><span class="colon">: </span><span class="hex">17         </span><span class="source">(M80) </span><span class="label">DIV2A: </span><span class="mnemonic"> rla    </span>                   <span class="comment">;</span><span class="source">[M80]W</span><span class="comment">E AREN'T, GET OLD CARRY BACK</span>
<span class="number">1488 1488 </span><span class="colon">: </span><span class="hex">7B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,e               <span class="comment">;</span><span class="source">[M80]R</span><span class="comment">OTATE EVERYTHING LEFT ONE</span>
<span class="number">1489 1489 </span><span class="colon">: </span><span class="hex">17         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rla    </span>                   <span class="comment">;</span><span class="source">[M80]R</span><span class="comment">OTATE NEXT BIT OF QUOTIENT IN</span>
<span class="number">148A 148A </span><span class="colon">: </span><span class="hex">5F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,a                      
<span class="number">148B 148B </span><span class="colon">: </span><span class="hex">7A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,d                      
<span class="number">148C 148C </span><span class="colon">: </span><span class="hex">17         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rla    </span>                          
<span class="number">148D 148D </span><span class="colon">: </span><span class="hex">57         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,a                      
<span class="number">148E 148E </span><span class="colon">: </span><span class="hex">79         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,c                      
<span class="number">148F 148F </span><span class="colon">: </span><span class="hex">17         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rla    </span>                          
<span class="number">1490 1490 </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a                      
<span class="number">1491 1491 </span><span class="colon">: </span><span class="hex">29         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ROTATE A ZERO INTO RIGHT END OF NUMBER</span>
<span class="number">1492 1492 </span><span class="colon">: </span><span class="hex">78         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE HO BYTE, FINALLY!</span>
<span class="number">1493 1493 </span><span class="colon">: </span><span class="hex">17         </span><span class="source">{M80} </span><span class="label">FDIV2A:</span><span class="mnemonic"> rla    </span>                          
<span class="number">1494 1494 </span><span class="colon">: </span><span class="hex">47         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,a                      
<span class="number">1495 1495 </span><span class="colon">: </span><span class="hex">3A 1C 38   </span><span class="source">{M80} </span><span class="label">FDIV2B:</span><span class="mnemonic"> ld     </span> a,(FDIVG+1)              
<span class="number">1498 1498 </span><span class="colon">: </span><span class="hex">17         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rla    </span>                          
<span class="number">1499 1499 </span><span class="colon">: </span><span class="hex">32 1C 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (FDIVG+1),a              
<span class="number">149C 149C </span><span class="colon">: </span><span class="hex">79         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,c               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ADD ONE TO EXPONENT IF THE FIRST SUBTRACTION</span>
<span class="number">149D 149D </span><span class="colon">: </span><span class="hex">B2         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> d                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment"> DID NOT WORK</span>
<span class="number">149E 149E </span><span class="colon">: </span><span class="hex">B3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> e                        
<span class="number">149F 149F </span><span class="colon">: </span><span class="hex">20 B7      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,FDIV1          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">THIS ISN'T THE CASE</span>
<span class="number">14A1 14A1 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE PART OF NUMBER</span>
<span class="number">14A2 14A2 </span><span class="colon">: </span><span class="hex">21 E7 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,FAC            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET POINTER TO FAC</span>
<span class="number">14A5 14A5 </span><span class="colon">: </span><span class="hex">35         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> (hl)              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DECREMENT EXPONENT</span>
<span class="number">14A6 14A6 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET NUMBER BACK</span>
<span class="number">14A7 14A7 </span><span class="colon">: </span><span class="hex">20 AF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,FDIV1          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DIVIDE MORE IF NO OVERFLOW OCCURED</span>
<span class="number">14A9 14A9 </span><span class="colon">: </span><span class="hex">C3 C3 12   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> ZERO              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">UNDERFLOW!!</span>
<span class="number">14AC 14AC </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">14AC 14AC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHECK SPECIAL CASES AND ADD EXPONENTS FOR FMULT, FDIV</span>
<span class="number">14AC 14AC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALTERS A,B,H,L                    </span>
<span class="number">14AC 14AC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">14AC 14AC </span><span class="colon">: </span><span class="hex">78         </span><span class="source">[M80] </span><span class="label">MULDIV:</span><span class="mnemonic"> ld     </span> a,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS NUMBER IN REGISTERS ZERO?</span>
<span class="number">14AD 14AD </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                        
<span class="number">14AE 14AE </span><span class="colon">: </span><span class="hex">28 1D      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,MULDV2          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IT IS, ZERO FAC AND WE ARE DONE</span>
<span class="number">14B0 14B0 </span><span class="colon">: </span><span class="hex">7D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,l               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET ADD OR SUBTRACT FLAG</span>
<span class="number">14B1 14B1 </span><span class="colon">: </span><span class="hex">21 E7 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,FAC            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET POINTER TO EXPONENT</span>
<span class="number">14B4 14B4 </span><span class="colon">: </span><span class="hex">AE         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> (hl)              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET EXPONENT</span>
<span class="number">14B5 14B5 </span><span class="colon">: </span><span class="hex">80         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ADD IN REGISTER EXPONENT</span>
<span class="number">14B6 14B6 </span><span class="colon">: </span><span class="hex">47         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE IT</span>
<span class="number">14B7 14B7 </span><span class="colon">: </span><span class="hex">1F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rra    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHECK FOR OVERFLOW</span>
<span class="number">14B8 14B8 </span><span class="colon">: </span><span class="hex">A8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> b                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">OVERFLOW IF SIGN IS THE SAME AS CARRY</span>
<span class="number">14B9 14B9 </span><span class="colon">: </span><span class="hex">78         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET SUM</span>
<span class="number">14BA 14BA </span><span class="colon">: </span><span class="hex">F2 CC 14   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> p,MULDV1          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WE HAVE OVERFLOW!!</span>
<span class="number">14BD 14BD </span><span class="colon">: </span><span class="hex">C6 80      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,$80             <span class="comment">;{M80} PUT EXPONENT IN EXCESS 128</span>
<span class="number">14BF 14BF </span><span class="colon">: </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE IT IN THE FAC</span>
<span class="number">14C0 14C0 </span><span class="colon">: </span><span class="hex">CA 1A 14   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,POPHRT          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WE HAVE UNDEFLOW!! RETURN.</span>
<span class="number">14C3 14C3 </span><span class="colon">: </span><span class="hex">CD 46 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> UNPACK            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">UNPACK THE ARGUMENTS</span>
<span class="number">14C6 14C6 </span><span class="colon">: </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE NEW SIGN</span>
<span class="number">14C7 14C7 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">{M80} </span><span class="label">DCXHRT:</span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINT TO EXPONENT</span>
<span class="number">14C8 14C8 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALL DONE, LEAVE HO IN A</span>
<span class="number">14C8 14C8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">14C9 14C9 </span><span class="colon">: </span><span class="hex">EF         </span><span class="source">{M80} </span><span class="label">MLDVEX:</span><span class="mnemonic"> rst    </span> FSIGN             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ENTRY FROM EXP, PICK UNDERFLOW IF NEGATIVE</span>
<span class="number">14CA 14CA </span><span class="colon">: </span><span class="hex">2F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cpl    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PICK OVERFLOW IF POSITIVE</span>
<span class="number">14CB 14CB </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DON'T SCREW UP STACK</span>
<span class="number">14CC 14CC </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">[M80] </span><span class="label">MULDV1:</span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS ERROR OVERFLOW OR UNDEFLOW?</span>
<span class="number">14CD 14CD </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">[M80] </span><span class="label">MULDV2:</span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET OLD RETURN ADDRESS OFF STACK</span>
<span class="number">14CE 14CE </span><span class="colon">: </span><span class="hex">F2 C3 12   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> p,ZERO                   
<span class="number">14D1 14D1 </span><span class="colon">: </span><span class="hex">C3 D3 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> OVERR             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">OVERFLOW</span>
<span class="number">14D4 14D4 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">14D4 14D4 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">MULTIPLY FAC BY 10                </span>
<span class="number">14D4 14D4 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALTERS A,B,C,D,E,H,L              </span>
<span class="number">14D4 14D4 </span><span class="colon">: </span><span class="hex">CD 2E 15   </span><span class="source">[M80] </span><span class="label">MUL10: </span><span class="mnemonic"> call   </span> MOVRF             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET NUMBER IN REGISTERS</span>
<span class="number">14D7 14D7 </span><span class="colon">: </span><span class="hex">78         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET EXPONENT</span>
<span class="number">14D8 14D8 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RESULT IS ZERO IF ARG IS ZERO</span>
<span class="number">14D9 14D9 </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IT IS</span>
<span class="number">14DA 14DA </span><span class="colon">: </span><span class="hex">C6 02      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,2               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MULTIPLY BY 4 BY ADDING 2 TO EXPONENT</span>
<span class="number">14DC 14DC </span><span class="colon">: </span><span class="hex">DA D3 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> c,OVERR           <span class="comment">;{M80} OVERFLOW</span>
<span class="number">14DF 14DF </span><span class="colon">: </span><span class="hex">47         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RESTORE EXPONENT</span>
<span class="number">14E0 14E0 </span><span class="colon">: </span><span class="hex">CD 61 12   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FADD              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ADD IN ORIGINAL NUMBER TO GET 5 TIMES IT</span>
<span class="number">14E3 14E3 </span><span class="colon">: </span><span class="hex">21 E7 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,FAC            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ADD 1 TO EXPONENT TO MULTIPLY NUMBER BY</span>
<span class="number">14E6 14E6 </span><span class="colon">: </span><span class="hex">34         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> (hl)              <span class="comment">;</span><span class="source">[M80] </span><span class="comment"> 2 TO GET 10 TIMES ORIGINAL NUMBER</span>
<span class="number">14E7 14E7 </span><span class="colon">: </span><span class="hex">C0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nz                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALL DONE IF NO OVERFLOW</span>
<span class="number">14E8 14E8 </span><span class="colon">: </span><span class="hex">C3 D3 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> OVERR             <span class="comment">;{M80} OVERFLOW</span>
<span class="number">14EB 14EB </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">14EB 14EB </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Jumped to from FSIGN                   </span>
<span class="number">14EB 14EB </span><span class="colon">: </span><span class="hex">3A E6 38   </span><span class="source">[M80] </span><span class="label">SIGNC: </span><span class="mnemonic"> ld     </span> a,(FACHO)         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET SIGN OF FACHO, IT IS NON-ZERO</span>
<span class="number">14EE 14EE </span><span class="colon">: </span><span class="hex">FE         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $FE               <span class="comment">;"CP" AROUND NEXT BYTE</span>
<span class="number">14EF 14EF </span><span class="colon">: </span><span class="hex">2F         </span><span class="source">[M80] </span><span class="label">FCOMPS:</span><span class="mnemonic"> cpl    </span>                   <span class="comment">;ENTRY FROM FCOMP, COMPLEMENT SIGN</span>
<span class="number">14F0 14F0 </span><span class="colon">: </span><span class="hex">17         </span><span class="source">(M80) </span><span class="label">ICOMPS:</span><span class="mnemonic"> rla    </span>                   <span class="comment">;ENTRY FROM ICOMP, PUT SIGN BIT IN CARRY</span>
<span class="number">14F1 14F1 </span><span class="colon">: </span><span class="hex">9F         </span><span class="source">[M80] </span><span class="label">SIGNS: </span><span class="mnemonic"> sbc    </span> a,a               <span class="comment">;A=0 IF CARRY WAS 0, A=377 IF CARRY WAS 1</span>
<span class="number">14F2 14F2 </span><span class="colon">: </span><span class="hex">C0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nz                <span class="comment">;RETURN IF NUMBER WAS NEGATIVE</span>
<span class="number">14F3 14F3 </span><span class="colon">: </span><span class="hex">3C         </span><span class="source">(M80) </span><span class="label">INRART:</span><span class="mnemonic"> inc    </span> a                 <span class="comment">;PUT ONE IN A IF NUMBER WAS POSITIVE</span>
<span class="number">14F4 14F4 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;ALL DONE</span>
<span class="number">14F5 14F5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">14F5 14F5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;The SGN() Function                     </span>
<span class="number">14F5 14F5 </span><span class="colon">: </span><span class="hex">EF         </span><span class="source">      </span><span class="label">SGN:   </span><span class="mnemonic"> rst    </span> FSIGN             <span class="comment">;;Get sign of FAC</span>
<span class="number">14F614F6  </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">14F6 14F6 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">FLOAT THE SIGNED INTEGER IN A     </span>
<span class="number">14F6 14F6 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALTERS A,B,C,D,E,H,L              </span>
<span class="number">14F6 14F6 </span><span class="colon">: </span><span class="hex">06 88      </span><span class="source">[M80] </span><span class="label">FLOAT: </span><span class="mnemonic"> ld     </span> b,$88             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET EXPONENT CORRECTLY</span>
<span class="number">14F8 14F8 </span><span class="colon">: </span><span class="hex">11 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,0              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ZERO D,E</span>
<span class="number">14FB14FB  </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">14FB 14FB </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">FLOAT THE SIGNED NUMBER IN B,A,D,E</span>
<span class="number">14FB 14FB </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALTERS A,B,C,D,E,H,L              </span>
<span class="number">14FB 14FB </span><span class="colon">: </span><span class="hex">21 E7 38   </span><span class="source">[M80] </span><span class="label">FLOATR:</span><span class="mnemonic"> ld     </span> hl,FAC            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET POINTER TO FAC</span>
<span class="number">14FE 14FE </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT HO IN C</span>
<span class="number">14FF 14FF </span><span class="colon">: </span><span class="hex">70         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),b            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT EXPONENT IN THE FAC</span>
<span class="number">1500 1500 </span><span class="colon">: </span><span class="hex">06 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,0               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ZERO OVERFLOW BYTE</span>
<span class="number">1502 1502 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINT TO SIGN</span>
<span class="number">1503 1503 </span><span class="colon">: </span><span class="hex">36 80      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),128          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ASSUME A POSITIVE NUMBER</span>
<span class="number">1505 1505 </span><span class="colon">: </span><span class="hex">17         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rla    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT SIGN IN CARRY</span>
<span class="number">1506 1506 </span><span class="colon">: </span><span class="hex">C3 AD 12   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> FADFLT            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GO AND FLOAT THE NUMBER</span>
<span class="number">1509 1509 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1509 1509 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ABSOLUTE VALUE OF FAC             </span>
<span class="number">1509 1509 </span><span class="colon">: </span><span class="hex">EF         </span><span class="source">[M80] </span><span class="label">ABS:   </span><span class="mnemonic"> rst    </span> FSIGN             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE SIGN OF THE FAC IN A</span>
<span class="number">150A 150A </span><span class="colon">: </span><span class="hex">F0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> p                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF IT IS POSITIVE, WE ARE DONE</span>
<span class="number">150B 150B </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">150B 150B </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">NEGATE ANY TYPE VALUE IN THE FAC  </span>
<span class="number">150B 150B </span><span class="colon">= </span><span class="hex">21 E6 38   </span><span class="source">[M80] </span><span class="label">NEG:   </span><span class="mnemonic"> ld     </span> hl,FACHO          <span class="comment">;</span><span class="source">[M80[ </span><span class="comment">GET POINTER TO SIGN</span>
<span class="number">150E 150E </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80[ </span><span class="comment">GET SIGN</span>
<span class="number">150F 150F </span><span class="colon">: </span><span class="hex">EE 80      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> $80               <span class="comment">;</span><span class="source">[M80[ </span><span class="comment">COMPLEMENT SIGN BIT</span>
<span class="number">1511 1511 </span><span class="colon">: </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a            <span class="comment">;</span><span class="source">[M80[ </span><span class="comment">SAVE IT</span>
<span class="number">1512 1512 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;</span><span class="source">[M80[ </span><span class="comment">ALL DONE</span>
<span class="number">1513 1513 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1513 1513 </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT FAC ON STACK, ALTERS D,E      </span>
<span class="number">1513 1513 </span><span class="colon">= </span><span class="hex">EB         </span><span class="source">[M80] </span><span class="label">PUSHF: </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE (HL)</span>
<span class="number">1514 1514 </span><span class="colon">: </span><span class="hex">2A E4 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(FACLO)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET LO'S</span>
<span class="number">1517 1517 </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SWITCH LO'S AND RET ADDR</span>
<span class="number">1518 1518 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT RET ADDR BACK ON STACK</span>
<span class="number">1519 1519 </span><span class="colon">: </span><span class="hex">2A E6 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(FACHO)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET HO'S</span>
<span class="number">151C 151C </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SWITCH HO'S AND RET ADDR</span>
<span class="number">151D 151D </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT RET ADDR BACK ON STACK</span>
<span class="number">151E 151E </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET OLD (HL) BACK</span>
<span class="number">151F 151F </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALL DONE</span>
<span class="number">1520 1520 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1520 1520 </span><span class="colon">: </span><span class="hex">CD 31 15   </span><span class="source">[M80] </span><span class="label">MOVFM: </span><span class="mnemonic"> call   </span> MOVRM             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MOVE NUMBER FROM MEMORY [(HL)] TO FAC</span>
<span class="number">1523 1523 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">[M80] </span><span class="label">MOVFR: </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MOVE REGISTERS (B,C,D,E) TO FAC</span>
<span class="number">1524 1524 </span><span class="colon">: </span><span class="hex">22 E4 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (FACLO),hl        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT THEM WHERE THEY BELONG</span>
<span class="number">1527 1527 </span><span class="colon">: </span><span class="hex">60         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET HO'S IN (HL)</span>
<span class="number">1528 1528 </span><span class="colon">: </span><span class="hex">69         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,c               <span class="comment">;      </span>
<span class="number">1529 1529 </span><span class="colon">: </span><span class="hex">22 E6 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (FACHO),hl        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT HO'S WHERE THEY BELONG</span>
<span class="number">152C 152C </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET OLD (HL) BACK</span>
<span class="number">152D 152D </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALL DONE</span>
<span class="number">152E 152E </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">152E 152E </span><span class="colon">: </span><span class="hex">21 E4 38   </span><span class="source">[M80] </span><span class="label">MOVRF: </span><span class="mnemonic"> ld     </span> hl,FACLO          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MOVE FAC TO REGISTERS (B,C,D,E)</span>
<span class="number">1531 1531 </span><span class="colon">= </span><span class="hex">5E         </span><span class="source">[M80] </span><span class="label">MOVRM: </span><span class="mnemonic"> ld     </span> e,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET NUMBER IN REGISTERS (B,C,D,E) FROM MEMORY [(HL)]</span>
<span class="number">1532 1532 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINT TO MO</span>
<span class="number">1533 1533 </span><span class="colon">: </span><span class="hex">56         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET MO, ENTRY FOR BILL</span>
<span class="number">1534 1534 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINT TO HO</span>
<span class="number">1535 1535 </span><span class="colon">: </span><span class="hex">4E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET HO</span>
<span class="number">1536 1536 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINT TO EXPONENT</span>
<span class="number">1537 1537 </span><span class="colon">: </span><span class="hex">46         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET EXPONENT</span>
<span class="number">1538 1538 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">[M80] </span><span class="label">INXHRT:</span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">INC POINTER TO BEGINNING OF NEXT NUMBER</span>
<span class="number">1539 1539 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALL DONE</span>
<span class="number">153A 153A </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">153A 153A </span><span class="colon">- </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">MOVE NUMBER FROM FAC TO MEMORY [(HL)]</span>
<span class="number">153A 153A </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALTERS A,B,D,E,H,L                </span>
<span class="number">153A 153A </span><span class="colon">= </span><span class="hex">11 E4 38   </span><span class="source">[M80] </span><span class="label">MOVMF: </span><span class="mnemonic"> ld     </span> de,FACLO          <span class="comment">;GET POINTER TO FAC</span>
<span class="number">153D 153D </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">153D 153D </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">MOVE NUMBER FROM (DE) TO (HL)     </span>
<span class="number">153D 153D </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALTERS A,B,D,E,H,L                </span>
<span class="number">153D 153D </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">EXITS WITH (DE):=(DE)+4, (HL):=(HL)+4</span>
<span class="number">153D 153D </span><span class="colon">: </span><span class="hex">06 04      </span><span class="source">[M80] </span><span class="label">MOVE:  </span><span class="mnemonic"> ld     </span> b,4               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET COUNTER</span>
<span class="number">153F 153F </span><span class="colon">: </span><span class="hex">1A         </span><span class="source">(M80) </span><span class="label">MOVE1: </span><span class="mnemonic"> ld     </span> a,(de)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET WORD</span>
<span class="number">1540 1540 </span><span class="colon">: </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT IT WHERE IT BELONGS</span>
<span class="number">1541 1541 </span><span class="colon">: </span><span class="hex">13         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">INCREMENT POINTERS TO NEXT WORD</span>
<span class="number">1542 1542 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">1543 1543 </span><span class="colon">: </span><span class="hex">10 FA      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> djnz   </span> MOVE1                    
<span class="number">1545 1545 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">1546 1546 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1546 1546 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">UNPACK THE FAC AND THE REGISTERS  </span>
<span class="number">1546 1546 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALTERS A,C,H,L                    </span>
<span class="number">1546 1546 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">WHEN THE NUMBER IN THE FAC IS UNACKED, THE ASSUMED ONE IN THE</span>
<span class="number">1546 1546 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">MANTISSA IS RESTORED, AND THE COMPLEMENT OF THE SIGN IS PLACED</span>
<span class="number">1546 1546 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IN FAC+1                          </span>
<span class="number">1546 1546 </span><span class="colon">: </span><span class="hex">21 E6 38   </span><span class="source">[M80] </span><span class="label">UNPACK:</span><span class="mnemonic"> ld     </span> hl,FACHO          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINT TO HO AND SIGN</span>
<span class="number">1549 1549 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET HO AND SIGN</span>
<span class="number">154A 154A </span><span class="colon">: </span><span class="hex">07         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rlca   </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DUPLICATE THE SIGN IN CARRY AND THE LSB</span>
<span class="number">154B 154B </span><span class="colon">: </span><span class="hex">37         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> scf    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RESTORE THE HIDDEN ONE</span>
<span class="number">154C 154C </span><span class="colon">: </span><span class="hex">1F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rra    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RESTORE THE NUMBER IN A</span>
<span class="number">154D 154D </span><span class="colon">: </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE HO</span>
<span class="number">154E 154E </span><span class="colon">: </span><span class="hex">3F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ccf    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE COMPLEMENT OF THE SIGN</span>
<span class="number">154F 154F </span><span class="colon">: </span><span class="hex">1F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rra    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET IT IN THE SIGN BIT</span>
<span class="number">1550 1550 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINT TO TEMPORARY SIGN BYTE</span>
<span class="number">1551 1551 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">1552 1552 </span><span class="colon">: </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE COMPLEMENT OF SIGN</span>
<span class="number">1553 1553 </span><span class="colon">: </span><span class="hex">79         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,c               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET HO AND SIGN OF THE REGISTERS</span>
<span class="number">1554 1554 </span><span class="colon">: </span><span class="hex">07         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rlca   </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DUPLICATE THE SIGN IN CARRY AND THE LSB</span>
<span class="number">1555 1555 </span><span class="colon">: </span><span class="hex">37         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> scf    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RESTORE THE HIDDEN ONE</span>
<span class="number">1556 1556 </span><span class="colon">: </span><span class="hex">1F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rra    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RESTORE THE HO IN A</span>
<span class="number">1557 1557 </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE HO</span>
<span class="number">1558 1558 </span><span class="colon">: </span><span class="hex">1F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rra    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE SIGN BACK</span>
<span class="number">1559 1559 </span><span class="colon">: </span><span class="hex">AE         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> (hl)              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">COMPARE SIGN OF FAC AND SIGN OF REGISTERS</span>
<span class="number">155A 155A </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALL DONE</span>
<span class="number">155B 155B </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">155B 155B </span><span class="colon">- </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">COMPARE TWO NUMBERS               </span>
<span class="number">155B 155B </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">A=1 IF ARG .LT. FAC               </span>
<span class="number">155B 155B </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">A=0 IF ARG=FAC                    </span>
<span class="number">155B 155B </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">A=-1 IF ARG .GT. FAC              </span>
<span class="number">155B 155B </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">DOREL DEPENDS UPON THE FACT THAT FCOMP RETURNS WITH CARRY ON</span>
<span class="number">155B 155B </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;{M80}  IFF A HAS $7F                    </span>
<span class="number">155B 155B </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALTERS A,H,L                      </span>
<span class="number">155B 155B </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">155B 155B </span><span class="colon">= </span><span class="hex">78         </span><span class="source">[M80] </span><span class="label">FCOMP: </span><span class="mnemonic"> ld     </span> a,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHECK IF ARG IS ZERO</span>
<span class="number">155C 155C </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;      </span>
<span class="number">155D 155D </span><span class="colon">: </span><span class="hex">CA 28 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,FSIGN           <span class="comment">;      </span>
<span class="number">1560 1560 </span><span class="colon">: </span><span class="hex">21 EF 14   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,FCOMPS         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WE JUMP TO FCOMPS WHEN WE ARE DONE</span>
<span class="number">1563 1563 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT THE ADDRESS ON THE STACK</span>
<span class="number">1564 1564 </span><span class="colon">: </span><span class="hex">EF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> FSIGN             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHECK IF FAC IS ZERO</span>
<span class="number">1565 1565 </span><span class="colon">: </span><span class="hex">79         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,c               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF IT IS, RESULT IS MINUS THE SIGN OF ARG</span>
<span class="number">1566 1566 </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IT IS</span>
<span class="number">1567 1567 </span><span class="colon">: </span><span class="hex">21 E6 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,FACHO          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINT TO SIGN OF FAC</span>
<span class="number">156A 156A </span><span class="colon">: </span><span class="hex">AE         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> (hl)              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF THE SIGNS ARE THE SAME</span>
<span class="number">156B 156B </span><span class="colon">: </span><span class="hex">79         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,c               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF THEY ARE DIFFERENT, RESULT IS SIGN OF ARG</span>
<span class="number">156C 156C </span><span class="colon">: </span><span class="hex">F8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> m                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">THEY ARE DIFFERENT</span>
<span class="number">156D 156D </span><span class="colon">: </span><span class="hex">CD 73 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FCOMP2            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHECK THE REST OF THE NUMBER</span>
<span class="number">1570 1570 </span><span class="colon">: </span><span class="hex">1F         </span><span class="source">{M80} </span><span class="label">FCOMPD:</span><span class="mnemonic"> rra    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NUMBERS ARE DIFFERENT, CHANGE SIGN IF</span>
<span class="number">1571 1571 </span><span class="colon">: </span><span class="hex">A9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> c                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment"> BOTH NUMBERS ARE NEGATIVE</span>
<span class="number">1572 1572 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GO SET UP A</span>
<span class="number">1573 1573 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">(M80) </span><span class="label">FCOMP2:</span><span class="mnemonic"> inc    </span> hl                <span class="comment">;POINT TO EXPONENT</span>
<span class="number">1574 1574 </span><span class="colon">: </span><span class="hex">78         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,b               <span class="comment">;GET EXPONENT OF ARG</span>
<span class="number">1575 1575 </span><span class="colon">: </span><span class="hex">BE         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> (hl)              <span class="comment">;COMPARE THE TWO</span>
<span class="number">1576 1576 </span><span class="colon">: </span><span class="hex">C0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nz                <span class="comment">;NUMBERS ARE DIFFERENT</span>
<span class="number">1577 1577 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;POINT TO HO</span>
<span class="number">1578 1578 </span><span class="colon">: </span><span class="hex">79         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,c               <span class="comment">;GET HO OF ARG</span>
<span class="number">1579 1579 </span><span class="colon">: </span><span class="hex">BE         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> (hl)              <span class="comment">;COMPARE WITH HO OF FAC</span>
<span class="number">157A 157A </span><span class="colon">: </span><span class="hex">C0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nz                <span class="comment">;THEY ARE DIFFERENT</span>
<span class="number">157B 157B </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;POINT TO MO OF FAC</span>
<span class="number">157C 157C </span><span class="colon">: </span><span class="hex">7A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,d               <span class="comment">;GET MO OF ARG</span>
<span class="number">157D 157D </span><span class="colon">: </span><span class="hex">BE         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> (hl)              <span class="comment">;COMPARE WITH MO OF FAC</span>
<span class="number">157E 157E </span><span class="colon">: </span><span class="hex">C0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nz                <span class="comment">;THE NUMBERS ARE DIFFERENT</span>
<span class="number">157F 157F </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;POINT TO LO OF FAC</span>
<span class="number">1580 1580 </span><span class="colon">: </span><span class="hex">7B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,e               <span class="comment">;GET LO OF ARG</span>
<span class="number">1581 1581 </span><span class="colon">: </span><span class="hex">96         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> (hl)              <span class="comment">;SUBTRACT LO OF FAC</span>
<span class="number">1582 1582 </span><span class="colon">: </span><span class="hex">C0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nz                <span class="comment">;NUMBERS ARE DIFFERENT</span>
<span class="number">1583 1583 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;NUMBERS ARE THE SAME, DON'T SCREW UP STACK</span>
<span class="number">1584 1584 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;      </span>
<span class="number">1585 1585 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;ALL DONE</span>
<span class="number">1586 1586 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1586 1586 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">QUICK GREATEST INTEGER FUNCTION   </span>
<span class="number">1586 1586 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">LEAVES INT(FAC) IN C,D,E (SIGNED) ALTERS A,B,C,D,E</span>
<span class="number">1586 1586 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ASSUMES THE EXPONENT OF FAC IS IN A AND FAC .LT. 2^23 = 8388608</span>
<span class="number">1586 1586 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">1586 1586 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE HARD CASE IN QINT IS NEGATIVE NON-INTEGERS.  TO HANDLE THIS, IF THE</span>
<span class="number">1586 1586 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">NUMBER IS NEGATIVE, WE REGARD THE 3-BYTE MANTISSA AS A 3-BYTE INTEGER AND</span>
<span class="number">1586 1586 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">SUBTARCT ONE.  THEN ALL THE FRACTIONAL BITS ARE SHIFTED OUT BY SHIFTING THE</span>
<span class="number">1586 1586 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">MANTISSA RIGHT.  THEN, IF THE NUMBER WAS NEGATIVE, WE ADD ONE.  SO, IF WE</span>
<span class="number">1586 1586 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">HAD A NEGATIVE INTEGER, ALL THE BITS TO THE RIGHT OF THE BINARY POINT WERE</span>
<span class="number">1586 1586 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ZERO.  SO THE NET EFFECT IS WE HAVE THE ORIGINAL NUMBER IN C,D,E.  IF THE</span>
<span class="number">1586 1586 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">NUMBER WAS A NEGATIVE NON-INTEGER, THERE IS AT LEAST ONE NON-ZERO BIT TO THE</span>
<span class="number">1586 1586 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">RIGHT OF THE BINARY POINT.  SO THE NET EFFECT IS THAT WE GET THE ABSOLUTE</span>
<span class="number">1586 1586 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">VALUE OF INT(FAC) IN C,D,E.  C,D,E IS THEN NEGATED IF THE ORIGINAL NUMBER WAS</span>
<span class="number">1586 1586 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">NEGATIVE SO THE RESULT WILL BE SIGNED.</span>
<span class="number">1586 1586 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">1586 1586 </span><span class="colon">: </span><span class="hex">47         </span><span class="source">[M80] </span><span class="label">QINT:  </span><span class="mnemonic"> ld     </span> b,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ZERO B,C,D,E IN CASE THE NUMBER IS ZERO</span>
<span class="number">1587 1587 </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a                      
<span class="number">1588 1588 </span><span class="colon">: </span><span class="hex">57         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,a                      
<span class="number">1589 1589 </span><span class="colon">: </span><span class="hex">5F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,a                      
<span class="number">158A 158A </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET CONDITION CODES</span>
<span class="number">158B 158B </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IT IS ZERO, WE ARE DONE</span>
<span class="number">158C 158C </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE (HL)</span>
<span class="number">158D 158D </span><span class="colon">: </span><span class="hex">CD 2E 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVRF             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET NUMBER IN THE REGISTERS</span>
<span class="number">1590 1590 </span><span class="colon">: </span><span class="hex">CD 46 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> UNPACK            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">UNPACK THE NUMBER</span>
<span class="number">1593 1593 </span><span class="colon">: </span><span class="hex">AE         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> (hl)              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET SIGN OF NUMBER</span>
<span class="number">1594 1594 </span><span class="colon">: </span><span class="hex">67         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DON'T LOSE IT</span>
<span class="number">1595 1595 </span><span class="colon">: </span><span class="hex">FC AA 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> m,QINTA           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SUBTRACT 1 FROM LO IF NUMBER IS NEGATIVE</span>
<span class="number">1598 1598 </span><span class="colon">: </span><span class="hex">3E 98      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,$98             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE HOW MANY WE HAVE TO SHIFT TO CHANGE</span>
<span class="number">159A 159A </span><span class="colon">: </span><span class="hex">90         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> b                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment"> NUMBER TO AN INTEGER</span>
<span class="number">159B 159B </span><span class="colon">: </span><span class="hex">CD 30 13   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SHIFTR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SHIFT NUMBER TO GET RID OF FRACTIONAL BITS</span>
<span class="number">159E 159E </span><span class="colon">: </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,h               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET SIGN</span>
<span class="number">159F 159F </span><span class="colon">: </span><span class="hex">17         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rla    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT SIGN IN CARRY SO IT WILL NOT BE CHANGED</span>
<span class="number">15A0 15A0 </span><span class="colon">: </span><span class="hex">DC 03 13   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> c,ROUNDA          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF NUMBER WAS NEGATIVE, ADD ONE</span>
<span class="number">15A3 15A3 </span><span class="colon">: </span><span class="hex">06 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,0               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FORGET THE BITS WE SHIFTED OUT</span>
<span class="number">15A5 15A5 </span><span class="colon">: </span><span class="hex">DC 1C 13   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> c,NEGR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NEGATE NUMBER IF IT WAS NEGATIVE</span>
<span class="number">15A8 15A8 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET OLD (HL) BACK</span>
<span class="number">15A9 15A9 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALL DONE</span>
<span class="comment">;;;The last comment seems to be directed to Bill Gates, most likely from Monte Davidoff,</span>
<span class="comment">;;;who wrote the floating point math routines for Altair Basic.</span>
<span class="number">15AA 15AA </span><span class="colon">: </span><span class="hex">1B         </span><span class="source">[M80] </span><span class="label">QINTA: </span><span class="mnemonic"> dec    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SUBTRACT ONE FROM C,D,E</span>
<span class="number">15AB 15AB </span><span class="colon">: </span><span class="hex">7A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,d               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WE HAVE TO SUBTRACT ONE FROM C IF</span>
<span class="number">15AC 15AC </span><span class="colon">: </span><span class="hex">A3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> and    </span> e                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment"> D AND E ARE BOTH ALL ONES</span>
<span class="number">15AD 15AD </span><span class="colon">: </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF BOTH WERE -1</span>
<span class="number">15AE 15AE </span><span class="colon">: </span><span class="hex">C0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nz                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">THEY WERE NOT, WE ARE DONE</span>
<span class="number">15AF 15AF </span><span class="colon">: </span><span class="hex">0B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">THIS IS FOR BILL.  C WILL NEVER BE ZERO</span>
<span class="number">15B0 15B0 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment"> (THE MSB WILL ALWAYS BE ONE) SO "DCX    B"</span>
<span class="number">15B1 15B1 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">                                  ;[M80] z AND "DCR       C" ARE FUNCTIONALLY EQUIVALENT</span>
<span class="number">15B1 15B1 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">GREATEST INTEGER FUNCTION         </span>
<span class="number">15B1 15B1 </span><span class="colon">: </span><span class="hex">21 E7 38   </span><span class="source">[M80] </span><span class="label">INT:   </span><span class="mnemonic"> ld     </span> hl,FAC            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET EXPONENT</span>
<span class="number">15B4 15B4 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)                   
<span class="number">15B5 15B5 </span><span class="colon">: </span><span class="hex">FE 98      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> $98               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF NUMBER HAS ANY FRACTIONAL BITS</span>
<span class="number">15B7 15B7 </span><span class="colon">: </span><span class="hex">3A E4 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(FACLO)         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE ONLY GUY WHO NEEDS THIS DOESN'T CARE ABOUT THE SIGN</span>
<span class="number">15BA 15BA </span><span class="colon">: </span><span class="hex">D0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IT DOES NOT</span>
<span class="number">15BB 15BB </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET EXPONENT BACK</span>
<span class="number">15BC 15BC </span><span class="colon">: </span><span class="hex">CD 86 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> QINT              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IT DOES, SHIFT THEM OUT</span>
<span class="number">15BF 15BF </span><span class="colon">: </span><span class="hex">36 98      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),$98          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHANGE EXPONENT SO IT WILL BE CORRECT</span>
<span class="number">15C1 15C1 </span><span class="colon">: </span><span class="hex">7B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,e               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET LO</span>
<span class="number">15C2 15C2 </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE IT</span>
<span class="number">15C3 15C3 </span><span class="colon">: </span><span class="hex">79         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,c               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NEGATE NUMBER IF IT IS NEGATIVE</span>
<span class="number">15C4 15C4 </span><span class="colon">: </span><span class="hex">17         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rla    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT SIGN IN CARRY</span>
<span class="number">15C5 15C5 </span><span class="colon">: </span><span class="hex">CD AD 12   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FADFLT            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">REFLOAT NUMBER</span>
<span class="number">15C8 15C8 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET LO BACK</span>
<span class="number">15C9 15C9 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALL DONE</span>
<span class="number">15CA 15CA </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">15CA 15CA </span><span class="colon">  </span><span class="hex">           </span><span class="source">    # </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">INTEGER ARITHMETIC ROUTINES       </span>
<span class="number">15CA 15CA </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">15CA 15CA </span><span class="colon">- </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">INTEGER MULTIPLY FOR MULTIPLY DIMENSIONED ARRAYS</span>
<span class="number">15CA 15CA </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> (DE):=(BC)*(DE)                  </span>
<span class="number">15CA 15CA </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">OVERFLOW CAUSES A BS ERROR        </span>
<span class="number">15CA 15CA </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALTERS A,B,C,D,E                  </span>
<span class="number">15CA 15CA </span><span class="colon">= </span><span class="hex">21 00 00   </span><span class="source">[M80] </span><span class="label">UMULT: </span><span class="mnemonic"> ld     </span> hl,0              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ZERO PRODUCT REGISTERS</span>
<span class="number">15CD 15CD </span><span class="colon">: </span><span class="hex">78         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHECK IF (BC) IS ZERO</span>
<span class="number">15CE 15CE </span><span class="colon">: </span><span class="hex">B1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> c                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF SO, JUST RETURN, (HL) IS ALREADY ZERO</span>
<span class="number">15CF 15CF </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">THIS IS DONE FOR SPEED</span>
<span class="number">15D0 15D0 </span><span class="colon">: </span><span class="hex">3E 10      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,16              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">THIS IS DONE FOR SPEED</span>
<span class="number">15D2 15D2 </span><span class="colon">: </span><span class="hex">29         </span><span class="source">(M80) </span><span class="label">UMULT1:</span><span class="mnemonic"> add    </span> hl,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ROTATE (HL) LEFT ONE</span>
<span class="number">15D3 15D3 </span><span class="colon">: </span><span class="hex">DA CD 11   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> c,BSERR           <span class="comment">;{M80} IF OVERFLOW, BAD SUBSCRIPT ERROR</span>
<span class="number">15D6 15D6 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">15D7 15D7 </span><span class="colon">: </span><span class="hex">29         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ROTATE (DE) LEFT ONE</span>
<span class="number">15D8 15D8 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">15D9 15D9 </span><span class="colon">: </span><span class="hex">D2 E0 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,UMULT2         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ADD IN (BC) IF HO WAS 1</span>
<span class="number">15DC 15DC </span><span class="colon">: </span><span class="hex">09         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,bc                    
<span class="number">15DD 15DD </span><span class="colon">: </span><span class="hex">DA CD 11   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> c,BSERR                  
<span class="number">15E0 15E0 </span><span class="colon">: </span><span class="hex">3D         </span><span class="source">(M80) </span><span class="label">UMULT2:</span><span class="mnemonic"> dec    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHECK FOR OVERFLOW</span>
<span class="number">15E1 15E1 </span><span class="colon">: </span><span class="hex">C2 D2 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,UMULT1         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF DONE</span>
<span class="number">15E4 15E4 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">15E5 15E5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">15E5 15E5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">FLOATING POINT INPUT ROUTINE      </span>
<span class="number">15E5 15E5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALTERS ALL REGISTERS              </span>
<span class="number">15E5 15E5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE NUMBER IS LEFT IN FAC         </span>
<span class="number">15E5 15E5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">AT ENTRY, (HL) POINTS TO THE FIRST CHARACTER IN A TEXT BUFFER.</span>
<span class="number">15E5 15E5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE FIRST CHARACTER IS ALSO IN A.  WE PACK THE DIGITS INTO THE FAC</span>
<span class="number">15E5 15E5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">AS AN INTEGER AND KEEP TRACK OF WHERE THE DECIMAL POINT IS.</span>
<span class="number">15E5 15E5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">C IS 377 IF WE HAVE NOT SEEN A DECIMAL POINT, 0 IF WE HAVE.</span>
<span class="number">15E5 15E5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">B IS THE NUMBER OF DIGITS AFTER THE DECIMAL POINT.</span>
<span class="number">15E5 15E5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">AT THE END, B AND THE EXPONENT (IN E) ARE USED TO DETERMINE HOW MANY</span>
<span class="number">15E5 15E5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">TIMES WE MULTIPLY OR DIVIDE BY TEN TO GET THE CORRECT NUMBER.</span>
<span class="number">15E5 15E5 </span><span class="colon">: </span><span class="hex">FE 2D      </span><span class="source">[M80] </span><span class="label">FIN:   </span><span class="mnemonic"> cp     </span> '-'               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF NUMBER IS NEGATIVE</span>
<span class="number">15E7 15E7 </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE SIGN</span>
<span class="number">15E8 15E8 </span><span class="colon">: </span><span class="hex">28 05      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,FIN1                   
<span class="number">15EA 15EA </span><span class="colon">: </span><span class="hex">FE 2B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> '+'               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IGNORE MINUS SIGN</span>
<span class="number">15EC 15EC </span><span class="colon">: </span><span class="hex">28 01      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,FIN1            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IGNORE A LEADING SIGN</span>
<span class="number">15EE 15EE </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET CHARACTER POINTER BACK ONE</span>
<span class="number">15EF 15EF </span><span class="colon">: </span><span class="hex">CD C3 12   </span><span class="source">(M80) </span><span class="label">FIN1:  </span><span class="mnemonic"> call   </span> ZERO              <span class="comment">;{M80} GO ZERO THE FAC</span>
<span class="number">15F2 15F2 </span><span class="colon">: </span><span class="hex">47         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,a                      
<span class="number">15F3 15F3 </span><span class="colon">: </span><span class="hex">57         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,a               <span class="comment">;;[D,E] = $0000</span>
<span class="number">15F4 15F4 </span><span class="colon">: </span><span class="hex">5F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,a                      
<span class="number">15F5 15F5 </span><span class="colon">: </span><span class="hex">2F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cpl    </span>                          
<span class="number">15F6 15F6 </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a               <span class="comment">;;[B,C] = $00FF</span>
<span class="number">15F7 15F7 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    - </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">HERE TO CHECK FOR A DIGIT, A DECIMAL POINT, "E" OR "D"</span>
<span class="number">15F7 15F7 </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">[M80] </span><span class="label">FINC:  </span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE NEXT CHARACTER OF THE NUMBER</span>
<span class="number">15F8 15F8 </span><span class="colon">: </span><span class="hex">DA 3F 16   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> c,FINDIG          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WE HAVE A DIGIT</span>
<span class="number">15FB 15FB </span><span class="colon">: </span><span class="hex">FE 2E      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> '.'               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHECK FOR A DECIMAL POINT</span>
<span class="number">15FD 15FD </span><span class="colon">: </span><span class="hex">CA 1A 16   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,FINDP           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WE HAVE ONE, I GUESS</span>
<span class="number">1600 1600 </span><span class="colon">: </span><span class="hex">FE 65      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 'e'                      
<span class="number">1602 1602 </span><span class="colon">: </span><span class="hex">CA 0A 16   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,FINC1                  
<span class="number">1605 1605 </span><span class="colon">: </span><span class="hex">FE 45      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 'E'               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHECK FOR A SINGLE PRECISION EXPONENT</span>
<span class="number">1607 1607 </span><span class="colon">: </span><span class="hex">C2 1E 16   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,FINE                  
<span class="number">160A 160A </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">(M80) </span><span class="label">FINC1: </span><span class="mnemonic"> rst    </span> CHRGET                   
<span class="number">160B 160B </span><span class="colon">: </span><span class="hex">CD 98 0A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MINPLS                   
<span class="number">160E 160E </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">(M80) </span><span class="label">FINEC: </span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE NEXT CHARATER</span>
<span class="number">160F 160F </span><span class="colon">: </span><span class="hex">DA 61 16   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> c,FINEDG          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PACK THE NEXT DIGIT INTO THE EXPONENT</span>
<span class="number">1612 1612 </span><span class="colon">: </span><span class="hex">14         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> d                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IT WAS NOT A DIGIT, PUT THE CORRECT SIGN ON</span>
<span class="number">1613 1613 </span><span class="colon">: </span><span class="hex">C2 1E 16   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,FINE           <span class="comment">;</span><span class="source">[M80] </span><span class="comment"> THE EXPONENT, IT IS POSITIVE</span>
<span class="number">1616 1616 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE EXPONENT IS NEGATIVE</span>
<span class="number">1617 1617 </span><span class="colon">: </span><span class="hex">93         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> e                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NEGATE IT</span>
<span class="number">1618 1618 </span><span class="colon">: </span><span class="hex">5F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE IT AGAIN</span>
<span class="number">1619 1619 </span><span class="colon">: </span><span class="hex">0C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> c                        
<span class="number">161A 161A </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">HERE TO SET THE DECIMAL POINT FLAG</span>
<span class="number">161A 161A </span><span class="colon">: </span><span class="hex">0C         </span><span class="source">(M80) </span><span class="label">FINDP: </span><span class="mnemonic"> inc    </span> c                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET THE FLAG</span>
<span class="number">161B 161B </span><span class="colon">: </span><span class="hex">CA F7 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,FINC            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CONTINUE LOOKING FOR DIGITS</span>
<span class="number">161E 161E </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">HERE TO FINISH UP THE NUMBER      </span>
<span class="number">161E 161E </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">(M80) </span><span class="label">FINE:  </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE TEXT POINTER</span>
<span class="number">161F 161F </span><span class="colon">: </span><span class="hex">7B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,e               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FIND OUT HOW MANY TIMES WE HAVE TO MULTIPLY</span>
<span class="number">1620 1620 </span><span class="colon">: </span><span class="hex">90         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> b                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment"> OR DIVIDE BY TEN</span>
<span class="number">1621 1621 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">HERE TO MULTIPLY OR DIVIDE BY TEN THE CORRECT NUMBER OF TIMES</span>
<span class="number">1621 1621 </span><span class="colon">: </span><span class="hex">F4 37 16   </span><span class="source">[M80] </span><span class="label">FINE2: </span><span class="mnemonic"> call   </span> p,FINMUL          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MULTIPLY IF WE HAVE TO</span>
<span class="number">1624 1624 </span><span class="colon">: </span><span class="hex">F2 2D 16   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> p,FINE3                  
<span class="number">1627 1627 </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                       
<span class="number">1628 1628 </span><span class="colon">: </span><span class="hex">CD 21 14   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> DIV10             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DIVIDE IF WE HAVE TO</span>
<span class="number">162B 162B </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE SIGN</span>
<span class="number">162C 162C </span><span class="colon">: </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a                        
<span class="number">162D 162D </span><span class="colon">: </span><span class="hex">C2 21 16   </span><span class="source">(~~~) </span><span class="label">FINE3: </span><span class="mnemonic"> jp     </span> nz,FINE2          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MULTIPLY OR DIVIDE AGAIN IF WE ARE NOT DONE</span>
<span class="number">1630 1630 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">HERE TO PUT THE CORRECT SIGN ON THE NUMBER</span>
<span class="number">1630 1630 </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE TEXT POINTER</span>
<span class="number">1631 1631 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE SIGN</span>
<span class="number">1632 1632 </span><span class="colon">: </span><span class="hex">CC 0B 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> z,NEG             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NEGATE IF NECESSARY</span>
<span class="number">1635 1635 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE TEXT POINTER IN (HL)</span>
<span class="number">1636 1636 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">1637 1637 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1637 1637 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THIS SUBROUTINE MULIPLIES BY TEN ONCE.</span>
<span class="number">1637 1637 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IT IS A SUBROUTINE BECAUSE IT SAVES BYTES WHEN WE CHECK IF A IS ZERO</span>
<span class="number">1637 1637 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALTERS ALL REGISTERS              </span>
<span class="number">1637 1637 </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">[M80] </span><span class="label">FINMUL:</span><span class="mnemonic"> ret    </span> z                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RETURN IF EXPONENT IS ZERO, ENTRY FROM FOUT</span>
<span class="number">1638 1638 </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">[M80] </span><span class="label">FINMLT:</span><span class="mnemonic"> push   </span> af                       
<span class="number">1639 1639 </span><span class="colon">: </span><span class="hex">CD D4 14   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MUL10             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MULTIPLY BY 10.0</span>
<span class="number">163C 163C </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                       
<span class="number">163D 163D </span><span class="colon">: </span><span class="hex">3D         </span><span class="source">{M80} </span><span class="label">DCRART:</span><span class="mnemonic"> dec    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DECREASE IT</span>
<span class="number">163E 163E </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALL DONE</span>
<span class="number">163F 163F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">163F 163F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">HERE TO PACK THE NEXT DIGIT OF THE NUMBER INTO THE FAC</span>
<span class="number">163F 163F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">WE MULTIPLY THE FAC BY TEN AND ADD IN THE NEXT DIGIT</span>
<span class="number">163F 163F </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">[M80] </span><span class="label">FINDIG:</span><span class="mnemonic"> push   </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE EXPONENT INFORMATION</span>
<span class="number">1640 1640 </span><span class="colon">: </span><span class="hex">57         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">INCREMENT DECIMAL PLACE COUNT IF WE ARE</span>
<span class="number">1641 1641 </span><span class="colon">: </span><span class="hex">78         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment"> PAST THE DECIMAL POINT</span>
<span class="number">1642 1642 </span><span class="colon">: </span><span class="hex">89         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> adc    </span> a,c               <span class="comment">;      </span>
<span class="number">1643 1643 </span><span class="colon">: </span><span class="hex">47         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,a               <span class="comment">;      </span>
<span class="number">1644 1644 </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE DECIMAL POINT INFORMATION</span>
<span class="number">1645 1645 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE TEXT POINTER</span>
<span class="number">1646 1646 </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;      </span>
<span class="number">1647 1647 </span><span class="colon">: </span><span class="hex">CD D4 14   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MUL10             <span class="comment">;      </span>
<span class="number">164A 164A </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE DIGIT</span>
<span class="number">164B 164B </span><span class="colon">: </span><span class="hex">D6 30      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> '0'               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CONVERT IT TO ASCII</span>
<span class="number">164D 164D </span><span class="colon">: </span><span class="hex">CD 56 16   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FINLOG            <span class="comment">;</span><span class="source">[M65] </span><span class="comment">ADD IT IN</span>
<span class="number">1650 1650 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;      </span>
<span class="number">1651 1651 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;      </span>
<span class="number">1652 1652 </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;      </span>
<span class="number">1653 1653 </span><span class="colon">: </span><span class="hex">C3 F7 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> FINC              <span class="comment">;      </span>
<span class="number">1656 1656 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1656 1656 </span><span class="colon">: </span><span class="hex">CD 13 15   </span><span class="source">[M65] </span><span class="label">FINLOG:</span><span class="mnemonic"> call   </span> PUSHF             <span class="comment">;</span><span class="source">[M65] </span><span class="comment">SAVE FAC FOR LATER</span>
<span class="number">1659 1659 </span><span class="colon">: </span><span class="hex">CD F6 14   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FLOAT             <span class="comment">;</span><span class="source">[M65] </span><span class="comment">FLOAT THE VALUE IN ACCA</span>
<span class="number">165C 165C </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">[M80] </span><span class="label">FADDT: </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET ARG IN REGISTERS, ENTRY TO FADD IF</span>
<span class="number">165D 165D </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment"> ARGUMENT IS ON STACK.  JUMP TO FADD</span>
<span class="number">165E 165E </span><span class="colon">: </span><span class="hex">C3 61 12   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> FADD              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ADD IT IN</span>
<span class="number">1661 1661 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1661 1661 </span><span class="colon">: </span><span class="hex">7B         </span><span class="source">[M80] </span><span class="label">FINEDG:</span><span class="mnemonic"> ld     </span> a,e               <span class="comment">;EXPONENT DIGIT -- MULTIPLY EXPONENT BY 10</span>
<span class="number">1662 1662 </span><span class="colon">: </span><span class="hex">07         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rlca   </span>                   <span class="comment">;FIRST BY 4</span>
<span class="number">1663 1663 </span><span class="colon">: </span><span class="hex">07         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rlca   </span>                          
<span class="number">1664 1664 </span><span class="colon">: </span><span class="hex">83         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,e               <span class="comment">;ADD 1 TO MAKE 5</span>
<span class="number">1665 1665 </span><span class="colon">: </span><span class="hex">07         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rlca   </span>                   <span class="comment">;NOW DOUBLE TO GET 10</span>
<span class="number">1666 1666 </span><span class="colon">: </span><span class="hex">86         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,(hl)            <span class="comment">;ADD IT IN</span>
<span class="number">1667 1667 </span><span class="colon">: </span><span class="hex">D6 30      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> '0'               <span class="comment">;SUBTRACT OFF ASCII CODE</span>
<span class="number">1669 1669 </span><span class="colon">: </span><span class="hex">5F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,a               <span class="comment">;STORE EXPONENT</span>
<span class="number">166A 166A </span><span class="colon">: </span><span class="hex">C3 0E 16   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> FINEC                    
<span class="number">166D 166D </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">166D 166D </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">FLOATING POINT OUTPUT ROUTINE     </span>
<span class="number">166D 166D </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">[M80] </span><span class="label">INPRT: </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ENTRY TO LINPRT</span>
<span class="number">166E 166E </span><span class="colon">: </span><span class="hex">21 69 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,INTXT          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE LINE NUMBER</span>
<span class="number">1671 1671 </span><span class="colon">: </span><span class="hex">CD 9D 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> STROUT            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PRINT MESSAGE</span>
<span class="number">1674 1674 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">1675 1675 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1675 1675 </span><span class="colon">- </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">PRINT THE 2 BYTE NUMBER IN H,L    </span>
<span class="number">1675 1675 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALTERS ALL REGISTERS              </span>
<span class="number">1675 1675 </span><span class="colon">= </span><span class="hex">11 9C 0E   </span><span class="source">[M80] </span><span class="label">LINPRT:</span><span class="mnemonic"> ld     </span> de,STROUI                
<span class="number">1678 1678 </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                       
<span class="number">1679 1679 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;; Convert Unsigned Word in [HL] to String</span>
<span class="number">1679 1679 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">{M80} </span><span class="label">LINOUT:</span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">167A 167A </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                        
<span class="number">167B 167B </span><span class="colon">: </span><span class="hex">06 98      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,$98                    
<span class="number">167D 167D </span><span class="colon">: </span><span class="hex">CD FB 14   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FLOATR                   
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">FLOATING OUTPUT OF FAC            </span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ALTERS ALL REGISTERS              </span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE ORIGINAL CONTENTS OF THE FAC IS LOST</span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       OUTPUT THE VALUE IN THE FAC ACCORDING TO THE FORMAT SPECIFICATIONS</span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       IN A,B,C                   </span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       ALL REGISTERS ARE ALTERED  </span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       THE ORIGINAL CONTENTS OF THE FAC IS LOST</span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       THE FORMAT IS SPECIFIED IN A, B AND C AS FOLLOWS:</span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       THE BITS OF A MEAN THE FOLLOWING:</span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">BIT 7  0 MEANS FREE FORMAT OUTPUT, I.E. THE OTHER BITS OF A MUST BE ZERO,</span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       TRAILING ZEROS ARE SUPPRESSED, A NUMBER IS PRINTED IN FIXED OR FLOATING</span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       POINT NOTATION ACCORDING TO ITS MAGNITUDE, THE NUMBER IS LEFT</span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       JUSTIFIED IN ITS FIELD, B AND C ARE IGNORED.</span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       1 MEANS FIXED FORMAT OUTPUT, I.E. THE OTHER BITS OF A ARE CHECKED FOR</span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       FORMATTING INFORMATION, THE NUMBER IS RIGHT JUSTIFIED IN ITS FIELD,</span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       TRAILING ZEROS ARE NOT SUPPRESSED.  THIS IS USED FOR PRINT USING.</span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">BIT 6  1 MEANS GROUP THE DIGITS IN THE INTEGER PART OF THE NUMBER INTO GROUPS</span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       OF THREE AND SEPARATE THE GROUPS BY COMMAS</span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       0 MEANS DON'T PRINT THE NUMBER WITH COMMAS</span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">BIT 5  1 MEANS FILL THE LEADING SPACES IN THE FIELD WITH ASTERISKS ("*")</span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">BIT 4  1 MEANS OUTPUT THE NUMBER WITH A FLOATING DOLLAR SIGN ("$")</span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">BIT 3  1 MEANS PRINT THE SIGN OF A POSITIVE NUMBER AS A PLUS SIGN ("+")</span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       INSTEAD OF A SPACE         </span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">BIT 2  1 MEANS PRINT THE SIGN OF THE NUMBER AFTER THE NUMBER</span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">BIT 1  UNUSED                     </span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">BIT 0  1 MEANS PRINT THE NUMBER IN FLOATING POINT NOTATION I.E. "E NOTATION"</span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       IF THIS BIT IS ON, THE COMMA SPECIFICATION (BIT 6) IS IGNORED.</span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       0 MEANS PRINT THE NUMBER IN FIXED POINT NOTATION.  NUMBERS .GE. 1E16</span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       CANNOT BE PRINTED IN FIXED POINT NOTATION.</span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       B AND C TELL HOW BIG THE FIELD IS:</span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">B   =  THE NUMBER OF PLACES IN THE FIELD TO THE LEFT OF THE DECIMAL POINT</span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       (B DOES NOT INCLUDE THE DECIMAL POINT)</span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">C   =  THE NUMBER OF PLACES IN THE FIELD TO THE RIGHT OF THE DECIMAL POINT</span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       (C INCLUDES THE DECIMAL POINT)</span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       B AND C DO NOT INCLUDE THE 4 POSITIONS FOR THE EXPONENT IF BIT 0 IS ON</span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       FOUT ASSUMES B+C .LE. 24 (DECIMAL)</span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       IF THE NUMBER IS TOO BIG TO FIT IN THE FIELD, A PERCENT SIGN ("%") IS</span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       PRINTED AND THE FIELD IS EXTENDED TO HOLD THE NUMBER.</span>
<span class="number">1680 1680 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">1680 1680 </span><span class="colon">: </span><span class="hex">21 E9 38   </span><span class="source">[M80] </span><span class="label">FOUT:  </span><span class="mnemonic"> ld     </span> hl,FBUFFR+1       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET A POINTER INTO FBUFFR</span>
<span class="number">1683 1683 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;{M80} SAVE IT</span>
<span class="number">1684 1684 </span><span class="colon">: </span><span class="hex">EF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> FSIGN                    
<span class="number">1685 1685 </span><span class="colon">: </span><span class="hex">36 20      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),' '          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT A SPACE FOR POSITIVE NUMBERS IN THE BUFFER</span>
<span class="number">1687 1687 </span><span class="colon">: </span><span class="hex">F2 8C 16   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> p,FOUT2           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF WE HAVE A NEGATIVE NUMBER, NEGATE IT</span>
<span class="number">168A 168A </span><span class="colon">: </span><span class="hex">36 2D      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),'-'          <span class="comment">;</span><span class="source">[M80] </span><span class="comment"> AND PUT A MINUS SIGN IN THE BUFFER</span>
<span class="number">168C 168C </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">FOUT2: </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINT TO WHERE THE NEXT CHARACTER GOES</span>
<span class="number">168D 168D </span><span class="colon">: </span><span class="hex">36 30      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),'0'          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT A ZERO IN THE BUFFER IN CASE THE NUMBER IS ZERO</span>
<span class="number">168F 168F </span><span class="colon">: </span><span class="hex">CA 42 17   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,FOUTZR          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF THE NUMBER IS ZERO, FINISH IT UP</span>
<span class="number">1692 1692 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE BUFFER POINTER</span>
<span class="number">1693 1693 </span><span class="colon">: </span><span class="hex">FC 0B 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> m,NEG             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NEGATE THE NUMBER</span>
<span class="number">1696 1696 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ZERO THE EXPONENT</span>
<span class="number">1697 1697 </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE IT</span>
<span class="number">1698 1698 </span><span class="colon">: </span><span class="hex">CD 48 17   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FOUNVC            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS THE FAC TOO BIG OR TOO SMALL?</span>
<span class="number">169B 169B </span><span class="colon">: </span><span class="hex">01 43 91   </span><span class="source">[M80] </span><span class="label">FOUNV1:</span><span class="mnemonic"> ld     </span> bc,$9143          <span class="comment">;      </span>
<span class="number">169E 169E </span><span class="colon">: </span><span class="hex">11 F8 4F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,$4FF8          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET 99999.95 TO SEE IF THE FAC IS BIG</span>
<span class="number">16A1 16A1 </span><span class="colon">: </span><span class="hex">CD 5B 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FCOMP             <span class="comment">;</span><span class="source">[M80] </span><span class="comment"> ENOUGH YET</span>
<span class="number">16A4 16A4 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GO DO THE CHECK</span>
<span class="number">16A5 16A5 </span><span class="colon">: </span><span class="hex">E2 B9 16   </span><span class="source">{M80} </span><span class="label">FOUNV5:</span><span class="mnemonic"> jp     </span> po,FOUTCS         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IT ISN'T ANY MORE, WE ARE DONE</span>
<span class="number">16A8 16A8 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IT IS, MULTIPLY BY TEN</span>
<span class="number">16A9 16A9 </span><span class="colon">: </span><span class="hex">CD 38 16   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FINMLT            <span class="comment">;      </span>
<span class="number">16AC 16AC </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE EXPONENT AGAIN</span>
<span class="number">16AD 16AD </span><span class="colon">: </span><span class="hex">C3 9B 16   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> FOUNV1            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NOW SEE IF IT IS BIG ENOUGH</span>
<span class="number">16B0 16B0 </span><span class="colon">: </span><span class="hex">CD 21 14   </span><span class="source">(M80) </span><span class="label">FOUNV2:</span><span class="mnemonic"> call   </span> DIV10             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE FAC IS TOO BIG, DIVIDE IT BY TEN</span>
<span class="number">16B3 16B3 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;      </span>
<span class="number">16B4 16B4 </span><span class="colon">: </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a                 <span class="comment">;      </span>
<span class="number">16B5 16B5 </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;      </span>
<span class="number">16B6 16B6 </span><span class="colon">: </span><span class="hex">CD 48 17   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FOUNVC            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF THE FAC IS SMALL ENOUGH</span>
<span class="number">16B9 16B9 </span><span class="colon">: </span><span class="hex">CD 50 12   </span><span class="source">(M80) </span><span class="label">FOUTCS:</span><span class="mnemonic"> call   </span> FADDH             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ROUND NUMBER TO NEAREST INTEGER</span>
<span class="number">16BC 16BC </span><span class="colon">: </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE A NON-ZERO, SINCE NUMBER IS POSITIVE AND NON-ZERO</span>
<span class="number">16BD 16BD </span><span class="colon">: </span><span class="hex">CD 86 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> QINT              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET INTEGER PART IN C,D,E</span>
<span class="number">16C0 16C0 </span><span class="colon">: </span><span class="hex">CD 23 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVFR             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE NUMBER IN FAC</span>
<span class="number">16C3 16C3 </span><span class="colon">: </span><span class="hex">01 06 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> bc,$0306          <span class="comment">;;[B] = 3, [C] = 6</span>
<span class="number">16C6 16C6 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;      </span>
<span class="number">16C7 16C7 </span><span class="colon">: </span><span class="hex">81         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,c               <span class="comment">;      </span>
<span class="number">16C8 16C8 </span><span class="colon">: </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a                 <span class="comment">;      </span>
<span class="number">16C9 16C9 </span><span class="colon">: </span><span class="hex">FA D5 16   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> m,FOUCDC          <span class="comment">;      </span>
<span class="number">16CC 16CC </span><span class="colon">: </span><span class="hex">FE 08      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 8                 <span class="comment">;      </span>
<span class="number">16CE 16CE </span><span class="colon">: </span><span class="hex">D2 D5 16   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,FOUCDC         <span class="comment">;      </span>
<span class="number">16D1 16D1 </span><span class="colon">: </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a                 <span class="comment">;      </span>
<span class="number">16D2 16D2 </span><span class="colon">: </span><span class="hex">47         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,a               <span class="comment">;      </span>
<span class="number">16D3 16D3 </span><span class="colon">: </span><span class="hex">3E 02      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,2               <span class="comment">;      </span>
<span class="number">16D5 16D5 </span><span class="colon">: </span><span class="hex">3D         </span><span class="source">(M80) </span><span class="label">FOUCDC:</span><span class="mnemonic"> dec    </span> a                 <span class="comment">;      </span>
<span class="number">16D6 16D6 </span><span class="colon">: </span><span class="hex">3D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> a                 <span class="comment">;      </span>
<span class="number">16D7 16D7 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE BUFFER POINTER BACK</span>
<span class="number">16D8 16D8 </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;      </span>
<span class="number">16D9 16D9 </span><span class="colon">: </span><span class="hex">11 5E 17   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,FOSTBL         <span class="comment">;      </span>
<span class="number">16DC 16DC </span><span class="colon">: </span><span class="hex">05         </span><span class="source">{M80} </span><span class="label">FOUTAN:</span><span class="mnemonic"> dec    </span> b                 <span class="comment">;      </span>
<span class="number">16DD 16DD </span><span class="colon">: </span><span class="hex">C2 E6 16   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,FOUTED         <span class="comment">;      </span>
<span class="number">16E0 16E0 </span><span class="colon">: </span><span class="hex">36 2E      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),'.'          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT IN D.P.</span>
<span class="number">16E2 16E2 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINT TO NEXT BUFFER POSTION</span>
<span class="number">16E3 16E3 </span><span class="colon">: </span><span class="hex">36 30      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),'0'          <span class="comment">;      </span>
<span class="number">16E5 16E5 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">16E6 16E6 </span><span class="colon">: </span><span class="hex">05         </span><span class="source">(M80) </span><span class="label">FOUTED:</span><span class="mnemonic"> dec    </span> b                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ENTRY TO PUT A DECIMAL POINT IN THE BUFFER</span>
<span class="number">16E7 16E7 </span><span class="colon">: </span><span class="hex">36 2E      </span><span class="source">{M80} </span><span class="label">FOUTDP:</span><span class="mnemonic"> ld     </span> (hl),'.'          <span class="comment">;{M80} PUT THE DECIMAL POINT IN</span>
<span class="number">16E9 16E9 </span><span class="colon">: </span><span class="hex">CC 38 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> z,INXHRT          <span class="comment">;      </span>
<span class="number">16EC 16EC </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">{M80} </span><span class="label">FOUTCV:</span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80[ </span><span class="comment">SAVE THE DECIMAL POINT AND COMMA COUNTS</span>
<span class="number">16ED 16ED </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80[ </span><span class="comment">SAVE THE BUFFER POINTER</span>
<span class="number">16EE 16EE </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;</span><span class="source">[M80[ </span><span class="comment">SAVE (DE)</span>
<span class="number">16EF 16EF </span><span class="colon">: </span><span class="hex">CD 2E 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVRF             <span class="comment">;{M80} GET NUMBER IN THE REGISTERS</span>
<span class="number">16F2 16F2 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE BUFFER POINTER BACK</span>
<span class="number">16F3 16F3 </span><span class="colon">: </span><span class="hex">06 2F      </span><span class="source">{M80} </span><span class="label">FOUCD1:</span><span class="mnemonic"> ld     </span> b,'0'-1           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET UP THE COUNT FOR THE DIGIT</span>
<span class="number">16F5 16F5 </span><span class="colon">: </span><span class="hex">04         </span><span class="source">(M80) </span><span class="label">FOUCD2:</span><span class="mnemonic"> inc    </span> b                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">INCREMENT THE DIGIT COUNT</span>
<span class="number">16F6 16F6 </span><span class="colon">: </span><span class="hex">7B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,e               <span class="comment">;{M80} SUBTRACT THE TWO NUMBERS</span>
<span class="number">16F7 16F7 </span><span class="colon">: </span><span class="hex">96         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> (hl)              <span class="comment">;;Subtract LO</span>
<span class="number">16F8 16F8 </span><span class="colon">: </span><span class="hex">5F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,a               <span class="comment">;      </span>
<span class="number">16F9 16F9 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">16FA 16FA </span><span class="colon">: </span><span class="hex">7A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,d               <span class="comment">;      </span>
<span class="number">16FB 16FB </span><span class="colon">: </span><span class="hex">9E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sbc    </span> a,(hl)            <span class="comment">;;Subtract MO</span>
<span class="number">16FC 16FC </span><span class="colon">: </span><span class="hex">57         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,a               <span class="comment">;      </span>
<span class="number">16FD 16FD </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">16FE 16FE </span><span class="colon">: </span><span class="hex">79         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,c               <span class="comment">;      </span>
<span class="number">16FF 16FF </span><span class="colon">: </span><span class="hex">9E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sbc    </span> a,(hl)            <span class="comment">;;Subtract HO</span>
<span class="number">1700 1700 </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a               <span class="comment">;      </span>
<span class="number">1701 1701 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;      </span>
<span class="number">1702 1702 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;;Backup Pointer</span>
<span class="number">1703 1703 </span><span class="colon">: </span><span class="hex">D2 F5 16   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,FOUCD2         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF NOT LESS THAN THE POWER OF TEN, SUBTRACT AGAIN</span>
<span class="number">1706 1706 </span><span class="colon">: </span><span class="hex">CD 10 13   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FADDA             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ADD THE TWO NUMBERS</span>
<span class="number">1709 1709 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">170A 170A </span><span class="colon">: </span><span class="hex">CD 23 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVFR             <span class="comment">;{M80} PUT REGISTERS IN THE FAC</span>
<span class="number">170D 170D </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT THE POWER OF TEN POINTER IN (DE).</span>
<span class="number">170E 170E </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE BUFFER POINTER BACK</span>
<span class="number">170F 170F </span><span class="colon">: </span><span class="hex">70         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),b            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT THE DIGIT INTO THE BUFFER</span>
<span class="number">1710 1710 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">INCREMENT THE BUFFER POINTER</span>
<span class="number">1711 1711 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE DECIMAL POINT AND COMMA COUNTS</span>
<span class="number">1712 1712 </span><span class="colon">: </span><span class="hex">0D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> c                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">HAVE WE PRINTED THE LAST DIGIT?</span>
<span class="number">1713 1713 </span><span class="colon">: </span><span class="hex">C2 E6 16   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,FOUTED         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NO, GO DO THE NEXT ONE</span>
<span class="number">1716 1716 </span><span class="colon">: </span><span class="hex">05         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> b                 <span class="comment">;      </span>
<span class="number">1717 1717 </span><span class="colon">: </span><span class="hex">CA 26 17   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,FOFLDN          <span class="comment">;      </span>
<span class="number">171A 171A </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">(M80) </span><span class="label">FOFRS2:</span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MOVE BACK TO THE LAST CHARACTER</span>
<span class="number">171B 171B </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET IT AND SEE IF IT WAS ZERO</span>
<span class="number">171C 171C </span><span class="colon">: </span><span class="hex">FE 30      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> '0'               <span class="comment">;      </span>
<span class="number">171E 171E </span><span class="colon">: </span><span class="hex">CA 1A 17   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,FOFRS2          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IT WAS, CONTINUE SUPPRESSING</span>
<span class="number">1721 1721 </span><span class="colon">: </span><span class="hex">FE 2E      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> '.'               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">HAVE WE SUPPRESSED ALL THE FRACTIONAL DIGITS?</span>
<span class="number">1723 1723 </span><span class="colon">: </span><span class="hex">C4 38 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> nz,INXHRT         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">YES, IGNORE THE DECIMAL POINT ALSO</span>
<span class="number">1726 1726 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">(M80) </span><span class="label">FOFLDN:</span><span class="mnemonic"> pop    </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE EXPONENT BACK</span>
<span class="number">1727 1727 </span><span class="colon">: </span><span class="hex">CA 45 17   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,FOUTDN          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WE ARE DONE IF WE ARE IN FIXED POINT NOTATION</span>
<span class="number">172A 172A </span><span class="colon">: </span><span class="hex">36 45      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),'E'          <span class="comment">;      </span>
<span class="number">172C 172C </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">172D 172D </span><span class="colon">: </span><span class="hex">36 2B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),'+'          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">A PLUS IF POSITIVE</span>
<span class="number">172F 172F </span><span class="colon">: </span><span class="hex">F2 36 17   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> p,FOUCE1          <span class="comment">;      </span>
<span class="number">1732 1732 </span><span class="colon">: </span><span class="hex">36 2D      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),'-'          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">A MINUS IF NEGATIVE</span>
<span class="number">1734 1734 </span><span class="colon">: </span><span class="hex">2F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cpl    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NEGATE EXPONENT</span>
<span class="number">1735 1735 </span><span class="colon">: </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a                 <span class="comment">;      </span>
<span class="number">1736 1736 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">CALCULATE THE TWO DIGIT EXPONENT  </span>
<span class="number">1736 1736 </span><span class="colon">: </span><span class="hex">06 2F      </span><span class="source">(M80) </span><span class="label">FOUCE1:</span><span class="mnemonic"> ld     </span> b,'0'-1           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">INITIALIZE TEN'S DIGIT COUNT</span>
<span class="number">1738 1738 </span><span class="colon">: </span><span class="hex">04         </span><span class="source">(M80) </span><span class="label">FOUCE2:</span><span class="mnemonic"> inc    </span> b                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">INCREMENT DIGIT</span>
<span class="number">1739 1739 </span><span class="colon">: </span><span class="hex">D6 0A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> 10                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SUBTRACT TEN</span>
<span class="number">173B 173B </span><span class="colon">: </span><span class="hex">D2 38 17   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,FOUCE2         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DO IT AGAIN IF RESULT WAS POSITIVE</span>
<span class="number">173E 173E </span><span class="colon">: </span><span class="hex">C6 3A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,'0'+10          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ADD BACK IN TEN AND CONVERT TO ASCII</span>
<span class="number">1740 1740 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT THE EXPONENT IN THE BUFFER</span>
<span class="number">1741 1741 </span><span class="colon">: </span><span class="hex">70         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),b            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT TEN'S DIGIT OF EXPONENT IN BUFFER</span>
<span class="number">1742 1742 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">(M80) </span><span class="label">FOUTZR:</span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WHEN WE JUMP TO HERE, A IS ZERO</span>
<span class="number">1743 1743 </span><span class="colon">: </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT ONE'S DIGIT IN BUFFER</span>
<span class="number">1744 1744 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">INCREMENT POINTER</span>
<span class="number">1745 1745 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;HERE TO FINISH UP PRINTING A FREE FORMAT ZERO</span>
<span class="number">1745 1745 </span><span class="colon">: </span><span class="hex">71         </span><span class="source">(M80) </span><span class="label">FOUTDN:</span><span class="mnemonic"> ld     </span> (hl),c            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT A ZERO AT THE END OF THE NUMBER</span>
<span class="number">1746 1746 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;      </span>
<span class="number">1747 1747 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">1748 1748 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1748 1748 </span><span class="colon">: </span><span class="hex">01 74 94   </span><span class="source">[M80] </span><span class="label">FOUNVC:</span><span class="mnemonic"> ld     </span> bc,$9474          <span class="comment">;      </span>
<span class="number">174B 174B </span><span class="colon">: </span><span class="hex">11 F7 23   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,$23F7          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET 999999.5 TO SEE IF THE FAC IS TOO BIG</span>
<span class="number">174E 174E </span><span class="colon">: </span><span class="hex">CD 5B 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FCOMP             <span class="comment">;      </span>
<span class="number">1751 1751 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;      </span>
<span class="number">1752 1752 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">{M80} </span><span class="label">FONVC2:</span><span class="mnemonic"> pop    </span> hl                <span class="comment">;      </span>
<span class="number">1753 1753 </span><span class="colon">: </span><span class="hex">E2 B0 16   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> po,FOUNV2         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GO DO THE CHECK</span>
<span class="number">1756 1756 </span><span class="colon">: </span><span class="hex">E9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> (hl)              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IT ISN'T TOO BIG, JUST RETURN</span>
<span class="number">1757 1757 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1757 1757 </span><span class="colon">: </span><span class="hex">00 00 00 80</span><span class="source">      </span><span class="label">FHALF: </span><span class="mnemonic"> byte   </span> $00,$00,$00,$80   <span class="comment">;</span><span class="source">[M65] </span><span class="comment">1/2</span>
<span class="number">175B 175B </span><span class="colon">: </span><span class="hex">40         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,b               <span class="comment">;;Orphan Code or Remnants of Unused Constant?</span>
<span class="number">175C 175C </span><span class="colon">: </span><span class="hex">42         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,d                      
<span class="number">175D 175D </span><span class="colon">: </span><span class="hex">0F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rrca   </span>                          
<span class="number">175E 175E </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">175E 175E </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">SINGLE PRECISION POWER OF TEN TABLE</span>
<span class="number">175E 175E </span><span class="colon">: </span><span class="hex">A0 86 01   </span><span class="source">[M80] </span><span class="label">FOSTBL:</span><span class="mnemonic"> byte   </span> $A0,$86,$01       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">1E5</span>
<span class="number">1761 1761 </span><span class="colon">: </span><span class="hex">10 27 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $10,$27,$00       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">1E4</span>
<span class="number">1764 1764 </span><span class="colon">: </span><span class="hex">E8 03 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $E8,$03,$00       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">1000</span>
<span class="number">1767 1767 </span><span class="colon">: </span><span class="hex">64 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $64,$00,$00       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">100</span>
<span class="number">176A 176A </span><span class="colon">: </span><span class="hex">0A 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $0A,$00,$00       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">10</span>
<span class="number">176E 176E </span><span class="colon">: </span><span class="hex">01 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $01,$00,$00       <span class="comment">;</span><span class="source">[M80] </span><span class="comment">1</span>
<span class="number">1770 1770 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1770 1770 </span><span class="colon">- </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Push Address of NEG Routine on to Stack</span>
<span class="number">1770 1770 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">SUBROUTINE FOR FPWR, ATN          </span>
<span class="number">1770 1770 </span><span class="colon">= </span><span class="hex">21 0B 15   </span><span class="source">      </span><span class="label">PSHNEG:</span><span class="mnemonic"> ld     </span> hl,NEG            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE ADDRESS OF NEG</span>
<span class="number">1773 1773 </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SWITCH RET ADDR AND ADDR OF NEG</span>
<span class="number">1774 1774 </span><span class="colon">: </span><span class="hex">E9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> (hl)              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RETURN, THE ADDRESS OF NEG IS ON THE STACK</span>
<span class="number">1775 1775 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1775 1775 </span><span class="colon">: </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">SQUARE ROOT FUNCTION: WE USE SQR(X)=X^.5</span>
<span class="number">1775 1775 </span><span class="colon">: </span><span class="hex">CD 13 15   </span><span class="source">[M80] </span><span class="label">SQR:   </span><span class="mnemonic"> call   </span> PUSHF             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE ARG X</span>
<span class="number">1778 1778 </span><span class="colon">: </span><span class="hex">21 57 17   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,FHALF          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET 1/2</span>
<span class="number">177B 177B </span><span class="colon">: </span><span class="hex">CD 20 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVFM             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SQR(X)=X^.5</span>
<span class="number">177E 177E </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">177E 177E </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">[M80] </span><span class="label">FPWRT: </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET ARG IN REGISTERS, ENTRY TO FPWR IF</span>
<span class="number">177F 177F </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment"> ARGUMENT IS ON STACK.  FALL INTO FPWR</span>
<span class="number">1780 1780 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1780 1780 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">EXPONENTIATION    ---    X^Y      </span>
<span class="number">1780 1780 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">N.B.  0^0=1                       </span>
<span class="number">1780 1780 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">FIRST WE CHECK IF Y=0, IF SO, THE RESULT IS 1.</span>
<span class="number">1780 1780 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">NEXT, WE CHECK IF X=0, IF SO, THE RESULT IS 0.</span>
<span class="number">1780 1780 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THEN WE CHECK IF X IS POSITIVE, IF NOT, WE CHECK THAT Y IS A</span>
<span class="number">1780 1780 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">NEGATIVE INTEGER, AND WHETHER IT IS EVEN OR ODD.  IF Y IS A NEGATIVE</span>
<span class="number">1780 1780 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">INTEGER, WE NEGATE X.  IF NOT, LOG WILL GIVE AN FC ERROR WHEN WE CALL</span>
<span class="number">1780 1780 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IT.  IF X IS NEGATIVE AND Y IS ODD, WE PUSH THE ADDRESS OF NEG ON THE</span>
<span class="number">1780 1780 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">STACK SO WE WILL RETURN TO IT AND GET A NEGATIVE RESULT.  TO COMPUTE</span>
<span class="number">1780 1780 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE RESULT WE USE X^Y=EXP(Y*LOG(X))</span>
<span class="number">1780 1780 </span><span class="colon">: </span><span class="hex">EF         </span><span class="source">[M80] </span><span class="label">FPWR:  </span><span class="mnemonic"> rst    </span> FSIGN             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF Y IS ZERO</span>
<span class="number">1781 1781 </span><span class="colon">: </span><span class="hex">78         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,b               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF X IS ZERO</span>
<span class="number">1782 1782 </span><span class="colon">: </span><span class="hex">CA CD 17   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,EXP             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IT IS, RESULT IS ONE</span>
<span class="number">1785 1785 </span><span class="colon">: </span><span class="hex">F2 8C 17   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> p,POSEXP          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POSITIVE EXPONENT</span>
<span class="number">1788 1788 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS IT ZERO TO MINUS POWER?</span>
<span class="number">1789 1789 </span><span class="colon">: </span><span class="hex">CA C7 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,DV0ERR          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GIVE DIV BY ZERO AND CONTINUE</span>
<span class="number">178C 178C </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">[M80] </span><span class="label">POSEXP:</span><span class="mnemonic"> or     </span> a                 <span class="comment">;      </span>
<span class="number">178D 178D </span><span class="colon">: </span><span class="hex">CA C4 12   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,ZERO0           <span class="comment">;</span><span class="source">[M80]I</span><span class="comment">T IS, RESULT IS ZERO</span>
<span class="number">1790 1790 </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE X ON STACK</span>
<span class="number">1791 1791 </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;      </span>
<span class="number">1792 1792 </span><span class="colon">: </span><span class="hex">79         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,c               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHECK THE SIGN OF X</span>
<span class="number">1793 1793 </span><span class="colon">: </span><span class="hex">F6 7F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> $7F               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TURN THE ZERO FLAG OFF</span>
<span class="number">1795 1795 </span><span class="colon">: </span><span class="hex">CD 2E 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVRF             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET Y IN THE REGISTERS</span>
<span class="number">1798 1798 </span><span class="colon">: </span><span class="hex">F2 B5 17   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> p,FPWR1           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NO PROBLEMS IF X IS POSITIVE</span>
<span class="number">179B 179B </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;      </span>
<span class="number">179C 179C </span><span class="colon">: </span><span class="hex">3A E7 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(FAC)           <span class="comment">;      </span>
<span class="number">179F 179F </span><span class="colon">: </span><span class="hex">FE 99      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> $99               <span class="comment">;      </span>
<span class="number">17A1 17A1 </span><span class="colon">: </span><span class="hex">38 03      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,FPWRT1          <span class="comment">;      </span>
<span class="number">17A3 17A3 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;      </span>
<span class="number">17A4 17A4 </span><span class="colon">: </span><span class="hex">18 0F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> FPWR1             <span class="comment">;      </span>
<span class="number">17A6 17A6 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">(M65) </span><span class="label">FPWRT1:</span><span class="mnemonic"> pop    </span> af                <span class="comment">;      </span>
<span class="number">17A7 17A7 </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;      </span>
<span class="number">17A8 17A8 </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE Y</span>
<span class="number">17A9 17A9 </span><span class="colon">: </span><span class="hex">CD B1 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> INT               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF Y IS AN INTEGER</span>
<span class="number">17AC 17AC </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;      </span>
<span class="number">17AD 17AD </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET Y BACK</span>
<span class="number">17AE 17AE </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE LO OF INT FOR EVEN AND ODD INFORMATION</span>
<span class="number">17AF 17AF </span><span class="colon">: </span><span class="hex">CD 5B 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FCOMP             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF WE HAVE AN INTEGER</span>
<span class="number">17B2 17B2 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET EVEN-ODD INFORMATION</span>
<span class="number">17B3 17B3 </span><span class="colon">: </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,h               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT EVEN-ODD FLAG IN CARRY</span>
<span class="number">17B4 17B4 </span><span class="colon">: </span><span class="hex">1F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rra    </span>                   <span class="comment">;      </span>
<span class="number">17B5 17B5 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">(M80) </span><span class="label">FPWR1: </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET X BACK IN FAC</span>
<span class="number">17B6 17B6 </span><span class="colon">: </span><span class="hex">22 E6 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (FACHO),hl        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">STORE HO'S</span>
<span class="number">17B9 17B9 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET LO'S OFF STACK</span>
<span class="number">17BA 17BA </span><span class="colon">: </span><span class="hex">22 E4 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (FACLO),hl        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">STORE THEM IN FAC</span>
<span class="number">17BD 17BD </span><span class="colon">: </span><span class="hex">DC 70 17   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> c,PSHNEG          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NEGATE NUMBER AT END IF Y WAS ODD</span>
<span class="number">17C0 17C0 </span><span class="colon">: </span><span class="hex">CC 0B 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> z,NEG             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NEGATE THE NEGATIVE NUMBER</span>
<span class="number">17C3 17C3 </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE Y AGAIN</span>
<span class="number">17C4 17C4 </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;      </span>
<span class="number">17C5 17C5 </span><span class="colon">: </span><span class="hex">CD 85 13   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> LOG               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">COMPUTE  EXP(Y*LOG(X))</span>
<span class="number">17C8 17C8 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;      </span>
<span class="number">17C9 17C9 </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF X WAS NEGATIVE AND Y NOT AN INTEGER THEN</span>
<span class="number">17CA 17CA </span><span class="colon">: </span><span class="hex">CD CB 13   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FMULT             <span class="comment">;</span><span class="source">[M80] </span><span class="comment"> LOG WILL BLOW HIM OUT OF THE WATER</span>
<span class="number">17CD 17CD </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">17CD 17CD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE FUNCTION EXP(X) CALCULATES e^X WHERE e=2.718282</span>
<span class="number">17CD 17CD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       THE TECHNIQUE USED IS TO EMPLOY A COUPLE</span>
<span class="number">17CD 17CD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       OF FUNDAMENTAL IDENTITIES THAT ALLOWS US TO</span>
<span class="number">17CD 17CD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       USE THE BASE 2 THROUGH THE DIFFICULT PORTIONS OF</span>
<span class="number">17CD 17CD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       THE CALCULATION:           </span>
<span class="number">17CD 17CD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">17CD 17CD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">         (1)e^X=2^y  WHERE y=X*LOG2(e) [LOG2(e) IS</span>
<span class="number">17CD 17CD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                         LOG BASE 2</span>
<span class="number">17CD 17CD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                         OF e ]</span>
<span class="number">17CD 17CD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">17CD 17CD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">         (2) 2^y=2^[ INT(y)+(y-INT(y)]</span>
<span class="number">17CD 17CD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">         (3) IF Ny=INT(y) THEN    </span>
<span class="number">17CD 17CD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">             2^(Ny+y-Ny)=[2^Ny]*[2^(y-Ny)]</span>
<span class="number">17CD 17CD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">17CD 17CD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       NOW, SINCE 2^Ny IS EASY TO COMPUTE (AN EXPONENT</span>
<span class="number">17CD 17CD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       CALCULATION WITH MANTISSA BITS OF ZERO) THE DIFFICULT</span>
<span class="number">17CD 17CD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       PORTION IS TO COMPUTE 2^(Y-Ny) WHERE 0.LE.(Y-Ny).LT.1</span>
<span class="number">17CD 17CD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       THIS IS ACCOMPLISHED WITH A POLYNOMIAL APPROXIMATION</span>
<span class="number">17CD 17CD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       TO 2^Z WHERE 0.LE.Z.LT.1  . ONCE THIS IS COMPUTED WE</span>
<span class="number">17CD 17CD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">       HAVE TO EFFECT THE MULTIPLY BY 2^Ny .</span>
<span class="number">17CD 17CD </span><span class="colon">: </span><span class="hex">01 38 81   </span><span class="source">[M80] </span><span class="label">EXP:   </span><span class="mnemonic"> ld     </span> bc,$8138          <span class="comment">;</span><span class="source">[M65] </span><span class="comment">LOG(e) BASE 2</span>
<span class="number">17D0 17D0 </span><span class="colon">: </span><span class="hex">11 3B AA   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,$AA3B          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET LOG2(e)</span>
<span class="number">17D3 17D3 </span><span class="colon">: </span><span class="hex">CD CB 13   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FMULT             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">y=FAC*LOG2(e)</span>
<span class="number">17D6 17D6 </span><span class="colon">: </span><span class="hex">3A E7 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(FAC)           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MUST SEE IF TOO LARGE</span>
<span class="number">17D9 17D9 </span><span class="colon">: </span><span class="hex">FE 88      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> $88               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ABS .GT. 128?</span>
<span class="number">17DB 17DB </span><span class="colon">: </span><span class="hex">30 22      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,EXP100         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF SO OVERFLOW</span>
<span class="number">17DD 17DD </span><span class="colon">: </span><span class="hex">FE 68      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> $68               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF TOO SMALL ANSWER IS 1</span>
<span class="number">17DF 17DF </span><span class="colon">: </span><span class="hex">38 30      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,EXP200          <span class="comment">;      </span>
<span class="number">17E1 17E1 </span><span class="colon">: </span><span class="hex">CD 13 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> PUSHF             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE y</span>
<span class="number">17E4 17E4 </span><span class="colon">: </span><span class="hex">CD B1 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> INT               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DETERMINE INTEGER POWER OF 2</span>
<span class="number">17E7 17E7 </span><span class="colon">: </span><span class="hex">C6 81      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,$81             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">INTEGER WAS RETURNED IN A, BIAS IS 201</span>
<span class="number">17E9 17E9 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;      </span>
<span class="number">17EA 17EA </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RECALL y</span>
<span class="number">17EB 17EB </span><span class="colon">: </span><span class="hex">28 15      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,EXP110          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">OVERFLOW</span>
<span class="number">17ED 17ED </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE EXPONENT</span>
<span class="number">17EE 17EE </span><span class="colon">: </span><span class="hex">CD 5E 12   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FSUB              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FAC=y-INT(y)</span>
<span class="number">17F1 17F1 </span><span class="colon">: </span><span class="hex">21 1A 18   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,EXPBCN         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WILL USE HART 1302 POLY. EVAL NOW</span>
<span class="number">17F4 17F4 </span><span class="colon">: </span><span class="hex">CD 46 18   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> POLY              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">COMPUTE 2^[y-INT(y)]</span>
<span class="number">17F7 17F7 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">INTEGER POWER OF 2 EXPONENT</span>
<span class="number">17F8 17F8 </span><span class="colon">: </span><span class="hex">11 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,0              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NOW HAVE FLOATING REPRESENTATION</span>
<span class="number">17FB 17FB </span><span class="colon">: </span><span class="hex">4A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,d               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">OF INT(y) IN (BCDE)</span>
<span class="number">17FC 17FC </span><span class="colon">: </span><span class="hex">C3 CB 13   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> FMULT             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MULTIPLY BY 2^[y-INT(y)] AND RETURN</span>
<span class="number">17FF 17FF </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">17FF 17FF </span><span class="colon">: </span><span class="hex">CD 13 15   </span><span class="source">(M80) </span><span class="label">EXP100:</span><span class="mnemonic"> call   </span> PUSHF             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF NEG. THEN JUMP TO ZERO</span>
<span class="number">1802 1802 </span><span class="colon">: </span><span class="hex">3A E6 38   </span><span class="source">(M80) </span><span class="label">EXP110:</span><span class="mnemonic"> ld     </span> a,(FACHO)         <span class="comment">;      </span>
<span class="number">1805 1805 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">OVERFLOW IF PLUS</span>
<span class="number">1806 1806 </span><span class="colon">: </span><span class="hex">F2 0E 18   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> p,EXP115          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NEED STACK RIGHT</span>
<span class="number">1809 1809 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;      </span>
<span class="number">180A 180A </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;      </span>
<span class="number">180B 180B </span><span class="colon">: </span><span class="hex">C3 C3 12   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> ZERO              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GO ZERO THE FAC</span>
<span class="number">180E 180E </span><span class="colon">: </span><span class="hex">C3 D3 03   </span><span class="source">(M80) </span><span class="label">EXP115:</span><span class="mnemonic"> jp     </span> OVERR             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">OVERFLOW</span>
<span class="number">1811 1811 </span><span class="colon">: </span><span class="hex">01 00 81   </span><span class="source">(M80) </span><span class="label">EXP200:</span><span class="mnemonic"> ld     </span> bc,$8100          <span class="comment">;      </span>
<span class="number">1814 1814 </span><span class="colon">: </span><span class="hex">11 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,$0000          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">1.</span>
<span class="number">1817 1817 </span><span class="colon">: </span><span class="hex">C3 23 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> MOVFR             <span class="comment">;      </span>
<span class="number">181A 181A </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">181A 181A </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="comment">;*************************************************************</span>
<span class="number">181A 181A </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="comment">;       Hart 1302 polynomial coefficients</span>
<span class="number">181A 181A </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="comment">;*************************************************************</span>
<span class="number">181A 181A </span><span class="colon">: </span><span class="hex">07         </span><span class="source">[M80] </span><span class="label">EXPBCN </span><span class="mnemonic"> byte   </span> 7                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DEGREE + 1</span>
<span class="number">181B 181B </span><span class="colon">: </span><span class="hex">7C 88 59 74</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $7C,$88,$59,$74   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">.00020745577403-</span>
<span class="number">181F 181F </span><span class="colon">: </span><span class="hex">E0 97 26 77</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $E0,$97,$26,$77   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">.00127100574569-</span>
<span class="number">1823 1823 </span><span class="colon">: </span><span class="hex">C4 1D 1E 7A</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $C4,$1D,$1E,$7A   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">.00965065093202+</span>
<span class="number">1827 1827 </span><span class="colon">: </span><span class="hex">5E 50 63 7C</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $5E,$50,$63,$7C   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">.05549656508324+</span>
<span class="number">182B 182B </span><span class="colon">: </span><span class="hex">1A FE 75 7E</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $1A,$FE,$75,$7E   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">.24022713817633-</span>
<span class="number">182F 182F </span><span class="colon">: </span><span class="hex">18 72 31 80</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $18,$72,$31,$80   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">.69314717213716+</span>
<span class="number">1833 1833 </span><span class="colon">: </span><span class="hex">00 00 00 81</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $00,$00,$00,$81   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">1.0</span>
<span class="number">1837 1837 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1837 1837 </span><span class="colon">  </span><span class="hex">           </span><span class="source">   +  </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">POLYNOMIAL EVALUATOR AND THE RANDOM NUMBER GENERATOR</span>
<span class="number">1837 1837 </span><span class="colon">- </span><span class="hex">           </span><span class="source">   |  </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">EVALUATE P(X^2)*X                 </span>
<span class="number">1837 1837 </span><span class="colon">  </span><span class="hex">           </span><span class="source">   |  </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINTER TO DEGREE+1 IS IN (HL)    </span>
<span class="number">1837 1837 </span><span class="colon">  </span><span class="hex">           </span><span class="source">   |  </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE CONSTANTS FOLLOW THE DEGREE   </span>
<span class="number">1837 1837 </span><span class="colon">  </span><span class="hex">           </span><span class="source">   |  </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">CONSTANTS SHOULD BE STORED IN REVERSE ORDER, FAC HAS X</span>
<span class="number">1837 1837 </span><span class="colon">  </span><span class="hex">           </span><span class="source">   |  </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">WE COMPUTE:                       </span>
<span class="number">1837 1837 </span><span class="colon">  </span><span class="hex">           </span><span class="source">   |  </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> C0*X+C1*X^3+C2*X^5+C3*X^7+...+C(N)*X^(2*N+1)</span>
<span class="number">1837 1837 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1837 1837 </span><span class="colon">= </span><span class="hex">CD 13 15   </span><span class="source">[M80] </span><span class="label">POLYX: </span><span class="mnemonic"> call   </span> PUSHF             <span class="comment">;SAVE X</span>
<span class="number">183A 183A </span><span class="colon">: </span><span class="hex">11 C9 13   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,FMULTT         <span class="comment">;PUT ADDRESS OF FMULTT ON STACK SO WHEN WE</span>
<span class="number">183D 183D </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">; RETURN WE WILL MULTIPLY BY X</span>
<span class="number">183E 183E </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">{M80} </span><span class="label">POLYX2:</span><span class="mnemonic"> push   </span> hl                <span class="comment">;SAVE CONSTANT POINTER</span>
<span class="number">183F 183F </span><span class="colon">: </span><span class="hex">CD 2E 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVRF             <span class="comment">;SQUARE X</span>
<span class="number">1842 1842 </span><span class="colon">: </span><span class="hex">CD CB 13   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FMULT             <span class="comment">;      </span>
<span class="number">1845 1845 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;GET CONSTANT POINTER</span>
<span class="number">1846 1846 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1846 1846 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">POLYNOMIAL EVALUATOR              </span>
<span class="number">1846 1846 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINTER TO DEGREE+1 IS IN (HL), IT IS UPDATED</span>
<span class="number">1846 1846 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE CONSTANTS FOLLOW THE DEGREE   </span>
<span class="number">1846 1846 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">CONSTANTS SHOULD BE STORED IN REVERSE ORDER, FAC HAS X</span>
<span class="number">1846 1846 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">WE COMPUTE:                       </span>
<span class="number">1846 1846 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> C0+C1*X+C2*X^2+C3*X^3+...+C(N-1)*X^(N-1)+C(N)*X^N</span>
<span class="number">1846 1846 </span><span class="colon">: </span><span class="hex">CD 13 15   </span><span class="source">[M80] </span><span class="label">POLY:  </span><span class="mnemonic"> call   </span> PUSHF             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE X</span>
<span class="number">1849 1849 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET DEGREE</span>
<span class="number">184A 184A </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">INCREMENT POINTER TO FIRST CONSTANT</span>
<span class="number">184B 184B </span><span class="colon">: </span><span class="hex">CD 20 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVFM             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MOVE FIRST CONSTANT TO FAC</span>
<span class="number">184E 184E </span><span class="colon">: </span><span class="hex">06         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $06               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">"MVI  B" OVER NEXT BYTE</span>
<span class="number">184F 184F </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">(M80) </span><span class="label">POLY1: </span><span class="mnemonic"> pop    </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET DEGREE</span>
<span class="number">1850 1850 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;      </span>
<span class="number">1851 1851 </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET X</span>
<span class="number">1852 1852 </span><span class="colon">: </span><span class="hex">3D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ARE WE DONE?</span>
<span class="number">1853 1853 </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">YES, RETURN</span>
<span class="number">1854 1854 </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;      </span>
<span class="number">1855 1855 </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NO, SAVE X</span>
<span class="number">1856 1856 </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE DEGREE</span>
<span class="number">1857 1857 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE CONSTANT POINTER</span>
<span class="number">1858 1858 </span><span class="colon">: </span><span class="hex">CD CB 13   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FMULT             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">EVALUATE THE POLY, MULTIPLY BY X</span>
<span class="number">185B 185B </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET LOCATION OF CONSTANTS</span>
<span class="number">185C 185C </span><span class="colon">: </span><span class="hex">CD 31 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVRM             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET CONSTANT</span>
<span class="number">185F 185F </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">STORE LOCATION OF CONSTANTS SO FADD AND FMULT</span>
<span class="number">1860 1860 </span><span class="colon">: </span><span class="hex">CD 61 12   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FADD              <span class="comment">;</span><span class="source">[M80] </span><span class="comment"> WILL NOT SCREW THEM UP, ADD IN CONSTANT</span>
<span class="number">1863 1863 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MOVE CONSTANT POINTER TO NEXT CONSTANT</span>
<span class="number">1864 1864 </span><span class="colon">: </span><span class="hex">18 E9      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> POLY1             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF DONE</span>
<span class="number">1866 1866 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1866 1866 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">PSUEDO-RANDOM NUMBER GENERATOR    </span>
<span class="number">1866 1866 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF ARG=0, THE LAST RANDOM NUMBER GENERATED IS RETURNED</span>
<span class="number">1866 1866 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF ARG .LT. 0, A NEW SEQUENCE OF RANDOM NUMBERS IS STARTED</span>
<span class="number">1866 1866 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment"> USING THE ARGUMENT               </span>
<span class="number">1866 1866 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">TO FORM THE NEXT RANDOM NUMBER IN THE SEQUENCE, WE MULTIPLY THE</span>
<span class="number">1866 1866 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">PREVIOUS RANDOM NUMBER BY A RANDOM CONSTANT, AND ADD IN ANOTHER</span>
<span class="number">1866 1866 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">RANDOM CONSTANT.  THEN THE HO AND LO BYTES ARE SWITCHED, THE</span>
<span class="number">1866 1866 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">EXPONENT IS PUT WHERE IT WILL BE SHIFTED IN BY NORMAL, AND THE</span>
<span class="number">1866 1866 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">EXPONENT IN THE FAC SET TO 200 SO THE RESULT WILL BE LESS THAN 1.</span>
<span class="number">1866 1866 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THIS IS THEN NORMALIZED AND SAVED FOR THE NEXT TIME.</span>
<span class="number">1866 1866 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE HO AND LO BYTES WERE SWITCHED SO WE HAVE A RANDOM CHANCE OF</span>
<span class="number">1866 1866 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">GETTING A NUMBER LESS THAN OR GREATER THAN .5</span>
<span class="number">1866 1866 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">1866 1866 </span><span class="colon">: </span><span class="hex">EF         </span><span class="source">[M80] </span><span class="label">RND:   </span><span class="mnemonic"> rst    </span> FSIGN             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET SIGN OF ARG</span>
<span class="number">1867 1867 </span><span class="colon">: </span><span class="hex">21 20 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,RNDCNT+1       <span class="comment">;      </span>
<span class="number">186A 186A </span><span class="colon">: </span><span class="hex">FA C4 18   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> m,RNDSTR          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">START NEW SEQUENCE IF NEGATIVE</span>
<span class="number">186D 186D </span><span class="colon">: </span><span class="hex">21 41 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,RNDX           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET LAST NUMBER GENERATED</span>
<span class="number">1870 1870 </span><span class="colon">: </span><span class="hex">CD 20 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVFM             <span class="comment">;      </span>
<span class="number">1873 1873 </span><span class="colon">: </span><span class="hex">21 20 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,RNDCNT+1       <span class="comment">;      </span>
<span class="number">1876 1876 </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RETURN LAST NUMBER GENERATED IF ZERO</span>
<span class="number">1877 1877 </span><span class="colon">: </span><span class="hex">86         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET COUNTER INTO CONSTANTS AND ADD ONE</span>
<span class="number">1878 1878 </span><span class="colon">: </span><span class="hex">E6 07      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> and    </span> 7                 <span class="comment">;      </span>
<span class="number">187A 187A </span><span class="colon">: </span><span class="hex">06 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,0               <span class="comment">;      </span>
<span class="number">187C 187C </span><span class="colon">: </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a            <span class="comment">;      </span>
<span class="number">187D 187D </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">187E 187E </span><span class="colon">: </span><span class="hex">87         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,a               <span class="comment">;      </span>
<span class="number">187F 187F </span><span class="colon">: </span><span class="hex">87         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,a               <span class="comment">;      </span>
<span class="number">1880 1880 </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a               <span class="comment">;      </span>
<span class="number">1881 1881 </span><span class="colon">: </span><span class="hex">09         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,bc             <span class="comment">;      </span>
<span class="number">1882 1882 </span><span class="colon">: </span><span class="hex">CD 31 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVRM             <span class="comment">;      </span>
<span class="number">1885 1885 </span><span class="colon">: </span><span class="hex">CD CB 13   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FMULT             <span class="comment">;      </span>
<span class="number">1888 1888 </span><span class="colon">: </span><span class="hex">3A 1F 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(RNDCNT)        <span class="comment">;      </span>
<span class="number">188B 188B </span><span class="colon">: </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a                 <span class="comment">;      </span>
<span class="number">188C 188C </span><span class="colon">: </span><span class="hex">E6 03      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> and    </span> 3                 <span class="comment">;      </span>
<span class="number">188E 188E </span><span class="colon">: </span><span class="hex">06 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,0               <span class="comment">;      </span>
<span class="number">1890 1890 </span><span class="colon">: </span><span class="hex">FE 01      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 1                 <span class="comment">;      </span>
<span class="number">1892 1892 </span><span class="colon">: </span><span class="hex">88         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> adc    </span> a,b               <span class="comment">;      </span>
<span class="number">1893 1893 </span><span class="colon">: </span><span class="hex">32 1F 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (RNDCNT),a        <span class="comment">;      </span>
<span class="number">1896 1896 </span><span class="colon">: </span><span class="hex">21 C7 18   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,RNDTB2-4       <span class="comment">;      </span>
<span class="number">1899 1899 </span><span class="colon">: </span><span class="hex">87         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,a               <span class="comment">;      </span>
<span class="number">189A 189A </span><span class="colon">: </span><span class="hex">87         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,a               <span class="comment">;      </span>
<span class="number">189B 189B </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a               <span class="comment">;      </span>
<span class="number">189C 189C </span><span class="colon">: </span><span class="hex">09         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,bc             <span class="comment">;      </span>
<span class="number">189D 189D </span><span class="colon">: </span><span class="hex">CD 53 12   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FADDS             <span class="comment">;      </span>
<span class="number">18A0 18A0 </span><span class="colon">: </span><span class="hex">CD 2E 15   </span><span class="source">[M80] </span><span class="label">RND1:  </span><span class="mnemonic"> call   </span> MOVRF             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SWITCH HO AND LO BYTES,</span>
<span class="number">18A3 18A3 </span><span class="colon">: </span><span class="hex">7B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,e               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET LO</span>
<span class="number">18A4 18A4 </span><span class="colon">: </span><span class="hex">59         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,c               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT HO IN LO BYTE</span>
<span class="number">18A5 18A5 </span><span class="colon">: </span><span class="hex">EE 4F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> $4F               <span class="comment">;      </span>
<span class="number">18A7 18A7 </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT LO IN HO BYTE</span>
<span class="number">18A8 18A8 </span><span class="colon">: </span><span class="hex">36 80      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),128          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE RESULT POSITIVE</span>
<span class="number">18AA 18AA </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET POINTER TO EXPONENT</span>
<span class="number">18AB 18AB </span><span class="colon">: </span><span class="hex">46         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT EXPONENT IN OVERFLOW POSITION</span>
<span class="number">18AC 18AC </span><span class="colon">: </span><span class="hex">36 80      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),128          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET EXP SO RESULT WILL BE BETWEEN 0 AND 1</span>
<span class="number">18AE 18AE </span><span class="colon">: </span><span class="hex">21 1E 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,RNDCNT-1       <span class="comment">;      </span>
<span class="number">18B1 18B1 </span><span class="colon">: </span><span class="hex">34         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> (hl)              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">INCREMENT THE PERTUBATION COUNT</span>
<span class="number">18B2 18B2 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF ITS TIME</span>
<span class="number">18B3 18B3 </span><span class="colon">: </span><span class="hex">D6 AB      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> $AB               <span class="comment">;      </span>
<span class="number">18B5 18B5 </span><span class="colon">: </span><span class="hex">20 04      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,NTPTRB         <span class="comment">;      </span>
<span class="number">18B7 18B7 </span><span class="colon">: </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ZERO THE COUNTER</span>
<span class="number">18B8 18B8 </span><span class="colon">: </span><span class="hex">0C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> c                 <span class="comment">;      </span>
<span class="number">18B9 18B9 </span><span class="colon">: </span><span class="hex">15         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> d                 <span class="comment">;      </span>
<span class="number">18BA 18BA </span><span class="colon">: </span><span class="hex">1C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> e                 <span class="comment">;      </span>
<span class="number">18BB 18BB </span><span class="colon">: </span><span class="hex">CD B0 12   </span><span class="source">(M80) </span><span class="label">NTPTRB:</span><span class="mnemonic"> call   </span> NORMAL            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NORMALIZE THE RESULT</span>
<span class="number">18BE 18BE </span><span class="colon">: </span><span class="hex">21 41 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,RNDX           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE RANDOM NUMBER GENERATED FOR NEXT</span>
<span class="number">18C1 18C1 </span><span class="colon">: </span><span class="hex">C3 3A 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> MOVMF             <span class="comment">;</span><span class="source">[M80] </span><span class="comment"> TIME</span>
<span class="number">18C4 18C4 </span><span class="colon">: </span><span class="hex">77         </span><span class="source">(M80) </span><span class="label">RNDSTR:</span><span class="mnemonic"> ld     </span> (hl),a            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ZERO THE COUNTERS</span>
<span class="number">18C5 18C5 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;      </span>
<span class="number">18C6 18C6 </span><span class="colon">: </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a            <span class="comment">;      </span>
<span class="number">18C7 18C7 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;      </span>
<span class="number">18C8 18C8 </span><span class="colon">: </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a            <span class="comment">;      </span>
<span class="number">18C9 18C9 </span><span class="colon">: </span><span class="hex">18 D5      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> RND1              <span class="comment">;      </span>
<span class="number">18CB 18CB </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">18CB 18CB </span><span class="colon">: </span><span class="hex">68 B1 46 68</span><span class="source">[M80] </span><span class="label">RNDTB2:</span><span class="mnemonic"> byte   </span> $68,$B1,$46,$68          
<span class="number">18CF 18CF </span><span class="colon">: </span><span class="hex">99 E9 92 69</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $99,$E9,$92,$69          
<span class="number">18D3 18D3 </span><span class="colon">: </span><span class="hex">10 D1 75 68</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $10,$D1,$75,$68          
<span class="number">18D7 18D7 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">18D7 18D7 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">COSINE FUNCTION                   </span>
<span class="number">18D7 18D7 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IDEA: USE COS(X)=SIN(X+PI/2)      </span>
<span class="number">18D7 18D7 </span><span class="colon">: </span><span class="hex">21 53 19   </span><span class="source">[M80] </span><span class="label">COS:   </span><span class="mnemonic"> ld     </span> hl,PI2            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ADD PI/2 TO FAC</span>
<span class="number">18DA 18DA </span><span class="colon">: </span><span class="hex">CD 53 12   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FADDS             <span class="comment">;      </span>
<span class="number">18DD 18DD </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">18DD 18DD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">SINE FUNCTION                     </span>
<span class="number">18DD 18DD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IDEA: USE IDENTITIES TO GET FAC IN QUADRANTS I OR IV</span>
<span class="number">18DD 18DD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE FAC IS DIVIDED BY 2*PI AND THE INTEGER PART IS IGNORED BECAUSE</span>
<span class="number">18DD 18DD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">SIN(X+2*PI)=SIN(X).  THEN THE ARGUMENT CAN BE COMPARED WITH PI/2 BY</span>
<span class="number">18DD 18DD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">COMPARING THE RESULT OF THE DIVISION WITH PI/2/(2*PI)=1/4.</span>
<span class="number">18DD 18DD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IDENTITIES ARE THEN USED TO GET THE RESULT IN QUADRANTS I OR IV.</span>
<span class="number">18DD 18DD </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">AN APPROXIMATION POLYNOMIAL IS THEN USED TO COMPUTE SIN(X).</span>
<span class="number">18DD 18DD </span><span class="colon">: </span><span class="hex">3A E7 38   </span><span class="source">[M80] </span><span class="label">SIN:   </span><span class="mnemonic"> ld     </span> a,(FAC)           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WILL SEE IF .LT.2^-10</span>
<span class="number">18E0 18E0 </span><span class="colon">: </span><span class="hex">FE 77      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> $77               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND IF SO SIN(X)=X</span>
<span class="number">18E2 18E2 </span><span class="colon">: </span><span class="hex">D8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> c                 <span class="comment">;      </span>
<span class="number">18E3 18E3 </span><span class="colon">: </span><span class="hex">3A E6 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(FACHO)         <span class="comment">;      </span>
<span class="number">18E6 18E6 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;      </span>
<span class="number">18E7 18E7 </span><span class="colon">: </span><span class="hex">F2 F3 18   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> p,SIN1            <span class="comment">;</span><span class="source">[M65] </span><span class="comment">FIRST QUADRANT</span>
<span class="number">18EA 18EA </span><span class="colon">: </span><span class="hex">E6 7F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> and    </span> 07FH              <span class="comment">;      </span>
<span class="number">18EC 18EC </span><span class="colon">: </span><span class="hex">32 E6 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (FACHO),a         <span class="comment">;      </span>
<span class="number">18EF 18EF </span><span class="colon">: </span><span class="hex">11 0B 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,NEG            <span class="comment">;;Return to NEG</span>
<span class="number">18F2 18F2 </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;      </span>
<span class="number">18F3 18F3 </span><span class="colon">: </span><span class="hex">01 22 7E   </span><span class="source">[M65] </span><span class="label">SIN1:  </span><span class="mnemonic"> ld     </span> bc,$7E22          <span class="comment">;      </span>
<span class="number">18F6 18F6 </span><span class="colon">: </span><span class="hex">11 83 F9   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,$F983          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WILL CALCULATE X=FAC/(2*PI)</span>
<span class="number">18F9 18F9 </span><span class="colon">: </span><span class="hex">CD CB 13   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FMULT             <span class="comment">;      </span>
<span class="number">18FC 18FC </span><span class="colon">: </span><span class="hex">CD 13 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> PUSHF             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE X</span>
<span class="number">18FF 18FF </span><span class="colon">: </span><span class="hex">CD B1 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> INT               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FAC=INT(X)</span>
<span class="number">1902 1902 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;      </span>
<span class="number">1903 1903 </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FETCH X TO REGISTERS</span>
<span class="number">1904 1904 </span><span class="colon">: </span><span class="hex">CD 5E 12   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FSUB              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FAC=X-INT(X)</span>
<span class="number">1907 1907 </span><span class="colon">: </span><span class="hex">01 00 7F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> bc,$7F00          <span class="comment">;      </span>
<span class="number">190A 190A </span><span class="colon">: </span><span class="hex">11 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,$0000          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET 1/4</span>
<span class="number">190D 190D </span><span class="colon">: </span><span class="hex">CD 5B 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FCOMP             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FAC=FAC-1/4</span>
<span class="number">1910 1910 </span><span class="colon">: </span><span class="hex">FA 35 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> m,SIN2A           <span class="comment">;      </span>
<span class="number">1913 1913 </span><span class="colon">: </span><span class="hex">01 80 7F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> bc,$7F80          <span class="comment">;      </span>
<span class="number">1916 1916 </span><span class="colon">: </span><span class="hex">11 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,$0000          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">-1/4</span>
<span class="number">1919 1919 </span><span class="colon">: </span><span class="hex">CD 61 12   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FADD              <span class="comment">;      </span>
<span class="number">191C 191C </span><span class="colon">: </span><span class="hex">01 80 80   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> bc,$8080          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">-1/2</span>
<span class="number">191F 191F </span><span class="colon">: </span><span class="hex">11 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,$0000          <span class="comment">;      </span>
<span class="number">1922 1922 </span><span class="colon">: </span><span class="hex">CD 61 12   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FADD              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">X=X-1/2</span>
<span class="number">1925 1925 </span><span class="colon">: </span><span class="hex">EF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> FSIGN             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE SURE IF QUADRANTS II,IV</span>
<span class="number">1926 1926 </span><span class="colon">: </span><span class="hex">F4 0B 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> p,NEG             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WE WORK WITH 1/4-X</span>
<span class="number">1929 1929 </span><span class="colon">: </span><span class="hex">01 00 7F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> bc,$7F00          <span class="comment">;      </span>
<span class="number">192C 192C </span><span class="colon">: </span><span class="hex">11 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,$0000          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">1/4</span>
<span class="number">192F 192F </span><span class="colon">: </span><span class="hex">CD 61 12   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FADD              <span class="comment">;      </span>
<span class="number">1932 1932 </span><span class="colon">: </span><span class="hex">CD 0B 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> NEG               <span class="comment">;      </span>
<span class="number">1935 1935 </span><span class="colon">: </span><span class="hex">3A E6 38   </span><span class="source">[M80] </span><span class="label">SIN2A: </span><span class="mnemonic"> ld     </span> a,(FACHO)         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MUST REDUCE TO [0,1/4]</span>
<span class="number">1938 1938 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SIGN IN PSW</span>
<span class="number">1939 1939 </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE FOR POSSIBLE NEG. AFTER CALC</span>
<span class="number">193A 193A </span><span class="colon">: </span><span class="hex">F2 42 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> p,SIN3            <span class="comment">;      </span>
<span class="number">193D 193D </span><span class="colon">: </span><span class="hex">EE 80      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> $80               <span class="comment">;      </span>
<span class="number">193F 193F </span><span class="colon">: </span><span class="hex">32 E6 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (FACHO),a         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NOW IN [0,1/4]</span>
<span class="number">1942 1942 </span><span class="colon">: </span><span class="hex">21 5B 19   </span><span class="source">[M80] </span><span class="label">SIN3:  </span><span class="mnemonic"> ld     </span> hl,SINCON         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POINT TO HART COEFFICIENTS</span>
<span class="number">1945 1945 </span><span class="colon">: </span><span class="hex">CD 37 18   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> POLYX             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DO POLY EVAL</span>
<span class="number">1948 1948 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NOW TO DO SIGN</span>
<span class="number">1949 1949 </span><span class="colon">: </span><span class="hex">F0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> p                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">OK IF POS</span>
<span class="number">194A 194A </span><span class="colon">: </span><span class="hex">3A E6 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(FACHO)         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FETCH SIGN BYTE</span>
<span class="number">194D 194D </span><span class="colon">: </span><span class="hex">EE 80      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> 080H              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE NEG</span>
<span class="number">194F 194F </span><span class="colon">: </span><span class="hex">32 E6 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (FACHO),a         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">REPLACE SIGN</span>
<span class="number">1952 1952 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">1953 1953 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1953 1953 </span><span class="colon">= </span><span class="hex">DB 0F 49 81</span><span class="source">[M80] </span><span class="label">PI2:   </span><span class="mnemonic"> byte   </span> $DB,$0F,$49,$81   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PI/2</span>
<span class="number">1957 1957 </span><span class="colon">: </span><span class="hex">00 00 00 7F</span><span class="source">{M80} </span><span class="label">FR4:   </span><span class="mnemonic"> byte   </span> $00,$00,$00,$7F   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">1/4</span>
<span class="number">195B 195B </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">195B 195B </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">HART ALGORITHM 3341 CONSTANTS     </span>
<span class="number">195B 195B </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">NOTE THAT HART CONSTANTS HAVE BEEN SCALED BY A POWER OF 2</span>
<span class="number">195B 195B </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THIS IS DUE TO RANGE REDUCTION AS A % OF 2*PI RATHER THAN PI/2</span>
<span class="number">195B 195B </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">WOULD NEED TO MULTIPLY ARGUMENT BY 4 BUT INSTEAD WE FACTOR THIS</span>
<span class="number">195B 195B </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THRU THE CONSTANTS.               </span>
<span class="number">195B 195B </span><span class="colon">: </span><span class="hex">05         </span><span class="source">      </span><span class="label">SINCON:</span><span class="mnemonic"> byte   </span> 5                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DEGREE</span>
<span class="number">195C 195C </span><span class="colon">: </span><span class="hex">FB D7 1E 86</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $FB,$D7,$1E,$86   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">.1514851E-3</span>
<span class="number">1960 1960 </span><span class="colon">: </span><span class="hex">65 26 99 87</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $65,$26,$99,$87   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">-.4673767E-2</span>
<span class="number">1964 1964 </span><span class="colon">: </span><span class="hex">58 34 23 87</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $58,$34,$23,$87   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">.7968968E-1</span>
<span class="number">1968 1968 </span><span class="colon">: </span><span class="hex">E1 5D A5 86</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $E1,$5D,$A5,$86   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">-.6459637</span>
<span class="number">196C 196C </span><span class="colon">: </span><span class="hex">DB 0F 49 83</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $DB,$0F,$49,$83   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">1.570796</span>
<span class="number">1970 1970 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1970 1970 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">TANGENT FUNCTION                  </span>
<span class="number">1970 1970 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">TAN(X)=SIN(X)/COS(X)              </span>
<span class="number">1970 1970 </span><span class="colon">: </span><span class="hex">CD 13 15   </span><span class="source">[M80] </span><span class="label">TAN:   </span><span class="mnemonic"> call   </span> PUSHF             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE ARG</span>
<span class="number">1973 1973 </span><span class="colon">: </span><span class="hex">CD DD 18   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SIN               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">   TAN(X)=SIN(X)/COS(X)</span>
<span class="number">1976 1976 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET X OFF STACK</span>
<span class="number">1977 1977 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUSHF SMASHES (DE)</span>
<span class="number">1978 1978 </span><span class="colon">: </span><span class="hex">CD 13 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> PUSHF             <span class="comment">;      </span>
<span class="number">197B 197B </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET LO'S WHERE THEY BELONG</span>
<span class="number">197C 197C </span><span class="colon">: </span><span class="hex">CD 23 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVFR             <span class="comment">;      </span>
<span class="number">197F 197F </span><span class="colon">: </span><span class="hex">CD D7 18   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> COS               <span class="comment">;      </span>
<span class="number">1982 1982 </span><span class="colon">: </span><span class="hex">C3 2D 14   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> FDIVT             <span class="comment">;      </span>
<span class="number">1985 1985 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1985 1985 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;ARCTANGENT FUNCTION                     </span>
<span class="number">1985 1985 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Not Implemented                        </span>
<span class="number">1985 1985 </span><span class="colon">: </span><span class="hex">F7         </span><span class="source">[M80] </span><span class="label">ATN:   </span><span class="mnemonic"> rst    </span> HOOKDO            <span class="comment">;;execute hook routine 15 (ATN)</span>
<span class="number">1986 1986 </span><span class="colon">: </span><span class="hex">0E         </span><span class="source">{~~~} </span><span class="label">HOOK14:</span><span class="mnemonic"> byte   </span> 14                <span class="comment">;;if not implemented</span>
<span class="number">1988 1988 </span><span class="colon">: </span><span class="hex">C3 C4 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> SNERR             <span class="comment">;;  generate SYNTAX error</span>
<span class="number">198A 198A </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">198A 198A </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Execute OUTCHR                         </span>
<span class="number">198A 198A </span><span class="colon">= </span><span class="hex">F7         </span><span class="source">[M80] </span><span class="label">OUTDO: </span><span class="mnemonic"> rst    </span> HOOKDO            <span class="comment">;;execute hook routine 13 (OUTDOX)</span>
<span class="number">198B 198B </span><span class="colon">: </span><span class="hex">0D         </span><span class="source">{~~~} </span><span class="label">HOOK13:</span><span class="mnemonic"> byte   </span> 13                <span class="comment">;      </span>
<span class="number">198C 198C </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">{M80} </span><span class="label">OUTCON:</span><span class="mnemonic"> push   </span> af                <span class="comment">;      </span>
<span class="number">198D 198D </span><span class="colon">: </span><span class="hex">3A 47 38   </span><span class="source">{M80} </span><span class="label">LPTCOD:</span><span class="mnemonic"> ld     </span> a,(PRTFLG)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF WE WANT TO TALK TO LPT</span>
<span class="number">1990 1990 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TEST BITS</span>
<span class="number">1991 1991 </span><span class="colon">: </span><span class="hex">CA D6 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,TTYPOP          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF ZERO THEN NOT</span>
<span class="number">1994 1994 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Print character in [A] to printer      </span>
<span class="number">1994 1994 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;      </span>
<span class="number">1995 1995 </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;      </span>
<span class="number">1996 1996 </span><span class="colon">: </span><span class="hex">FE 09      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 9                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">TAB</span>
<span class="number">1998 1998 </span><span class="colon">: </span><span class="hex">20 0C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,NOTABL         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NO</span>
<span class="number">199A 199A </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Print spaces until next Tab Stop is reached</span>
<span class="number">199A 199A </span><span class="colon">: </span><span class="hex">3E 20      </span><span class="source">(M80) </span><span class="label">MORSPL:</span><span class="mnemonic"> ld     </span> a,' '             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET SPACE</span>
<span class="number">199C 199C </span><span class="colon">: </span><span class="hex">DF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> OUTCHR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEND IT</span>
<span class="number">199D 199D </span><span class="colon">: </span><span class="hex">3A 46 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(LPTPOS)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET CURRENT PRINT POSIT</span>
<span class="number">19A0 19A0 </span><span class="colon">: </span><span class="hex">E6 07      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> and    </span> 7                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">AT TAB STOP?</span>
<span class="number">19A2 19A2 </span><span class="colon">: </span><span class="hex">20 F6      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,MORSPL         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GO BACK IF MORE TO PRINT</span>
<span class="number">19A4 19A4 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">POP OFF CHAR</span>
<span class="number">19A5 19A5 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RETURN</span>
<span class="number">19A6 19A6 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">19A6 19A6 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">(M80) </span><span class="label">NOTABL:</span><span class="mnemonic"> pop    </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET CHAR BACK</span>
<span class="number">19A7 19A7 </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE AGAIN</span>
<span class="number">19A8 19A8 </span><span class="colon">: </span><span class="hex">D6 0D      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> 13                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF FUNNY CONTROL CHAR, (LF) DO NOTHING</span>
<span class="number">19AA 19AA </span><span class="colon">: </span><span class="hex">28 0B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,ZERLP1          <span class="comment">;      </span>
<span class="number">19AC 19AC </span><span class="colon">: </span><span class="hex">38 0C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,LPTPOP          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">JUST PRINT CHAR</span>
<span class="number">19AE 19AE </span><span class="colon">: </span><span class="hex">3A 46 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(LPTPOS)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET POSIT</span>
<span class="number">19B1 19B1 </span><span class="colon">: </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a                 <span class="comment">;      </span>
<span class="number">19B2 19B2 </span><span class="colon">: </span><span class="hex">FE 84      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 132               <span class="comment">;      </span>
<span class="number">19B4 19B4 </span><span class="colon">: </span><span class="hex">CC C7 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> z,PRINTW          <span class="comment">;      </span>
<span class="number">19B7 19B7 </span><span class="colon">: </span><span class="hex">32 46 38   </span><span class="source">(M80) </span><span class="label">ZERLP1:</span><span class="mnemonic"> ld     </span> (LPTPOS),a        <span class="comment">;;Save print pos</span>
<span class="number">19BA 19BA </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">(~~~) </span><span class="label">LPTPOP:</span><span class="mnemonic"> pop    </span> af                <span class="comment">;;Print character on stack</span>
<span class="number">19BB 19BB </span><span class="colon">: </span><span class="hex">C3 E8 1A   </span><span class="source">(M80) </span><span class="label">LPTCHR:</span><span class="mnemonic"> jp     </span> LPTOUT            <span class="comment">;;Print raw character to printer</span>
<span class="number">19BE 19BE </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">[M80] </span><span class="label">FINLPT:</span><span class="mnemonic"> xor    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">RESET PRINT FLAG SO</span>
<span class="number">19BF 19BF </span><span class="colon">: </span><span class="hex">32 47 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (PRTFLG),a        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">OUTPUT GOES TO TERMINAL</span>
<span class="number">19C2 19C2 </span><span class="colon">: </span><span class="hex">3A 46 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(LPTPOS)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET CURRENT LPT POSIT</span>
<span class="number">19C5 19C5 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ON LEFT HAND MARGIN ALREADY?</span>
<span class="number">19C6 19C6 </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">YES, RETURN</span>
<span class="number">19C719C7  </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">19C7 19C7 </span><span class="colon">: </span><span class="hex">3E 0D      </span><span class="source">(M80) </span><span class="label">PRINTW:</span><span class="mnemonic"> ld     </span> a,13              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT OUT CRLF</span>
<span class="number">19C9 19C9 </span><span class="colon">: </span><span class="hex">CD BB 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> LPTCHR            <span class="comment">;      </span>
<span class="number">19CC 19CC </span><span class="colon">: </span><span class="hex">3E 0A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,10              <span class="comment">;      </span>
<span class="number">19CE 19CE </span><span class="colon">: </span><span class="hex">CD BB 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> LPTCHR            <span class="comment">;      </span>
<span class="number">19D1 19D1 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">ZERO LPTPOS</span>
<span class="number">19D2 19D2 </span><span class="colon">: </span><span class="hex">32 46 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (LPTPOS),a        <span class="comment">;      </span>
<span class="number">19D5 19D5 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DONE</span>
<span class="number">19D6 19D6 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">19D6 19D6 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">[M80] </span><span class="label">TTYPOP:</span><span class="mnemonic"> pop    </span> af                <span class="comment">;Print character on stack to screen</span>
<span class="number">19D7 19D7 </span><span class="colon">: </span><span class="hex">C3 72 1D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> TTYCHR            <span class="comment">;      </span>
<span class="number">19DA 19DA </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">19DA 19DA </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">INCHR, TRYIN - CHARACTER INPUT ROUTINES</span>
<span class="number">19DA 19DA </span><span class="colon">= </span><span class="hex">CD 2F 1A   </span><span class="source">[M80] </span><span class="label">INCHR: </span><span class="mnemonic"> call   </span> TRYIN             <span class="comment">;;Get Character from Keyboard</span>
<span class="number">19DD 19DD </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">19DE 19DE </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">19DE 19DE </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;CRDONZ Only does a CR if TTYPOS is not Zero.</span>
<span class="number">19DE 19DE </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;In other words, only print a carriage return when not at left margin.</span>
<span class="number">19DE 19DE </span><span class="colon">: </span><span class="hex">3A 00 38   </span><span class="source">[M80] </span><span class="label">CRDONZ:</span><span class="mnemonic"> ld     </span> a,(TTYPOS)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET CURRENT TTYPOS</span>
<span class="number">19E1 19E1 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SET CC'S</span>
<span class="number">19E2 19E2 </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF ALREADY ZERO, RETURN</span>
<span class="number">19E3 19E3 </span><span class="colon">: </span><span class="hex">18 05      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> CRDO              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DO CR</span>
<span class="number">19E5 19E5 </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Terminate BUF and Print CR             </span>
<span class="number">19E5 19E5 </span><span class="colon">= </span><span class="hex">36 00      </span><span class="source">[M80] </span><span class="label">FININL:</span><span class="mnemonic"> ld     </span> (hl),0            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT A ZERO AT THE END OF BUF</span>
<span class="number">19E7 19E7 </span><span class="colon">: </span><span class="hex">21 5F 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,BUFMIN         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SETUP POINTER</span>
<span class="number">19EA 19EA </span><span class="colon">= </span><span class="hex">3E 0D      </span><span class="source">[M80] </span><span class="label">CRDO:  </span><span class="mnemonic"> ld     </span> a,13              <span class="comment">;;Print Carriage Return</span>
<span class="number">19EC 19EC </span><span class="colon">: </span><span class="hex">DF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> OUTCHR            <span class="comment">;      </span>
<span class="number">19ED 19ED </span><span class="colon">: </span><span class="hex">3E 0A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,10              <span class="comment">;;Print Line Feed</span>
<span class="number">19EF 19EF </span><span class="colon">: </span><span class="hex">DF         </span><span class="source">{M80} </span><span class="label">CRFINO:</span><span class="mnemonic"> rst    </span> OUTCHR            <span class="comment">;      </span>
<span class="number">19F0 19F0 </span><span class="colon">: </span><span class="hex">3A 47 38   </span><span class="source">[M80] </span><span class="label">CRFIN: </span><span class="mnemonic"> ld     </span> a,(PRTFLG)        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF OUTPUTTING TO PRINTER</span>
<span class="number">19F3 19F3 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;      </span>
<span class="number">19F4 19F4 </span><span class="colon">: </span><span class="hex">28 04      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,CRCONT          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">NOT PRINTER, CONTINUE</span>
<span class="number">19F6 19F6 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CRFIN MUST ALWAYS RETURN WITH A=0</span>
<span class="number">19F7 19F7 </span><span class="colon">: </span><span class="hex">32 46 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (LPTPOS),a        <span class="comment">;;Set Print Head position to 0</span>
<span class="number">19FA 19FA </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">(M80) </span><span class="label">CRCONT:</span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">19FB 19FB </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">19FB 19FB </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;The INKEY$ function                    </span>
<span class="number">19FB 19FB </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">[M80] </span><span class="label">INKEY: </span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;      </span>
<span class="number">19FC 19FC </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE TEXT POINTER</span>
<span class="number">19FD 19FD </span><span class="colon">: </span><span class="hex">CD 18 1A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CHARCG            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET CHARC AND CLEAR IF SET</span>
<span class="number">1A00 1A00 </span><span class="colon">: </span><span class="hex">28 09      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,NULRT           <span class="comment">;{M80} NO CHAR, RETURN NULL STRING</span>
<span class="number">1A02 1A02 </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">{M80} </span><span class="label">BUFCIN:</span><span class="mnemonic"> push   </span> af                <span class="comment">;      </span>
<span class="number">1A03 1A03 </span><span class="colon">: </span><span class="hex">CD 4E 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> STRIN1            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MAKE ONE CHAR STRING</span>
<span class="number">1A06 1A06 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;      </span>
<span class="number">1A07 1A07 </span><span class="colon">: </span><span class="hex">5F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CHAR TO [D]</span>
<span class="number">1A08 1A08 </span><span class="colon">: </span><span class="hex">CD 19 10   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SETSTR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">STUFF IN DESCRIPTOR AND GOTO PUTNEW</span>
<span class="number">1A0B 1A0B </span><span class="colon">: </span><span class="hex">21 6D 03   </span><span class="source">(M80) </span><span class="label">NULRT: </span><span class="mnemonic"> ld     </span> hl,REDDY-1        <span class="comment">;      </span>
<span class="number">1A0E 1A0E </span><span class="colon">: </span><span class="hex">22 E4 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (FACLO),hl        <span class="comment">;      </span>
<span class="number">1A11 1A11 </span><span class="colon">: </span><span class="hex">3E 01      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,1               <span class="comment">;      </span>
<span class="number">1A13 1A13 </span><span class="colon">: </span><span class="hex">32 AB 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (VALTYP),a        <span class="comment">;;Set Type to String</span>
<span class="number">1A16 1A16 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;      </span>
<span class="number">1A17 1A17 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">1A18 1A18 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1A18 1A18 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">[M80] </span><span class="label">CHARCG:</span><span class="mnemonic"> push   </span> hl                <span class="comment">;      </span>
<span class="number">1A19 1A19 </span><span class="colon">: </span><span class="hex">21 0A 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,CHARC          <span class="comment">;      </span>
<span class="number">1A1C 1A1C </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET SAVED CHAR</span>
<span class="number">1A1D 1A1D </span><span class="colon">: </span><span class="hex">36 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),0            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CLEAR IT</span>
<span class="number">1A1F 1A1F </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IS THERE ONE?</span>
<span class="number">1A20 1A20 </span><span class="colon">: </span><span class="hex">CC 39 1A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> z,CNTCCN          <span class="comment">;{M80} SEE IF ITS CONTROL-C</span>
<span class="number">1A23 1A23 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;      </span>
<span class="number">1A24 1A24 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">1A25 1A25 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1A25 1A25 </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Check for ^C and ^S                    </span>
<span class="number">1A25 1A25 </span><span class="colon">= </span><span class="hex">CD 39 1A   </span><span class="source">[M80] </span><span class="label">ISCNTC:</span><span class="mnemonic"> call   </span> CNTCCN            <span class="comment">;{M80} SEE IF ITS CONTROL-C</span>
<span class="number">1A28 1A28 </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF NONE, RETURN</span>
<span class="number">1A29 1A29 </span><span class="colon">: </span><span class="hex">32 0A 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CHARC),a         <span class="comment">;{M80} SAVE CHAR</span>
<span class="number">1A2C 1A2C </span><span class="colon">: </span><span class="hex">FE 13      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> $13               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PAUSE? (^S)</span>
<span class="number">1A2E 1A2E </span><span class="colon">: </span><span class="hex">C0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nz                <span class="comment">;{M80} IF PAUSE, READ NEXT CHAR</span>
<span class="number">1A2F 1A2F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1A2F 1A2F </span><span class="colon">= </span><span class="hex">AF         </span><span class="source">[M80] </span><span class="label">TRYIN: </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;;Wait for character from keyboard</span>
<span class="number">1A30 1A30 </span><span class="colon">: </span><span class="hex">32 0A 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CHARC),a         <span class="comment">;{M80} CLEAR SAVED CHAR</span>
<span class="number">1A33 1A33 </span><span class="colon">: </span><span class="hex">CD 39 1A   </span><span class="source">(~~~) </span><span class="label">CONIN: </span><span class="mnemonic"> call   </span> CNTCCN            <span class="comment">;      </span>
<span class="number">1A36 1A36 </span><span class="colon">: </span><span class="hex">28 FB      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,CONIN           <span class="comment">;      </span>
<span class="number">1A38 1A38 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">1A39 1A39 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1A39 1A39 </span><span class="colon">: </span><span class="hex">CD 7E 1E   </span><span class="source">(~~~) </span><span class="label">CNTCCN:</span><span class="mnemonic"> call   </span> INCHRH            <span class="comment">;{M80} READ THE CHARACTER THAT WAS PRESSED</span>
<span class="number">1A3C 1A3C </span><span class="colon">: </span><span class="hex">FE 03      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 3                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">^C?</span>
<span class="number">1A3E 1A3E </span><span class="colon">: </span><span class="hex">20 0A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,CNTCCR         <span class="comment">;;No, set flags and return</span>
<span class="number">1A40 1A40 </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">; Check CLOAD Status and Enter Direct Mode</span>
<span class="number">1A40 1A40 </span><span class="colon">= </span><span class="hex">3A 5E 38   </span><span class="source">      </span><span class="label">WRMCON:</span><span class="mnemonic"> ld     </span> a,(CLFLAG)        <span class="comment">;;Get CLOAD Status</span>
<span class="number">1A43 1A43 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;;Is it 0?</span>
<span class="number">1A44 1A44 </span><span class="colon">: </span><span class="hex">CC BE 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> z,SCRTCH          <span class="comment">;;Bad CLOAD, do a NEW</span>
<span class="comment">;;;                          Bug Fix: STOPC does not reset Stack Pointer and Text Pointer</span>
<span class="number">1A47      </span><span class="colon">: </span><span class="hex">C3 20 0C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> STOPC             <span class="comment">;;Enter Direct Mode</span>
<span class="number">     1A47 </span><span class="colon">: </span><span class="hex">C3 CE 1F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> WRMFIN            <span class="comment">;;Finish Warm Start</span>
<span class="number">1A4A 1A4A </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">(~~~) </span><span class="label">CNTCCR:</span><span class="mnemonic"> or     </span> a                 <span class="comment">;;Set flags</span>
<span class="number">1A4B 1A4B </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">1A4C 1A4C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Pixel Graphics Routines - PSET, PRESET, and POINT</span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Pixel Graphics are rendered using Semigraphic characters in the</span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;ranges $A0 through $BF and $E0 through $FF of the character set.</span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;                                       </span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Semigraphic characters are split into a 2 wide by 3 high matrix</span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;of rectangles which are treated as pixels. The pixels inside the</span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;characters are numbered as follows:    </span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;                                       </span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;  0  1                                 </span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;  2  3                                 </span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;  4  5                                 </span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;                                       </span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;All pixel combinations where pixel 5 is off are in range $A0 - $BF</span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;while all combinations where pixel 5 is on are in range $E0 - $FF</span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;                                       </span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;The bit pattern for $A0 - $BF is %101x xxxx, where x is 0 or 1,</span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;and the pattern for $E0 - $FF is %111x xxxx, therefore the ASCII</span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;code for a given bit combination can be represented as:</span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;                                       </span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;  %X5X4321                             </span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;                                       </span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;where 1-5 is the state of that pixel (1 for on) and X is always 1.</span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;                                       </span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Semigraphics are the only characters with the bit pattern %1x1x xxxx,</span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;therefore ANDing the character code with $A0 will result in zero</span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;if it is not a semigraphic character.  </span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;                                       </span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;                                       </span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;The six pixels in each character cell are displayed in the same</span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;foreground color. The backround color is always black.</span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;                                       </span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Because a screen character is 8 by 8 screen pixels, the semigraphic</span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;pixels, while all 4 screen pixels wide, vary in height, whith the</span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;top and bottom pixels (0,1,4,5) being 3 screen pixels tall and the</span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;middle pixels (2,3) being 2 screen pixels tall.</span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;                                       </span>
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1A4C 1A4C </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">PRESET:</span><span class="mnemonic"> xor    </span> a                 <span class="comment">;</span><span class="source">[EBU] </span><span class="comment">PRESET FLAG</span>
<span class="number">1A4D 1A4D </span><span class="colon">: </span><span class="hex">18 02      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> PPRSET            <span class="comment">;      </span>
<span class="number">1A4F 1A4F </span><span class="colon">: </span><span class="hex">3E 01      </span><span class="source">      </span><span class="label">PSET:  </span><span class="mnemonic"> ld     </span> a,1               <span class="comment">;</span><span class="source">[EBU] </span><span class="comment">PSET FLAG</span>
<span class="number">1A51 1A51 </span><span class="colon">: </span><span class="hex">08         </span><span class="source">      </span><span class="label">PPRSET:</span><span class="mnemonic"> ex     </span> af,af'            <span class="comment">;;Save PSET/PRESET flag</span>
<span class="number">1A52 1A52 </span><span class="colon">: </span><span class="hex">CD 7F 1A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SCAND             <span class="comment">;;Parse (X,Y)</span>
<span class="number">1A55 1A55 </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Execute PSET/PRESET                    </span>
<span class="number">1A55 1A55 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Arguments: BC = X-coord, DE = Y-coord, A = 0 for PRESET, else PSET</span>
<span class="number">1A55 1A55 </span><span class="colon">= </span><span class="hex">CD 8E 1A   </span><span class="source">(~~~) </span><span class="label">PPRSDO:</span><span class="mnemonic"> call   </span> SCALXY            <span class="comment">;;Convert X,Y</span>
<span class="number">1A58 1A58 </span><span class="colon">: </span><span class="hex">28 02      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,RSETC           <span class="comment">;;Semigraphics at screen location?</span>
<span class="number">1A5A 1A5A </span><span class="colon">: </span><span class="hex">36 A0      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),$A0          <span class="comment">;;No, store base semigraphic</span>
<span class="number">1A5C 1A5C </span><span class="colon">: </span><span class="hex">08         </span><span class="source">(~~~) </span><span class="label">RSETC: </span><span class="mnemonic"> ex     </span> af,af'            <span class="comment">;;Restore PSET/PRESET flag</span>
<span class="number">1A5D 1A5D </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;;Set flags</span>
<span class="number">1A5E 1A5E </span><span class="colon">: </span><span class="hex">1A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(de)            <span class="comment">;;Get semigraphic offset</span>
<span class="number">1A5F 1A5F </span><span class="colon">: </span><span class="hex">20 03      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,PSETC          <span class="comment">;;PRESET?</span>
<span class="number">1A61 1A61 </span><span class="colon">: </span><span class="hex">2F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cpl    </span>                   <span class="comment">;;Invert to create mask</span>
<span class="number">1A62 1A62 </span><span class="colon">: </span><span class="hex">A6         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> and    </span> (hl)              <span class="comment">;;and clear offset bit</span>
<span class="number">1A63 1A63 </span><span class="colon">: </span><span class="hex">06         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $06               <span class="comment">;;"LD B," around next instruction</span>
<span class="number">1A64 1A64 </span><span class="colon">: </span><span class="hex">B6         </span><span class="source">(~~~) </span><span class="label">PSETC: </span><span class="mnemonic"> or     </span> (hl)              <span class="comment">;;If PRESET, set offset bit</span>
<span class="number">1A65 1A65 </span><span class="colon">: </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a            <span class="comment">;;Store at screen location</span>
<span class="number">1A66 1A66 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;;Restore text pointer</span>
<span class="number">1A67 1A67 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">1A68 1A68 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1A68 1A68 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;The PPOINT function                    </span>
<span class="number">1A68 1A68 </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">      </span><span class="label">POINT: </span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;;Eat character</span>
<span class="number">1A69 1A69 </span><span class="colon">: </span><span class="hex">CD 7F 1A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SCAND             <span class="comment">;;Parse (X,Y)</span>
<span class="number">1A6C 1A6C </span><span class="colon">: </span><span class="hex">CD 8E 1A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SCALXY            <span class="comment">;;Convert X,Y</span>
<span class="number">1A6F 1A6F </span><span class="colon">: </span><span class="hex">20 06      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,POINTZ         <span class="comment">;;Not semigraphics? Return 0</span>
<span class="number">1A71 1A71 </span><span class="colon">: </span><span class="hex">1A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(de)            <span class="comment">;;Get bit offset</span>
<span class="number">1A72 1A72 </span><span class="colon">: </span><span class="hex">A6         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> and    </span> (hl)              <span class="comment">;;Mask with screen character</span>
<span class="number">1A73 1A73 </span><span class="colon">: </span><span class="hex">16 01      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,1               <span class="comment">;      </span>
<span class="number">1A75 1A75 </span><span class="colon">: </span><span class="hex">20 02      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,POINTR         <span class="comment">;;Bit set? Return 1</span>
<span class="number">1A77 1A77 </span><span class="colon">: </span><span class="hex">16 00      </span><span class="source">      </span><span class="label">POINTZ:</span><span class="mnemonic"> ld     </span> d,0               <span class="comment">;      </span>
<span class="number">1A79 1A79 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">POINTR:</span><span class="mnemonic"> xor    </span> a                 <span class="comment">;;Clear Accumulator</span>
<span class="number">1A7A 1A7A </span><span class="colon">: </span><span class="hex">CD 23 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FLOATD             ;     
<span class="number">1A7D 1A7D </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;;Restore text pointer</span>
<span class="number">1A7E 1A7E </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">1A7F 1A7F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1A7F 1A7F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Get parameters for PSET, PRESET, POINT, and SOUND</span>
<span class="number">1A7F 1A7F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Scans program text in the format (x-coord,y-coord)</span>
<span class="number">1A7F 1A7F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Returns x-coord in BC, y-coord in DE   </span>
<span class="number">1A7F 1A7F </span><span class="colon">: </span><span class="hex">CF         </span><span class="source">[GWB] </span><span class="label">SCAND: </span><span class="mnemonic"> rst    </span> SYNCHK                   
<span class="number">1A80 1A80 </span><span class="colon">: </span><span class="hex">28         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> '('               <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">SKIP OVER OPEN PAREN</span>
<span class="number">1A81 1A81 </span><span class="colon">: </span><span class="hex">CD D0 1A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GETINT            <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">SCAN X INTO [D,E]</span>
<span class="number">1A84 1A84 </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">SAVE WHILE SCANNING Y</span>
<span class="number">1A85 1A85 </span><span class="colon">: </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK            <span class="comment">;      </span>
<span class="number">1A86 1A86 </span><span class="colon">: </span><span class="hex">2C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> ','               <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">SCAN COMMA</span>
<span class="number">1A87 1A87 </span><span class="colon">: </span><span class="hex">CD D0 1A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GETINT            <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">GET Y INTO [D,E]</span>
<span class="number">1A8A 1A8A </span><span class="colon">: </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK            <span class="comment">;      </span>
<span class="number">1A8B 1A8B </span><span class="colon">: </span><span class="hex">29         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> ')'               <span class="comment">;{GWB} SKIP OVER CLOSE PAREN</span>
<span class="number">1A8C 1A8C </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">GET BACK X INTO [B,C]</span>
<span class="number">1A8D 1A8D </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">1A8E1A8E  </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1A8E 1A8E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Convert PSET Coordinates to Screen Position and Character Mask</span>
<span class="number">1A8E 1A8E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;On entry: BC = X-Coordinate            </span>
<span class="number">1A8E 1A8E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;          DE = Y-Coordinate            </span>
<span class="number">1A8E 1A8E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;If BC > 71 or DE > 79, generates an FC error</span>
<span class="number">1A8E 1A8E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;On exit: A = Masked Character at Screen Offset</span>
<span class="number">1A8E 1A8E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;        DE = Address of Character Offset</span>
<span class="number">1A8E 1A8E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;        HL = Offset into Screen        </span>
<span class="number">1A8E 1A8E </span><span class="colon">: </span><span class="hex">E3         </span><span class="source">[GWB] </span><span class="label">SCALXY:</span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;;Save Registers</span>
<span class="number">1A8F 1A8F </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                       
<span class="number">1A90 1A90 </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;;BC=X Coordinate</span>
<span class="number">1A91 1A91 </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;;DE=Y Coordinate</span>
<span class="number">1A92 1A92 </span><span class="colon">: </span><span class="hex">21 47 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,71                    
<span class="number">1A95 1A95 </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;;If Y greater than 71</span>
<span class="number">1A96 1A96 </span><span class="colon">: </span><span class="hex">DA 97 06   </span><span class="source">(~~~) </span><span class="label">FCERRP:</span><span class="mnemonic"> jp     </span> c,FCERR           <span class="comment">;;Function Call error</span>
<span class="number">1A99 1A99 </span><span class="colon">: </span><span class="hex">21 4F 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,79                    
<span class="number">1A9C 1A9C </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                       
<span class="number">1A9D 1A9D </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                       
<span class="number">1A9E 1A9E </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;;If X greater than 79</span>
<span class="number">1A9F 1A9F </span><span class="colon">: </span><span class="hex">38 F5      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,FCERRP          <span class="comment">;;Function Call error</span>
<span class="number">1AA1 1AA1 </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                       
<span class="number">1AA2 1AA2 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                       
<span class="number">1AA3 1AA3 </span><span class="colon">: </span><span class="hex">21 28 30   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,SCREEN+40      <span class="comment">;;Starting screen offset</span>
<span class="number">1AA6 1AA6 </span><span class="colon">: </span><span class="hex">7B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,e               <span class="comment">;;A=Y Coordinate</span>
<span class="number">1AA7 1AA7 </span><span class="colon">: </span><span class="hex">11 28 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,40             <span class="comment">;;Screen width</span>
<span class="number">1AAA 1AAA </span><span class="colon">: </span><span class="hex">FE 03      </span><span class="source">      </span><span class="label">SCALPY:</span><span class="mnemonic"> cp     </span> 3                 <span class="comment">;;Less than 3?</span>
<span class="number">1AAC 1AAC </span><span class="colon">: </span><span class="hex">38 06      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,SCALEX          <span class="comment">;;Convert X</span>
<span class="number">1AAE 1AAE </span><span class="colon">: </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de             <span class="comment">;;Add a line to offset</span>
<span class="number">1AAF 1AAF </span><span class="colon">: </span><span class="hex">3D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> a                 <span class="comment">;;Subtract 3</span>
<span class="number">1AB0 1AB0 </span><span class="colon">: </span><span class="hex">3D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> a                 <span class="comment">;      </span>
<span class="number">1AB1 1AB1 </span><span class="colon">: </span><span class="hex">3D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> a                 <span class="comment">;      </span>
<span class="number">1AB2 1AB2 </span><span class="colon">: </span><span class="hex">18 F6      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> SCALPY            <span class="comment">;;Repeat</span>
<span class="number">1AB4 1AB4 </span><span class="colon">: </span><span class="hex">07         </span><span class="source">      </span><span class="label">SCALEX:</span><span class="mnemonic"> rlca   </span>                   <span class="comment">;;Multiply remainder by 2</span>
<span class="number">1AB5 1AB5 </span><span class="colon">: </span><span class="hex">CB 29      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sra    </span> c                 <span class="comment">;;Column = X-Coordinate / 2</span>
<span class="number">1AB7 1AB7 </span><span class="colon">: </span><span class="hex">30 01      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,SCALES         <span class="comment">;;Was it odd?</span>
<span class="number">1AB9 1AB9 </span><span class="colon">: </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a                 <span class="comment">;;Yes, add one to remainder</span>
<span class="number">1ABA 1ABA </span><span class="colon">: </span><span class="hex">09         </span><span class="source">      </span><span class="label">SCALES:</span><span class="mnemonic"> add    </span> hl,bc             <span class="comment">;;Add column to screen offset</span>
<span class="number">1ABB 1ABB </span><span class="colon">: </span><span class="hex">11 CA 1A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,BITTAB         <span class="comment">;      </span>
<span class="number">1ABE 1ABE </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">SCALEB:</span><span class="mnemonic"> or     </span> a                 <span class="comment">;;Check bit#</span>
<span class="number">1ABF 1ABF </span><span class="colon">: </span><span class="hex">28 04      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,SCALEC          <span class="comment">;;If not 0</span>
<span class="number">1AC1 1AC1 </span><span class="colon">: </span><span class="hex">13         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> de                <span class="comment">;;  Bump table pointer</span>
<span class="number">1AC2 1AC2 </span><span class="colon">: </span><span class="hex">3D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> a                 <span class="comment">;;  Decrement bit#</span>
<span class="number">1AC3 1AC3 </span><span class="colon">: </span><span class="hex">18 F9      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> SCALEB            <span class="comment">;;  and repeat</span>
<span class="number">1AC5 1AC5 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">SCALEC:</span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;;Get character at screen offset</span>
<span class="number">1AC6 1AC6 </span><span class="colon">: </span><span class="hex">F6 A0      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> $A0               <span class="comment">;;and return it with</span>
<span class="number">1AC8 1AC8 </span><span class="colon">: </span><span class="hex">AE         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> (hl)              <span class="comment">;;bits 5 and 7 cleared</span>
<span class="number">1AC9 1AC9 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">1ACA 1ACA </span><span class="colon">: </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1ACA 1ACA </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Semigraphic Pixel Index to Bit Mask Table</span>
<span class="number">1ACA 1ACA </span><span class="colon">= </span><span class="hex"> 01 02 04  </span><span class="source">      </span><span class="label">BITTAB:</span><span class="mnemonic"> byte   </span> %00000001,%00000010,%00000100
<span class="number">1ACE 1ACE </span><span class="colon">: </span><span class="hex">08 10 40   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> %00001000,%00010000,%01000000
<span class="number">1AD0 1AD0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1AD0 1AD0 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Parse an Integer                       </span>
<span class="number">1AD0 1AD0 </span><span class="colon">: </span><span class="hex">CD 85 09   </span><span class="source">      </span><span class="label">GETINT:</span><span class="mnemonic"> call   </span> FRMEVL            <span class="comment">;;Get a number</span>
<span class="number">1AD3 1AD3 </span><span class="colon">: </span><span class="hex">C3 82 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> FRCINT            <span class="comment">;;Convert to an Integer</span>
<span class="number">1AD6 1AD6 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1AD6 1AD6 </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">SOUND: </span><span class="mnemonic"> push   </span> de                       
<span class="number">1AD7 1AD7 </span><span class="colon">: </span><span class="hex">CD 7F 1A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SCAND                    
<span class="number">1ADA 1ADA </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                       
<span class="number">1ADB 1ADB </span><span class="colon">: </span><span class="hex">CD 64 1E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SOUNDS                   
<span class="number">1ADE 1ADE </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">1ADF 1ADF </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                       
<span class="number">1AE0 1AE0 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">1AE1 1AE1 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1AE1 1AE1 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Print CR/LF to printer                 </span>
<span class="number">1AE1 1AE1 </span><span class="colon">: </span><span class="hex">3E 0D      </span><span class="source">      </span><span class="label">LPCRLF:</span><span class="mnemonic"> ld     </span> a,13              <span class="comment">;;Send CR to printer</span>
<span class="number">1AE3 1AE3 </span><span class="colon">: </span><span class="hex">CD E8 1A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> LPTOUT            <span class="comment">;      </span>
<span class="number">1AE6 1AE6 </span><span class="colon">: </span><span class="hex">3E 0A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,10              <span class="comment">;;Send LF to printer</span>
<span class="number">1AE8 1AE8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">LPTOUT:</span><span class="mnemonic"> ;Primit</span>ive print character to printer routine
<span class="number">1AE8 1AE8 </span><span class="colon">: </span><span class="hex">F7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> HOOKDO            <span class="comment">;;Call Extended ROM Hook Routine</span>
<span class="number">1AE9 1AE9 </span><span class="colon">: </span><span class="hex">11         </span><span class="source">{~~~} </span><span class="label">HOOK17:</span><span class="mnemonic"> byte   </span> 17                <span class="comment">;      </span>
<span class="number">1AEA 1AEA </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;;Save character</span>
<span class="number">1AEB 1AEB </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;;Save Registers</span>
<span class="number">1AEC 1AEC </span><span class="colon">: </span><span class="hex">D9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> exx    </span>                   <span class="comment">;      </span>
<span class="number">1AED 1AED </span><span class="colon">: </span><span class="hex">DB FE      </span><span class="source">      </span><span class="label">LPTRDY:</span><span class="mnemonic"> in     </span> a,($FE)           <span class="comment">;;Wait for printer to be ready</span>
<span class="number">1AEF 1AEF </span><span class="colon">: </span><span class="hex">E6 01      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> and    </span> 1                 <span class="comment">;      </span>
<span class="number">1AF1 1AF1 </span><span class="colon">: </span><span class="hex">28 FA      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,LPTRDY          <span class="comment">;      </span>
<span class="number">1AF3 1AF3 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Send framed byte to printer port       </span>
<span class="number">1AF3 1AF3 </span><span class="colon">: </span><span class="hex">CD 08 1B   </span><span class="source">{~~~} </span><span class="label">OUTBYT:</span><span class="mnemonic"> call   </span> OUTBIZ            <span class="comment">;;Send Start Bit</span>
<span class="number">1AF6 1AF6 </span><span class="colon">: </span><span class="hex">1E 08      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,8               <span class="comment">;;Send 8 bits to printer</span>
<span class="number">1AF8 1AF8 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;;Restore character</span>
<span class="number">1AF9 1AF9 </span><span class="colon">: </span><span class="hex">CD 0A 1B   </span><span class="source">      </span><span class="label">OUTBTS:</span><span class="mnemonic"> call   </span> OUTBIT            <span class="comment">;;Send bit 0 to printer</span>
<span class="number">1AFC 1AFC </span><span class="colon">: </span><span class="hex">0F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rrca   </span>                   <span class="comment">;;Rotate bits</span>
<span class="number">1AFD 1AFD </span><span class="colon">: </span><span class="hex">1D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> e                 <span class="comment">;;Decrement counter and loop</span>
<span class="number">1AFE 1AFE </span><span class="colon">: </span><span class="hex">20 F9      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,OUTBTS         <span class="comment">;      </span>
<span class="number">1B00 1B00 </span><span class="colon">: </span><span class="hex">3E 01      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,1               <span class="comment">;;Send Stop Bit</span>
<span class="number">1B02 1B02 </span><span class="colon">: </span><span class="hex">CD 0A 1B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> OUTBIT            <span class="comment">;      </span>
<span class="number">1B05 1B05 </span><span class="colon">: </span><span class="hex">D9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> exx    </span>                   <span class="comment">;;Restore Registers</span>
<span class="number">1B06 1B06 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;      </span>
<span class="number">1B07 1B07 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">1B08 1B08 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1B08 1B08 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Send zero bit to printer port          </span>
<span class="number">1B08 1B08 </span><span class="colon">: </span><span class="hex">3E 00      </span><span class="source">      </span><span class="label">OUTBIZ:</span><span class="mnemonic"> ld     </span> a,0               <span class="comment">;Write zero bit to printer port</span>
<span class="number">1B0A 1B0A </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Send bit 0 of A to printer port        </span>
<span class="number">1B0A 1B0A </span><span class="colon">: </span><span class="hex">D3 FE      </span><span class="source">      </span><span class="label">OUTBIT:</span><span class="mnemonic"> out    </span> ($FE),a           <span class="comment">;;Write bit to printer port</span>
<span class="number">1B0C 1B0C </span><span class="colon">: </span><span class="hex">26 B1      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,177             <span class="comment">;;Wait 2,849 cycles (700 microseconds)</span>
<span class="number">1B0E 1B0E </span><span class="colon">: </span><span class="hex">25         </span><span class="source">      </span><span class="label">OUTDLY:</span><span class="mnemonic"> dec    </span> h                 <span class="comment">;;Wait [HL]*16+17 cycles</span>
<span class="number">1B0F 1B0F </span><span class="colon">: </span><span class="hex">20 FD      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,OUTDLY         <span class="comment">;      </span>
<span class="number">1B11 1B11 </span><span class="colon">: </span><span class="hex">00         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> nop    </span>                   <span class="comment">;      </span>
<span class="number">1B12 1B12 </span><span class="colon">: </span><span class="hex">00         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> nop    </span>                   <span class="comment">;      </span>
<span class="number">1B13 1B13 </span><span class="colon">: </span><span class="hex">00         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> nop    </span>                   <span class="comment">;      </span>
<span class="number">1B14 1B14 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">1B15 1B15 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1B15 1B15 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Copy Screen Contents to Printer        </span>
<span class="number">1B15 1B15 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Assumes printer line width is 40       </span>
<span class="number">1B15 1B15 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">COPY:  </span><span class="mnemonic"> push   </span> hl                <span class="comment">;;Save Text Pointer</span>
<span class="number">1B16 1B16 </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;      </span>
<span class="number">1B17 1B17 </span><span class="colon">: </span><span class="hex">CD E1 1A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> LPCRLF            <span class="comment">;;Print CR/LF</span>
<span class="number">1B1A 1B1A </span><span class="colon">: </span><span class="hex">21 28 30   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,SCREEN+40      <span class="comment">;;Row 1, Column 0</span>
<span class="number">1B1D 1B1D </span><span class="colon">: </span><span class="hex">11 E8 33   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,SCREEN+1000    <span class="comment">;;End of Screen</span>
<span class="number">1B20 1B20 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">(~~~) </span><span class="label">COPY1: </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;;Get Screen Character</span>
<span class="number">1B21 1B21 </span><span class="colon">: </span><span class="hex">CD E8 1A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> LPTOUT            <span class="comment">;;Print it</span>
<span class="number">1B24 1B24 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;;Bump pointer</span>
<span class="number">1B25 1B25 </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;;Are we there yet?</span>
<span class="number">1B26 1B26 </span><span class="colon">: </span><span class="hex">38 F8      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,COPY1           <span class="comment">;;No, do it again</span>
<span class="number">1B28 1B28 </span><span class="colon">: </span><span class="hex">CD E1 1A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> LPCRLF            <span class="comment">;;Print CR/LF</span>
<span class="number">1B2B 1B2B </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;      </span>
<span class="number">1B2C 1B2C </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;;Restore Text Pointer</span>
<span class="number">1B2D 1B2D </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">182E 182E </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1B2E 1B2E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Display Tape Control Messages          </span>
<span class="number">1B2E 1B2E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Displays control messages, then waits for RETURN key</span>
<span class="number">1B2E 1B2E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;PPLAY displays CLOAD message           </span>
<span class="number">1B2E 1B2E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;PRECRD displays CSAVE message          </span>
<span class="number">1B2E 1B2E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Preserves all registers                </span>
<span class="number">1B2E 1B2E </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">PPLAY: </span><span class="mnemonic"> push   </span> hl                <span class="comment">;;Save all Registers</span>
<span class="number">1B2F 1B2F </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;      </span>
<span class="number">1B30 1B30 </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;      </span>
<span class="number">1B31 1B31 </span><span class="colon">: </span><span class="hex">21 E8 1B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,PLAYT          <span class="comment">;;"Press <PLAY>"</span>
<span class="number">1B34 1B34 </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">PRETRN:</span><span class="mnemonic"> push   </span> af                <span class="comment">;;Entry point for "Press <RECORD>"</span>
<span class="number">1B35 1B35 </span><span class="colon">: </span><span class="hex">CD 9D 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> STROUT            <span class="comment">;      </span>
<span class="number">1B38 1B38 </span><span class="colon">: </span><span class="hex">21 B5 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,STARTT         <span class="comment">;      </span>
<span class="number">1B3B 1B3B </span><span class="colon">: </span><span class="hex">CD 9D 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> STROUT            <span class="comment">;;Print "Press RETURN key to start"</span>
<span class="number">1B3E 1B3E </span><span class="colon">: </span><span class="hex">CD 7E 1E   </span><span class="source">(~~~) </span><span class="label">PRETRL:</span><span class="mnemonic"> call   </span> INCHRH            <span class="comment">;      </span>
<span class="number">1B41 1B41 </span><span class="colon">: </span><span class="hex">FE 0D      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 13                <span class="comment">;      </span>
<span class="number">1B43 1B43 </span><span class="colon">: </span><span class="hex">20 F9      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,PRETRL         <span class="comment">;;Wait for RETURN key</span>
<span class="number">1B45 1B45 </span><span class="colon">: </span><span class="hex">CD EA 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CRDO              <span class="comment">;Print CR/LF</span>
<span class="number">1B48 1B48 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;      </span>
<span class="number">1B49 1B49 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;      </span>
<span class="number">1B4A 1B4A </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;      </span>
<span class="number">1B4B 1B4B </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;;Restore all Registers</span>
<span class="number">1B4C 1B4C </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">1B4D 1B4D </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1B4D 1B4D </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Read Byte from Tape                    </span>
<span class="number">1B4D 1B4D </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Returns Byte in A                      </span>
<span class="number">1B4D 1B4D </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;All other registers preserved          </span>
<span class="number">1B4D 1B4D </span><span class="colon">: </span><span class="hex">D9         </span><span class="source">      </span><span class="label">RDBYTE:</span><span class="mnemonic"> exx    </span>                   <span class="comment">;;Save index registers</span>
<span class="number">1B4E 1B4E </span><span class="colon">: </span><span class="hex">0E FC      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,252             <span class="comment">;;Tape I/O Port</span>
<span class="number">1B50 1B50 </span><span class="colon">: </span><span class="hex">CD 62 1B   </span><span class="source">(~~~) </span><span class="label">RDBYT2:</span><span class="mnemonic"> call   </span> RDBIT             <span class="comment">;;Wait for Start Bit (0)</span>
<span class="number">1B53 1B53 </span><span class="colon">: </span><span class="hex">38 FB      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,RDBYT2          <span class="comment">;      </span>
<span class="number">1B55 1B55 </span><span class="colon">: </span><span class="hex">26 08      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,8               <span class="comment">;;Now read 8 bits</span>
<span class="number">1B57 1B57 </span><span class="colon">: </span><span class="hex">CD 62 1B   </span><span class="source">      </span><span class="label">RDBYT3:</span><span class="mnemonic"> call   </span> RDBIT             <span class="comment">;;Read next bit</span>
<span class="number">1B5A 1B5A </span><span class="colon">: </span><span class="hex">CB 15      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rl     </span> l                 <span class="comment">;;Rotate into L</span>
<span class="number">1B5C 1B5C </span><span class="colon">: </span><span class="hex">25         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> h                 <span class="comment">;      </span>
<span class="number">1B5D 1B5D </span><span class="colon">: </span><span class="hex">20 F8      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,RDBYT3         <span class="comment">;;Loop until done</span>
<span class="number">1B5F 1B5F </span><span class="colon">: </span><span class="hex">7D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,l               <span class="comment">;;Copy byte into A</span>
<span class="number">1B60 1B60 </span><span class="colon">: </span><span class="hex">D9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> exx    </span>                   <span class="comment">;;Restore index registers</span>
<span class="number">1B61 1B61 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">1B62 1B62 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1B62 1B62 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Read Bit from Tape                     </span>
<span class="number">1B62 1B62 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Looks for a pulse train of two square waves with leading</span>
<span class="number">1B62 1B62 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;negative halves, then measures the total length of the</span>
<span class="number">1B62 1B62 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;square waves in cycles and compares it to a threshold</span>
<span class="number">1B62 1B62 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;of 2633 cycles, which (at a clock speed of 3.579545 MHz)</span>
<span class="number">1B62 1B62 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;equates to 1369 microseconds, about halfway between the</span>
<span class="number">1B62 1B62 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;1723 and 868 microseconds for a mark and space, respectively.</span>
<span class="number">1B62 1B62 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;                                        </span>
<span class="number">1B62 1B62 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;First wait for the leading negative half of the pulse train</span>
<span class="number">1B62 1B62 </span><span class="colon">: </span><span class="hex">ED 78      </span><span class="source">      </span><span class="label">RDBIT: </span><span class="mnemonic"> in     </span> a,(c)             <span class="comment">;;Read tape port</span>
<span class="number">1B64 1B64 </span><span class="colon">: </span><span class="hex">1F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rra    </span>                   <span class="comment">;;Rotate low bit into Carry</span>
<span class="number">1B65 1B65 </span><span class="colon">: </span><span class="hex">38 FB      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,RDBIT           <span class="comment">;;If 1, do it again</span>
<span class="number">1B66 1B66 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Then wait for the start of the positive half of the square wave</span>
<span class="number">1B67 1B67 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Ends 15 cycles after detection         </span>
<span class="number">1B67 1B67 </span><span class="colon">: </span><span class="hex">ED 78      </span><span class="source">(~~~) </span><span class="label">RDBIT2:</span><span class="mnemonic"> in     </span> a,(c)             <span class="comment">;;Read tape port</span>
<span class="number">1B69 1B69 </span><span class="colon">: </span><span class="hex">1F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rra    </span>                   <span class="comment">;;Rotate low bit into Carry</span>
<span class="number">1B6A 1B6A </span><span class="colon">: </span><span class="hex">30 FB      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,RDBIT2         <span class="comment">;;If 0, do it again</span>
<span class="number">1B6C 1B6C </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;;Start counter at 0</span>
<span class="number">1B6D 1B6D </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Now measure length of positive half    </span>
<span class="number">1B6D 1B6D </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Total cycles is iterations * 36 - 5    </span>
<span class="number">1B6D 1B6D </span><span class="colon">: </span><span class="hex">3C         </span><span class="source">(~~~) </span><span class="label">RDBIT3:</span><span class="mnemonic"> inc    </span> a                 <span class="comment">;;Increment counter</span>
<span class="number">1B6E 1B6E </span><span class="colon">: </span><span class="hex">ED 40      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> in     </span> b,(c)             <span class="comment">;;Read tape port</span>
<span class="number">1B70 1B70 </span><span class="colon">: </span><span class="hex">CB 18      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rr     </span> b                 <span class="comment">;;Rotate low bit into Carry</span>
<span class="number">1B72 1B72 </span><span class="colon">: </span><span class="hex">38 F9      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,RDBIT3          <span class="comment">;;If 1, do it again</span>
<span class="number">1B74 1B74 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Add length of negative half            </span>
<span class="number">1B74 1B74 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Total cycles is iterations * 36 - 5    </span>
<span class="number">1B74 1B74 </span><span class="colon">: </span><span class="hex">3C         </span><span class="source">(~~~) </span><span class="label">RDBIT4:</span><span class="mnemonic"> inc    </span> a                 <span class="comment">;;Increment counter</span>
<span class="number">1B75 1B75 </span><span class="colon">: </span><span class="hex">ED 40      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> in     </span> b,(c)             <span class="comment">;;Read tape port</span>
<span class="number">1B77 1B77 </span><span class="colon">: </span><span class="hex">CB 18      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rr     </span> b                 <span class="comment">;;Rotate low bit into Carry</span>
<span class="number">1B79 1B79 </span><span class="colon">: </span><span class="hex">30 F9      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,RDBIT4         <span class="comment">;;If 0, do it again</span>
<span class="number">1B7B 1B7B </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Check Total Length                     </span>
<span class="number">1B7B 1B7B </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Total length in cycles is A*36+5.      </span>
<span class="number">1B7B 1B7B </span><span class="colon">: </span><span class="hex">FE 49      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 73                <span class="comment">;;Set Carry if at least 2633 cycles</span>
<span class="number">1B7D 1B7D </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">1B7E 1B7E </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1B7E 1B7E </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">(~~~) </span><span class="label">RWARYR:</span><span class="mnemonic"> ret    </span>                   <span class="comment">;;Return from RWARYD</span>
<span class="number">1B7F 1B7F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1B7F 1B7F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;CSAVE tape control                     </span>
<span class="number">1B7F 1B7F </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">PRECRD:</span><span class="mnemonic"> push   </span> hl                <span class="comment">;;Save Registers</span>
<span class="number">1B80 1B80 </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;      </span>
<span class="number">1B81 1B81 </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;      </span>
<span class="number">1B82 1B82 </span><span class="colon">: </span><span class="hex">21 F7 1B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,RECORT         <span class="comment">;;"Press <RECORD>"</span>
<span class="number">1B85 1B85 </span><span class="colon">: </span><span class="hex">18 AD      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> PRETRN            <span class="comment">;;Wait for RETURN</span>
<span class="number">1B87 1B87 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1B87 1B87 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Write byte to tape twice               </span>
<span class="number">1B87 1B87 </span><span class="colon">: </span><span class="hex">CD 8A 1B   </span><span class="source">      </span><span class="label">WRBYT2:</span><span class="mnemonic"> call   </span> WRBYTE            <span class="comment">;;Call WRBYTE, then drop into it</span>
<span class="number">1B8A 1B8A </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1B8A 1B8A </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Write framed byte to tape              </span>
<span class="number">1B8A 1B8A </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Writes a start bit (0) , the bits of the byte, then two stop bits (1)</span>
<span class="number">1B8A 1B8A </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">WRBYTE:</span><span class="mnemonic"> push   </span> af                <span class="comment">;;Save all registers</span>
<span class="number">1B8B 1B8B </span><span class="colon">: </span><span class="hex">D9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> exx    </span>                   <span class="comment">;      </span>
<span class="number">1B8C 1B8C </span><span class="colon">: </span><span class="hex">0E FC      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,252             <span class="comment">;;Tape I/O Port</span>
<span class="number">1B8E 1B8E </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;;Save byte</span>
<span class="number">1B8F 1B8F </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;      </span>
<span class="number">1B90 1B90 </span><span class="colon">: </span><span class="hex">1E 01      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,1               <span class="comment">;      </span>
<span class="number">1B92 1B92 </span><span class="colon">: </span><span class="hex">CD A5 1B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> WRBITS            <span class="comment">;;Write start bit ($00)</span>
<span class="number">1B95 1B95 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;;Restore byte</span>
<span class="number">1B96 1B96 </span><span class="colon">: </span><span class="hex">1E 08      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,8               <span class="comment">;      </span>
<span class="number">1B98 1B98 </span><span class="colon">: </span><span class="hex">CD A5 1B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> WRBITS            <span class="comment">;;Write 8 bits of byte</span>
<span class="number">1B9B 1B9B </span><span class="colon">: </span><span class="hex">3E FF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,$FF             <span class="comment">;      </span>
<span class="number">1B9D 1B9D </span><span class="colon">: </span><span class="hex">1E 02      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,2               <span class="comment">;      </span>
<span class="number">1B9F 1B9F </span><span class="colon">: </span><span class="hex">CD A5 1B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> WRBITS            <span class="comment">;;Write stop bits (2 x $FF)</span>
<span class="number">1BA2 1BA2 </span><span class="colon">: </span><span class="hex">D9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> exx    </span>                   <span class="comment">;      </span>
<span class="number">1BA3 1BA3 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;;Restore all registers</span>
<span class="number">1BA4 1BA4 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">1BA5 1BA5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1BA5 1BA5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Write E most significant bits of A to Tape</span>
<span class="number">1BA5 1BA5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Each bit is written as two full square waves, negative half first</span>
<span class="number">1BA5 1BA5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;The leading negative half and trailing positive half frame the</span>
<span class="number">1BA5 1BA5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;(positive half first) square wave (that RDBITS looks for</span>
<span class="number">1BA5 1BA5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;A mark (1) and space (0) have wave lengths of 2078 and 4126 cycles,</span>
<span class="number">1BA5 1BA5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;respectively. At a clock speed of 3.579545 MHz, these equate to</span>
<span class="number">1BA5 1BA5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;1723 and 868 microseconds, resulting in approximate frequencies</span>
<span class="number">1BA5 1BA5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;of 1723 Hz for a mark and 868 Hz for a space.</span>
<span class="number">1BA5 1BA5 </span><span class="colon">: </span><span class="hex">17         </span><span class="source">      </span><span class="label">WRBITS:</span><span class="mnemonic"> rla    </span>                   <span class="comment">;;Rotate MSB into Carry</span>
<span class="number">1BA6 1BA6 </span><span class="colon">: </span><span class="hex">2E 40      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,64              <span class="comment">;;Preset Pulse Length 1,039 cycles for a 1</span>
<span class="number">1BA8 1BA8 </span><span class="colon">: </span><span class="hex">38 02      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,WRBIT2          <span class="comment">;;Was bit a 1?</span>
<span class="number">1BAA 1BAA </span><span class="colon">: </span><span class="hex">2E 80      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,128             <span class="comment">;;No, set Pulse Length 2,063 cycles for a 0</span>
<span class="number">1BAC 1BAC </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Write Bit with Pulse Length L   ;      </span>
<span class="number">1BAC 1BAC </span><span class="colon">: </span><span class="hex">06 04      </span><span class="source">      </span><span class="label">WRBIT2:</span><span class="mnemonic"> ld     </span> b,4               <span class="comment">;;Countdown - + - +</span>
<span class="number">1BAE 1BAE </span><span class="colon">: </span><span class="hex">ED 41      </span><span class="source">      </span><span class="label">WRBIT3:</span><span class="mnemonic"> out    </span> (c),b             <span class="comment">;;Writing 0, 1, 0, 1</span>
<span class="number">1BB0 1BB0 </span><span class="colon">: </span><span class="hex">65         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,l               <span class="comment">;;Each pulse is L*16+15 cycles</span>
<span class="number">1BB1 1BB1 </span><span class="colon">: </span><span class="hex">25         </span><span class="source">      </span><span class="label">WRBIT4:</span><span class="mnemonic"> dec    </span> h                 <span class="comment">;                4</span>
<span class="number">1BB2 1BB2 </span><span class="colon">: </span><span class="hex">20 FD      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,WRBIT4         <span class="comment">;      </span>
<span class="number">1BB4 1BB4 </span><span class="colon">: </span><span class="hex">05         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> b                 <span class="comment">;      </span>
<span class="number">1BB5 1BB5 </span><span class="colon">: </span><span class="hex">20 F7      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,WRBIT3         <span class="comment">;;Write next pulse</span>
<span class="number">1BB7 1BB7 </span><span class="colon">: </span><span class="hex">1D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> e                 <span class="comment">;      </span>
<span class="number">1BB8 1BB8 </span><span class="colon">: </span><span class="hex">20 EB      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,WRBITS         <span class="comment">;;Write next bit</span>
<span class="number">1BBA 1BBA </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">1BBB 1BBB </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;;Orphan instruction</span>
<span class="number">1BBC 1BBC </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1BBC 1BBC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Write SYNC to tape                     </span>
<span class="number">1BBC 1BBC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Writes 12 $FF then a $00               </span>
<span class="number">1BBC 1BBC </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;All registers preserved                </span>
<span class="number">1BBC 1BBC </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">WRSYNC:</span><span class="mnemonic"> push   </span> af                <span class="comment">;;Save registers</span>
<span class="number">1BBD 1BBD </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;      </span>
<span class="number">1BBE 1BBE </span><span class="colon">: </span><span class="hex">06 0C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,12              <span class="comment">;      </span>
<span class="number">1BC0 1BC0 </span><span class="colon">: </span><span class="hex">3E FF      </span><span class="source">      </span><span class="label">WRSYN2:</span><span class="mnemonic"> ld     </span> a,$FF             <span class="comment">;      </span>
<span class="number">1BC2 1BC2 </span><span class="colon">: </span><span class="hex">CD 8A 1B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> WRBYTE            <span class="comment">;;Write $FF to tape</span>
<span class="number">1BC5 1BC5 </span><span class="colon">: </span><span class="hex">10 F9      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> djnz   </span> WRSYN2            <span class="comment">;;Do it 11 more times</span>
<span class="number">1BC7 1BC7 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;      </span>
<span class="number">1BC8 1BC8 </span><span class="colon">: </span><span class="hex">CD 8A 1B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> WRBYTE            <span class="comment">;;Write $00 to tape</span>
<span class="number">1BCB 1BCB </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;      </span>
<span class="number">1BCC 1BCC </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;;Restore registers</span>
<span class="number">1BCD 1BCD </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">1BCE 1BCE </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1BCE 1BCE </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Read SYNC from tape                    </span>
<span class="number">1BCE 1BCE </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Reads bytes until it gets 6 $FF followed by a $00</span>
<span class="number">1BCE 1BCE </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;All registers preserved                </span>
<span class="number">1BCE 1BCE </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">RDSYNC:</span><span class="mnemonic"> push   </span> af                <span class="comment">;;Save registers</span>
<span class="number">1BCF 1BCF </span><span class="colon">: </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;      </span>
<span class="number">1BD0 1BD0 </span><span class="colon">: </span><span class="hex">06 06      </span><span class="source">(~~~) </span><span class="label">RDSYN1:</span><span class="mnemonic"> ld     </span> b,6               <span class="comment">;;Do 6 times</span>
<span class="number">1BD2 1BD2 </span><span class="colon">: </span><span class="hex">CD 4D 1B   </span><span class="source">(~~~) </span><span class="label">RDSYN2:</span><span class="mnemonic"> call   </span> RDBYTE            <span class="comment">;      </span>
<span class="number">1BD5 1BD5 </span><span class="colon">: </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a                 <span class="comment">;      </span>
<span class="number">1BD6 1BD6 </span><span class="colon">: </span><span class="hex">20 F8      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,RDSYN1         <span class="comment">;;If not $FF, start all over</span>
<span class="number">1BD8 1BD8 </span><span class="colon">: </span><span class="hex">10 F8      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> djnz   </span> RDSYN2            <span class="comment">;;Repeat until 6 $FF read</span>
<span class="number">1BDA 1BDA </span><span class="colon">: </span><span class="hex">CD 4D 1B   </span><span class="source">(~~~) </span><span class="label">RDSYN3:</span><span class="mnemonic"> call   </span> RDBYTE            <span class="comment">;      </span>
<span class="number">1BDD 1BDD </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;      </span>
<span class="number">1BDE 1BDE </span><span class="colon">: </span><span class="hex">28 05      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,RDSYN4          <span class="comment">;;If $00, we are done</span>
<span class="number">1BE0 1BE0 </span><span class="colon">: </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a                 <span class="comment">;      </span>
<span class="number">1BE1 1BE1 </span><span class="colon">: </span><span class="hex">28 F7      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,RDSYN3          <span class="comment">;;If $FF, read another byte</span>
<span class="number">1BE3 1BE3 </span><span class="colon">: </span><span class="hex">18 EB      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> RDSYN1            <span class="comment">;;Otherwise, start all over</span>
<span class="number">1BE5 1BE5 </span><span class="colon">: </span><span class="hex">C1         </span><span class="source">(~~~) </span><span class="label">RDSYN4:</span><span class="mnemonic"> pop    </span> bc                <span class="comment">;      </span>
<span class="number">1BE6 1BE6 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;;Restore registers</span>
<span class="number">1BE7 1BE7 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">1BE8 1BE8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1BE8 1BE8 </span><span class="colon">: </span><span class="hex">50 72 65 73</span><span class="source">[~~~] </span><span class="label">PLAYT: </span><span class="mnemonic"> byte   </span> "Press <PLAY>",13,10,0          ;
<span class="number">1BEC 1BEC </span><span class="colon">: </span><span class="hex">73 20 3C 50</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1BF0 1BF0 </span><span class="colon">: </span><span class="hex">4C 41 59 3E</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1BF4 1BF4 </span><span class="colon">: </span><span class="hex">0D 0A 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1BF7 1BF7 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1BF7 1BF7 </span><span class="colon">: </span><span class="hex">50 72 65 73</span><span class="source">[~~~] </span><span class="label">RECORT:</span><span class="mnemonic"> byte   </span> "Press <RECORD>",13,10,0        ;
<span class="number">1BFB 1BFB </span><span class="colon">: </span><span class="hex">73 20 3C 52</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1BFF 1BFF </span><span class="colon">: </span><span class="hex">45 43 4F 52</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1C03 1C03 </span><span class="colon">: </span><span class="hex">44 3E 0D 0A</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1C07 1C07 </span><span class="colon">: </span><span class="hex">00         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1C08 1C08 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1C08 1C08 </span><span class="colon">: </span><span class="hex">F7         </span><span class="source">[~~~] </span><span class="label">CSAVE: </span><span class="mnemonic"> rst    </span> HOOKDO            <span class="comment">;      </span>
<span class="number">1C09 1C09 </span><span class="colon">: </span><span class="hex">15         </span><span class="source">{~~~} </span><span class="label">HOOK21:</span><span class="mnemonic"> byte   </span> 21                <span class="comment">;      </span>
<span class="number">1C0A 1C0A </span><span class="colon">: </span><span class="hex">FE AA      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> MULTK             <span class="comment">;;If * Token</span>
<span class="number">1C0C 1C0C </span><span class="colon">: </span><span class="hex">CA 62 0C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,CSARY           <span class="comment">;;Do CSAVE*</span>
<span class="number">1C0F 1C0F </span><span class="colon">: </span><span class="hex">CD B8 1C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> NAMFIL            <span class="comment">;;Scan filename</span>
<span class="number">1C12 1C12 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;;Save text pointer</span>
<span class="number">1C13 1C13 </span><span class="colon">: </span><span class="hex">CD 25 1D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> WRHEAP            <span class="comment">;      </span>
<span class="number">1C16 1C16 </span><span class="colon">: </span><span class="hex">2A 4F 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(TXTTAB)       <span class="comment">;      </span>
<span class="number">1C19 1C19 </span><span class="colon">: </span><span class="hex">CD 38 1D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CSAVEP            <span class="comment">;      </span>
<span class="number">1C1C 1C1C </span><span class="colon">: </span><span class="hex">06 0F      </span><span class="source">(~~~) </span><span class="label">WRTAIL:</span><span class="mnemonic"> ld     </span> b,15              <span class="comment">;;Write 15 $00 to tape</span>
<span class="number">1C1E 1C1E </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;      </span>
<span class="number">1C1F 1C1F </span><span class="colon">: </span><span class="hex">CD 8A 1B   </span><span class="source">(~~~) </span><span class="label">CSAVE3:</span><span class="mnemonic"> call   </span> WRBYTE            <span class="comment">;      </span>
<span class="number">1C22 1C22 </span><span class="colon">: </span><span class="hex">10 FB      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> djnz   </span> CSAVE3            <span class="comment">;      </span>
<span class="number">1C24 1C24 </span><span class="colon">: </span><span class="hex">01 40 1F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> bc,8000           <span class="comment">;      </span>
<span class="number">1C27 1C27 </span><span class="colon">: </span><span class="hex">CD 4B 1D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SLEEP             <span class="comment">;;Delay 200,000 cycles ~ 50 milliseconds</span>
<span class="number">1C2A 1C2A </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;;Restore Text Pointer</span>
<span class="number">1C2B 1C2B </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">1C2C 1C2C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1C2C 1C2C </span><span class="colon">: </span><span class="hex">F7         </span><span class="source">[~~~] </span><span class="label">CLOAD: </span><span class="mnemonic"> rst    </span> HOOKDO                   
<span class="number">1C2D 1C2D </span><span class="colon">: </span><span class="hex">14         </span><span class="source">{~~~} </span><span class="label">HOOK20:</span><span class="mnemonic"> byte   </span> 20                       
<span class="number">1C2E 1C2E </span><span class="colon">: </span><span class="hex">FE AA      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> MULTK             <span class="comment">;;Check for token after CLOAD</span>
<span class="number">1C30 1C30 </span><span class="colon">: </span><span class="hex">CA 63 0C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,CLARY           <span class="comment">;;If *, CLOAD variable</span>
<span class="number">1C33 1C33 </span><span class="colon">: </span><span class="hex">D6 95      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> PRINTK            <span class="comment">;      </span>
<span class="number">1C35 1C35 </span><span class="colon">: </span><span class="hex">28 02      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,CLOADQ          <span class="comment">;;If ?, A will be $FF (verify)</span>
<span class="number">1C37 1C37 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;;otherwise it will be 0 (load)</span>
<span class="number">1C38 1C38 </span><span class="colon">: </span><span class="hex">01         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $01               <span class="comment">;;"LD BC," over two instructions</span>
<span class="number">1C39 1C39 </span><span class="colon">: </span><span class="hex">2F         </span><span class="source">(~~~) </span><span class="label">CLOADQ:</span><span class="mnemonic"> cpl    </span>                   <span class="comment">;;A = $FF</span>
<span class="number">1C3A 1C3A </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;;Bump text pointer</span>
<span class="number">1C3B 1C3B </span><span class="colon">: </span><span class="hex">FE 01      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 1                 <span class="comment">;;If A is 0, set C, else clear C</span>
<span class="number">1C3D 1C3D </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;;Save A and C</span>
<span class="number">1C3E 1C3E </span><span class="colon">: </span><span class="hex">3E FF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,$FF             <span class="comment">;      </span>
<span class="number">1C40 1C40 </span><span class="colon">: </span><span class="hex">32 5E 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CLFLAG),a        <span class="comment">;;Set Cload Flag to $FF</span>
<span class="number">1C43 1C43 </span><span class="colon">: </span><span class="hex">CD B1 1C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> NAMFIN            <span class="comment">;;Get FILNAM if present</span>
<span class="number">1C46 1C46 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Look for Filename                      </span>
<span class="number">1C46 1C46 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Reads tape until a file matching FILNAM is found</span>
<span class="number">1C46 1C46 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;If first character of FILNAM is NUL, matches next file on tape</span>
<span class="number">1C46 1C46 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">(~~~) </span><span class="label">CLOADF:</span><span class="mnemonic"> xor    </span> a                 <span class="comment">;      </span>
<span class="number">1C47 1C47 </span><span class="colon">: </span><span class="hex">32 5D 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (INSYNC),a        <span class="comment">;;Clear SYNC flag</span>
<span class="number">1C4A 1C4A </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;      </span>
<span class="number">1C4B 1C4B </span><span class="colon">: </span><span class="hex">CD 2E 1B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> PPLAY             <span class="comment">;;"Press <PLAY>", wait for RETURN</span>
<span class="number">1C4E 1C4E </span><span class="colon">: </span><span class="hex">CD D9 1C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> RDHEAD            <span class="comment">;      </span>
<span class="number">1C51 1C51 </span><span class="colon">: </span><span class="hex">21 57 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,FILNAF         <span class="comment">;;Filename found on tape</span>
<span class="number">1C54 1C54 </span><span class="colon">: </span><span class="hex">CD ED 1C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CMPNAM            <span class="comment">;;Compare with FILNAM</span>
<span class="number">1C57 1C57 </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;      </span>
<span class="number">1C58 1C58 </span><span class="colon">: </span><span class="hex">28 12      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,CLOADC          <span class="comment">;;If they match, continue CLOAD</span>
<span class="number">1C5A 1C5A </span><span class="colon">: </span><span class="hex">21 06 1D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,SKIPT          <span class="comment">;      </span>
<span class="number">1C5D 1C5D </span><span class="colon">: </span><span class="hex">CD 0D 1D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> OUTNAM            <span class="comment">;;"Skip: " + NAMFIL</span>
<span class="number">1C60 1C60 </span><span class="colon">: </span><span class="hex">06 0A      </span><span class="source">(~~~) </span><span class="label">CLOADE:</span><span class="mnemonic"> ld     </span> b,10              <span class="comment">;;???Skip to end of file</span>
<span class="number">1C62 1C62 </span><span class="colon">: </span><span class="hex">CD 4D 1B   </span><span class="source">(~~~) </span><span class="label">CLOAD2:</span><span class="mnemonic"> call   </span> RDBYTE            <span class="comment">;      </span>
<span class="number">1C65 1C65 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;      </span>
<span class="number">1C66 1C66 </span><span class="colon">: </span><span class="hex">20 F8      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,CLOADE         <span class="comment">;;Not $00, start over</span>
<span class="number">1C68 1C68 </span><span class="colon">: </span><span class="hex">10 F8      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> djnz   </span> CLOAD2            <span class="comment">;;Loop until 10 in a row</span>
<span class="number">1C6A 1C6A </span><span class="colon">: </span><span class="hex">18 DA      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> CLOADF            <span class="comment">;;Check next file</span>
<span class="number">1C6C 1C6C </span><span class="colon">: </span><span class="hex">21 FE 1C   </span><span class="source">(~~~) </span><span class="label">CLOADC:</span><span class="mnemonic"> ld     </span> hl,FOUNDT         <span class="comment">;      </span>
<span class="number">1C6F 1C6F </span><span class="colon">: </span><span class="hex">CD 0D 1D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> OUTNAM            <span class="comment">;;"Found:" + NAMFIL</span>
<span class="number">1C72 1C72 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;;Restore mode</span>
<span class="number">1C73 1C73 </span><span class="colon">: </span><span class="hex">32 E4 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (FACLO),a         <span class="comment">;;and aave it</span>
<span class="number">1C76 1C76 </span><span class="colon">: </span><span class="hex">DC BE 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> c,SCRTCH          <span class="comment">;;If not CLOAD?, do a NEW</span>
<span class="number">1C79 1C79 </span><span class="colon">: </span><span class="hex">3A E4 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(FACLO)         <span class="comment">;;Get mode back</span>
<span class="number">1C7C 1C7C </span><span class="colon">: </span><span class="hex">FE 01      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 1                 <span class="comment">;;and check it</span>
<span class="number">1C7E 1C7E </span><span class="colon">: </span><span class="hex">32 5E 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CLFLAG),a        <span class="comment">;;Store in FlagE</span>
<span class="number">1C81 1C81 </span><span class="colon">: </span><span class="hex">2A 4F 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(TXTTAB)       <span class="comment">;;Set pointer to BASIC program</span>
<span class="number">1C84 1C84 </span><span class="colon">: </span><span class="hex">CD 51 1D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CLOADP            <span class="comment">;;Load/verify program</span>
<span class="number">1C87 1C87 </span><span class="colon">: </span><span class="hex">20 11      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,CLOADV         <span class="comment">;;Check CLOAD? status</span>
<span class="number">1C89 1C89 </span><span class="colon">: </span><span class="hex">22 D6 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (VARTAB),hl       <span class="comment">;;Set end of program</span>
<span class="number">1C8C 1C8C </span><span class="colon">: </span><span class="hex">21 6E 03   </span><span class="source">(~~~) </span><span class="label">CLOADR:</span><span class="mnemonic"> ld     </span> hl,REDDY          <span class="comment">;      </span>
<span class="number">1C8F 1C8F </span><span class="colon">: </span><span class="hex">CD 9D 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> STROUT            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PRINT "OK" PREMATURELY</span>
<span class="number">1C92 1C92 </span><span class="colon">: </span><span class="hex">3E FF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,$FF             <span class="comment">;      </span>
<span class="number">1C94 1C94 </span><span class="colon">: </span><span class="hex">32 5E 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CLFLAG),a        <span class="comment">;;Set FlagE to $FF</span>
<span class="number">1C97 1C97 </span><span class="colon">: </span><span class="hex">C3 80 04   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> FINI              <span class="comment">;      </span>
<span class="number">1C9A 1C9A </span><span class="colon">: </span><span class="hex">23         </span><span class="source">(~~~) </span><span class="label">CLOADV:</span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">1C9B 1C9B </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;      </span>
<span class="number">1C9C 1C9C </span><span class="colon">: </span><span class="hex">2A D6 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(VARTAB)       <span class="comment">;      </span>
<span class="number">1C9F 1C9F </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;;Text pointer past end of program?</span>
<span class="number">1CA0 1CA0 </span><span class="colon">: </span><span class="hex">38 EA      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,CLOADR          <span class="comment">;;Yes, CLOAD? successful</span>
<span class="number">1CA2 1CA2 </span><span class="colon">: </span><span class="hex">21 AB 1C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,BADT           <span class="comment">;      </span>
<span class="number">1CA5 1CA5 </span><span class="colon">: </span><span class="hex">CD 9D 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> STROUT            <span class="comment">;;"Bad"</span>
<span class="number">1CA8 1CA8 </span><span class="colon">: </span><span class="hex">C3 01 04   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> STPRDY            <span class="comment">;;Abort to direct mode</span>
<span class="number">1CAB 1CAB </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1CAB      </span><span class="colon">: </span><span class="hex">42 61 E4   </span><span class="source">      </span><span class="label">BADT:  </span><span class="mnemonic"> byte   </span> "Ba",'d'+128             
<span class="number">     1CAB </span><span class="colon">: </span><span class="hex">42 61 64 0D</span><span class="source">      </span><span class="label">BADT:  </span><span class="mnemonic"> byte   </span> "Bad"                    
<span class="number">1CAE 1CAE </span><span class="colon">: </span><span class="hex">0D 0A 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 13,10,0                  
<span class="number">1CB1 1CB1 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Scan a Filename for CLOAD command      </span>
<span class="number">1CB1 1CB1 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">NAMFIN:</span><span class="mnemonic"> xor    </span> a                 <span class="comment">;;Store 0</span>
<span class="number">1CB2 1CB2 </span><span class="colon">: </span><span class="hex">32 51 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (FILNAM),a        <span class="comment">;;in first character of FILNAM</span>
<span class="number">1CB5 1CB5 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;;Backup text pointer</span>
<span class="number">1CB6 1CB6 </span><span class="colon">: </span><span class="hex">D7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;;Check for terminator</span>
<span class="number">1CB7 1CB7 </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;;If found, return</span>
<span class="number">1CB8 1CB8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1CB8 1CB8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;{GWB} Scan a Filename for CSAVE command </span>
<span class="number">1CB8 1CB8 </span><span class="colon">: </span><span class="hex">CD 85 09   </span><span class="source">[GWB] </span><span class="label">NAMFIL:</span><span class="mnemonic"> call   </span> FRMEVL            <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">Evaluate string</span>
<span class="number">1CBB 1CBB </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">save text pointer</span>
<span class="number">1CBC 1CBC </span><span class="colon">: </span><span class="hex">CD 06 10   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> ASC2              <span class="comment">;;DE = Pointer to File Name</span>
<span class="number">1CBF 1CBF </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;      </span>
<span class="number">1CC0 1CC0 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;      </span>
<span class="number">1CC1 1CC1 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;      </span>
<span class="number">1CC2 1CC2 </span><span class="colon">: </span><span class="hex">46         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,(hl)            <span class="comment">;      </span>
<span class="number">1CC3 1CC3 </span><span class="colon">: </span><span class="hex">0E 06      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,6               <span class="comment">;;Maximum File Name Length</span>
<span class="number">1CC5 1CC5 </span><span class="colon">: </span><span class="hex">21 51 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,FILNAM         <span class="comment">;      </span>
<span class="number">1CC8 1CC8 </span><span class="colon">: </span><span class="hex">1A         </span><span class="source">(~~~) </span><span class="label">NAMFL1:</span><span class="mnemonic"> ld     </span> a,(de)            <span class="comment">;;Copy String to FILNAM</span>
<span class="number">1CC9 1CC9 </span><span class="colon">: </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a            <span class="comment">;      </span>
<span class="number">1CCA 1CCA </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">1CCB 1CCB </span><span class="colon">: </span><span class="hex">13         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> de                <span class="comment">;      </span>
<span class="number">1CCC 1CCC </span><span class="colon">: </span><span class="hex">0D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> c                 <span class="comment">;      </span>
<span class="number">1CCD 1CCD </span><span class="colon">: </span><span class="hex">28 08      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,NAMFL3          <span class="comment">;      </span>
<span class="number">1CCF 1CCF </span><span class="colon">: </span><span class="hex">10 F7      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> djnz   </span> NAMFL1            <span class="comment">;      </span>
<span class="number">1CD1 1CD1 </span><span class="colon">: </span><span class="hex">41         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,c               <span class="comment">;      </span>
<span class="number">1CD2 1CD2 </span><span class="colon">: </span><span class="hex">36 00      </span><span class="source">(~~~) </span><span class="label">NAMFL2:</span><span class="mnemonic"> ld     </span> (hl),0            <span class="comment">;;Pad with NULs to length of 6</span>
<span class="number">1CD4 1CD4 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">1CD5 1CD5 </span><span class="colon">: </span><span class="hex">10 FB      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> djnz   </span> NAMFL2            <span class="comment">;      </span>
<span class="number">1CD7 1CD7 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">(~~~) </span><span class="label">NAMFL3:</span><span class="mnemonic"> pop    </span> hl                <span class="comment">;      </span>
<span class="number">1CD8 1CD8 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">1CD9 1CD9 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1CD9 1CD9 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Read File Header from Tape             </span>
<span class="number">1CD9 1CD9 </span><span class="colon">: </span><span class="hex">CD CE 1B   </span><span class="source">      </span><span class="label">RDHEAD:</span><span class="mnemonic"> call   </span> RDSYNC            <span class="comment">;;Wait for SYNC</span>
<span class="number">1CDC 1CDC </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">{~~~} </span><span class="label">RDNAME:</span><span class="mnemonic"> xor    </span> a                 <span class="comment">;      </span>
<span class="number">1CDD 1CDD </span><span class="colon">: </span><span class="hex">32 5D 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (INSYNC),a        <span class="comment">;;Clear SYNC flag</span>
<span class="number">1CE0 1CE0 </span><span class="colon">: </span><span class="hex">21 57 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,FILNAF         <span class="comment">;;Read 6 bytes into FINLAF</span>
<span class="number">1CE3 1CE3 </span><span class="colon">: </span><span class="hex">06 06      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,6               <span class="comment">;      </span>
<span class="number">1CE5 1CE5 </span><span class="colon">: </span><span class="hex">CD 4D 1B   </span><span class="source">(~~~) </span><span class="label">RDSTRL:</span><span class="mnemonic"> call   </span> RDBYTE            <span class="comment">;;Read B characters to [HL] from tapw</span>
<span class="number">1CE8 1CE8 </span><span class="colon">: </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a            <span class="comment">;      </span>
<span class="number">1CE9 1CE9 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">1CEA 1CEA </span><span class="colon">: </span><span class="hex">10 F9      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> djnz   </span> RDSTRL            <span class="comment">;      </span>
<span class="number">1CEC 1CEC </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">1CED 1CED </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1CED 1CED </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Compare Filename                       </span>
<span class="number">1CED 1CED </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Compares the 6 bytes string to by HL to FILNAM</span>
<span class="number">1CED 1CED </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Returns Z Set if the two are equal or FILNAM is an empty string</span>
<span class="number">1CED 1CED </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Otherwise, return Z Clear              </span>
<span class="number">1CED 1CED </span><span class="colon">: </span><span class="hex">01 51 38   </span><span class="source">      </span><span class="label">CMPNAM:</span><span class="mnemonic"> ld     </span> bc,FILNAM         <span class="comment">;      </span>
<span class="number">1CED 1CED </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Entry Point to Compare FILNAM to String pointed to by BC</span>
<span class="number">1CF0 1CF0 </span><span class="colon">: </span><span class="hex">1E 06      </span><span class="source">{---} </span><span class="label">CMPNAF:</span><span class="mnemonic"> ld     </span> e,6               <span class="comment">;;Check 6 characters</span>
<span class="number">1CF2 1CF2 </span><span class="colon">: </span><span class="hex">0A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(bc)            <span class="comment">;;     </span>
<span class="number">1CF3 1CF3 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;;First character of FILNAM</span>
<span class="number">1CF4 1CF4 </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;;If NUL return Equsl</span>
<span class="number">1CF5 1CF5 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Compare E characters at [BC] against [HL]</span>
<span class="number">1CF5 1CF5 </span><span class="colon">: </span><span class="hex">0A         </span><span class="source">(~~~) </span><span class="label">CPSTRL:</span><span class="mnemonic"> ld     </span> a,(bc)            <span class="comment">;;Compare FILNAM character</span>
<span class="number">1CF6 1CF6 </span><span class="colon">: </span><span class="hex">BE         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> (hl)              <span class="comment">;;with FILNAF character</span>
<span class="number">1CF7 1CF7 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;;Bump pointers</span>
<span class="number">1CF8 1CF8 </span><span class="colon">: </span><span class="hex">03         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> bc                <span class="comment">;      </span>
<span class="number">1CF9 1CF9 </span><span class="colon">: </span><span class="hex">C0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nz                <span class="comment">;;If different, return Not Equal</span>
<span class="number">1CFA 1CFA </span><span class="colon">: </span><span class="hex">1D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> e                 <span class="comment">;      </span>
<span class="number">1CFB 1CFB </span><span class="colon">: </span><span class="hex">20 F8      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,CPSTRL         <span class="comment">;;Decrememt counter and loop</span>
<span class="number">1CFD 1CFD </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">1CFE 1CFE </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1CFE 1CFE </span><span class="colon">: </span><span class="hex">46 6F 75 6E</span><span class="source">[~~~] </span><span class="label">FOUNDT:</span><span class="mnemonic"> byte   </span> "Found: ",0              
<span class="number">1D02 1D02 </span><span class="colon">: </span><span class="hex">64 3A 20 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1D06 1D06 </span><span class="colon">: </span><span class="hex">53 6B 69 70</span><span class="source">[~~~] </span><span class="label">SKIPT: </span><span class="mnemonic"> byte   </span> "Skip: ",0               
<span class="number">1D0A 1D0A </span><span class="colon">: </span><span class="hex">3A 20 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1D0D 1D0D </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Print string then filename read from tape</span>
<span class="number">1D0D 1D0D </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">[~~~] </span><span class="label">OUTNAM:</span><span class="mnemonic"> push   </span> de                <span class="comment">;;Save DE and AF</span>
<span class="number">1D0E 1D0E </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;      </span>
<span class="number">1D0F 1D0F </span><span class="colon">: </span><span class="hex">CD 9D 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> STROUT            <span class="comment">;;Print string pointed to by HL</span>
<span class="number">1D12 1D12 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Print filename read from tape          </span>
<span class="number">1D12 1D12 </span><span class="colon">: </span><span class="hex">21 57 38   </span><span class="source">{~~~} </span><span class="label">OUTNMF:</span><span class="mnemonic"> ld     </span> hl,FILNAF         <span class="comment">;;Pointer to filename</span>
<span class="number">1D15 1D15 </span><span class="colon">: </span><span class="hex">06 06      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,6               <span class="comment">;;Filenames are 6 characters long</span>
<span class="number">1D17 1D17 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">(~~~) </span><span class="label">OUTNM1:</span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;      </span>
<span class="number">1D18 1D18 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">1D19 1D19 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                        
<span class="number">1D1A 1D1A </span><span class="colon">: </span><span class="hex">28 01      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,OUTNM2          <span class="comment">;;ASCII NUL?</span>
<span class="number">1D1C 1D1C </span><span class="colon">: </span><span class="hex">DF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> OUTCHR            <span class="comment">;;No, print character</span>
<span class="number">1D1D 1D1D </span><span class="colon">: </span><span class="hex">10 F8      </span><span class="source">(~~~) </span><span class="label">OUTNM2:</span><span class="mnemonic"> djnz   </span> OUTNM1            <span class="comment">;;Countdown and loop</span>
<span class="number">1D1F 1D1F </span><span class="colon">: </span><span class="hex">CD EA 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CRDO              <span class="comment">;;Print CR/LF</span>
<span class="number">1D22 1D22 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;      </span>
<span class="number">1D23 1D23 </span><span class="colon">: </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;;Restore AF and DE</span>
<span class="number">1D24 1D24 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">1D25 1D25 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1D25 1D25 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Prompt User, Wait for RETURN, and Write Header</span>
<span class="number">1D25 1D25 </span><span class="colon">: </span><span class="hex">CD 7F 1B   </span><span class="source">[~~~] </span><span class="label">WRHEAP:</span><span class="mnemonic"> call   </span> PRECRD            <span class="comment">;;"Press <RECORD>", wait for RETURN</span>
<span class="number">1D28 1D28 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Write File Header to Tape              </span>
<span class="number">1D28 1D28 </span><span class="colon">: </span><span class="hex">CD BC 1B   </span><span class="source">{~~~} </span><span class="label">WRHEAD:</span><span class="mnemonic"> call   </span> WRSYNC            <span class="comment">;;Write SYNC to tape</span>
<span class="number">1D2B 1D2B </span><span class="colon">: </span><span class="hex">06 06      </span><span class="source">{~~~} </span><span class="label">WRNAME:</span><span class="mnemonic"> ld     </span> b,6                      
<span class="number">1D2D 1D2D </span><span class="colon">: </span><span class="hex">21 51 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,FILNAM         <span class="comment">;;Write Filename to tape</span>
<span class="number">1D30 1D30 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">(~~~) </span><span class="label">WRSTRL:</span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;;Write B Characters at [HL] to tape</span>
<span class="number">1D31 1D31 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">1D32 1D32 </span><span class="colon">: </span><span class="hex">CD 8A 1B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> WRBYTE                   
<span class="number">1D35 1D35 </span><span class="colon">: </span><span class="hex">10 F9      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> djnz   </span> WRSTRL                   
<span class="number">1D37 1D37 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">1D38 1D38 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1D38 1D38 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Save Program Text to tape              </span>
<span class="number">1D38 1D38 </span><span class="colon">: </span><span class="hex">CD BC 1B   </span><span class="source">[~~~] </span><span class="label">CSAVEP:</span><span class="mnemonic"> call   </span> WRSYNC            <span class="comment">;;Write SYNC to tape</span>
<span class="number">1D3B 1D3B </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;;Save from TXTTAB</span>
<span class="number">1D3C 1D3C </span><span class="colon">: </span><span class="hex">2A D6 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(VARTAB)       <span class="comment">;;to VARTAB</span>
<span class="number">1D3F 1D3F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1D3F 1D3F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Save RAM from DE to HL on tape         </span>
<span class="number">1D3F 1D3F </span><span class="colon">: </span><span class="hex">1A         </span><span class="source">(~~~) </span><span class="label">CSAVEB:</span><span class="mnemonic"> ld     </span> a,(de)            <span class="comment">;;Get byte from memory</span>
<span class="number">1D40 1D40 </span><span class="colon">: </span><span class="hex">13         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> de                <span class="comment">;;Bump pointer</span>
<span class="number">1D41 1D41 </span><span class="colon">: </span><span class="hex">CD 8A 1B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> WRBYTE            <span class="comment">;;Write byte to text</span>
<span class="number">1D44 1D44 </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;;Are we there yet?</span>
<span class="number">1D45 1D45 </span><span class="colon">: </span><span class="hex">20 F8      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,CSAVEB         <span class="comment">;;No, write another</span>
<span class="number">1D47 1D47 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">1D48 1D48 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1D48 1D48 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;;Orphan code?                          </span>
<span class="number">1D48 1D48 </span><span class="colon">: </span><span class="hex">01 00 00   </span><span class="source">      </span><span class="label">SLEEPS:</span><span class="mnemonic"> ld     </span> bc,0              <span class="comment">;Sleep maximum amount</span>
<span class="number">1D4B 1D4B </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1D4B 1D4B </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Pause program execution                </span>
<span class="number">1D4B 1D4B </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Delays BC*25-5 cycles                  </span>
<span class="number">1D4B 1D4B </span><span class="colon">: </span><span class="hex">0B         </span><span class="source">      </span><span class="label">SLEEP: </span><span class="mnemonic"> dec    </span> bc                <span class="comment">;;Decrement Counter</span>
<span class="number">1D4C 1D4C </span><span class="colon">: </span><span class="hex">78         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,b               <span class="comment">;      </span>
<span class="number">1D4D 1D4D </span><span class="colon">: </span><span class="hex">B1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> c                 <span class="comment">;;Is it 0?</span>
<span class="number">1D4E 1D4E </span><span class="colon">: </span><span class="hex">20 FB      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,SLEEP          <span class="comment">;;If not, loop</span>
<span class="number">1D50 1D50 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">1D51 1D51 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1D51 1D51 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Load Program Text from tape            </span>
<span class="number">1D51 1D51 </span><span class="colon">: </span><span class="hex">CD CE 1B   </span><span class="source">[~~~] </span><span class="label">CLOADP:</span><span class="mnemonic"> call   </span> RDSYNC            <span class="comment">;;Wait for SYNC</span>
<span class="number">1D54 1D54 </span><span class="colon">: </span><span class="hex">3E FF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,$FF                    
<span class="number">1D56 1D56 </span><span class="colon">: </span><span class="hex">32 5D 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (INSYNC),a        <span class="comment">;;Set SYNC flag</span>
<span class="number">1D59 1D59 </span><span class="colon">: </span><span class="hex">9F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sbc    </span> a,a               <span class="comment">;;A = 0</span>
<span class="number">1D5A 1D5A </span><span class="colon">: </span><span class="hex">2F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cpl    </span>                   <span class="comment">;;A = $FF ???WHY?</span>
<span class="number">1D5B 1D5B </span><span class="colon">: </span><span class="hex">57         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,a               <span class="comment">;;D = $FF</span>
<span class="number">1D5C 1D5C </span><span class="colon">: </span><span class="hex">06 0A      </span><span class="source">(~~~) </span><span class="label">CLOADB:</span><span class="mnemonic"> ld     </span> b,10              <span class="comment">;      </span>
<span class="number">1D5E 1D5E </span><span class="colon">: </span><span class="hex">CD 4D 1B   </span><span class="source">(~~~) </span><span class="label">CLOADN:</span><span class="mnemonic"> call   </span> RDBYTE            <span class="comment">;;Get Byte</span>
<span class="number">1D61 1D61 </span><span class="colon">: </span><span class="hex">5F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,a               <span class="comment">;;Save it</span>
<span class="number">1D62 1D62 </span><span class="colon">: </span><span class="hex">96         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> (hl)              <span class="comment">;;Compare with byte in memory</span>
<span class="number">1D63 1D63 </span><span class="colon">: </span><span class="hex">A2         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> and    </span> d                 <span class="comment">;;If CLOAD?</span>
<span class="number">1D64 1D64 </span><span class="colon">: </span><span class="hex">C0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nz                <span class="comment">;;and different, return with Zero cleared</span>
<span class="number">1D65 1D65 </span><span class="colon">: </span><span class="hex">73         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),e            <span class="comment">;;Store byte in memory</span>
<span class="number">1D66 1D66 </span><span class="colon">: </span><span class="hex">CD A9 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> REASON            <span class="comment">;;If no space left, OM error</span>
<span class="number">1D69 1D69 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;;Get byte back</span>
<span class="number">1D6A 1D6A </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;;Set flags</span>
<span class="number">1D6B 1D6B </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;;Bump text pointer</span>
<span class="number">1D6C 1D6C </span><span class="colon">: </span><span class="hex">20 EE      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,CLOADB         <span class="comment">;;Not 0, reset counter</span>
<span class="number">1D6E 1D6E </span><span class="colon">: </span><span class="hex">10 EE      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> djnz   </span> CLOADN            <span class="comment">;;Loop until 256 $00 are read</span>
<span class="number">1D70 1D70 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;;Return with Zero set</span>
<span class="number">1D71 1D71 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">1D72 1D72 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1D72 1D72 </span><span class="colon">= </span><span class="hex">           </span><span class="source">[M80] </span><span class="label">TTYCHR:</span><span class="mnemonic"> ;Print </span>character to screen       
<span class="number">1D72 1D72 </span><span class="colon">: </span><span class="hex">F7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> HOOKDO            <span class="comment">;;Call Extended BASIC Hook Routine</span>
<span class="number">1D73 1D73 </span><span class="colon">: </span><span class="hex">13         </span><span class="source">{~~~} </span><span class="label">HOOK19:</span><span class="mnemonic"> byte   </span> 19                <span class="comment">;      </span>
<span class="number">1D74 1D74 </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">[~~~] </span><span class="label">TTYCH: </span><span class="mnemonic"> push   </span> af                <span class="comment">;;Save character</span>
<span class="number">1D75 1D75 </span><span class="colon">: </span><span class="hex">FE 0A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 10                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">LINE FEED?</span>
<span class="number">1D77 1D77 </span><span class="colon">: </span><span class="hex">28 1A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,ISLF            <span class="comment">;      </span>
<span class="number">1D79 1D79 </span><span class="colon">: </span><span class="hex">3A 00 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(TTYPOS)        <span class="comment">;      </span>
<span class="number">1D7C 1D7C </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;;At beginning of line?</span>
<span class="number">1D7D 1D7D </span><span class="colon">: </span><span class="hex">20 14      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,ISLF           <span class="comment">;;No, skip line counter check</span>
<span class="number">1D7F 1D7F </span><span class="colon">: </span><span class="hex">3A 08 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(CNTOFL)        <span class="comment">;      </span>
<span class="number">1D82 1D82 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;;Is line Counter 0?</span>
<span class="number">1D83 1D83 </span><span class="colon">: </span><span class="hex">28 0E      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,ISLF            <span class="comment">;;Then no pauses</span>
<span class="number">1D85 1D85 </span><span class="colon">: </span><span class="hex">3D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> a                 <span class="comment">;      </span>
<span class="number">1D86 1D86 </span><span class="colon">: </span><span class="hex">32 08 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CNTOFL),a        <span class="comment">;;Decrement Line Counter</span>
<span class="number">1D89 1D89 </span><span class="colon">: </span><span class="hex">20 08      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,ISLF           <span class="comment">;;Not 0, don't pause</span>
<span class="number">1D8B 1D8B </span><span class="colon">: </span><span class="hex">3E 17      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,23              <span class="comment">;      </span>
<span class="number">1D8D 1D8D </span><span class="colon">: </span><span class="hex">32 08 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CNTOFL),a        <span class="comment">;;Reset line counter</span>
<span class="number">1D90 1D90 </span><span class="colon">: </span><span class="hex">CD 2F 1A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> TRYIN             <span class="comment">;;Wait for character from keyboard</span>
<span class="number">1D93 1D93 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">(~~~) </span><span class="label">ISLF:  </span><span class="mnemonic"> pop    </span> af                <span class="comment">;;Retrieve Character</span>
<span class="number">1D94 1D94 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Print Character, bypassing Extended Hook and Line Counter checks</span>
<span class="number">1D94 1D94 </span><span class="colon">: </span><span class="hex">F5         </span><span class="source">      </span><span class="label">TTYOUT:</span><span class="mnemonic"> push   </span> af                <span class="comment">;      </span>
<span class="number">1D95 1D95 </span><span class="colon">: </span><span class="hex">D9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> exx    </span>                   <span class="comment">;;Save HL on Stack</span>
<span class="number">1D96 1D96 </span><span class="colon">: </span><span class="hex">FE 07      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 7                 <span class="comment">;;Is it BEL!</span>
<span class="number">1D98 1D98 </span><span class="colon">: </span><span class="hex">CA 14 1E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,BEEP            <span class="comment">;;Make Beep Sound</span>
<span class="number">1D9B 1D9B </span><span class="colon">: </span><span class="hex">FE 0B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 11                <span class="comment">;;Is it CLS?</span>
<span class="number">1D9D 1D9D </span><span class="colon">: </span><span class="hex">CA 45 1E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,TTYCLR          <span class="comment">;;Clear the Screen</span>
<span class="number">1DA0 1DA0 </span><span class="colon">: </span><span class="hex">5F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,a               <span class="comment">;;Save A</span>
<span class="number">1DA1 1DA1 </span><span class="colon">: </span><span class="hex">2A 01 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(CURRAM)       <span class="comment">;      </span>
<span class="number">1DA4 1DA4 </span><span class="colon">: </span><span class="hex">3A 0D 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(CURCHR)        <span class="comment">;;Get character under cursor</span>
<span class="number">1DA7 1DA7 </span><span class="colon">: </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a            <span class="comment">;;Place at current screen position</span>
<span class="number">1DA8 1DA8 </span><span class="colon">: </span><span class="hex">7B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,e               <span class="comment">;;Restore A</span>
<span class="number">1DA9 1DA9 </span><span class="colon">: </span><span class="hex">FE 08      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 8                 <span class="comment">;;Is it BS?</span>
<span class="number">1DAB 1DAB </span><span class="colon">: </span><span class="hex">28 30      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,BS              <span class="comment">;;Do Back Space</span>
<span class="number">1DAD 1DAD </span><span class="colon">: </span><span class="hex">FE 0D      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 13                <span class="comment">;;Is it CR?</span>
<span class="number">1DAF 1DAF </span><span class="colon">: </span><span class="hex">28 0D      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,CR              <span class="comment">;;Do Carriage Return</span>
<span class="number">1DB1 1DB1 </span><span class="colon">: </span><span class="hex">FE 0A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 10                <span class="comment">;;Is it LF?</span>
<span class="number">1DB3 1DB3 </span><span class="colon">: </span><span class="hex">28 13      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,LF              <span class="comment">;;Do Line Feed</span>
<span class="number">1DB5 1DB5 </span><span class="colon">: </span><span class="hex">2A 01 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(CURRAM)       <span class="comment">;;Place character at</span>
<span class="number">1DB8 1DB8 </span><span class="colon">: </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a            <span class="comment">;;current position on screen</span>
<span class="number">1DB9 1DB9 </span><span class="colon">: </span><span class="hex">CD 1F 1E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> TTYMOV            <span class="comment">;;Move Cursor Right</span>
<span class="number">1DBC 1DBC </span><span class="colon">: </span><span class="hex">18 2C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> TTYFIN            <span class="comment">;;Finish Up</span>
<span class="number">1DBE 1DBE </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Carriage Return: Move Cursor to Beginning of Current Line</span>
<span class="number">1DBE 1DBE </span><span class="colon">: </span><span class="hex">ED 5B 00 38</span><span class="source">(~~~) </span><span class="label">CR:    </span><span class="mnemonic"> ld     </span> de,(TTYPOS)       <span class="comment">;      </span>
<span class="number">1DC2 1DC2 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;      </span>
<span class="number">1DC3 1DC3 </span><span class="colon">: </span><span class="hex">57         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,a               <span class="comment">;;Subtract Cursor Column</span>
<span class="number">1DC4 1DC4 </span><span class="colon">: </span><span class="hex">ED 52      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sbc    </span> hl,de             <span class="comment">;;from Screen Position</span>
<span class="number">1DC6 1DC6 </span><span class="colon">: </span><span class="hex">18 1F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> TTYFIS            <span class="comment">;      </span>
<span class="number">1DC8 1DC8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Line Feed: Move Cursor Down One Line   </span>
<span class="number">1DC8 1DC8 </span><span class="colon">: </span><span class="hex">11 C0 33   </span><span class="source">(~~~) </span><span class="label">LF:    </span><span class="mnemonic"> ld     </span> de,SCREEN+960     <span class="comment">;      </span>
<span class="number">1DCB 1DCB </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;;Cursor on Last Row?</span>
<span class="number">1DCC 1DCC </span><span class="colon">: </span><span class="hex">D2 D8 1D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,LFS            <span class="comment">;;Yes, Scroll and Finish Up</span>
<span class="number">1DCF 1DCF </span><span class="colon">: </span><span class="hex">11 28 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,40             <span class="comment">;      </span>
<span class="number">1DD2 1DD2 </span><span class="colon">: </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de             <span class="comment">;;Add 40 to Move Down One Line</span>
<span class="number">1DD3 1DD3 </span><span class="colon">: </span><span class="hex">22 01 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CURRAM),hl       <span class="comment">;;Save New Screen Position</span>
<span class="number">1DD6 1DD6 </span><span class="colon">: </span><span class="hex">18 12      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> TTYFIN            <span class="comment">;      </span>
<span class="number">1DD8 1DD8 </span><span class="colon">: </span><span class="hex">CD FE 1D   </span><span class="source">(~~~) </span><span class="label">LFS:   </span><span class="mnemonic"> call   </span> SCROLL            <span class="comment">;;Scroll Up and Keep Screen Position</span>
<span class="number">1DDB 1DDB </span><span class="colon">: </span><span class="hex">18 0D      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> TTYFIN            <span class="comment">;      </span>
<span class="number">1DDD 1DDD </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Back Space: Move Cursor Left and Delete Character</span>
<span class="number">1DDD 1DDD </span><span class="colon">: </span><span class="hex">3A 00 38   </span><span class="source">(~~~) </span><span class="label">BS:    </span><span class="mnemonic"> ld     </span> a,(TTYPOS)        <span class="comment">;      </span>
<span class="number">1DE0 1DE0 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;;At First Column?</span>
<span class="number">1DE1 1DE1 </span><span class="colon">: </span><span class="hex">28 02      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,NOBS            <span class="comment">;      </span>
<span class="number">1DE3 1DE3 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;;No, Move One to the Left</span>
<span class="number">1DE4 1DE4 </span><span class="colon">: </span><span class="hex">3D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> a                 <span class="comment">;      </span>
<span class="number">1DE5 1DE5 </span><span class="colon">: </span><span class="hex">36 20      </span><span class="source">(~~~) </span><span class="label">NOBS:  </span><span class="mnemonic"> ld     </span> (hl),' '          <span class="comment">;;Erase Character at Position</span>
<span class="number">1DE7 1DE7 </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Save Character and Display Cursor      </span>
<span class="number">1DE7 1DE7 </span><span class="colon">= </span><span class="hex">CD 3E 1E   </span><span class="source">(~~~) </span><span class="label">TTYFIS:</span><span class="mnemonic"> call   </span> TTYSAV            <span class="comment">;;Save Column and Position</span>
<span class="number">1DEA 1DEA </span><span class="colon">: </span><span class="hex">2A 01 38   </span><span class="source">(~~~) </span><span class="label">TTYFIN:</span><span class="mnemonic"> ld     </span> hl,(CURRAM)       <span class="comment">;      </span>
<span class="number">1DED 1DED </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;;Get character at position</span>
<span class="number">1DEE 1DEE </span><span class="colon">: </span><span class="hex">32 0D 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CURCHR),a        <span class="comment">;;Save character under cursor</span>
<span class="number">1DF1 1DF1 </span><span class="colon">: </span><span class="hex">36 7F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),$7F          <span class="comment">;Display Cursor</span>
<span class="number">1DF3 1DF3 </span><span class="colon">: </span><span class="hex">D9         </span><span class="source">(~~~) </span><span class="label">TTYXPR:</span><span class="mnemonic"> exx    </span>                   <span class="comment">;Restore [BC], [DE] and [HL]</span>
<span class="number">1DF4 1DF4 </span><span class="colon">: </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;Restore [AF]</span>
<span class="number">1DF5 1DF5 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">1DF6 1DF6 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1DF6 1DF6 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Restore Character Under Cursor         </span>
<span class="number">1DF6 1DF6 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;*** Orphan Code?                       </span>
<span class="number">1DF6 1DF6 </span><span class="colon">: </span><span class="hex">2A 01 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(CURRAM)       <span class="comment">;;Get position</span>
<span class="number">1DF9 1DF9 </span><span class="colon">: </span><span class="hex">3A 0D 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(CURCHR)        <span class="comment">;;Get character</span>
<span class="number">1DFC 1DFC </span><span class="colon">: </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a            <span class="comment">;;Put character at position</span>
<span class="number">1DFD 1DFD </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">1DFE 1DFE </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1DFE 1DFE </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Scroll Screen Up one Line              </span>
<span class="number">1DFE 1DFE </span><span class="colon">: </span><span class="hex">01 98 03   </span><span class="source">      </span><span class="label">SCROLL:</span><span class="mnemonic"> ld     </span> bc,920            <span class="comment">;;Move 23 * 40 bytes</span>
<span class="number">1E01 1E01 </span><span class="colon">: </span><span class="hex">11 28 30   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,SCREEN+40      <span class="comment">;;To Row 1 Column 0</span>
<span class="number">1E04 1E04 </span><span class="colon">: </span><span class="hex">21 50 30   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,SCREEN+80      <span class="comment">;;From Row 2 Column 1</span>
<span class="number">1E07 1E07 </span><span class="colon">: </span><span class="hex">ED B0      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ldir   </span>                   <span class="comment">;      </span>
<span class="number">1E09 1E09 </span><span class="colon">: </span><span class="hex">06 28      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,40              <span class="comment">;;Loop 40 Times</span>
<span class="number">1E0B 1E0B </span><span class="colon">: </span><span class="hex">21 C1 33   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,SCREEN+961     <span class="comment">;;Starting at Row 23, Column 0</span>
<span class="number">1E0E 1E0E </span><span class="colon">: </span><span class="hex">36 20      </span><span class="source">(~~~) </span><span class="label">SCROLP:</span><span class="mnemonic"> ld     </span> (hl),' '          <span class="comment">;;Put Space</span>
<span class="number">1E10 1E10 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;;Next Column</span>
<span class="number">1E11 1E11 </span><span class="colon">: </span><span class="hex">10 FB      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> djnz   </span> SCROLP            <span class="comment">;;Do it again</span>
<span class="number">1E13 1E13 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">1E14 1E14 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1E14 1E14 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Make a Beep Sound                      </span>
<span class="number">1E14 1E14 </span><span class="colon">: </span><span class="hex">01 C8 00   </span><span class="source">(~~~) </span><span class="label">BEEP:  </span><span class="mnemonic"> ld     </span> bc,200            <span class="comment">;      </span>
<span class="number">1E17 1E17 </span><span class="colon">: </span><span class="hex">11 32 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,50             <span class="comment">;      </span>
<span class="number">1E1A 1E1A </span><span class="colon">: </span><span class="hex">CD 64 1E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SOUNDS            <span class="comment">;;Play freq 50, delay 300</span>
<span class="number">1E1D 1E1D </span><span class="colon">: </span><span class="hex">18 D4      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> TTYXPR            <span class="comment">;;Restore Registers and return</span>
<span class="number">1E1F 1E1F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1E1F 1E1F </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Move Cursor one character to the right </span>
<span class="number">1E1F 1E1F </span><span class="colon">: </span><span class="hex">2A 01 38   </span><span class="source">      </span><span class="label">TTYMOV:</span><span class="mnemonic"> ld     </span> hl,(CURRAM)       <span class="comment">;      </span>
<span class="number">1E22 1E22 </span><span class="colon">: </span><span class="hex">3A 00 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(TTYPOS)        <span class="comment">;      </span>
<span class="number">1E25 1E25 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;;Increment Position in Memory</span>
<span class="number">1E26 1E26 </span><span class="colon">: </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a                 <span class="comment">;;Increment Cursor Column</span>
<span class="number">1E27 1E27 </span><span class="colon">: </span><span class="hex">FE 26      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 38                <span class="comment">;;Less than 39?</span>
<span class="number">1E29 1E29 </span><span class="colon">: </span><span class="hex">38 13      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,TTYSAV          <span class="comment">;;Save and Return</span>
<span class="number">1E2B 1E2B </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;      </span>
<span class="number">1E2C 1E2C </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;;Skip border columns</span>
<span class="number">1E2D 1E2D </span><span class="colon">: </span><span class="hex">11 E8 33   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,SCREEN+1000    <span class="comment">;      </span>
<span class="number">1E30 1E30 </span><span class="colon">: </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;;Past End of Screen?</span>
<span class="number">1E31 1E31 </span><span class="colon">: </span><span class="hex">3E 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,0               <span class="comment">;;Cursor Column = 0</span>
<span class="number">1E33 1E33 </span><span class="colon">: </span><span class="hex">38 09      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,TTYSAV          <span class="comment">;;No, Save Position and Column</span>
<span class="number">1E35 1E35 </span><span class="colon">: </span><span class="hex">21 C1 33   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,033C1H         <span class="comment">;;Yes, Position = Row 24, Column 0</span>
<span class="number">1E38 1E38 </span><span class="colon">: </span><span class="hex">CD 3E 1E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> TTYSAV            <span class="comment">;Save Position and Column</span>
<span class="number">1E3B 1E3B </span><span class="colon">: </span><span class="hex">C3 FE 1D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> SCROLL            <span class="comment">;Scroll Screen</span>
<span class="number">1E3E 1E3E </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1E3E 1E3E </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Update Current Screen Position and Cursor Column</span>
<span class="number">1E3E 1E3E </span><span class="colon">: </span><span class="hex">22 01 38   </span><span class="source">      </span><span class="label">TTYSAV:</span><span class="mnemonic"> ld     </span> (CURRAM),hl       <span class="comment">;;Position in Screen RAM</span>
<span class="number">1E41 1E41 </span><span class="colon">: </span><span class="hex">32 00 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (TTYPOS),a        <span class="comment">;;Cursor Column</span>
<span class="number">1E44 1E44 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">1E45 1E45 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1E45 1E45 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Clear Screen                           </span>
<span class="number">1E45 1E45 </span><span class="colon">: </span><span class="hex">06 20      </span><span class="source">      </span><span class="label">TTYCLR:</span><span class="mnemonic"> ld     </span> b,' '             <span class="comment">;      </span>
<span class="number">1E47 1E47 </span><span class="colon">: </span><span class="hex">21 00 30   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,SCREEN         <span class="comment">;      </span>
<span class="number">1E4A 1E4A </span><span class="colon">: </span><span class="hex">CD 59 1E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FILLIT            <span class="comment">;;Write to Sreen RAM</span>
<span class="number">1E4D 1E4D </span><span class="colon">: </span><span class="hex">06 06      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,6               <span class="comment">;;Black on Light Cyan</span>
<span class="number">1E4F 1E4F </span><span class="colon">: </span><span class="hex">CD 59 1E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FILLIT            <span class="comment">;;Write to Color RAM</span>
<span class="number">1E52 1E52 </span><span class="colon">: </span><span class="hex">21 29 30   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,SCREEN+41      <span class="comment">;;Home Cursor</span>
<span class="number">1E55 1E55 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;;Column = 0</span>
<span class="number">1E56 1E56 </span><span class="colon">: </span><span class="hex">C3 E7 1D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> TTYFIS            <span class="comment">;;Save and Finish</span>
<span class="number">1E59 1E59 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1E59 1E59 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Fill 1024 bytes atarting at HL with A  </span>
<span class="number">1E59 1E59 </span><span class="colon">: </span><span class="hex">11 FF 03   </span><span class="source">      </span><span class="label">FILLIT:</span><span class="mnemonic"> ld     </span> de,$3FF           <span class="comment">;;Count down from 1023</span>
<span class="number">1E5C 1E5C </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Fill BC bytes atartinf at HL with A    </span>
<span class="number">1E5C 1E5C </span><span class="colon">: </span><span class="hex">70         </span><span class="source">      </span><span class="label">FILLIP:</span><span class="mnemonic"> ld     </span> (hl),b            <span class="comment">;;Store byte</span>
<span class="number">1E5D 1E5D </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;;Increment pointer</span>
<span class="number">1E5E 1E5E </span><span class="colon">: </span><span class="hex">1B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> de                <span class="comment">;;Decrement Counter</span>
<span class="number">1E5F 1E5F </span><span class="colon">: </span><span class="hex">7A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,d               <span class="comment">;      </span>
<span class="number">1E60 1E60 </span><span class="colon">: </span><span class="hex">B3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> e                 <span class="comment">;;Is it 0?</span>
<span class="number">1E61 1E61 </span><span class="colon">: </span><span class="hex">20 F9      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,FILLIP         <span class="comment">;;No, Loop</span>
<span class="number">1E63 1E63 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">1E64 1E64 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1E64 1E64 </span><span class="colon">: </span><span class="hex">78         </span><span class="source">[GWB] </span><span class="label">SOUNDS:</span><span class="mnemonic"> ld     </span> a,b               <span class="comment">;;Play frequency [DE] for duration [BC]</span>
<span class="number">1E65 1E65 </span><span class="colon">: </span><span class="hex">B1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> c                 <span class="comment">;;If BC = 0 return</span>
<span class="number">1E66 1E66 </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;      </span>
<span class="number">1E67 1E67 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;      </span>
<span class="number">1E68 1E68 </span><span class="colon">: </span><span class="hex">D3 FC      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> out    </span> ($FC),a           <span class="comment">;;Write 0 to port $FC</span>
<span class="number">1E6A 1E6A </span><span class="colon">: </span><span class="hex">CD 76 1E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SDELAY            <span class="comment">;      </span>
<span class="number">1E6D 1E6D </span><span class="colon">: </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a                 <span class="comment">;      </span>
<span class="number">1E6E 1E6E </span><span class="colon">: </span><span class="hex">D3 FC      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> out    </span> ($FC),a           <span class="comment">;;Write 1 to port $FC</span>
<span class="number">1E70 1E70 </span><span class="colon">: </span><span class="hex">CD 76 1E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SDELAY            <span class="comment">;;Delay [DE]*31+44 cycles</span>
<span class="number">1E73 1E73 </span><span class="colon">: </span><span class="hex">0B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> bc                <span class="comment">;;Decrememt duration counter and loop</span>
<span class="number">1E74 1E74 </span><span class="colon">: </span><span class="hex">18 EE      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> SOUNDS            <span class="comment">;      </span>
<span class="number">1E76 1E76 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1E76 1E76 </span><span class="colon">: </span><span class="hex">D5         </span><span class="source">      </span><span class="label">SDELAY:</span><span class="mnemonic"> push   </span> de                <span class="comment">;;Delay [DE]*31+27 cycles</span>
<span class="number">1E77 1E77 </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;;Copy freq delay to HL (+10)</span>
<span class="number">1E78 1E78 </span><span class="colon">: </span><span class="hex">7C         </span><span class="source">      </span><span class="label">SDELAL:</span><span class="mnemonic"> ld     </span> a,h               <span class="comment">;      </span>
<span class="number">1E79 1E79 </span><span class="colon">: </span><span class="hex">B5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> l                 <span class="comment">;      </span>
<span class="number">1E7A 1E7A </span><span class="colon">: </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;;If 0, return</span>
<span class="number">1E7B 1E7B </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;      </span>
<span class="number">1E7C 1E7C </span><span class="colon">: </span><span class="hex">18 FA      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> SDELAL            <span class="comment">;;Decrement and loop</span>
<span class="number">1E7E 1E7E </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1E7E 1E7E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;INCHRH, INCHRC, and INCHRI - Get Character from Keyboard</span>
<span class="number">1E7E 1E7E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;The Keyboard Matrix is 8 columns by 6 rows. The columns are wired to</span>
<span class="number">1E7E 1E7E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;to address lines A8 through A15 and the rows to I/O Port 255.</span>
<span class="number">1E7E 1E7E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;When the Z80 executes and IN instruction, it puts the contents of BC</span>
<span class="number">1E7E 1E7E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;on the address bus. So to read the keyboard, B is loaded with a column</span>
<span class="number">1E7E 1E7E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;mask, C is loaded with $FF, and IN (C) reads the rows.</span>
<span class="number">1E7E 1E7E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;                                       </span>
<span class="number">1E7E 1E7E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;        A8  A9  A10 A11 A12 A13 A14 A15</span>
<span class="number">1E7E 1E7E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;    D0   =   -   9   8   6   5   3   2 </span>
<span class="number">1E7E 1E7E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;    D1  <--  /   O   I   Y   T   E   W </span>
<span class="number">1E7E 1E7E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;    D2   :   0   K   7   G   4   S   L </span>
<span class="number">1E7E 1E7E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;    D3  RTN  P   M   U   V   R   Z   Q </span>
<span class="number">1E7E 1E7E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;    D4   ;   L   N   H   C   D  SPC SHF</span>
<span class="number">1E7E 1E7E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;    D5   .   ,   J   B   F   X   A  CTL</span>
<span class="number">1E7E 1E7E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;                                       </span>
<span class="number">1E7E 1E7E </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;; Note: The RESET key is wired directly to the Z80 reset line.</span>
<span class="number">1E7E 1E7E </span><span class="colon">: </span><span class="hex">F7         </span><span class="source">      </span><span class="label">INCHRH:</span><span class="mnemonic"> rst    </span> HOOKDO                   
<span class="number">1E7F 1E7F </span><span class="colon">: </span><span class="hex">12         </span><span class="source">{~~~} </span><span class="label">HOOK18:</span><span class="mnemonic"> byte   </span> 18                       
<span class="number">1E80 1E80 </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Check for keypress                     </span>
<span class="number">1E80 1E80 </span><span class="colon">= </span><span class="hex">D9         </span><span class="source">      </span><span class="label">INCHRC:</span><span class="mnemonic"> exx    </span>                   <span class="comment">;;Save Registers</span>
<span class="number">1E81 1E81 </span><span class="colon">: </span><span class="hex">2A 0B 38   </span><span class="source">      </span><span class="label">INCHRI:</span><span class="mnemonic"> ld     </span> hl,(RESPTR)              
<span class="number">1E84 1E84 </span><span class="colon">: </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,h                      
<span class="number">1E85 1E85 </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                        
<span class="number">1E86 1E86 </span><span class="colon">: </span><span class="hex">28 1A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,KEYSCN                 
<span class="number">1E88 1E88 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;;Save HL</span>
<span class="number">1E89 1E89 </span><span class="colon">: </span><span class="hex">21 0F 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,KCOUNT                
<span class="number">1E8C 1E8C </span><span class="colon">: </span><span class="hex">34         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> (hl)              <span class="comment">;;Increment debounce counter</span>
<span class="number">1E8D 1E8D </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;;Get Value</span>
<span class="number">1E8E 1E8E </span><span class="colon">: </span><span class="hex">FE 0F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 15                <span class="comment">;;Less than 15?</span>
<span class="number">1E90 1E90 </span><span class="colon">: </span><span class="hex">38 3C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,KEYFIN          <span class="comment">;;Yes, finish up</span>
<span class="number">1E92 1E92 </span><span class="colon">: </span><span class="hex">36 05      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),5            <span class="comment">;;Set debounce counter to 5</span>
<span class="number">1E94 1E94 </span><span class="colon">: </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;;Restore HL</span>
<span class="number">1E95 1E95 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">1E96 1E96 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)                   
<span class="number">1E97 1E97 </span><span class="colon">: </span><span class="hex">22 0B 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (RESPTR),hl              
<span class="number">1E9A 1E9A </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                        
<span class="number">1E9B 1E9B </span><span class="colon">: </span><span class="hex">F2 36 1F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> p,KEYRET                 
<span class="number">1E9E 1E9E </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                        
<span class="number">1E9F 1E9F </span><span class="colon">: </span><span class="hex">32 0C 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (RESPTR+1),a             
<span class="number">1EA2 1EA2 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Scan Keyboard                          </span>
<span class="number">1EA2 1EA2 </span><span class="colon">: </span><span class="hex">01 FF 00   </span><span class="source">      </span><span class="label">KEYSCN:</span><span class="mnemonic"> ld     </span> bc,$FF            <span class="comment">;;B=0 to scan all columns</span>
<span class="number">1EA5 1EA5 </span><span class="colon">: </span><span class="hex">ED 78      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> in     </span> a,(c)             <span class="comment">;;Read rows from I/O Port 255</span>
<span class="number">1EA7 1EA7 </span><span class="colon">: </span><span class="hex">2F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cpl    </span>                   <span class="comment">;;and Invert</span>
<span class="number">1EA8 1EA8 </span><span class="colon">: </span><span class="hex">E6 3F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> and    </span> $3F               <span class="comment">;;Check all rows</span>
<span class="number">1EAA 1EAA </span><span class="colon">: </span><span class="hex">21 0E 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,LSTX           <span class="comment">;;Pointer to last scan code</span>
<span class="number">1EAD 1EAD </span><span class="colon">: </span><span class="hex">28 16      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,NOKEYS          <span class="comment">;;No key pressed? ???do a thing</span>
<span class="number">1EAF 1EAF </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">        ;;???Check for Shift and Control Keys</span>
<span class="number">1EAF 1EAF </span><span class="colon">: </span><span class="hex">06 7F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,$7F             <span class="comment">;;Scanning column 7 - %01111111</span>
<span class="number">1EB1 1EB1 </span><span class="colon">: </span><span class="hex">ED 78      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> in     </span> a,(c)             <span class="comment">;;Read rows and invert</span>
<span class="number">1EB3 1EB3 </span><span class="colon">: </span><span class="hex">2F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cpl    </span>                          
<span class="number">1EB4 1EB4 </span><span class="colon">: </span><span class="hex">E6 0F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> and    </span> $0F               <span class="comment">;;Check rows 0 through 3 - %00001111</span>
<span class="number">1EB6 1EB6 </span><span class="colon">: </span><span class="hex">20 1F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,KEYDN          <span class="comment">;;Key down? Process it</span>
<span class="number">1EB6 1EB6 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">        ;;Scan the Rest of the Columns   </span>
<span class="number">1EB8 1EB8 </span><span class="colon">: </span><span class="hex">06 BF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,$BF              ;;Start with column 6 - %10111111
<span class="number">1EBA 1EBA </span><span class="colon">: </span><span class="hex">ED 78      </span><span class="source">(~~~) </span><span class="label">KEYSCL:</span><span class="mnemonic"> in     </span> a,(c)              ;;Read rows and invert
<span class="number">1EBC 1EBC </span><span class="colon">: </span><span class="hex">2F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cpl    </span>                    ;     
<span class="number">1EBD 1EBD </span><span class="colon">: </span><span class="hex">E6 3F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> and    </span> $3F                ;;Check rows 0 through 5 - %00111111
<span class="number">1EBF 1EBF </span><span class="colon">: </span><span class="hex">20 16      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,KEYDN           ;;Key down? Process it
<span class="number">1EC1 1EC1 </span><span class="colon">: </span><span class="hex">CB 08      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rrc    </span> b                  ;;Next column
<span class="number">1EC3 1EC3 </span><span class="colon">: </span><span class="hex">38 F5      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,KEYSCL           ;;Loop if not out of columns
<span class="number">1EC5 1EC5 </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">NOKEYS:</span><span class="mnemonic"> inc    </span> hl                 ;;Point to KCOUNT
<span class="number">1EC6 1EC6 </span><span class="colon">: </span><span class="hex">3E 46      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,70               ;     
<span class="number">1EC8 1EC8 </span><span class="colon">: </span><span class="hex">BE         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> (hl)               ;     
<span class="number">1EC9 1EC9 </span><span class="colon">: </span><span class="hex">38 03      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,KEYFIN           ;;Less than 70? Clean up and return
<span class="number">1ECB 1ECB </span><span class="colon">: </span><span class="hex">28 04      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,SCNINC           ;;0? Increment KCOUNT and return
<span class="number">1ECD 1ECD </span><span class="colon">: </span><span class="hex">34         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> (hl)               ;     
<span class="number">1ECE 1ECE </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">KEYFIN:</span><span class="mnemonic"> xor    </span> a                  ;;Clear A
<span class="number">1ECF 1ECF </span><span class="colon">: </span><span class="hex">D9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> exx    </span>                    ;;Restore Registers
<span class="number">1ED0 1ED0 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                    ;     
<span class="number">1ED1 1ED1 </span><span class="colon">: </span><span class="hex">34         </span><span class="source">      </span><span class="label">SCNINC:</span><span class="mnemonic"> inc    </span> (hl)               ;;Increment KCOUNT
<span class="number">1ED2 1ED2 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                 ;     
<span class="number">1ED3 1ED3 </span><span class="colon">: </span><span class="hex">36 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),0             ;;Clear LSTX
<span class="number">1ED5 1ED5 </span><span class="colon">: </span><span class="hex">18 F7      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> KEYFIN             ;;Clean up and Return
<span class="number">1ED7 1ED7 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1ED7 1ED7 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Process Key Currently Pressed          </span>
<span class="number">1ED7 1ED7 </span><span class="colon">: </span><span class="hex">11 00 00   </span><span class="source">      </span><span class="label">KEYDN: </span><span class="mnemonic"> ld     </span> de,0               ;     
<span class="number">1EDA 1EDA </span><span class="colon">: </span><span class="hex">1C         </span><span class="source">      </span><span class="label">KEYROW:</span><span class="mnemonic"> inc    </span> e                  ;;Get row number (1-5)
<span class="number">1EDB 1EDB </span><span class="colon">: </span><span class="hex">1F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rra    </span>                    ;     
<span class="number">1EDC 1EDC </span><span class="colon">: </span><span class="hex">30 FC      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,KEYROW          ;     
<span class="number">1EDE 1EDE </span><span class="colon">: </span><span class="hex">7B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,e                ;     
<span class="number">1EDF 1EDF </span><span class="colon">: </span><span class="hex">CB 18      </span><span class="source">      </span><span class="label">KEYCOL:</span><span class="mnemonic"> rr     </span> b                  ;;Add column number times 6
<span class="number">1EE1 1EE1 </span><span class="colon">: </span><span class="hex">30 04      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,KEYCHK          ;     
<span class="number">1EE3 1EE3 </span><span class="colon">: </span><span class="hex">C6 06      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,6                ;     
<span class="number">1EE5 1EE5 </span><span class="colon">: </span><span class="hex">18 F8      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> KEYCOL             ;     
<span class="number">1EE7 1EE7 </span><span class="colon">: </span><span class="hex">5F         </span><span class="source">      </span><span class="label">KEYCHK:</span><span class="mnemonic"> ld     </span> e,a                ;     
<span class="number">1EE8 1EE8 </span><span class="colon">: </span><span class="hex">BE         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> (hl)               ;;Compare scan code to LSTX
<span class="number">1EE9 1EE9 </span><span class="colon">: </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a             ;;Update LSTX with scan code
<span class="number">1EEA 1EEA </span><span class="colon">: </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                 ;;Point to KCOUNT
<span class="number">1EEB 1EEB </span><span class="colon">: </span><span class="hex">20 0F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,KEYCLR          ;;Not the same? Clear KCOUNT and exit
<span class="number">1EED 1EED </span><span class="colon">: </span><span class="hex">3E 04      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,4                      
<span class="number">1EEF 1EEF </span><span class="colon">: </span><span class="hex">BE         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> (hl)               ;;Check KCOUNT
<span class="number">1EF0 1EF0 </span><span class="colon">: </span><span class="hex">38 05      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,KEYFN6           ;;Greater than 4? Set to 6 and return
<span class="number">1EF2 1EF2 </span><span class="colon">: </span><span class="hex">28 0C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,KEYASC           ;;Equal to 4? Convert scan code
<span class="number">1EF4 1EF4 </span><span class="colon">: </span><span class="hex">34         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> (hl)               ;;Increment KCOUNT
<span class="number">1EF5 1EF5 </span><span class="colon">: </span><span class="hex">18 02      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> KEYFN2             ;;Clean up and exit
<span class="number">1EF7 1EF7 </span><span class="colon">: </span><span class="hex">36 06      </span><span class="source">      </span><span class="label">KEYFN6:</span><span class="mnemonic"> ld     </span> (hl),6             ;;Set KCOUNT to 6
<span class="number">1EF9 1EF9 </span><span class="colon">: </span><span class="hex">AF         </span><span class="source">      </span><span class="label">KEYFN2:</span><span class="mnemonic"> xor    </span> a                  ;;Clear A
<span class="number">1EFA 1EFA </span><span class="colon">: </span><span class="hex">D9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> exx    </span>                    ;;Restore registers
<span class="number">1EFB 1EFB </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                    ;     
<span class="number">1EFC 1EFC </span><span class="colon">: </span><span class="hex">36 00      </span><span class="source">      </span><span class="label">KEYCLR:</span><span class="mnemonic"> ld     </span> (hl),0             ;;Clear KCOUNT
<span class="number">1EFE 1EFE </span><span class="colon">: </span><span class="hex">18 F9      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> KEYFN2             ;;Clean up and return
<span class="number">1F00 1F00 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1F00 1F00 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Convert Keyboard Scan Code to ASCII Character</span>
<span class="number">1F00 1F00 </span><span class="colon">: </span><span class="hex">34         </span><span class="source">      </span><span class="label">KEYASC:</span><span class="mnemonic"> inc    </span> (hl)              <span class="comment">;;Increment KCOUNT</span>
<span class="number">1F01 1F01 </span><span class="colon">: </span><span class="hex">06 7F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,$7F             <span class="comment">;;Read column 7</span>
<span class="number">1F03 1F03 </span><span class="colon">: </span><span class="hex">ED 78      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> in     </span> a,(c)             <span class="comment">;;Get row</span>
<span class="number">1F05 1F05 </span><span class="colon">: </span><span class="hex">CB 6F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> bit    </span> 5,a               <span class="comment">;;Check Control key</span>
<span class="number">1F07 1F07 </span><span class="colon">: </span><span class="hex">DD 21 93 1F</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> ix,CTLTAB-1       <span class="comment">;;Point to control table</span>
<span class="number">1F0B 1F0B </span><span class="colon">: </span><span class="hex">28 0C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,KEYLUP          <span class="comment">;;Control? Do lookup</span>
<span class="number">1F0D 1F0D </span><span class="colon">: </span><span class="hex">CB 67      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> bit    </span> 4,a               <span class="comment">;;Check Shift key</span>
<span class="number">1F0F 1F0F </span><span class="colon">: </span><span class="hex">DD 21 65 1F</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> ix,SHFTAB-1       <span class="comment">;;Point to shift table</span>
<span class="number">1F13 1F13 </span><span class="colon">: </span><span class="hex">28 04      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,KEYLUP          <span class="comment">;;Shift? Do lookup</span>
<span class="number">1F15 1F15 </span><span class="colon">: </span><span class="hex">DD 21 37 1F</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> ix,KEYTAB-1              
<span class="number">1F19 1F19 </span><span class="colon">: </span><span class="hex">DD 19      </span><span class="source">      </span><span class="label">KEYLUP:</span><span class="mnemonic"> add    </span> ix,de             <span class="comment">;;Get pointer into table</span>
<span class="number">1F1B 1F1B </span><span class="colon">: </span><span class="hex">DD 7E 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(ix+0)          <span class="comment">;;Load ASCII value</span>
<span class="number">1F1E 1F1E </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;;Reserved Word?</span>
<span class="number">1F1F 1F1F </span><span class="colon">: </span><span class="hex">F2 36 1F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> p,KEYRET          <span class="comment">;;No, return ASCII code</span>
<span class="number">1F22 1F22 </span><span class="colon">: </span><span class="hex">D6 7F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> $7F               <span class="comment">;;Convert to Reserved Word Count</span>
<span class="number">1F24 1F24 </span><span class="colon">: </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a               <span class="comment">;;and copy to C</span>
<span class="number">1F25 1F25 </span><span class="colon">: </span><span class="hex">21 44 02   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,RESLST-1       <span class="comment">;;Point to Reserved Word List</span>
<span class="number">1F28 1F28 </span><span class="colon">- </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Enter Reserved Word From Ctrl-Key Combo</span>
<span class="number">1F28 1F28 </span><span class="colon">= </span><span class="hex">23         </span><span class="source">      </span><span class="label">KEYRES:</span><span class="mnemonic"> inc    </span> hl                <span class="comment">;;Bump pointer</span>
<span class="number">1F29 1F29 </span><span class="colon">: </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;;Get next character</span>
<span class="number">1F2A 1F2A </span><span class="colon">: </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;;First letter of reserved word?</span>
<span class="number">1F2B 1F2B </span><span class="colon">: </span><span class="hex">F2 28 1F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> p,KEYRES          <span class="comment">;;No, loop</span>
<span class="number">1F2E 1F2E </span><span class="colon">: </span><span class="hex">0D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> c                 <span class="comment">;;Decrement Count</span>
<span class="number">1F2F 1F2F </span><span class="colon">: </span><span class="hex">20 F7      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,KEYRES         <span class="comment">;;Not 0? Find next word</span>
<span class="number">1F31 1F31 </span><span class="colon">: </span><span class="hex">22 0B 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (RESPTR),hl       <span class="comment">;;Save Keyword Address</span>
<span class="number">1F34 1F34 </span><span class="colon">: </span><span class="hex">E6 7F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> and    </span> $7F               <span class="comment">;;Strip high bit from first character</span>
<span class="number">1F36 1F36 </span><span class="colon">: </span><span class="hex">D9         </span><span class="source">      </span><span class="label">KEYRET:</span><span class="mnemonic"> exx    </span>                   <span class="comment">;;Restore Registers</span>
<span class="number">1F37 1F37 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">1F38 1F38 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1F38 1F38 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Unmodified Key Lookup Table            </span>
<span class="number">1F38 1F38 </span><span class="colon">: </span><span class="hex">3D 08 3A 0D</span><span class="source">      </span><span class="label">KEYTAB:</span><span class="mnemonic"> byte   </span> '=',$08,':',$0D,';','.' <span class="comment">;;Backspace and Return</span>
<span class="number">1F3C 1F3C </span><span class="colon">: </span><span class="hex">3B 2E      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1F3E 1F3E </span><span class="colon">: </span><span class="hex">2D 2F 30 70</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> '-','/','0','p','l',','  
<span class="number">1F42 1F42 </span><span class="colon">: </span><span class="hex">6C 2C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1F44 1F44 </span><span class="colon">: </span><span class="hex">39 6F 6B 6D</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> '9','o','k','m','n','j'  
<span class="number">1F48 1F48 </span><span class="colon">: </span><span class="hex">6E 6A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1F4A 1F4A </span><span class="colon">: </span><span class="hex">38 69 37 75</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> '8','i','7','u','h','b'  
<span class="number">1F4E 1F4E </span><span class="colon">: </span><span class="hex">68 62      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1F50 1F50 </span><span class="colon">: </span><span class="hex">36 79 67 76</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> '6','y','g','v','c','f'  
<span class="number">1F54 1F54 </span><span class="colon">: </span><span class="hex">63 66      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1F56 1F56 </span><span class="colon">: </span><span class="hex">35 74 34 72</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> '5','t','4','r','d','x'  
<span class="number">1F5A 1F5A </span><span class="colon">: </span><span class="hex">64 78      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1F5C 1F5C </span><span class="colon">: </span><span class="hex">33 65 73 7A</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> '3','e','s','z',' ','a'  
<span class="number">1F60 1F60 </span><span class="colon">: </span><span class="hex">20 61      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1F62 1F62 </span><span class="colon">: </span><span class="hex">32 77 31 71</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> '2','w','1','q'          
<span class="number">1F66 1F66 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1F66 1F66 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Shifted Key Lookup Table               </span>
<span class="number">1F66 1F66 </span><span class="colon">: </span><span class="hex">2B 5C 2A 0D</span><span class="source">      </span><span class="label">SHFTAB:</span><span class="mnemonic"> byte   </span> '+',$5C,'*',$0D,'@','>' <span class="comment">;;Backslash, Return</span>
<span class="number">1F6A 1F6A </span><span class="colon">: </span><span class="hex">40 3E      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1F6C 1F6C </span><span class="colon">: </span><span class="hex">5F 5E 3F 50</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> '_','^','?','P','L','<'  
<span class="number">1F70 1F70 </span><span class="colon">: </span><span class="hex">4C 3C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1F72 1F72 </span><span class="colon">: </span><span class="hex">29 4F 4B 4D</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> ')','O','K','M','N','J'  
<span class="number">1F76 1F76 </span><span class="colon">: </span><span class="hex">4E 4A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1F78 1F78 </span><span class="colon">: </span><span class="hex">28 49 27 55</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> '(','I',$27,'U','H','B' <span class="comment">;;Apostrophe</span>
<span class="number">1F7C 1F7C </span><span class="colon">: </span><span class="hex">48 42      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1F7E 1F7E </span><span class="colon">: </span><span class="hex">26 59 47 56</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> '&','Y','G','V','C','F'  
<span class="number">1F82 1F82 </span><span class="colon">: </span><span class="hex">43 46      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1F84 1F84 </span><span class="colon">: </span><span class="hex">25 54 24 52</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> '%','T','$','R','D','X'  
<span class="number">1F88 1F88 </span><span class="colon">: </span><span class="hex">44 58      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1F8A 1F8A </span><span class="colon">: </span><span class="hex">23 45 53 5A</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> '#','E','S','Z',' ','A'  
<span class="number">1F8E 1F8E </span><span class="colon">: </span><span class="hex">20 41      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1F90 1F90 </span><span class="colon">: </span><span class="hex">22 57 21 51</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $22,'W','!','Q'         <span class="comment">;;Quotation Mark</span>
<span class="number">1F94 1F94 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1F94 1F94 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Control Key Lookup Table               </span>
<span class="number">1F94 1F94 </span><span class="colon">: </span><span class="hex">82 1C C1 0D</span><span class="source">      </span><span class="label">CTLTAB:</span><span class="mnemonic"> byte   </span> $82,$1C,$C1,$0D,$94,$C4 <span class="comment">;;NEXT ^\ PEEK Return POKE VAL</span>
<span class="number">1F98 1F98 </span><span class="colon">: </span><span class="hex">94 C4      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1F9A 1F9A </span><span class="colon">: </span><span class="hex">81 1E 30 10</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $81,$1E,$30,$10,$CA,$C3 <span class="comment">;;FOR ^^ 0 ^P POINT STR$</span>
<span class="number">1F9E 1F9E </span><span class="colon">: </span><span class="hex">CA C3      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1FA0 1FA0 </span><span class="colon">: </span><span class="hex">92 0F 9D 0D</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $92,$0F,$9D,$0D,$C8,$9C <span class="comment">;;COPY ^O PRESET ^M RIGHT$, SET</span>
<span class="number">1FA4 1FA4 </span><span class="colon">: </span><span class="hex">C8 9C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1FA6 1FA6 </span><span class="colon">: </span><span class="hex">8D 09 8C 15</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $8D,$09,$8C,$15,$08,$C9 <span class="comment">;;RETURN ^I GOSUB ^U ^H MID$</span>
<span class="number">1FAA 1FAA </span><span class="colon">: </span><span class="hex">08 C9      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1FAC 1FAC </span><span class="colon">: </span><span class="hex">90 19 07 C7</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $90,$19,$07,$C7,$03,$83 <span class="comment">;;ON ^Y ^G LEFT$ ^C DATA</span>
<span class="number">1FB0 1FB0 </span><span class="colon">: </span><span class="hex">03 83      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1FB2 1FB2 </span><span class="colon">: </span><span class="hex">88 84 A5 12</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $88,$84,$A5,$12,$86,$18 <span class="comment">;;GOTO INPUT THEN ^R READ ^X</span>
<span class="number">1FB6 1FB6 </span><span class="colon">: </span><span class="hex">86 18      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1FB8 1FB8 </span><span class="colon">: </span><span class="hex">8A 85 13 9A</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $8A,$85,$13,$9A,$C6,$9B <span class="comment">;;IF DIM ^S CLOAD CHR$ CSAVE</span>
<span class="number">1FBC 1FBC </span><span class="colon">: </span><span class="hex">C6 9B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1FBE 1FBE </span><span class="colon">: </span><span class="hex">97 8E 89 11</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $97,$8E,$89,$11         <span class="comment">;;LIST REM RUN ^Q</span>
<span class="number">1FC2 1FC2 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1FC2      </span><span class="colon">: </span><span class="hex">           </span><span class="source">      </span><span class="comment">        ;;Revision Date?                 </span>
<span class="number">1FC2      </span><span class="colon">: </span><span class="hex">31 34 2D 4A</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> "14-JULY-1982 ",0        
<span class="number">1FC6      </span><span class="colon">: </span><span class="hex">55 4C 59 2D</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1FCA      </span><span class="colon">: </span><span class="hex">31 39 38 32</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1FCE      </span><span class="colon">: </span><span class="hex">20 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1FD0      </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1FD0      </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Pad rest of ROM space                  </span>
<span class="number">1FD0      </span><span class="colon">: </span><span class="hex">00 00 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $00,$00,$00,$00,$00,$00,$00,$00
<span class="number">1FD4      </span><span class="colon">: </span><span class="hex">00 00 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">     1FC2 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">     1FC2 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Check for Ctrl-C, called from NEWSTT   </span>
<span class="number">     1FC2 </span><span class="colon">: </span><span class="hex">E5         </span><span class="source">      </span><span class="label">INCNTC:</span><span class="mnemonic"> push   </span> hl                <span class="comment">;;Save text pointer</span>
<span class="number">     1FC3 </span><span class="colon">: </span><span class="hex">21 04 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,4              <span class="comment">;      </span>
<span class="number">     1FC6 </span><span class="colon">: </span><span class="hex">39         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,sp             <span class="comment">;      </span>
<span class="number">     1FC7 </span><span class="colon">: </span><span class="hex">22 F9 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (SAVSTK),hl       <span class="comment">;;Save stack pointer less 2 entries</span>
<span class="number">     1FCA </span><span class="colon">: </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;;Restore text pointer</span>
<span class="number">     1FCB </span><span class="colon">: </span><span class="hex">C3 25 1A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> ISCNTC            <span class="comment">;;Check for Ctrl-C</span>
<span class="number">     1FCE </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">     1FCE </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Finish up Warm Start                   </span>
<span class="number">     1FCE </span><span class="colon">: </span><span class="hex">2A F9 38   </span><span class="source">      </span><span class="label">WRMFIN:</span><span class="mnemonic"> ld     </span> hl,(SAVSTK)       <span class="comment">;;Restore stack pointer</span>
<span class="number">     1FD1 </span><span class="colon">: </span><span class="hex">F9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> sp,hl             <span class="comment">;      </span>
<span class="number">     1FD2 </span><span class="colon">: </span><span class="hex">2A CE 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(SAVTXT)       <span class="comment">;;Restore text pointer</span>
<span class="number">     1FD5 </span><span class="colon">: </span><span class="hex">CD 20 0C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> STOPC             <span class="comment">;;Enter direct mode</span>
<span class="number">     1FD8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1FD8      </span><span class="colon">: </span><span class="hex">00 00 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $00,$00,$00,$00,$00,$00,$00,$00
<span class="number">1FDC      </span><span class="colon">: </span><span class="hex">00 00 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1FE0      </span><span class="colon">: </span><span class="hex">00 00 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $00,$00,$00,$00,$00,$00,$00,$00
<span class="number">1FE4      </span><span class="colon">: </span><span class="hex">00 00 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">     1FD8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">     1FD8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Save Stack Pointer                     </span>
<span class="number">     1FD8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Called from STKINI. Stores stack pointer in TEMPST</span>
<span class="number">     1FD8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;;This code is inline in all the reference sources</span>
<span class="number">     1FD8 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">STKSAV:</span><span class="mnemonic"> dec    </span> hl                <span class="comment">;TAKE INTO ACCOUNT FNDFOR STOPPER</span>
<span class="number">     1FD9 </span><span class="colon">: </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;      </span>
<span class="number">     1FDA </span><span class="colon">: </span><span class="hex">22 F9 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (SAVSTK),hl       <span class="comment">;MAKE SURE SAVSTK OK JUST IN CASE</span>
<span class="number">     1FDD </span><span class="colon">: </span><span class="hex">21 B1 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,TEMPST         <span class="comment">;INCREMENT BACK FOR SPHL</span>
<span class="number">     1FE0 </span><span class="colon">: </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;      </span>
<span class="number">     1FE1 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Power Up/Reset Routine: Jumped to from RST 0</span>
<span class="number">     1FE1 </span><span class="colon">: </span><span class="hex">3E FF      </span><span class="source">[M80] </span><span class="label">JMPINI:</span><span class="mnemonic"> ld     </span> a,$FF             <span class="comment">;;Turn off printer and Cold Start</span>
<span class="number">     1FE3 </span><span class="colon">: </span><span class="hex">D3 FE      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> out    </span> ($FE),a           <span class="comment">;;Write $FF to Printer Port</span>
<span class="number">     1FE5 </span><span class="colon">: </span><span class="hex">C3 41 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> INIT              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">INIT IS THE INTIALIZATION ROUTINE</span>
<span class="number">1FE8      </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1FE8      </span><span class="colon">: </span><span class="hex">00 00 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $00,$00,$00,$00,$00,$00,$00,$00
<span class="number">1FEC      </span><span class="colon">: </span><span class="hex">00 00 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">1FF0      </span><span class="colon">: </span><span class="hex">00 00 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $00,$00,$00,$00,$00,$00,$00,$00
<span class="number">1FE4      </span><span class="colon">: </span><span class="hex">00 00 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">     1FE8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Start Extended Basic                   </span>
<span class="number">     1FE8 </span><span class="colon">: </span><span class="hex">3E AA      </span><span class="source">      </span><span class="label">XBASIC:</span><span class="mnemonic"> ld     </span> a,$AA             <span class="comment">;;     </span>
<span class="number">     1FEA </span><span class="colon">: </span><span class="hex">D3 FF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> out    </span> ($FF),a           <span class="comment">;;Write Unlock Code to Port 255</span>
<span class="number">     1FEC </span><span class="colon">: </span><span class="hex">32 09 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (SCRMBL),a        <span class="comment">;;Save It</span>
<span class="number">     1FEF </span><span class="colon">: </span><span class="hex">C3 10 20   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> XSTART            <span class="comment">;;Jump to Extended BASIC Startup</span>
<span class="number">     1FF2 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">     1FF2 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Called from COLDST to print BASIC startup message</span>
<span class="number">     1FF2 </span><span class="colon">: </span><span class="hex">21 5F 01   </span><span class="source">[GWB] </span><span class="label">PRNTIT:</span><span class="mnemonic"> ld     </span> hl,HEDING         <span class="comment">;Print copyright message and return</span>
<span class="number">     1FF5 </span><span class="colon">: </span><span class="hex">C3 9D 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> STROUT            <span class="comment">;      </span>
<span class="number">     1FF8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">     1FF8 </span><span class="colon">  </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Pad rest of ROM space                  </span>
<span class="number">1FF8      </span><span class="colon">: </span><span class="hex">00 00 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $00,$00,$00,$00,$00,$00,$00,$00
<span class="number">1FFC      </span><span class="colon">: </span><span class="hex">00 00 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">     1FF8 </span><span class="colon">: </span><span class="hex">F5 F5 F5 F5</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $F5,$F5,$F5,$F5,$F5,$F5,$F5,$F5
<span class="number">     1FFC </span><span class="colon">: </span><span class="hex">F5 F5 F5 F5</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2000 2000 </span><span class="colon">: </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> end    </span>                   <span class="comment">;;End of Standard BASIC</span>

<span class="comment">;;Extended BASIC ROM</span>
<span class="comment">;;</span>
<span class="comment">;; Column 1-4 is built in Extended BASIC address</span>
<span class="comment">;; Column 6-9 is Extended BASIC Catridge address</span>
<span class="comment">;;</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">----      </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> org    </span> $2000   <span class="comment">;;Starting Address of Extended BASIC</span>
<span class="number">     ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> org    </span> $E000   <span class="comment">;;Starting Address of Extended BASIC</span>
<span class="number">---- ---- </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2000      </span><span class="colon">X </span><span class="hex">2C 33 24   </span><span class="source">[~~~] </span><span class="label">EXTBAS:</span><span class="mnemonic"> byte   </span> ",3$$7+",0  ;;Extended BASIC Cartridge Signature
<span class="number">2003      </span><span class="colon">X </span><span class="hex">24 37 2B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2006      </span><span class="colon">X </span><span class="hex">00         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2007      </span><span class="colon">X </span><span class="hex">00 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 0,0,0,0,0,0,0,0,0        
<span class="number">200A      </span><span class="colon">X </span><span class="hex">00 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">200D      </span><span class="colon">X </span><span class="hex">00 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">     E000 </span><span class="colon">X </span><span class="hex">90 95 FC F6</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $90,$95,$FC,$F6,$8B,$40,$91,$6C
<span class="number">     E004 </span><span class="colon">X </span><span class="hex">8B 40 91 6C</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">     E008 </span><span class="colon">X </span><span class="hex">D5 B0 8B B8</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $D5,$B0,$8B,$B8,$9D,$74,$F7,$AC
<span class="number">     E00C </span><span class="colon">X </span><span class="hex">9D 74 F7 AC</span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">     E010 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">     E010 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Display Startup Screen                 </span>
<span class="number">     E010 </span><span class="colon">X </span><span class="hex">11 A1 31   </span><span class="source">[~~~] </span><span class="label">XINIT: </span><span class="mnemonic"> ld     </span> de,SCREEN+417     <span class="comment">;;Display "BASIC"</span>
<span class="number">     E013 </span><span class="colon">X </span><span class="hex">21 B0 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,BASICT         <span class="comment">;;at line 10, column 17</span>
<span class="number">     E016 </span><span class="colon">X </span><span class="hex">01 05 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> bc,STARTT-BASICT  <span class="comment">;      </span>
<span class="number">     E019 </span><span class="colon">X </span><span class="hex">ED B0      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ldir   </span>                   <span class="comment">;      </span>
<span class="number">     E01B </span><span class="colon">X </span><span class="hex">11 10 32   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,SCREEN+528     <span class="comment">;;Display Start Message</span>
<span class="number">     E01E </span><span class="colon">X </span><span class="hex">21 B5 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,STARTT         <span class="comment">;at line 13, column 8</span>
<span class="number">     E021 </span><span class="colon">X </span><span class="hex">01 19 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> bc,STARTE-STARTT  <span class="comment">;      </span>
<span class="number">     E024 </span><span class="colon">X </span><span class="hex">ED B0      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ldir   </span>                   <span class="comment">;      </span>
<span class="number">     E026 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">     E026 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Cycle Screen Colors                    </span>
<span class="number">     E026 </span><span class="colon">X </span><span class="hex">06 03      </span><span class="source">(~~~) </span><span class="label">XCYCLE:</span><span class="mnemonic"> ld     </span> b,3               <span class="comment">;;Black on Yellow</span>
<span class="number">     E028 </span><span class="colon">X </span><span class="hex">CD 37 E0   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> XCOLOR            <span class="comment">;      </span>
<span class="number">     E02B </span><span class="colon">X </span><span class="hex">06 02      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,2               <span class="comment">;;Black on Green</span>
<span class="number">     E02D </span><span class="colon">X </span><span class="hex">CD 37 E0   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> XCOLOR            <span class="comment">;      </span>
<span class="number">     E030 </span><span class="colon">X </span><span class="hex">06 06      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,6               <span class="comment">;;Black on Light Cyan</span>
<span class="number">     E032 </span><span class="colon">X </span><span class="hex">CD 37 E0   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> XCOLOR            <span class="comment">;      </span>
<span class="number">     E035 </span><span class="colon">X </span><span class="hex">18 EF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> XCYCLE            <span class="comment">;      </span>
<span class="number">     E037 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">     E037 </span><span class="colon">X </span><span class="hex">21 00 34   </span><span class="source">[~~~] </span><span class="label">XCOLOR:</span><span class="mnemonic"> ld     </span> hl,COLOR          <span class="comment">;;Store Accumulator in all bytes of Color</span>
<span class="number">     E03A </span><span class="colon">X </span><span class="hex">70         </span><span class="source">(~~~) </span><span class="label">XCOLO1:</span><span class="mnemonic"> ld     </span> (hl),b            <span class="comment">;;memory, addresses $3400 through $3FFF</span>
<span class="number">     E03B </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;;     </span>
<span class="number">     E03C </span><span class="colon">X </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,h               <span class="comment">;;NOTE: This wipes out $3B80 through $3FFF,</span>
<span class="number">     E03D </span><span class="colon">X </span><span class="hex">FE 38      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> $38               <span class="comment">;;which are after the end of Color memory.</span>
<span class="number">     E03F </span><span class="colon">X </span><span class="hex">20 F9      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,XCOLO1         <span class="comment">;      </span>
<span class="number">     E041 </span><span class="colon">X </span><span class="hex">21 00 40   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,$4000          <span class="comment">;;Loop 12,288 times</span>
<span class="number">     E044 </span><span class="colon">X </span><span class="hex">CD 80 1E   </span><span class="source">(~~~) </span><span class="label">XCOLO2:</span><span class="mnemonic"> call   </span> INCHRC            <span class="comment">;;Check for keypress</span>
<span class="number">     E047 </span><span class="colon">X </span><span class="hex">FE 0D      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 13                <span class="comment">;{M80} IS IT A CARRIAGE RETURN?</span>
<span class="number">     E049 </span><span class="colon">X </span><span class="hex">28 15      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,XCOLD           <span class="comment">;;Cold Start</span>
<span class="number">     E04B </span><span class="colon">X </span><span class="hex">FE 03      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 3                 <span class="comment">;;Is it CTRL-C?</span>
<span class="number">     E04D </span><span class="colon">X </span><span class="hex">28 06      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,XWARM           <span class="comment">;;Warm Start</span>
<span class="number">     E04F </span><span class="colon">X </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;;Decrement Counter</span>
<span class="number">     E050 </span><span class="colon">X </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,h               <span class="comment">;      </span>
<span class="number">     E051 </span><span class="colon">X </span><span class="hex">B5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> l                 <span class="comment">;      </span>
<span class="number">     E052 </span><span class="colon">X </span><span class="hex">20 F0      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,XCOLO2         <span class="comment">;;If not 0, loop</span>
<span class="number">     E054 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;;Back to CYCLE</span>
<span class="number">     E055 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">     E055 </span><span class="colon">X </span><span class="hex">3E 0B      </span><span class="source">[~~~] </span><span class="label">XWARM: </span><span class="mnemonic"> ld     </span> a,11                     
<span class="number">     E057 </span><span class="colon">X </span><span class="hex">CD 72 1D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> TTYCHR            <span class="comment">;;Clear Screen</span>
<span class="number">     E05A </span><span class="colon">X </span><span class="hex">CD E5 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> STKINI            <span class="comment">;;Initialize stack</span>
<span class="number">     E05D </span><span class="colon">X </span><span class="hex">CD 40 1A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> WRMCON            <span class="comment">;;Finish Up</span>
<span class="number">     E060 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">     E060 </span><span class="colon">X </span><span class="hex">21 87 01   </span><span class="source">[~~~] </span><span class="label">XCOLD: </span><span class="mnemonic"> ld     </span> hl,DEFALT         <span class="comment">;Set System Variable Default Values</span>
<span class="number">     E063 </span><span class="colon">X </span><span class="hex">01 51 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> bc,81             <span class="comment">;      </span>
<span class="number">     E066 </span><span class="colon">X </span><span class="hex">11 03 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,USRPOK         <span class="comment">;;Copy 80 bytes starting at DEFALT</span>
<span class="number">     E069 </span><span class="colon">X </span><span class="hex">ED B0      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ldir   </span>                   <span class="comment">;;to the first 80 bytes of System Variables</span>
<span class="number">     E06B </span><span class="colon">X </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;      </span>
<span class="number">     E06C </span><span class="colon">X </span><span class="hex">32 A9 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (ENDBUF),a        <span class="comment">;;Clear byte after end of BUF</span>
<span class="number">     E06F </span><span class="colon">X </span><span class="hex">32 F9 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> ($38F9),a         <span class="comment">;;Clear byte before start of S1 BASIC program</span>
<span class="number">     E072 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Test Memory to Find Top of RAM         </span>
<span class="number">     E072 </span><span class="colon">X </span><span class="hex">21 5D 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,$38F9+100     ;<span class="comment">;Set RAM Test starting address</span>
<span class="number">     E075 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">     E075 </span><span class="colon">X </span><span class="hex">23         </span><span class="source">(~~~) </span><span class="label">XTEST: </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;;Bump pointer</span>
<span class="number">     E076 </span><span class="colon">X </span><span class="hex">4E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,(hl)            <span class="comment">;;Save contents of location</span>
<span class="number">     E077 </span><span class="colon">X </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,h               <span class="comment">;      </span>
<span class="number">     E078 </span><span class="colon">X </span><span class="hex">B5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> l                 <span class="comment">;;Wrapped around to $0000?</span>
<span class="number">     E079 </span><span class="colon">X </span><span class="hex">28 0B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,XCHECK          <span class="comment">;;Yes, go on to check memory</span>
<span class="number">     E07B </span><span class="colon">X </span><span class="hex">A9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> c                 <span class="comment">;;Scramble bits into A</span>
<span class="number">     E07C </span><span class="colon">X </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a            <span class="comment">;;and write to location</span>
<span class="number">     E07D </span><span class="colon">X </span><span class="hex">46         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,(hl)            <span class="comment">;;Read back into B</span>
<span class="number">     E07E </span><span class="colon">X </span><span class="hex">2F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cpl    </span>                   <span class="comment">;;Invert scrambled bits</span>
<span class="number">     E07F </span><span class="colon">X </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a            <span class="comment">;;Write to location</span>
<span class="number">     E080 </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;;read it back</span>
<span class="number">     E081 </span><span class="colon">X </span><span class="hex">2F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cpl    </span>                   <span class="comment">;;and revert back</span>
<span class="number">     E082 </span><span class="colon">X </span><span class="hex">71         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),c            <span class="comment">;;Write original byte to location</span>
<span class="number">     E083 </span><span class="colon">X </span><span class="hex">B8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> b                 <span class="comment">;;Did reads match writes?</span>
<span class="number">     E084 </span><span class="colon">X </span><span class="hex">28 EF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,XTEST           <span class="comment">;;Yes, check next location</span>
<span class="number">     E086 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Check Memory Size               ;;Back up to last good address</span>
<span class="number">     E086 </span><span class="colon">X </span><span class="hex">2B         </span><span class="source">(~~~) </span><span class="label">XCHECK:</span><span class="mnemonic"> dec    </span> hl                <span class="comment">;      </span>
<span class="number">     E087 </span><span class="colon">X </span><span class="hex">11 25 3A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,$38F9+300     ;<span class="comment">;Is there enough RAM?</span>
<span class="number">     E08A </span><span class="colon">X </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR            <span class="comment">;;No, Out of Memory error</span>
<span class="number">     E08B </span><span class="colon">X </span><span class="hex">DA B7 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> c,OMERR                  
<span class="number">     E08E </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Set Top of memory                      </span>
<span class="number">     E08E </span><span class="colon">X </span><span class="hex">11 CE FF   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,$FFCE                 
<span class="number">     E091 </span><span class="colon">X </span><span class="hex">22 AD 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (MEMSIZ),hl       <span class="comment">;;Set MEMSIZ to last RAM location</span>
<span class="number">     E094 </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de                    
<span class="number">     E095 </span><span class="colon">X </span><span class="hex">22 4B 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (TOPMEM),hl       <span class="comment">;;Set TOPMEM t0 MEMSIZ-50</span>
<span class="number">     E098 </span><span class="colon">X </span><span class="hex">CD BE 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SCRTCH            <span class="comment">;;Perform NEW</span>
<span class="number">2010      </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2010      </span><span class="colon">X </span><span class="hex">21 5A 20   </span><span class="source">[~~~] </span><span class="label">XSTART:</span><span class="mnemonic"> ld     </span> hl,EXBAST         <span class="comment">;;Print "Extended BASIC"</span>
<span class="number">     E09B </span><span class="colon">X </span><span class="hex">21 E5 E0   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2013 E09E </span><span class="colon">X </span><span class="hex">CD 9D 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> STROUT                   
<span class="number">2016 E0A1 </span><span class="colon">X </span><span class="hex">21 63 01   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,HEDING+4       <span class="comment">;;Start of Copyright Message (S1 ROM)</span>
<span class="number">2019 E0A4 </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)                   
<span class="number">201A E0A5 </span><span class="colon">X </span><span class="hex">FE 79      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> $79                      
<span class="number">201C E0A7 </span><span class="colon">X </span><span class="hex">20 03      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,XSTAR2         <span class="comment">;;If first character is 'y'</span>
<span class="number">201E E0A9 </span><span class="colon">X </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;;  Back up to</span>
<span class="number">201F E0AA </span><span class="colon">X </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;;  Start of Message in S2 ROM</span>
<span class="number">2020 E0AB </span><span class="colon">X </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                       
<span class="number">2021 E0AC </span><span class="colon">X </span><span class="hex">CD 9D 0E   </span><span class="source">(~~~) </span><span class="label">XSTAR2:</span><span class="mnemonic"> call   </span> STROUT            <span class="comment">;;Print Copyright Message</span>
<span class="number">2024      </span><span class="colon">X </span><span class="hex">21 6C 20   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,DOHOOK         <span class="comment">;;Store Hook Table Address</span>
<span class="number">     E0AF </span><span class="colon">X </span><span class="hex">21 F7 E0   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2027 E0B2 </span><span class="colon">X </span><span class="hex">22 06 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (HOOK),hl         <span class="comment">;;in Hook Table</span>
<span class="number">202A E0B5 </span><span class="colon">X </span><span class="hex">21 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,0              <span class="comment">;;     </span>
<span class="number">202D E0B8 </span><span class="colon">X </span><span class="hex">22 31 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (BUFPTR),hl       <span class="comment">;;Clear Buffer Pointer</span>
<span class="number">2030 E0BB </span><span class="colon">X </span><span class="hex">21 04 07   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,$0704          <span class="comment">;;Default = White, Current = Blue</span>
<span class="number">2033 E0BE </span><span class="colon">X </span><span class="hex">22 00 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (FORCLR),hl       <span class="comment">;;Set Foreground Colors</span>
<span class="number">2036 E0C1 </span><span class="colon">X </span><span class="hex">21 48 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,BASTXT-1       <span class="comment">;;End of System RAM</span>
<span class="number">2039 E0C4 </span><span class="colon">X </span><span class="hex">36 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),$00          <span class="comment">;;Store a 0 there</span>
<span class="number">203B E0C6 </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;;Set Beginning of BASIC Text</span>
<span class="number">203C E0C7 </span><span class="colon">X </span><span class="hex">22 4F 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (TXTTAB),hl       <span class="comment">;;to BASTXT</span>
<span class="number">203F E0CA </span><span class="colon">X </span><span class="hex">CD BE 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SCRTCH            <span class="comment">;;Do a NEW</span>
<span class="number">2042 E0CD </span><span class="colon">X </span><span class="hex">3E C3      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,$C3             <span class="comment">;;JP Instruction</span>
<span class="number">2044 E0CF </span><span class="colon">X </span><span class="hex">32 0B 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (MAXUPD),a        <span class="comment">;{GWB} Major Axis Move Update</span>
<span class="number">2047 E0D2 </span><span class="colon">X </span><span class="hex">32 0E 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (MINUPD),a        <span class="comment">;{GWB} Minor Axis Move Update</span>
<span class="number">204A E0D5 </span><span class="colon">X </span><span class="hex">32 3E 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (OPCJMP),a        <span class="comment">;;Draw Operator Routine</span>
<span class="number">204D E0D8 </span><span class="colon">X </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;;Store 0 in</span>
<span class="number">204E E0D9 </span><span class="colon">X </span><span class="hex">32 33 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (DRWSCL),a               
<span class="number">2051 E0DC </span><span class="colon">X </span><span class="hex">32 34 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (DRWFLG),a               
<span class="number">2054 E0DF </span><span class="colon">X </span><span class="hex">32 35 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (DRWANG),a               
<span class="number">2057 E0E2 </span><span class="colon">X </span><span class="hex">C3 02 04   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> READY             <span class="comment">;;Go to Immediate Mode</span>
<span class="number">205A E0E5 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">205A E0E5 </span><span class="colon">X </span><span class="hex">0B 45 78   </span><span class="source">[~~~] </span><span class="label">EXBAST:</span><span class="mnemonic"> byte   </span> 11,"Extended BASIC",13,10,0
<span class="number">205D E0E8 </span><span class="colon">X </span><span class="hex">74 65 6E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2060 E0EB </span><span class="colon">X </span><span class="hex">64 65 64   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2063 E0EE </span><span class="colon">X </span><span class="hex">20 42 41   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2066 E0F1 </span><span class="colon">X </span><span class="hex">53 49 43   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2069 E0F4 </span><span class="colon">X </span><span class="hex">0D 0A 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">206C E0F7 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;When the Hook Routine is Executed, the stack will contain</span>
<span class="number">206C E0F7 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Return Address, Saved Accumulator, and Text Pointer</span>
<span class="number">206C E0F7 </span><span class="colon">X </span><span class="hex">E3         </span><span class="source">[~~~] </span><span class="label">DOHOOK:</span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;;[HL] = Return Address, Save HL on Stack</span>
<span class="number">206D E0F8 </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> AF                <span class="comment">;;Stack = Argument, Text Pointer,</span>
<span class="number">206E E0F9 </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> A,(hl)            <span class="comment">;;Get Hook ID</span>
<span class="number">206F E0FA </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;;Increment Address Past Hook ID</span>
<span class="number">2070 E0FB </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;;Stack = Return Addr, Argument, Text Pointer</span>
<span class="number">2071      </span><span class="colon">X </span><span class="hex">21 9D 20   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,HOOKT          <span class="comment">;;Get Hook Table Start Address</span>
<span class="number">     E0FC </span><span class="colon">X </span><span class="hex">21 28 E1   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2074 E0FF </span><span class="colon">X </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;;Stack = [BC], Return Addr, Arg, Text Ptr</span>
<span class="number">2075 E100 </span><span class="colon">X </span><span class="hex">01 09 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> bc,9              <span class="comment">;;     </span>
<span class="number">2078 E103 </span><span class="colon">X </span><span class="hex">ED B1      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cpir   </span>                   <span class="comment">;;Search Hook List for Hook Number</span>
<span class="number">207A E105 </span><span class="colon">X </span><span class="hex">79         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,c               <span class="comment">;;Index into Hook List</span>
<span class="number">207B E106 </span><span class="colon">X </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;;Stack = Return Addr, Arg, Text Ptr</span>
<span class="number">207C E107 </span><span class="colon">X </span><span class="hex">87         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,a               <span class="comment">;;Multiply by 2</span>
<span class="number">207D      </span><span class="colon">X </span><span class="hex">21 8B 20   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,HOOKD          <span class="comment">;;Add to Address of Hook Table</span>
<span class="number">     E108 </span><span class="colon">X </span><span class="hex">21 16 E1   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2080 E10B </span><span class="colon">X </span><span class="hex">85         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,l                      
<span class="number">2081 E10C </span><span class="colon">X </span><span class="hex">6F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,a                      
<span class="number">2082 E10D </span><span class="colon">X </span><span class="hex">3E 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,0                      
<span class="number">2084 E10F </span><span class="colon">X </span><span class="hex">8C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> adc    </span> a,h                      
<span class="number">2085 E110 </span><span class="colon">X </span><span class="hex">67         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,a               <span class="comment">;;Load Hook Routing Address</span>
<span class="number">2086 E111 </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;;into HL</span>
<span class="number">2087 E112 </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">2088 E113 </span><span class="colon">X </span><span class="hex">66         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,(hl)                   
<span class="number">2089 E114 </span><span class="colon">X </span><span class="hex">6F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,a                      
<span class="number">208A E115 </span><span class="colon">X </span><span class="hex">E9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> (hl)              <span class="comment">;;and Execute It</span>
<span class="number">208B      </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">208B      </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Hook Dispatch Table                    </span>
<span class="number">208B      </span><span class="colon">X </span><span class="hex">AD 20      </span><span class="source">[~~~] </span><span class="label">HOOKD: </span><span class="mnemonic"> word   </span> UNHOOK            <span class="comment">;;Hook Not Implemented</span>
<span class="number">     E116 </span><span class="colon">X </span><span class="hex">38 E1      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">208D      </span><span class="colon">X </span><span class="hex">EC 20      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> NOTGOX            <span class="comment">;;(NOTGOS)</span>
<span class="number">     E118 </span><span class="colon">X </span><span class="hex">77 E1      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">208E      </span><span class="colon">X </span><span class="hex">A5 20      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> OUTDOX            <span class="comment">;;(OUTDO)</span>
<span class="number">     E11A </span><span class="colon">X </span><span class="hex">30 E1      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2091      </span><span class="colon">X </span><span class="hex">F9 21      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> ATN1              <span class="comment">;;ATN Routine</span>
<span class="number">     E11C </span><span class="colon">X </span><span class="hex">84 E2      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2093      </span><span class="colon">X </span><span class="hex">77 21      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> DEFX              <span class="comment">;;DEF FN Routine</span>
<span class="number">     E11E </span><span class="colon">X </span><span class="hex">02 E2      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2095      </span><span class="colon">X </span><span class="hex">A1 21      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> FNDOEX            <span class="comment">;;FN() Routine</span>
<span class="number">     E120 </span><span class="colon">X </span><span class="hex">2C E2      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2097      </span><span class="colon">X </span><span class="hex">37 21      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> INCHRX            <span class="comment">;;INCHRH Hook</span>
<span class="number">     E122 </span><span class="colon">X </span><span class="hex">C2 E1      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2099      </span><span class="colon">X </span><span class="hex">FF 20      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> LISTHK            <span class="comment">;;LIST Hook</span>
<span class="number">     E124 </span><span class="colon">X </span><span class="hex">8A E1      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">209B      </span><span class="colon">X </span><span class="hex">11 21      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> GONE23            <span class="comment">;;GONE23</span>
<span class="number">     E126 </span><span class="colon">X </span><span class="hex">9C E1      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">209D E128 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">209D E128 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Hook Offset Table                      </span>
<span class="number">209D E128 </span><span class="colon">X </span><span class="hex">17         </span><span class="source">[~~~] </span><span class="label">HOOKT: </span><span class="mnemonic"> byte   </span> 23                <span class="comment">;;Hook 23 (GONE23)</span>
<span class="number">209E E129 </span><span class="colon">X </span><span class="hex">16         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 22                <span class="comment">;;Hook 22 (LIST)</span>
<span class="number">209F E12A </span><span class="colon">X </span><span class="hex">12         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 18                <span class="comment">;;Hook 18 (INCHRH)</span>
<span class="number">20A0 E12B </span><span class="colon">X </span><span class="hex">10         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 16                <span class="comment">;;Hook 16 (FNDOER)</span>
<span class="number">02A1 E12C </span><span class="colon">X </span><span class="hex">0F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 15                <span class="comment">;;Hook 15 (DEF)</span>
<span class="number">20A2 E12D </span><span class="colon">X </span><span class="hex">0E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 14                <span class="comment">;;Hook 14 (ATN)</span>
<span class="number">20A3 E12E </span><span class="colon">X </span><span class="hex">0D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 13                <span class="comment">;;Hook 12 (OUTDO)</span>
<span class="number">20A4 E12F </span><span class="colon">X </span><span class="hex">0A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 10                <span class="comment">;;Hook 10 (NOTGOS)</span>
<span class="number">20A5      </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">20A5      </span><span class="colon">X </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;OUTDO Hook Routine                     </span>
<span class="number">20A5      </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;While Unpacking a Line, Sends Output to BUF</span>
<span class="number">20A5      </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;STACK = Return Address, Saved Accumulator, and Text Pointer</span>
<span class="number">20A5 E130 </span><span class="colon">X </span><span class="hex">2A 31 39   </span><span class="source">[~~~] </span><span class="label">OUTDOX:</span><span class="mnemonic"> ld     </span> hl,(BUFPTR)       <span class="comment">;;Get Puffer Pointer</span>
<span class="number">20A8 E133 </span><span class="colon">X </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,h                      
<span class="number">20A9 E134 </span><span class="colon">X </span><span class="hex">B5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> l                 <span class="comment">;;If Not Zero, Write to Buffer`</span>
<span class="number">20AA      </span><span class="colon">X </span><span class="hex">C2 52 23   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,OUTBUF         <span class="comment">;;Else Return to OUTDO</span>
<span class="number">     E135 </span><span class="colon">X </span><span class="hex">C2 DD E3   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">20AD E138 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">20AD E138 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Hook Not Implemented - Restore Registers and Return</span>
<span class="number">20AD E138 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">[~~~] </span><span class="label">UNHOOK:</span><span class="mnemonic"> pop    </span> hl                <span class="comment">;;Get Return Address</span>
<span class="number">20AE E139 </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;;Restore Accumulator and Flags</span>
<span class="number">20AF E13A </span><span class="colon">X </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;;Swap Return Address for BASIC Pointer</span>
<span class="number">20B0 E13B </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">[~~~] </span><span class="label">XRET:  </span><span class="mnemonic"> ret    </span>                          
<span class="number">20B1 E13C </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">20B1 E13C </span><span class="colon">X </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Extended BASIC Reserved Word Tokens    </span>
<span class="number">20B1 E13C </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Note: Tokens $CB - $CE are not defined </span>
<span class="number">20B1 E13C </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">EXTLST:</span><span class="mnemonic"> ;;Exten</span>ded Reserved Words List   
<span class="number">20B1 E13C </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span> $CF               <span class="comment">;;Extended Tokens start at $CF</span>
<span class="number">20B1 E13C </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">XORTK  </span><span class="mnemonic"> equ    </span> TK                       
<span class="number">20B1 E13C </span><span class="colon">X </span><span class="hex">D8 4F 52   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'X'+$80,"OR"      <span class="comment">;;$CF  </span>
<span class="number">20B4 E13F </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span> TK+1                     
<span class="number">20B4 E13F </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">EDITTK </span><span class="mnemonic"> equ    </span> TK                       
<span class="number">20B4 E13F </span><span class="colon">X </span><span class="hex">C5 44 49 54</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'E'+$80,"DIT"     <span class="comment">;;$D0  </span>
<span class="number">20B8 E143 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span> TK+1                     
<span class="number">20B8 E143 </span><span class="colon">X </span><span class="hex">CC 4F 43   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'L'+$80,"OCATE"   <span class="comment">;;$D1  </span>
<span class="number">20BB E146 </span><span class="colon">X </span><span class="hex">41 54 45   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">20BE E149 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span> TK+1                     
<span class="number">20BE E149 </span><span class="colon">X </span><span class="hex">CD 45 4E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'M'+$80,"ENU"     <span class="comment">;;$D2  </span>
<span class="number">20C1 E14C </span><span class="colon">X </span><span class="hex">55         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">20C2 E14D </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span> TK+1                     
<span class="number">20C2 E14D </span><span class="colon">X </span><span class="hex">C3 4C 53   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'C'+$80,"LS"      <span class="comment">;;$D3  </span>
<span class="number">20C5 E150 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span> TK+1                     
<span class="number">20C5 E150 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">LINETK </span><span class="mnemonic"> equ    </span> TK                       
<span class="number">20C5 E150 </span><span class="colon">X </span><span class="hex">CC 49 4E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'L'+$80,"INE"     <span class="comment">;;$D4  </span>
<span class="number">20C8 E153 </span><span class="colon">X </span><span class="hex">45         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">20C9 E154 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span> TK+1                     
<span class="number">20C9 E154 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">CIRCTK </span><span class="mnemonic"> equ    </span> TK              ;        
<span class="number">20C9 E154 </span><span class="colon">X </span><span class="hex">C3 49 52   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'C'+$80,"IRCLE"   <span class="comment">;;$D5  </span>
<span class="number">20CC E157 </span><span class="colon">X </span><span class="hex">43 4C 45   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">20CF E15A </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span> TK+1                     
<span class="number">20CF E15A </span><span class="colon">X </span><span class="hex">C7 45 54   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'G'+$80,"ET"      <span class="comment">;;$D6  </span>
<span class="number">20D2 E15D </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span> TK+1                     
<span class="number">20D2 E15D </span><span class="colon">X </span><span class="hex">D0 55 54   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'P'+$80,"UT"      <span class="comment">;;$D7  </span>
<span class="number">20D5 E160 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span> TK+1                     
<span class="number">20D5 E160 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">DRAWTK </span><span class="mnemonic"> equ    </span> TK                       
<span class="number">20D5 E160 </span><span class="colon">X </span><span class="hex">C4 52 41   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'D'+$80,"RAW"     <span class="comment">;;$D8  </span>
<span class="number">20D8 E163 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">TK     </span><span class="mnemonic"> =      </span> TK+1                     
<span class="number">20D8 E163 </span><span class="colon">X </span><span class="hex">57         </span><span class="source">      </span><span class="label">TKLAST </span><span class="mnemonic"> equ    </span> TK                       
<span class="number">20D9 E164 </span><span class="colon">X </span><span class="hex">80         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $80               <span class="comment">;End of Table</span>
<span class="number">20DA      </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">20DA      </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Extended Statement Dispatch Table      </span>
<span class="number">20DA      </span><span class="colon">X </span><span class="hex">7F 23      </span><span class="source">      </span><span class="label">EXTDSP:</span><span class="mnemonic"> word   </span> EDIT              <span class="comment">;;$237F</span>
<span class="number">     E165 </span><span class="colon">X </span><span class="hex">0A E4      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">20DC      </span><span class="colon">X </span><span class="hex">4A 22      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> LOCATE            <span class="comment">;;$224A</span>
<span class="number">     E167 </span><span class="colon">X </span><span class="hex">D5 E2      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">20DE      </span><span class="colon">X </span><span class="hex">67 22      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> MENU              <span class="comment">;;$2267</span>
<span class="number">     E169 </span><span class="colon">X </span><span class="hex">F2 E2      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">20E0      </span><span class="colon">X </span><span class="hex">46 22      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> CLS               <span class="comment">;;$2246</span>
<span class="number">     E16B </span><span class="colon">X </span><span class="hex">D1 E2      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">20E2      </span><span class="colon">X </span><span class="hex">E7 25      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> GLINE             <span class="comment">;;$25E7</span>
<span class="number">     E16D </span><span class="colon">X </span><span class="hex">72 E6      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">20E4      </span><span class="colon">X </span><span class="hex">00 27      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> CIRCLE            <span class="comment">;;$2700</span>
<span class="number">     E16F </span><span class="colon">X </span><span class="hex">8B E7      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">20E6      </span><span class="colon">X </span><span class="hex">6F 23      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> GGET              <span class="comment">;;$236F</span>
<span class="number">     E171 </span><span class="colon">X </span><span class="hex">FA E3      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">20E8      </span><span class="colon">X </span><span class="hex">6B 23      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> GPUT              <span class="comment">;;$236B</span>
<span class="number">     E173 </span><span class="colon">X </span><span class="hex">F6 E3      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">20EA      </span><span class="colon">X </span><span class="hex">9D 2A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> DRAW              <span class="comment">;;$2A9D</span>
<span class="number">     E175 </span><span class="colon">X </span><span class="hex">28 EB      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">20EC      </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">20EC E177 </span><span class="colon">X </span><span class="hex">78         </span><span class="source">      </span><span class="label">NOTGOX:</span><span class="mnemonic"> ld     </span> a,b                      
<span class="number">20ED E178 </span><span class="colon">X </span><span class="hex">FE CB      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> POINTK+1                 
<span class="number">20EF      </span><span class="colon">X </span><span class="hex">C2 AD 20   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,UNHOOK                
<span class="number">     E17A </span><span class="colon">X </span><span class="hex">C2 38 E1   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,UNHOOK                
<span class="number">20F2 E17D </span><span class="colon">X </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                       
<span class="number">20F3 E17E </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;;Restore Accumulator and Flags</span>
<span class="number">20F4 E17F </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;;Restore BASIC Pointer</span>
<span class="number">20F5 E180 </span><span class="colon">X </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;;Push Return Address</span>
<span class="number">20F6 E181 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">20F7      </span><span class="colon">X </span><span class="hex">11 B0 20   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,XRET                  
<span class="number">     E182 </span><span class="colon">X </span><span class="hex">11 3B E1   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">20FA E185 </span><span class="colon">X </span><span class="hex">06 CE      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,XORTK-1                
<span class="number">20FC E187 </span><span class="colon">X </span><span class="hex">C3 F9 04   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> CRUNCX            <span class="comment">;;Jump into CRUNCH</span>
<span class="number">20FF E18A </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">20FF E18A </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Hook 22 - Check for and Handle Extended BASIC Tokens</span>
<span class="number">20FF E18A </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">LISTHK:</span><span class="mnemonic"> pop    </span> de                <span class="comment">;;Get Return Address</span>
<span class="number">2100 E18B </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;;Restore Accumulator and Flags</span>
<span class="number">2101 E18C </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;;Restore Basic Pointer</span>
<span class="number">2102 E18D </span><span class="colon">X </span><span class="hex">FE CF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> XORTK                    
<span class="number">2104 E18F </span><span class="colon">X </span><span class="hex">30 02      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,RESSRX         <span class="comment">;;If Token < XORTK</span>
<span class="number">2106 E191 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;;  Push Return Address onto Stack</span>
<span class="number">2107 E192 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;;  and Return</span>
<span class="number">2108 E193 </span><span class="colon">X </span><span class="hex">D6 CE      </span><span class="source">      </span><span class="label">RESSRX:</span><span class="mnemonic"> sub    </span> XORTK-1                  
<span class="number">210A E195 </span><span class="colon">X </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a               <span class="comment">;;Set Count to Position in EXTLSR</span>
<span class="number">210B      </span><span class="colon">X </span><span class="hex">11 B1 20   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,EXTLST         <span class="comment">;;Search in EXTLST</span>
<span class="number">     E196 </span><span class="colon">X </span><span class="hex">11 3C E1   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">210E      </span><span class="colon">X </span><span class="hex">C3 A8 05   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> RESSRC            <span class="comment">;;Go Do It</span>
<span class="number">     E199 </span><span class="colon">X </span><span class="hex">C3 A8 05   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> RESSRC            <span class="comment">;;Go Do It</span>
<span class="number">2111 E19C </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2111 E19C </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Hook 23 - Check for and Dispatch Extended BASIC Statement Token</span>
<span class="number">2111 E19C </span><span class="colon">X </span><span class="hex">C1         </span><span class="source">      </span><span class="label">GONE23:</span><span class="mnemonic"> pop    </span> bc                <span class="comment">;;Pop Return Address</span>
<span class="number">2112 E19D </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;;Restore Accumulator and Flags</span>
<span class="number">2113 E19E </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;;Restore BASIC Pointer</span>
<span class="number">2114 E19F </span><span class="colon">X </span><span class="hex">30 0C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,GONE24         <span class="comment">;;If Standard BASIC Token</span>
<span class="number">2116 E1A1 </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;;  Save Accumulator and Flags</span>
<span class="number">2117 E1A2 </span><span class="colon">X </span><span class="hex">FE 1C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> PSETTK-$80        <span class="comment">;;  If PSET</span>
<span class="number">2119 E1A4 </span><span class="colon">X </span><span class="hex">28 4E      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,PSETX           <span class="comment">;;    Do Extended BASIC PSET</span>
<span class="number">211B E1A6 </span><span class="colon">X </span><span class="hex">FE 1D      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> PRESTK-$80        <span class="comment">;;  If PRESET</span>
<span class="number">211D E1A8 </span><span class="colon">X </span><span class="hex">28 46      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,PRESEX          <span class="comment">;;    Do Extended BASIC PRESET</span>
<span class="number">211F E1AA </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;;  Restore Accumulator and Flags</span>
<span class="number">2120 E1AB </span><span class="colon">X </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;;  Push Return Address back on to Stack</span>
<span class="number">2121 E1AC </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;;  and Return</span>
<span class="number">2122 E1AD </span><span class="colon">X </span><span class="hex">D6 50      </span><span class="source">      </span><span class="label">GONE24:</span><span class="mnemonic"> sub    </span> EDITTK-$80        <span class="comment">;;Get Position in Extended List</span>
<span class="number">2124 E1AF </span><span class="colon">X </span><span class="hex">DA C4 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> c,SNERR           <span class="comment">;;  If Negative, Syntax Error</span>
<span class="number">2127 E1B2 </span><span class="colon">X </span><span class="hex">FE 09      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> TKLAST-EDITTK     <span class="comment">;;Past End of Extended Tokens?</span>
<span class="number">2129 E1B4 </span><span class="colon">X </span><span class="hex">D2 C4 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,SNERR          <span class="comment">;;  Yes, Syntax Error</span>
<span class="number">212C E1B7 </span><span class="colon">X </span><span class="hex">07         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rlca   </span>                   <span class="comment">;;Dispatch Offset = Position *2</span>
<span class="number">212D E1B8 </span><span class="colon">X </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a               <span class="comment">;;[B,C] = Dispatch Offset</span>
<span class="number">212E E1B9 </span><span class="colon">X </span><span class="hex">06 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,0                      
<span class="number">2130 E1BB </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;;Text Pointer into [D,E]</span>
<span class="number">2131      </span><span class="colon">X </span><span class="hex">21 DA 20   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,EXTDSP         <span class="comment">;;Use Extended Dispatch Table</span>
<span class="number">     E1BC </span><span class="colon">X </span><span class="hex">21 65 E1   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2134 E1BF </span><span class="colon">X </span><span class="hex">C3 65 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> GONE5             <span class="comment">;;Continue Statement Dispatch</span>
<span class="number">2137 E1C2 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2137 E1C2 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Hook 18 - Read Keyboard (INCHRH)       </span>
<span class="number">2137 E1C2 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">INCHRX:</span><span class="mnemonic"> pop    </span> hl                <span class="comment">;;Hook Table Address</span>
<span class="number">2138 E1C3 </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;;Accumulatot and Flags</span>
<span class="number">2139 E1C4 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">213A E1C5 </span><span class="colon">X </span><span class="hex">CD 80 1E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> INCHRC            <span class="comment">;;Read The Keyboard</span>
<span class="number">213D E1C8 </span><span class="colon">X </span><span class="hex">D9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> exx    </span>                          
<span class="number">213E      </span><span class="colon">X </span><span class="hex">21 B1 20   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,EXTLST         <span class="comment">;;Use Extended Reserved Words List</span>
<span class="number">     E1C9 </span><span class="colon">X </span><span class="hex">21 3C E1   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2141 E1CC </span><span class="colon">X </span><span class="hex">FE 0F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 15                <span class="comment">;;Ctrl-O?</span>
<span class="number">2143 E1CE </span><span class="colon">X </span><span class="hex">28 0F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,KCIRCL                 
<span class="number">2145 E1D0 </span><span class="colon">X </span><span class="hex">FE 19      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 25                <span class="comment">;;Ctrl-Y?</span>
<span class="number">2147 E1D2 </span><span class="colon">X </span><span class="hex">28 0F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,KEDIT                  
<span class="number">2149 E1D4 </span><span class="colon">X </span><span class="hex">FE 10      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 16                <span class="comment">;;Ctrl-P?</span>
<span class="number">214B E1D6 </span><span class="colon">X </span><span class="hex">28 13      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,KLINE                  
<span class="number">214D E1D8 </span><span class="colon">X </span><span class="hex">FE 1E      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 30                <span class="comment">;;Ctrl-^?</span>
<span class="number">214F E1DA </span><span class="colon">X </span><span class="hex">28 0B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,KDRAW                  
<span class="number">2151 E1DC </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                        
<span class="number">2152 E1DD </span><span class="colon">X </span><span class="hex">D9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> exx    </span>                          
<span class="number">2153 E1DE </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2154 E1DF </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2154 E1DF </span><span class="colon">X </span><span class="hex">0E 06      </span><span class="source">      </span><span class="label">KCIRCL:</span><span class="mnemonic"> ld     </span> c,CIRCTK-XORTK  ;;CIRCLE 
<span class="number">2156 E1E1 </span><span class="colon">X </span><span class="hex">18 0A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> KEYREX                   
<span class="number">2158 E1E3 </span><span class="colon">X </span><span class="hex">0E 01      </span><span class="source">      </span><span class="label">KEDIT: </span><span class="mnemonic"> ld     </span> c,EDITTK-XORTK           
<span class="number">215A E1E5 </span><span class="colon">X </span><span class="hex">18 06      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> KEYREX                   
<span class="number">215C E1E7 </span><span class="colon">X </span><span class="hex">0E 09      </span><span class="source">      </span><span class="label">KDRAW: </span><span class="mnemonic"> ld     </span> c,DRAWTK-XORTK  ;;DRAW   
<span class="number">215E E1E9 </span><span class="colon">X </span><span class="hex">18 02      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> KEYREX                   
<span class="number">2160 E1EB </span><span class="colon">X </span><span class="hex">0E 05      </span><span class="source">      </span><span class="label">KLINE: </span><span class="mnemonic"> ld     </span> c,LINETK-XORTK           
<span class="number">2162 E1ED </span><span class="colon">X </span><span class="hex">C3 28 1F   </span><span class="source">      </span><span class="label">KEYREX:</span><span class="mnemonic"> jp     </span> KEYRES                   
<span class="number">2165 E1F0 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2165 E1F0 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Extended PSET or PRESET                </span>
<span class="number">2165 E1F0 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Reads Coordinates and saves them for subsequent</span>
<span class="number">2165 E1F0 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;  LINE -(X,Y) or LINE -STEP(X,Y) statement</span>
<span class="number">2165 E1F0 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;then executes standard basic PSET/PRESET code</span>
<span class="number">2165 E1F0 </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">      </span><span class="label">PRESEX:</span><span class="mnemonic"> pop    </span> af                <span class="comment">;;Discard Saved Flags</span>
<span class="number">2166 E1F1 </span><span class="colon">X </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;;[EBU] PRESET FLAG</span>
<span class="number">2167 E1F2 </span><span class="colon">X </span><span class="hex">18 03      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> PPRSEX                   
<span class="number">2169 E1F4 </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">      </span><span class="label">PSETX: </span><span class="mnemonic"> pop    </span> af                <span class="comment">;;Discard Saved Flags</span>
<span class="number">216A E1F5 </span><span class="colon">X </span><span class="hex">3E 01      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,1               <span class="comment">;;[EBU] PSET FLAG</span>
<span class="number">216C E1F7 </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">PPRSEX:</span><span class="mnemonic"> inc    </span> hl                <span class="comment">;;Skip PSET/PRESET Token</span>
<span class="number">216D E1F8 </span><span class="colon">X </span><span class="hex">08         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> af,af'            <span class="comment">;;Save PSET/PRESET flag</span>
<span class="number">216E E1F9 </span><span class="colon">X </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK            <span class="comment">;;Require '('</span>
<span class="number">216F E1FA </span><span class="colon">X </span><span class="hex">28         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> '('                      
<span class="number">2170 E1FB </span><span class="colon">X </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;;Back up to '(' for SCAN1</span>
<span class="number">2171      </span><span class="colon">X </span><span class="hex">CD 47 25   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SCAN1             <span class="comment">;;Scan Coordinates as (X,Y)</span>
<span class="number">     E1FC </span><span class="colon">X </span><span class="hex">CD D2 E5   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2174 E1FF </span><span class="colon">X </span><span class="hex">C3 55 1A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> PPRSDO            <span class="comment">;;Go Do PSET/PRESET</span>
<span class="number">2177 E202 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2177 E202 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80]S</span><span class="comment">IMPLE-USER-DEFINED-FUNCTION CODE  </span>
<span class="number">2177 E202 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">2177 E202 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IN THE 8K VERSION (SEE LATER COMMENT FOR EXTENDED)</span>
<span class="number">2177 E202 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">NOTE ONLY SINGLE ARGUMENTS ARE ALLOWED TO FUNCTIONS</span>
<span class="number">2177 E202 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND FUNCTIONS MUST BE OF THE SINGLE LINE FORM:</span>
<span class="number">2177 E202 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">DEF FNA(X)=X^2+X-2                </span>
<span class="number">2177 E202 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">NO STRINGS CAN BE INVOLVED WITH THESE FUNCTIONS</span>
<span class="number">2177 E202 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">2177 E202 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IDEA: CREATE A FUNNY SIMPLE VARIABLE ENTRY</span>
<span class="number">2177 E202 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">WHOSE FIRST CHARACTER (SECOND WORD IN MEMORY)</span>
<span class="number">2177 E202 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">HAS THE 200 BIT SET.              </span>
<span class="number">2177 E202 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE VALUE WILL BE:                </span>
<span class="number">2177 E202 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">2177 E202 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">  A TXTPTR TO THE FORMULA         </span>
<span class="number">2177 E202 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">THE NAME OF THE PARAMETER VARIABLE</span>
<span class="number">2177 E202 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">2177 E202 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">FUNCTION NAMES CAN BE LIKE "FNA4" </span>
<span class="number">2177 E202 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">2177 E202 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">[~~~] </span><span class="label">DEFX:  </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">2178 E203 </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                       
<span class="number">2179 E204 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">217A      </span><span class="colon">X </span><span class="hex">CD EA 21   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GETFNM            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET A POINTER TO THE FUNCTION NAME</span>
<span class="number">     E205 </span><span class="colon">X </span><span class="hex">CD 75 E2   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">217D E208 </span><span class="colon">X </span><span class="hex">CD 45 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> ERRDIR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DEF IS "ILLEGAL DIRECT"</span>
<span class="number">2180 E20B </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">                                  ;[M80] MEMORY, RESTORE THE TXTPTRAND GO TO "DATA"</span>
<span class="number">2180 E20B </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">                                  ;[M80] SKIPPING THE REST OF THE FORMULA</span>
<span class="number">2180 E20B </span><span class="colon">X </span><span class="hex">01 1C 07   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> bc,DATA                  
<span class="number">2183 E20E </span><span class="colon">X </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                       
<span class="number">2184 E20F </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                       
<span class="number">2185 E210 </span><span class="colon">X </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK                   
<span class="number">2186 E211 </span><span class="colon">X </span><span class="hex">28         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> '('               <span class="comment">;{GWB} SKIP OVER OPEN PAREN</span>
<span class="number">2187 E212 </span><span class="colon">X </span><span class="hex">CD D1 10   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> PTRGET            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET POINTER TO DUMMY VAR(CREATE VAR)</span>
<span class="number">2189 E215 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                       
<span class="number">218B E216 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">218C E217 </span><span class="colon">X </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                       
<span class="number">218D E218 </span><span class="colon">X </span><span class="hex">56         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,(hl)                   
<span class="number">218E E219 </span><span class="colon">X </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                       
<span class="number">218F E21A </span><span class="colon">X </span><span class="hex">5E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,(hl)                   
<span class="number">2190 E21B </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">2191 E21C </span><span class="colon">X </span><span class="hex">CD 75 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CHKNUM                   
<span class="number">2194 E21F </span><span class="colon">X </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK                   
<span class="number">2195 E220 </span><span class="colon">X </span><span class="hex">29         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> ')'               <span class="comment">;{M80} MUST BE FOLLOWED BY )</span>
<span class="number">2196 E221 </span><span class="colon">X </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK                   
<span class="number">2197 E222 </span><span class="colon">X </span><span class="hex">B0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> EQUATK                   
<span class="number">2198 E223 </span><span class="colon">X </span><span class="hex">44         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,h                      
<span class="number">2199 E224 </span><span class="colon">X </span><span class="hex">4D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,l                      
<span class="number">219A E225 </span><span class="colon">X </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl                  
<span class="number">219B E226 </span><span class="colon">X </span><span class="hex">71         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),c                   
<span class="number">219C E227 </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">219D E228 </span><span class="colon">X </span><span class="hex">70         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),b                   
<span class="number">219E E229 </span><span class="colon">X </span><span class="hex">C3 59 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> STRADX                   
<span class="number">21A1 E22C </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">21A1 E22C </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">[M80] </span><span class="label">FNDOEX:</span><span class="mnemonic"> pop    </span> hl                       
<span class="number">21A2 E22D </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                       
<span class="number">21A3 E22E </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">21A4      </span><span class="colon">X </span><span class="hex">CD EA 21   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GETFNM            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET A POINTER TO THE FUNCTION NAME</span>
<span class="number">     E22F </span><span class="colon">X </span><span class="hex">CD 75 E2   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">21A7 E232 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                       
<span class="number">21A8 E233 </span><span class="colon">X </span><span class="hex">CD 37 0A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> PARCHK            <span class="comment">;{M80} RECURSIVELY EVALUATE THE FORMULA</span>
<span class="number">21AB E236 </span><span class="colon">X </span><span class="hex">CD 75 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CHKNUM            <span class="comment">;{M65} MUST BE NUMBER</span>
<span class="number">21AE E239 </span><span class="colon">X </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE TEXT POINTER THAT POINTS PAST THE</span>
<span class="number">21AF E23A </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">                                  ;[M80] FUNCTION NAME IN THE CALL</span>
<span class="number">21AF E23A </span><span class="colon">X </span><span class="hex">5E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,(hl)            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">[H,L]=VALUE OF THE FUNCTION</span>
<span class="number">21B0 E23B </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">21B1 E23C </span><span class="colon">X </span><span class="hex">56         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,(hl)                   
<span class="number">21B2 E23D </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">WHICH IS A TEXT POINTER AT THE FORMAL</span>
<span class="number">21B3 E23E </span><span class="colon">X </span><span class="hex">7A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,d               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PARAMETER LIST IN THE DEFINITION</span>
<span class="number">21B4 E23F </span><span class="colon">X </span><span class="hex">B3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> e                 <span class="comment">;</span><span class="source">[M80] </span><span class="comment">A ZERO TEXT POINTER MEANS THE FUNCTION</span>
<span class="number">21B5 E240 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">                                  ;[M80] WAS NEVER DEFINED</span>
<span class="number">21B5 E240 </span><span class="colon">X </span><span class="hex">CA D0 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,UFERR           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF SO, GIVEN AN "UNDEFINED FUNCTION" ERROR</span>
<span class="number">21B8 E243 </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)                   
<span class="number">21B9 E244 </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">21BA E245 </span><span class="colon">X </span><span class="hex">66         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,(hl)                   
<span class="number">21BB E246 </span><span class="colon">X </span><span class="hex">6F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,a                      
<span class="number">21BC E247 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SAVE THE NEW VALUE FOR PRMSTK</span>
<span class="number">21BD E248 </span><span class="colon">X </span><span class="hex">2A DE 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(VARNAM)              
<span class="number">21C0 E24B </span><span class="colon">X </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl                  
<span class="number">21C1 E24C </span><span class="colon">X </span><span class="hex">22 DE 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (VARNAM),hl              
<span class="number">21C4 E24F </span><span class="colon">X </span><span class="hex">2A E2 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(FNPARM)              
<span class="number">21C7 E252 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                       
<span class="number">21C8 E253 </span><span class="colon">X </span><span class="hex">2A E0 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(VARPNT)              
<span class="number">21CB E256 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                       
<span class="number">21CC E257 </span><span class="colon">X </span><span class="hex">21 E0 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,VARPNT                
<span class="number">21CF E25A </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                       
<span class="number">21D0 E25B </span><span class="colon">X </span><span class="hex">CD 3A 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVMF                    
<span class="number">21D3 E25E </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">21D4 E25F </span><span class="colon">X </span><span class="hex">CD 72 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FRMNUM            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">AND EVALUATE THE DEFINITION FORMULA</span>
<span class="number">21D7 E262 </span><span class="colon">X </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">CAN HAVE RECURSION AT THIS POINT</span>
<span class="number">21D8 E263 </span><span class="colon">X </span><span class="hex">D7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF THE STATEMENT ENDED RIGHT</span>
<span class="number">21D9 E264 </span><span class="colon">X </span><span class="hex">C2 C4 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,SNERR          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">THIS IS A CHEAT, SINCE THE LINE</span>
<span class="number">21DC E267 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">                                  ;[M80] NUMBER OF THE ERROR WILL BE THE CALLERS</span>
<span class="number">21DC E267 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">                                  ;[M80] LINE # INSTEAD OF THE DEFINITIONS LINE #</span>
<span class="number">21DC E267 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">21DD E268 </span><span class="colon">X </span><span class="hex">22 E0 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (VARPNT),hl              
<span class="number">21E0 E26B </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">21E1 E26C </span><span class="colon">X </span><span class="hex">22 E2 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (FNPARM),hl              
<span class="number">21E4 E26F </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">21E5 E270 </span><span class="colon">X </span><span class="hex">22 DE 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (VARNAM),hl              
<span class="number">21E8 E273 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET BACK THE TEXT POINTER</span>
<span class="number">21E9 E274 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">21EA E275 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">21EA E275 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">SUBROUTINE TO GET A POINTER TO A FUNCTION NAME</span>
<span class="number">21EA E275 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">                                  </span>
<span class="number">21EA E275 </span><span class="colon">X </span><span class="hex">CF         </span><span class="source">[M80] </span><span class="label">GETFNM:</span><span class="mnemonic"> rst    </span> SYNCHK                   
<span class="number">21EB E276 </span><span class="colon">X </span><span class="hex">A2         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> FNTK              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">MUST START WITH "FN"</span>
<span class="number">21EC E277 </span><span class="colon">X </span><span class="hex">3E 80      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,128             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DONT ALLOW AN ARRAY</span>
<span class="number">21EE E279 </span><span class="colon">X </span><span class="hex">32 CB 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (SUBFLG),a        <span class="comment">;</span><span class="source">[M80] </span><span class="comment">DON'T RECOGNIZE THE "(" AS THE START OF AN ARRAY REFEREENCE</span>
<span class="number">21F1 E27C </span><span class="colon">X </span><span class="hex">B6         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> (hl)              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT FUNCTION BIT ON</span>
<span class="number">21F2 E27D </span><span class="colon">X </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET FIRST CHARACTER INTO [C]</span>
<span class="number">21F3 E27E </span><span class="colon">X </span><span class="hex">CD D6 10   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> PTRGT2                   
<span class="number">21F6 E281 </span><span class="colon">X </span><span class="hex">C3 75 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> CHKNUM                   
<span class="number">21F9 E284 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">21F9 E284 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">ARCTANGENT FUNCTION               </span>
<span class="number">21F9 E284 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">IDEA: USE IDENTITIES TO GET ARG BETWEEN 0 AND 1 AND THEN USE AN</span>
<span class="number">21F9 E284 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">APPROXIMATION POLYNOMIAL TO COMPUTE ARCTAN(X)</span>
<span class="number">21F9 E284 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">[~~~] </span><span class="label">ATN1:  </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">21FA E285 </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                       
<span class="number">21FB E286 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">21FC E287 </span><span class="colon">X </span><span class="hex">EF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> FSIGN             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF ARG IS NEGATIVE</span>
<span class="number">21FD E288 </span><span class="colon">X </span><span class="hex">FC 70 17   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> m,PSHNEG          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">IF ARG IS NEGATIVE, USE:</span>
<span class="number">2200 E28B </span><span class="colon">X </span><span class="hex">FC 0B 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> m,NEG             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">   ARCTAN(X)=-ARCTAN(-X</span>
<span class="number">2203 E28E </span><span class="colon">X </span><span class="hex">3A E7 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(FAC)           <span class="comment">;</span><span class="source">[M80] </span><span class="comment">SEE IF FAC .GT. 1</span>
<span class="number">2206 E291 </span><span class="colon">X </span><span class="hex">FE 81      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 129                      
<span class="number">2208      </span><span class="colon">X </span><span class="hex">DA 17 22   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> c,ATN2                   
<span class="number">     E293 </span><span class="colon">X </span><span class="hex">DA A2 E2   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">220B E296 </span><span class="colon">X </span><span class="hex">01 00 81   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> bc,$8100          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE CONSTANT 1</span>
<span class="number">220E E299 </span><span class="colon">X </span><span class="hex">51         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,c                      
<span class="number">220F E29A </span><span class="colon">X </span><span class="hex">59         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,c               <span class="comment">;</span><span class="source">[M80] </span><span class="comment">COMPUTE RECIPROCAL TO USE THE IDENTITY:</span>
<span class="number">2210 E29B </span><span class="colon">X </span><span class="hex">CD 2F 14   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FDIV              <span class="comment">;</span><span class="source">[M80] </span><span class="comment">  ARCTAN(X)=PI/2-ARCTAN(1/X)</span>
<span class="number">2213 E29E </span><span class="colon">X </span><span class="hex">21 58 12   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,FSUBS          <span class="comment">;</span><span class="source">[M80] </span><span class="comment">PUT FSUBS ON THE STACK SO WE WILL RETURN</span>
<span class="number">2216 E2A1 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;</span><span class="source">[M80] </span><span class="comment"> TO IT AND SUBTRACT THE REULT FROM PI/2</span>
<span class="number">2217      </span><span class="colon">X </span><span class="hex">21 21 22   </span><span class="source">[M80] </span><span class="label">ATN2:  </span><span class="mnemonic"> ld     </span> hl,ATNCON         <span class="comment">;</span><span class="source">[M80] </span><span class="comment">EVALUATE APPROXIMATION POLYNOMIAL</span>
<span class="number">     E2A2 </span><span class="colon">X </span><span class="hex">21 AC E2   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">221A E2A5 </span><span class="colon">X </span><span class="hex">CD 37 18   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> POLYX                    
<span class="number">221D E2A8 </span><span class="colon">X </span><span class="hex">21 53 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,PI2            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET POINTER TO PI/2 IN CASE WE HAVE TO</span>
<span class="number">2220 E2AB </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;</span><span class="source">[M80] </span><span class="comment"> SUBTRACT THE RESULT FROM PI/2</span>
<span class="number">2221 E2AC </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2221 E2AC </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;CONSTANTS FOR ATN                       </span>
<span class="number">2221 E2AC </span><span class="colon">X </span><span class="hex">09         </span><span class="source">[M80] </span><span class="label">ATNCON:</span><span class="mnemonic"> byte   </span> 9                 <span class="comment">;DEGREE</span>
<span class="number">2222 E2AD </span><span class="colon">X </span><span class="hex">4A D7 3B 78</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $4A,$D7,$3B,$78   <span class="comment">; .002866226</span>
<span class="number">2226 E2B1 </span><span class="colon">X </span><span class="hex">02 6E 84 7B</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $02,$6E,$84,$7B   <span class="comment">; -.01616574</span>
<span class="number">222A E2B5 </span><span class="colon">X </span><span class="hex">FE C1 2F 7C</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $FE,$C1,$2F,$7C   <span class="comment">; .04290961</span>
<span class="number">222E E2B9 </span><span class="colon">X </span><span class="hex">74 31 9A 7D</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $74,$31,$9A,$7D   <span class="comment">; -.07528964</span>
<span class="number">2232 E2BD </span><span class="colon">X </span><span class="hex">84 3D 5A 7D</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $84,$3D,$5A,$7D   <span class="comment">; .1065626</span>
<span class="number">2236 E2C1 </span><span class="colon">X </span><span class="hex">C8 7F 91 7E</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $C8,$7F,$91,$7E   <span class="comment">; -.142089</span>
<span class="number">223A E2C5 </span><span class="colon">X </span><span class="hex">E4 BB 4C 7E</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $E4,$BB,$4C,$7E   <span class="comment">; .1999355</span>
<span class="number">223E E2C9 </span><span class="colon">X </span><span class="hex">6C AA AA 7F</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $6C,$AA,$AA,$7F   <span class="comment">; -.3333315</span>
<span class="number">2242 E2CD </span><span class="colon">X </span><span class="hex">00 00 00 81</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $00,$00,$00,$81   <span class="comment">; 1.0  </span>
<span class="number">2246 E2D1 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2246 E2D1 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">CLS: CLear Screen issues an escape sequence to clear the CRT.</span>
<span class="number">2246 E2D1 </span><span class="colon">X </span><span class="hex">3E 0B      </span><span class="source">[M80] </span><span class="label">CLS:   </span><span class="mnemonic"> ld     </span> a,11                     
<span class="number">2248 E2D3 </span><span class="colon">X </span><span class="hex">DF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> OUTCHR                   
<span class="number">2249 E2D4 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">224A E2D5 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">224A E2D5 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">LOCATE: Parse the following syntax:</span>
<span class="number">224A E2D5 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">       LOCATE X,Y                 </span>
<span class="number">224A E2D5 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">                                  </span>
<span class="number">224A E2D5 </span><span class="colon">X </span><span class="hex">CD 54 0B   </span><span class="source">[GWB] </span><span class="label">LOCATE:</span><span class="mnemonic"> call   </span> GETBYT            <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">Get X parameter</span>
<span class="number">224D E2D8 </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;;Save it</span>
<span class="number">224E E2D9 </span><span class="colon">X </span><span class="hex">3D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> a                 <span class="comment">;;Make it 1 less</span>
<span class="number">224F E2DA </span><span class="colon">X </span><span class="hex">FE 26      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 38                <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">Check for parameter range</span>
<span class="number">2251 E2DC </span><span class="colon">X </span><span class="hex">D2 97 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,FCERR                 
<span class="number">2254 E2DF </span><span class="colon">X </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK                   
<span class="number">2255 E2E0 </span><span class="colon">X </span><span class="hex">2C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> ','                      
<span class="number">2256 E2E1 </span><span class="colon">X </span><span class="hex">CD 54 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GETBYT            <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">Get Y parameter</span>
<span class="number">2259 E2E4 </span><span class="colon">X </span><span class="hex">FE 18      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 24                       
<span class="number">225B E2E6 </span><span class="colon">X </span><span class="hex">D2 97 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,FCERR          <span class="comment">;</span><span class="source">[GWB] </span><span class="comment">Check for parameter range</span>
<span class="number">225E E2E9 </span><span class="colon">X </span><span class="hex">1C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> e                 <span class="comment">;;[E] = Y + 1</span>
<span class="number">225F E2EA </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;;Restore X</span>
<span class="number">2260 E2EB </span><span class="colon">X </span><span class="hex">57         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,a               <span class="comment">;;[D] = X</span>
<span class="number">2261 E2EC </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;;{HL] = C,Y</span>
<span class="number">2262      </span><span class="colon">X </span><span class="hex">CD 4D 2D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVEIT                   
<span class="number">     E2ED </span><span class="colon">X </span><span class="hex">CD D8 ED   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2265 E2F0 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;;Switch Back</span>
<span class="number">2266 E2F1 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2267 E2F2 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2267 E2F2 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;;This Statement appears to be unique to the Aquarius</span>
<span class="number">2267 E2F2 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;The MENU Statement                     </span>
<span class="number">2267 E2F2 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Syntax: MENU (xpos,ypos), spacing;     </span>
<span class="number">2267 E2F2 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;             "string-1","string-2",...,"string-n"</span>
<span class="number">2267 E2F2 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;              GOTO line-1,line-2,...,line-n</span>
<span class="number">2267 E2F2 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Spacing is optional, in the form:      </span>
<span class="number">2267 E2F2 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;        MENU (xpos,ypos) "string-1",... GOTO line-1,...</span>
<span class="number">2267 E2F2 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;An at sign may precede the coordinates:</span>
<span class="number">2267 E2F2 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;        MENU @(xpos,ypos) ...          </span>
<span class="number">2267 E2F2 </span><span class="colon">X </span><span class="hex">FE 40      </span><span class="source">[~~~] </span><span class="label">MENU:  </span><span class="mnemonic"> cp     </span> '@'               <span class="comment">;{GWB} ALLOW MEANINGLESS "@"</span>
<span class="number">2269 E2F4 </span><span class="colon">X </span><span class="hex">CC 6B 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> z,CHRGTR          <span class="comment">;{GWB} BY SKIPPING OVER IT</span>
<span class="number">226C      </span><span class="colon">X </span><span class="hex">CD E0 22   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SCANX             <span class="comment">;;Scan Coordinates into [D,E]</span>
<span class="number">     E2F7 </span><span class="colon">X </span><span class="hex">CD 6B E3   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">226F E2FA </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;;Push Coordinates onto Stack</span>
<span class="number">2270 E2FB </span><span class="colon">X </span><span class="hex">1E 01      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,1               <span class="comment">;;Default Spacing (1) into [E]</span>
<span class="number">2272 E2FD </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;;     </span>
<span class="number">2273 E2FE </span><span class="colon">X </span><span class="hex">FE 2C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> ','               <span class="comment">;;If Next Character is a Comma</span>
<span class="number">2275 E300 </span><span class="colon">X </span><span class="hex">20 08      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,MENU2          <span class="comment">;;  Scan Optional Spacing Parameter</span>
<span class="number">2277 E302 </span><span class="colon">X </span><span class="hex">D7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;;  Eat Comma</span>
<span class="number">2278 E303 </span><span class="colon">X </span><span class="hex">CD 54 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GETBYT            <span class="comment">;;  Scan Spacing in [E]</span>
<span class="number">227B E306 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;;  Push Options onto Stack</span>
<span class="number">227C E307 </span><span class="colon">X </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK                   
<span class="number">227D E308 </span><span class="colon">X </span><span class="hex">3B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> ';'               <span class="comment">;;  Require a Semicolon</span>
<span class="number">227E E309 </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;;  Pop Options into [D,E]</span>
<span class="number">227F E30A </span><span class="colon">X </span><span class="hex">4B         </span><span class="source">(~~~) </span><span class="label">MENU2: </span><span class="mnemonic"> ld     </span> c,e               <span class="comment">;;Copy Spacing into [C]</span>
<span class="number">2280 E30B </span><span class="colon">X </span><span class="hex">06 01      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,1               <span class="comment">;;Init Counter to 1 ino B</span>
<span class="number">2282 E30D </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;;Pop Coordinates into [D,E]</span>
<span class="number">2283 E30E </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                <span class="comment">;;Push Coordinates back onto Stack</span>
<span class="number">2284 E30F </span><span class="colon">X </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;;Push Options onto Stack</span>
<span class="number">2285 E310 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">        ;;Evaluate and Print String      </span>
<span class="number">2285 E310 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">(~~~) </span><span class="label">MENUS: </span><span class="mnemonic"> push   </span> hl                <span class="comment">;;Push Text Pointer onto Stack</span>
<span class="number">2286 E311 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;;Swap Coordinates into [H,L]</span>
<span class="number">2287 E312 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;;Push Coordinates onto Stack</span>
<span class="number">2288      </span><span class="colon">X </span><span class="hex">CD 4D 2D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVEIT            <span class="comment">;;Move Cursor to Coordinates [H,L]</span>
<span class="number">     E313 </span><span class="colon">X </span><span class="hex">CD D8 ED   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">228B E316 </span><span class="colon">X </span><span class="hex">3E 2E      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,'.'                    
<span class="number">228D E318 </span><span class="colon">X </span><span class="hex">DF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> OUTCHR            <span class="comment">;;Print a Period</span>
<span class="number">228E E319 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;;HL = Coords, Stack = Text Pointer, Options. Coords</span>
<span class="number">228F E31A </span><span class="colon">X </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;;HL = Text Pointer, Stack = Coordinates</span>
<span class="number">2290 E31B </span><span class="colon">X </span><span class="hex">CD 85 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FRMEVL            <span class="comment">;;Evaluate a String</span>
<span class="number">2293 E31E </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;;Stack = Text Pointer, Coords, Options. Coords</span>
<span class="number">2294 E31F </span><span class="colon">X </span><span class="hex">CD C6 0F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FRESTR            <span class="comment">;</span><span class="source">[M80] </span><span class="comment">FREE UP TEMP POINTED TO BY FACLO</span>
<span class="number">2297 E322 </span><span class="colon">X </span><span class="hex">CD A0 0E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> STRPRT            <span class="comment">;;Print the String</span>
<span class="number">229A E325 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;;HL = Text Pointer, Stack =  Coords, Options. Coords</span>
<span class="number">229B E326 </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;;DE = Coords, Stack = Options. Coords</span>
<span class="number">229C E327 </span><span class="colon">X </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;;BC = Options, Stack = Coords</span>
<span class="number">229D E328 </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)                   
<span class="number">229E E329 </span><span class="colon">X </span><span class="hex">FE 2C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> ','               <span class="comment">;;Is Next Character a Comma?</span>
<span class="number">22A0 E32B </span><span class="colon">X </span><span class="hex">20 0C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,MENU3          <span class="comment">;;If So</span>
<span class="number">22A2 E32D </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;;  HL = Coords, DE = Text Pointer</span>
<span class="number">22A3 E32E </span><span class="colon">X </span><span class="hex">04         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> b                 <span class="comment">;;  Increment Option Counter</span>
<span class="number">22A4      </span><span class="colon">X </span><span class="hex">CD FB 22   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> ADDLC             <span class="comment">;;  Add Spacing to Y</span>
<span class="number">     E32F </span><span class="colon">X </span><span class="hex">CD 86 E3   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">22A7 E332 </span><span class="colon">X </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;;  Stack = Options, Coords</span>
<span class="number">22A8 E333 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                <span class="comment">;;  Stack = Coords, Options, Coords</span>
<span class="number">22A9 E334 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;;  HL = Text Pointer, DE = Coords</span>
<span class="number">22AA E335 </span><span class="colon">X </span><span class="hex">D7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> CHRGET            <span class="comment">;;  Eat Comma</span>
<span class="number">22AB E336 </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;;  Get Back Coordinates</span>
<span class="number">22AC E337 </span><span class="colon">X </span><span class="hex">18 D7      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> MENUS             <span class="comment">;;  Scane Next String</span>
<span class="number">22AE E339 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">22AE E339 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;BC = Options, DE = Coords, HL = Text Pointer, Stack = Coords</span>
<span class="number">22AE E339 </span><span class="colon">X </span><span class="hex">FE 88      </span><span class="source">(~~~) </span><span class="label">MENU3: </span><span class="mnemonic"> cp     </span> GOTOTK            <span class="comment">;;If Not GOTO</span>
<span class="number">22B0 E33B </span><span class="colon">X </span><span class="hex">C2 C4 03   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,SNERR          <span class="comment">;;Syntax Error</span>
<span class="number">22B3 E33E </span><span class="colon">X </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;;HL = Coords, Stack = Text Pointer</span>
<span class="number">22B4 E33F </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">(~~~) </span><span class="label">MENUT: </span><span class="mnemonic"> push   </span> hl                <span class="comment">;;Stack = Coords, Text Pointer</span>
<span class="number">22B5 E340 </span><span class="colon">X </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                <span class="comment">;;Stack = Options, Coorda, Text Pointer</span>
<span class="number">22B6 E341 </span><span class="colon">X </span><span class="hex">1E 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,0               <span class="comment">;;Option Number = 0</span>
<span class="number">22B8      </span><span class="colon">X </span><span class="hex">CD CE 22   </span><span class="source">(~~~) </span><span class="label">MENUN: </span><span class="mnemonic"> call   </span> MENUK             <span class="comment">;;Get C/R or Space from Keyboard</span>
<span class="number">     E343 </span><span class="colon">X </span><span class="hex">CD 59 E3   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">22BB E346 </span><span class="colon">X </span><span class="hex">1C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> e                 <span class="comment">;;Increment Option Number</span>
<span class="number">22BC E347 </span><span class="colon">X </span><span class="hex">38 0A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,MENUG           <span class="comment">;;If Space</span>
<span class="number">22BE      </span><span class="colon">X </span><span class="hex">CD FB 22   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> ADDLC             <span class="comment">;;  Y = Y + Spacing</span>
<span class="number">     E349 </span><span class="colon">X </span><span class="hex">CD 86 E3   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">22C1 E34C </span><span class="colon">X </span><span class="hex">05         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> b                 <span class="comment">;;  Decrement Option Count</span>
<span class="number">22C2 E34D </span><span class="colon">X </span><span class="hex">20 F4      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,MENUN          <span class="comment">;;  If Not Zero, Move to Next Optionb</span>
<span class="number">22C4 E34F </span><span class="colon">X </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;;    BC = Options, HL = Coords</span>
<span class="number">22C5 E350 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;;    Stack = Text Pointer</span>
<span class="number">22C6 E351 </span><span class="colon">X </span><span class="hex">18 EC      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> MENUT             <span class="comment">;;    Start Iver ar Top</span>
<span class="number">22C8 E353 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">(~~~) </span><span class="label">MENUG: </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;;Discard Options</span>
<span class="number">22C9 E354 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;;Discard Coords</span>
<span class="number">22CA E355 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;;Restore Text Pointer</span>
<span class="number">22CB E356 </span><span class="colon">X </span><span class="hex">C3 85 07   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> OMGOTO            <span class="comment">;;Do ON [E] GOTO</span>
<span class="number">22CE E359 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">22CE E359 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Wait for C/R or Space, Return Carry Set if Return</span>
<span class="number">22CE E359 </span><span class="colon">X </span><span class="hex">C5         </span><span class="source">(~~~) </span><span class="label">MENUK: </span><span class="mnemonic"> push   </span> bc                <span class="comment">;;Save BC</span>
<span class="number">22CF      </span><span class="colon">X </span><span class="hex">CD 4D 2D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVEIT            <span class="comment">;;Move Cursor to H,L</span>
<span class="number">     E35A </span><span class="colon">X </span><span class="hex">CD D8 ED   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">22D2 E35D </span><span class="colon">X </span><span class="hex">CD 2F 1A   </span><span class="source">(~~~) </span><span class="label">MENUL: </span><span class="mnemonic"> call   </span> TRYIN             <span class="comment">;;Get Character from Keyboard</span>
<span class="number">22D5 E360 </span><span class="colon">X </span><span class="hex">FE 0D      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 13                <span class="comment">;;If Carriage Return</span>
<span class="number">22D7 E362 </span><span class="colon">X </span><span class="hex">37         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> scf    </span>                   <span class="comment">;;  Return Carry Set</span>
<span class="number">22D8 E363 </span><span class="colon">X </span><span class="hex">28 04      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,MENUR                  
<span class="number">22DA E365 </span><span class="colon">X </span><span class="hex">FE 20      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> ' '               <span class="comment">;;If Not Space</span>
<span class="number">22DC E367 </span><span class="colon">X </span><span class="hex">20 F4      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,MENUL          <span class="comment">;;  Loop</span>
<span class="number">22DE E369 </span><span class="colon">X </span><span class="hex">C1         </span><span class="source">(~~~) </span><span class="label">MENUR: </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;;Restore BC</span>
<span class="number">22DF E36A </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">22E0 E36B </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">22E0 E36B </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Get Coordinates for MENU Statement     </span>
<span class="number">22E0 E36B </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Syntax: Coords                         </span>
<span class="number">22E0 E36B </span><span class="colon">X </span><span class="hex">CF         </span><span class="source">[~~~] </span><span class="label">SCANX: </span><span class="mnemonic"> rst    </span> SYNCHK                   
<span class="number">22E1 E36C </span><span class="colon">X </span><span class="hex">28         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> '('               <span class="comment">;{GWB} SKIP OVER OPEN PAREN</span>
<span class="number">22E2 E36D </span><span class="colon">X </span><span class="hex">CD 54 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GETBYT            <span class="comment">;{GWB} SCAN X INTO [A]</span>
<span class="number">22E5 E370 </span><span class="colon">X </span><span class="hex">FE 26      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 38                <span class="comment">;;If X > 38</span>
<span class="number">22E7 E372 </span><span class="colon">X </span><span class="hex">30 09      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,SCANX2         <span class="comment">;;  Function Call Error`</span>
<span class="number">22E9 E374 </span><span class="colon">X </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a                 <span class="comment">;;Bump X Past First Column</span>
<span class="number">22EA E375 </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                <span class="comment">;{GWB} SAVE WHILE SCANNING Y</span>
<span class="number">22EB E376 </span><span class="colon">X </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK                   
<span class="number">22EC E377 </span><span class="colon">X </span><span class="hex">2C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> ','               <span class="comment">;{GWB} SCAN COMMA</span>
<span class="number">22ED E378 </span><span class="colon">X </span><span class="hex">CD 54 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GETBYT            <span class="comment">;{GWB} GET Y INTO [A]</span>
<span class="number">22F0 E37B </span><span class="colon">X </span><span class="hex">FE 25      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 37                <span class="comment">;;If Y > 37</span>
<span class="number">22F2 E37D </span><span class="colon">X </span><span class="hex">D2 97 06   </span><span class="source">(~~~) </span><span class="label">SCANX2:</span><span class="mnemonic"> jp     </span> nc,FCERR          <span class="comment">;;  Function Call Error`</span>
<span class="number">22F5 E380 </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;;Get X into D</span>
<span class="number">22F6 E381 </span><span class="colon">X </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a                 <span class="comment">;;Bump Y Past First Line</span>
<span class="number">22F7 E382 </span><span class="colon">X </span><span class="hex">5F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,a               <span class="comment">;;Put Y into E</span>
<span class="number">22F8 E383 </span><span class="colon">X </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK                   
<span class="number">22F9 E384 </span><span class="colon">X </span><span class="hex">29         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> ')'               <span class="comment">;{GWB} SKIP OVER CLOSE PAREN</span>
<span class="number">22FA E385 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">22FB E386 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">22FB E386 </span><span class="colon">X </span><span class="hex">7D         </span><span class="source">[~~~] </span><span class="label">ADDLC: </span><span class="mnemonic"> ld     </span> a,l               <span class="comment">;;L = L + C</span>
<span class="number">22FC E387 </span><span class="colon">X </span><span class="hex">81         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,c                      
<span class="number">22FD E388 </span><span class="colon">X </span><span class="hex">6F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,a                      
<span class="number">22FE E389 </span><span class="colon">X </span><span class="hex">FE 18      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 24                       
<span class="number">2300 E38B </span><span class="colon">X </span><span class="hex">D8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> c                 <span class="comment">;;If L >= 24</span>
<span class="number">2301 E38C </span><span class="colon">X </span><span class="hex">2E 17      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,23              <span class="comment">;;L = 23</span>
<span class="number">2303 E38E </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2304 E38F </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2304 E38F </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Convert FAC to Integer and Return in [H,L]</span>
<span class="number">2304 E38F </span><span class="colon">X </span><span class="hex">EF         </span><span class="source">[~~~] </span><span class="label">FRCINX:</span><span class="mnemonic"> rst    </span> FSIGN             <span class="comment">;</span><span class="source">[M80] </span><span class="comment">GET THE SIGN OF THE FAC IN A</span>
<span class="number">2305      </span><span class="colon">X </span><span class="hex">FA 0E 23   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> m,FRCINM          <span class="comment">;;If Positive</span>
<span class="number">     E390 </span><span class="colon">X </span><span class="hex">FA 99 E3   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2308 E393 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;;  Save DE in HL</span>
<span class="number">2309 E394 </span><span class="colon">X </span><span class="hex">CD 82 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FRCINT            <span class="comment">;;  Convert FAC into Integer in DE</span>
<span class="number">230C E397 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl             <span class="comment">;;  Put Result into HL, Restore DE</span>
<span class="number">230D E398 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;;Else </span>
<span class="number">230E E399 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">[~~~] </span><span class="label">FRCINM:</span><span class="mnemonic"> push   </span> de                <span class="comment">;;  Save DE</span>
<span class="number">230F E39A </span><span class="colon">X </span><span class="hex">CD 0B 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> NEG               <span class="comment">;;  Negate FAC</span>
<span class="number">2312 E39D </span><span class="colon">X </span><span class="hex">CD 82 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FRCINT            <span class="comment">;;  Convert FAC into Integer in DE</span>
<span class="number">2315 E3A0 </span><span class="colon">X </span><span class="hex">CD 0B 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> NEG               <span class="comment">;;  Un-Negate FAC</span>
<span class="number">2318 E3A3 </span><span class="colon">X </span><span class="hex">21 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,0                     
<span class="number">231B E3A6 </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                        
<span class="number">231C E3A7 </span><span class="colon">X </span><span class="hex">ED 52      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sbc    </span> hl,de             <span class="comment">;;  Put 0 - Integer into HL</span>
<span class="number">231E E3A9 </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                <span class="comment">;;  and Restore DE</span>
<span class="number">231F E3AA </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2320 E3AB </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2320 E3AB </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">[GWB] </span><span class="label">MAKINT:</span><span class="mnemonic"> push   </span> hl                <span class="comment">;;Save Registers</span>
<span class="number">2321 E3AC </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                       
<span class="number">2322 E3AD </span><span class="colon">X </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                       
<span class="number">2323 E3AE </span><span class="colon">X </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,h                      
<span class="number">2324 E3AF </span><span class="colon">X </span><span class="hex">55         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,l                      
<span class="number">2325 E3B0 </span><span class="colon">X </span><span class="hex">CD 23 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FLOATD            <span class="comment">;;Put HL into FAC</span>
<span class="number">2328 E3B3 </span><span class="colon">X </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                <span class="comment">;;Restore Registers</span>
<span class="number">2329 E3B4 </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                       
<span class="number">232A E3B5 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">232B E3B6 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">232C E3B7 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">232C E3B7 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Print Null Terminated String           </span>
<span class="number">232C E3B7 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;pointed to by [HL]                     </span>
<span class="number">232C E3B7 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;On return [HL] points to 0 terminator  </span>
<span class="number">232C E3B7 </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">[~~~] </span><span class="label">LISPRX:</span><span class="mnemonic"> ld     </span> a,(hl)            <span class="comment">;;Get Byte</span>
<span class="number">232D E3B8 </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                 <span class="comment">;;If Zero</span>
<span class="number">232E E3B9 </span><span class="colon">X </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                 <span class="comment">;;  Return</span>
<span class="number">232F E3BA </span><span class="colon">X </span><span class="hex">DF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> OUTCHR            <span class="comment">;;Output Byte</span>
<span class="number">2330 E3BB </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;;Point to Next Byte</span>
<span class="number">2331      </span><span class="colon">X </span><span class="hex">C3 2C 23   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> LISPRX            <span class="comment">;;and Do it Again</span>
<span class="number">     E3BC </span><span class="colon">X </span><span class="hex">C3 B7 E3   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2334 E3BF </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2334 E3BF </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Convert Character to Uppercase         </span>
<span class="number">2334 E3BF </span><span class="colon">X </span><span class="hex">FE 61      </span><span class="source">[GWB] </span><span class="label">MAKUPS:</span><span class="mnemonic"> cp     </span> 'a'                      
<span class="number">2336 E3C1 </span><span class="colon">X </span><span class="hex">D8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> c                 <span class="comment">;;If >= 'a'</span>
<span class="number">2337 E3C2 </span><span class="colon">X </span><span class="hex">FE 7B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> '{'                      
<span class="number">2339 E3C4 </span><span class="colon">X </span><span class="hex">D0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nc                <span class="comment">;;and less than <'{'</span>
<span class="number">233A E3C5 </span><span class="colon">X </span><span class="hex">E6 5F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> and    </span> $5F               <span class="comment">;;Clear Bit 5</span>
<span class="number">233C E3C7 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">233D      </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">233D E3C8 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;{M80} UNPACK LINE INTO BUF              </span>
<span class="number">233D      </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Sets BUFPTR causing OUTDO to execute OUTBUF</span>
<span class="number">233D      </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;So that when LISTing a line, output goes to BUF</span>
<span class="number">233D      </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;???Might be broken in built in Extended BASIC and</span>
<span class="number">233D      </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;???fixed in Extended BASIC Cartridge, or Vice Versa</span>
<span class="number">233D      </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;On Entry [HL] = Pointer to Beginning of Line</span>
<span class="number">233D      </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;  Stack = Return Address, Line Number  </span>
<span class="number">233D E3C8 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">[M80] </span><span class="label">BUFLIN:</span><span class="mnemonic"> push   </span> hl                <span class="comment">;;Save Pointer into Line</span>
<span class="number">233E E3C9 </span><span class="colon">X </span><span class="hex">21 02 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,2              <span class="comment">;;     </span>
<span class="number">2341 E3CC </span><span class="colon">X </span><span class="hex">39         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,sp             <span class="comment">;;     </span>
<span class="number">2342 E3CD </span><span class="colon">X </span><span class="hex">22 2F 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (BUFRET),hl       <span class="comment">;;Save BUFLIN Return Address</span>
<span class="number">2345      </span><span class="colon">X </span><span class="hex">21 60 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,BUF            <span class="comment">;;     </span>
<span class="number">2348      </span><span class="colon">X </span><span class="hex">22 31 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (BUFPTR),hl       <span class="comment">;;BUG: Set Buffer Pointer to Return Address</span>
<span class="number">234B      </span><span class="colon">X </span><span class="hex">2A 4F 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(TXTTAB)       <span class="comment">;;BUG: Overwritten in Next Line</span>
<span class="number">     E3D0 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">        ;;??? Bug Fix                    </span>
<span class="number">     E3D0 </span><span class="colon">X </span><span class="hex">21 60 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,BUF            <span class="comment">;;[HL] = Input Buffer Address</span>
<span class="number">     E3D3 </span><span class="colon">X </span><span class="hex">22 31 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (BUFPTR),hl       <span class="comment">;;     </span>
<span class="number">     E3D6 </span><span class="colon">X </span><span class="hex">2A 4F 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(TXTTAB)       <span class="comment">;;[HL] = Start of BASIC Program</span>
<span class="number">234E E3D9 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">234E E3D9 </span><span class="colon">X </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl           <span class="comment">;;{HL] = Pointer into Line</span>
<span class="number">234F E3DA </span><span class="colon">X </span><span class="hex">C3 98 05   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> LISPRT            <span class="comment">;;Detokenize Line into BUF</span>
<span class="number">2352      </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2352      </span><span class="colon">X </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Output Character to BUF                </span>
<span class="number">2352 E3DD </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;On Entry, [HL] = Puffer Pointer        </span>
<span class="number">2352 E3DD </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">      </span><span class="label">OUTBUF:</span><span class="mnemonic"> pop    </span> af                <span class="comment">;;Discard HOOKDO Return Address</span>
<span class="number">2353 E3DE </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                <span class="comment">;;Get Character to Output</span>
<span class="number">2354 E3DF </span><span class="colon">X </span><span class="hex">FE 0D      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 13                <span class="comment">;;     </span>
<span class="number">2356 E3E1 </span><span class="colon">X </span><span class="hex">28 07      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,CRBUF           <span class="comment">;;If Not Carriage Return</span>
<span class="number">2358 E3E3 </span><span class="colon">X </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a            <span class="comment">;;  Store Character at Puffer Pointer</span>
<span class="number">2359 E3E4 </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                <span class="comment">;;  Increment Buffer Pointer</span>
<span class="number">235A E3E5 </span><span class="colon">X </span><span class="hex">22 31 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (BUFPTR),hl              
<span class="number">235D E3E8 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                <span class="comment">;;Restore Text Pointer</span>
<span class="number">235E E3E9 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;;Return Out of OUTDO</span>
<span class="number">235F E3EA </span><span class="colon">X </span><span class="hex">AF         </span><span class="source">      </span><span class="label">CRBUF: </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;;Else </span>
<span class="number">2360 E3EB </span><span class="colon">X </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a            <span class="comment">;;  Terminate Buffer Text</span>
<span class="number">2361 E3EC </span><span class="colon">X </span><span class="hex">67         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,a                      
<span class="number">2362 E3ED </span><span class="colon">X </span><span class="hex">6F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,a                      
<span class="number">2363 E3EE </span><span class="colon">X </span><span class="hex">22 31 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (BUFPTR),hl       <span class="comment">;;  Clear Line Buffer</span>
<span class="number">2366 E3F1 </span><span class="colon">X </span><span class="hex">2A 2F 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(BUFRET)       <span class="comment">;;     </span>
<span class="number">2369 E3F4 </span><span class="colon">X </span><span class="hex">F9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> sp,hl             <span class="comment">;;  Restore Stack Pointer</span>
<span class="number">236A E3F5 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                   <span class="comment">;;  and Return out of BUFLIN</span>
<span class="number">236B E3F6 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">236B E3F6 </span><span class="colon">X </span><span class="hex">3E 01      </span><span class="source">[~~~] </span><span class="label">GPUT:  </span><span class="mnemonic"> ld     </span> a,1               <span class="comment">;;Mode = GET</span>
<span class="number">236D E3F8 </span><span class="colon">X </span><span class="hex">18 01      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> GGPUTG                   
<span class="number">236F E3FA </span><span class="colon">X </span><span class="hex">AF         </span><span class="source">[~~~] </span><span class="label">GGET:  </span><span class="mnemonic"> xor    </span> a                 <span class="comment">;;Mode = PUT</span>
<span class="number">2370      </span><span class="colon">X </span><span class="hex">C3 84 29   </span><span class="source">(~~~} </span><span class="label">GGPUTG:</span><span class="mnemonic"> jp     </span> GPUTG                    
<span class="number">     E3FB </span><span class="colon">X </span><span class="hex">C3 0F EA   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2373 E3FE </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2373 E3FE </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;{GWB} CONVERT THE FORMULA TO AN INTEGER IN [D,E]</span>
<span class="number">2373 E3FE </span><span class="colon">X </span><span class="hex">CD 85 09   </span><span class="source">[GWB] </span><span class="label">GETIN2:</span><span class="mnemonic"> call   </span> FRMEVL          ;[GWB] EVALUATE A FORMULA
<span class="number">2376 E401 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">{GWB} </span><span class="label">INTFR2:</span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE THE TEXT POINTER
<span class="number">2377 E402 </span><span class="colon">X </span><span class="hex">CD 75 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CHKNUM          ;[M65] MUST BE NUMBER
<span class="number">237A E405 </span><span class="colon">X </span><span class="hex">CD 82 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FRCINT          ;[GWB] CONVERT THE FORMULA TO AN INTEGER IN [D,E]
<span class="number">237D E408 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;[GWB] RESTORE THE TEXT POINTER
<span class="number">237E E409 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">237F E40A </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">237F E40A </span><span class="colon">X </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">EDIT COMMAND                      </span>
<span class="number">237f E40A </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;; Need to check if this matches the code</span>
<span class="number">237F E40A </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">[C] CONTAINS COUNT OF CHARACTERS IN LINE</span>
<span class="number">237F E40A </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">[B] CONTAINS CURRENT CHARACTER POSITION 0=FIRST IN LINE.</span>
<span class="number">237F E40A </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">[D] CONTAINS NUMBER OF TIMES TO REPEAT THIS SUBCOMMAND</span>
<span class="number">237F E40A </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">[H,L] POINT TO CURRENT CHARACTER  </span>
<span class="number">237F E40A </span><span class="colon">X </span><span class="hex">CD 9C 06   </span><span class="source">[M80] </span><span class="label">EDIT:  </span><span class="mnemonic"> call   </span> SCNLIN          ;[M80[ GET THE ARGUMENT LINE NUMBER
<span class="number">2382 E40D </span><span class="colon">X </span><span class="hex">C0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nz              ;[M80] ERROR IF NOT END OF LINE
<span class="number">2383 E40E </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">{M80} </span><span class="label">EREDIT </span><span class="mnemonic"> pop    </span> hl              ;[M80] GET RID OF NEWSTT Address
<span class="number">2384 E40F </span><span class="colon">X </span><span class="hex">CD 9F 04   </span><span class="source">[M80] </span><span class="label">EEDITS:</span><span class="mnemonic"> call   </span> FNDLIN          ;[M80] FIND THE LINE IN QUESTION
<span class="number">2387 E412 </span><span class="colon">X </span><span class="hex">D2 F3 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,USERR        ;[M80] IF NOT FOUND, UNDEFINED STATEMENT ERROR.
<span class="number">238A E415 </span><span class="colon">X </span><span class="hex">60         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,b             ;[M80] PONTER TO LINE IS IN [B,C]
<span class="number">238B E416 </span><span class="colon">X </span><span class="hex">69         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,c             ;[M80] TRANSFER IT TO [H,L]
<span class="number">238C E417 </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl              ;[M80] PASS OVER POINTER TO NEXT LINE
<span class="number">238D E418 </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl              ;[M80] LIKE SO.
<span class="number">238E E419 </span><span class="colon">X </span><span class="hex">4E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,(hl)          ;[M80] GET FIRST BYTE OF LINE #
<span class="number">238F E41A </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl              ;[M80] MOVE TO 2ND BYTE
<span class="number">2390 E41B </span><span class="colon">X </span><span class="hex">46         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,(hl)          ;[M80] PICK IT UP INTO B
<span class="number">2391 E41C </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl              ;[M80] ADVANCE TO POINT TO FIRST BYTE OF LINE
<span class="number">2392 E41D </span><span class="colon">X </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc              ;[M80] SAVE LINE # ON STACK
<span class="number">2393      </span><span class="colon">X </span><span class="hex">CD 3D 23   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> BUFLIN          ;[M80] UNPACK LINE INTO BUF
<span class="number">     E41E </span><span class="colon">X </span><span class="hex">CD C8 E3   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2396 E421 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">[M80] </span><span class="label">LLED:  </span><span class="mnemonic"> pop    </span> hl              ;[M80] GET BACK LINE #
<span class="number">2397 E422 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">{M80} </span><span class="label">INLED: </span><span class="mnemonic"> push   </span> hl              ;[M80] SAVE IT BACK ON STACK
<span class="number">2398 E423 </span><span class="colon">X </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,h             ;[M80] TEST FOR DOUBLE BYTE ZERO
<span class="number">2399 E424 </span><span class="colon">X </span><span class="hex">A5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> and    </span> l                        
<span class="number">239A E425 </span><span class="colon">X </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a                        
<span class="number">239B E426 </span><span class="colon">X </span><span class="hex">3E 21      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,'!'           ;[M80] GET PROMPT FOR DIRECT EDIT
<span class="number">239D E428 </span><span class="colon">X </span><span class="hex">CC 8A 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> z,OUTDO         ;[M80] SEND IT
<span class="number">23A0 E42B </span><span class="colon">X </span><span class="hex">C4 75 16   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> nz,LINPRT       ;[M80] PRINT LINE # IF NOT INLIN EDIT
<span class="number">23A3 E42E </span><span class="colon">X </span><span class="hex">3E 20      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,' '           ;[M80] TYPE A SPACE
<span class="number">23A5 E430 </span><span class="colon">X </span><span class="hex">DF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> OUTCHR          ;[M80] ...
<span class="number">23A6 E431 </span><span class="colon">X </span><span class="hex">21 60 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,BUF          ;[M80] GET START OF BUF IN [H,L]
<span class="number">23A9 E434 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;[M80] SAVE [H,L] WHILE WE CALC LINE LENGTH
<span class="number">23AA E435 </span><span class="colon">X </span><span class="hex">0E FF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,255           ;[M80] ASSUME 0 CHAR LINE
<span class="number">23AC E437 </span><span class="colon">X </span><span class="hex">0C         </span><span class="source">[M80] </span><span class="label">LENLP: </span><span class="mnemonic"> inc    </span> c               ;[M80] BUMP COUNT OF CHARS
<span class="number">23AD E438 </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)          ;[M80] GET CHAR FROM LINE
<span class="number">23AE E439 </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl              ;[M80] BUMP POINTER
<span class="number">23AF E43A </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                        
<span class="number">23B0 E43B </span><span class="colon">X </span><span class="hex">20 FA      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,LENLP        ;[M80] IF NOT ZERO (END OF LINE) KEEP COUNTING...
<span class="number">23B2 E43D </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;[M80] GET BACK POINTER TO LINE
<span class="number">23B3 E43E </span><span class="colon">X </span><span class="hex">47         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,a             ;[M80] SET CURRENT LINE POSIT TO ZERO
<span class="number">23B4 E43F </span><span class="colon">X </span><span class="hex">16 00      </span><span class="source">[M80] </span><span class="label">DISPED:</span><span class="mnemonic"> ld     </span> d,0             ;[M80] ASSUME REPITION COUNT IS ZERO
<span class="number">23B6 E441 </span><span class="colon">X </span><span class="hex">CD DA 19   </span><span class="source">[M80] </span><span class="label">DISPI: </span><span class="mnemonic"> call   </span> INCHR           ;[M80] GET A CHAR FROM USER
<span class="number">23B9 E444 </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a               ;[M80] IGNORE NULLS
<span class="number">23BA E445 </span><span class="colon">X </span><span class="hex">28 FA      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,DISPI                  
<span class="number">23BC      </span><span class="colon">X </span><span class="hex">CD 34 23   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MAKUPS          ;[M80] MAKE UPPER CASE COMMAND
<span class="number">     E447 </span><span class="colon">X </span><span class="hex">CD BF E3   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">23BF E44A </span><span class="colon">X </span><span class="hex">D6 30      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> '0'             ;[M80] GET RID OF OFFSET
<span class="number">23C1 E44C </span><span class="colon">X </span><span class="hex">38 0E      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,NOTDGI        ;[M80] ...
<span class="number">23C3 E44E </span><span class="colon">X </span><span class="hex">FE 0A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 10                       
<span class="number">23C5 E450 </span><span class="colon">X </span><span class="hex">30 0A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,NOTDGI                
<span class="number">23C7 E452 </span><span class="colon">X </span><span class="hex">5F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,a             ;[M80] SAVE CHAR
<span class="number">23C8 E453 </span><span class="colon">X </span><span class="hex">7A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,d             ;[M80] GET ACCUM REPITITION
<span class="number">23C9 E454 </span><span class="colon">X </span><span class="hex">07         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rlca   </span>                 ;[M80] MULTIPLY BY 2
<span class="number">23CA E455 </span><span class="colon">X </span><span class="hex">07         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rlca   </span>                 ;[M80] BY 4
<span class="number">23CB E456 </span><span class="colon">X </span><span class="hex">82         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,d             ;[M80] AND ADD TO GET 5*D
<span class="number">23CC E457 </span><span class="colon">X </span><span class="hex">07         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rlca   </span>                 ;[M80] *2 TO GET 10*D
<span class="number">23CD E458 </span><span class="colon">X </span><span class="hex">83         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,e             ;[M80] ADD DIGIT
<span class="number">23CE E459 </span><span class="colon">X </span><span class="hex">57         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,a             ;[M80] SAVE BACK NEW ACCUM
<span class="number">23CF E45A </span><span class="colon">X </span><span class="hex">18 E5      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> DISPI           ;[M80]  GET NEXT CHAR
<span class="number">23D1 E45C </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">23D1 E45C </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">[M80] </span><span class="label">NOTDGI:</span><span class="mnemonic"> push   </span> hl              ;[M80] SAVE TEXT POINTER
<span class="number">23D2      </span><span class="colon">X </span><span class="hex">21 B4 23   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,DISPED       ;[M80] PUT RETURN Address TO DISPED
<span class="number">     E45D </span><span class="colon">X </span><span class="hex">21 3F E4   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">23D5 E460 </span><span class="colon">X </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl         ;[M80] ON THE STACK
<span class="number">23D6 E461 </span><span class="colon">X </span><span class="hex">15         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> d               ;[M80] SEE IF D=0 (REP FACTOR)
<span class="number">23D7 E462 </span><span class="colon">X </span><span class="hex">14         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> d               ;[M80] SET CONDITION CODES
<span class="number">23D8 E463 </span><span class="colon">X </span><span class="hex">20 01      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,NTZERD       ;[M80] BRANCH AROUND
<span class="number">23DA E465 </span><span class="colon">X </span><span class="hex">14         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> d               ;[M80] MAKE IT 1
<span class="number">23DB E466 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">23DB E466 </span><span class="colon">X </span><span class="hex">FE EC      </span><span class="source">[M80] </span><span class="label">NTZERD:</span><span class="mnemonic"> cp     </span> 28-'0'          ;[M80] Backspace?
<span class="number">23DD      </span><span class="colon">X </span><span class="hex">CA 19 25   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,BAKED         ;[M80] HANDLE IT
<span class="number">     E468 </span><span class="colon">X </span><span class="hex">CA A4 E5   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">23E0 E46B </span><span class="colon">X </span><span class="hex">FE DD      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 13-'0'          ;[M80] CARRIAGE RETURN
<span class="number">23E2      </span><span class="colon">X </span><span class="hex">CA 26 25   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,CRED          ;[M80] DONE EDITING
<span class="number">     E46D </span><span class="colon">X </span><span class="hex">CA B1 E5   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">23E5 E470 </span><span class="colon">X </span><span class="hex">FE F0      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> ' '-'0'         ;[M80] SPACE
<span class="number">23E7 E472 </span><span class="colon">X </span><span class="hex">28 42      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,SPED          ;[M80] GO TO ROUTINE
<span class="number">23E9 E474 </span><span class="colon">X </span><span class="hex">FE 31      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 'A'+32-'0'      ;[M80] COMMAND IN LOWER CASE?
<span class="number">23EB E476 </span><span class="colon">X </span><span class="hex">38 02      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,NOTLW4        ;[M80] NO, SO OK.
<span class="number">23ED E478 </span><span class="colon">X </span><span class="hex">D6 20      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> 32              ;[M80] CONVERT TO UPPER CASE
<span class="number">23EF E47A </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">23EF E47A </span><span class="colon">X </span><span class="hex">FE 21      </span><span class="source">[M80] </span><span class="label">NOTLW4:</span><span class="mnemonic"> cp     </span> 'Q'-'0'         ;[M80] QUIT?
<span class="number">23F1      </span><span class="colon">X </span><span class="hex">CA 3C 25   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,QED           ;[M80] IF SO, QUIT & PRINT "OK" OR RETURN TO INLIN
<span class="number">     E47C </span><span class="colon">X </span><span class="hex">CA C7 E5   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">23F4 E47F </span><span class="colon">X </span><span class="hex">FE 1C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 'L'-'0'         ;[M80] L?
<span class="number">23F6 E481 </span><span class="colon">X </span><span class="hex">28 68      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,LED           ;[M80] BRANCH
<span class="number">23F8 E483 </span><span class="colon">X </span><span class="hex">FE 23      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 'S'-'0'         ;[M80] S?
<span class="number">23FA E485 </span><span class="colon">X </span><span class="hex">28 41      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,SED           ;[M80] SEARCH
<span class="number">23FC E487 </span><span class="colon">X </span><span class="hex">FE 19      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 'I'-'0'         ;[M80] I?
<span class="number">23FE      </span><span class="colon">X </span><span class="hex">CA B1 24   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,IED           ;[M80] INSERT
<span class="number">     E489 </span><span class="colon">X </span><span class="hex">CA 3C E5   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2401 E48C </span><span class="colon">X </span><span class="hex">FE 14      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 'D'-'0'         ;[M80] D?
<span class="number">2403 E48E </span><span class="colon">X </span><span class="hex">28 65      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,DED           ;[M80] DELETE
<span class="number">2405 E490 </span><span class="colon">X </span><span class="hex">FE 13      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 'C'-'0'         ;[M80] C?
<span class="number">2407 E492 </span><span class="colon">X </span><span class="hex">28 7A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,CED           ;[M80] CHANGE
<span class="number">2409 E494 </span><span class="colon">X </span><span class="hex">FE 15      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 'E'-'0'         ;[M80] END?
<span class="number">240B      </span><span class="colon">X </span><span class="hex">CA 29 25   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,EED           ;[M80] (SAME AS <CR> BUT DOESNT PRINT REST)
<span class="number">     E496 </span><span class="colon">X </span><span class="hex">CA B4 E5   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">240E E499 </span><span class="colon">X </span><span class="hex">FE 28      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 'X'-'0'         ;[M80] EXTEND?
<span class="number">2410      </span><span class="colon">X </span><span class="hex">CA AC 24   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,XED           ;[M80] GO TO END OF LINE & INSERT
<span class="number">     E49B </span><span class="colon">X </span><span class="hex">CA 37 E5   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2413 E49E </span><span class="colon">X </span><span class="hex">FE 1B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 'K'-'0'         ;[M80] KILL??
<span class="number">2415 E4A0 </span><span class="colon">X </span><span class="hex">28 20      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,KED           ;[M80] (SAME AS "S" BUT DELETES CHARS)
<span class="number">2417 E4A2 </span><span class="colon">X </span><span class="hex">FE 18      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 'H'-'0'         ;[M80] HACK??
<span class="number">2419      </span><span class="colon">X </span><span class="hex">CA A9 24   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,HED           ;[M80] HACK OFF THE REST OF THE LINE & INSERT
<span class="number">     E4A4 </span><span class="colon">X </span><span class="hex">CA 34 E5   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">241C E4A7 </span><span class="colon">X </span><span class="hex">FE 11      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 'A'-'0'         ;[M80] AGAIN??
<span class="number">241E E4A9 </span><span class="colon">X </span><span class="hex">3E 07      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,7             ;[M80] GET READY TO TYPE BEL.
<span class="number">2420 E4AB </span><span class="colon">X </span><span class="hex">C2 8A 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,OUTDO        ;[M80] NO MATCH, SEND BEL AND RETURN TO DISPATCHER
<span class="number">2423 E4AE </span><span class="colon">X </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc              ;[M80] DISPI RETURN Address
<span class="number">2424 E4AF </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de              ;[M80] LINE NUMBER INTO [D,E]
<span class="number">2425 E4B0 </span><span class="colon">X </span><span class="hex">CD EA 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CRDO            ;[M80] TYPE A CARRIAGE RETURN LINE-FEED
<span class="number">2428      </span><span class="colon">X </span><span class="hex">C3 84 23   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> EEDITS          ;[M80] RESTART EDITING
<span class="number">     E4B3 </span><span class="colon">X </span><span class="hex">C3 0F E4   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">242B E4B6 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">242B E4B6 </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">[M80] </span><span class="label">SPED:  </span><span class="mnemonic"> ld     </span> a,(hl)          ;[M80] GET CHAR FROM CURENT POSIT
<span class="number">242C E4B7 </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a               ;[M80] ARE WE AT END OF LINE?
<span class="number">242D E4B8 </span><span class="colon">X </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z               ;[M80] IF SO, RETURN
<span class="number">242E E4B9 </span><span class="colon">X </span><span class="hex">04         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> b               ;[M80] BUMP CURRENT POSITION
<span class="number">242F E4BA </span><span class="colon">X </span><span class="hex">CD 8A 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> OUTDO           ;[M80] TYPE CHARACTER
<span class="number">2432 E4BD </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl              ;[M80] MOVE POINTER TO NEXT CHAR
<span class="number">2433 E4BE </span><span class="colon">X </span><span class="hex">15         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> d               ;[M80] TEST IF DONE WITH REPITITIONS
<span class="number">2434 E4BF </span><span class="colon">X </span><span class="hex">20 F5      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,SPED         ;[M80] REPEAT
<span class="number">2436 E4C1 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                 ;[M80] RETURN TO DISPATCHER
<span class="number">2437 E4C2 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2437 E4C2 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">[M80] </span><span class="label">KED:   </span><span class="mnemonic"> push   </span> hl              ;[M80] SAVE CURRENT CHAR POSIT
<span class="number">2438      </span><span class="colon">X </span><span class="hex">21 7F 24   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,TYPSLH       ;[M80] TYPE SLASH WHEN DONE
<span class="number">     E4C3 </span><span class="colon">X </span><span class="hex">21 0A E5   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">243B E4C6 </span><span class="colon">X </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl         ;[M80] PUT IT ON STACK & GET POSIT BACK
<span class="number">243C E4C7 </span><span class="colon">X </span><span class="hex">37         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> scf    </span>                 ;[M80] SET THE CARRY FLAG
<span class="number">243D E4C8 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">243D E4C8 </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">[M80] </span><span class="label">SED:   </span><span class="mnemonic"> push   </span> af              ;[M80] SAVE CONDITION CODES
<span class="number">243E E4C9 </span><span class="colon">X </span><span class="hex">CD DA 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> INCHR           ;[M80] GET SEARCH CHAR
<span class="number">2441 E4CC </span><span class="colon">X </span><span class="hex">5F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,a             ;[M80] SAVE IT
<span class="number">2442 E4CD </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                       
<span class="number">2443 E4CE </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                       
<span class="number">2444      </span><span class="colon">X </span><span class="hex">DC 7F 24   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> c,TYPSLH        ;[M80] TYPE BEGINNING SLASH FOR "K"
<span class="number">     E4CF </span><span class="colon">X </span><span class="hex">DC 0A E5   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2447 E4D2 </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">[M80] </span><span class="label">SRCALP:</span><span class="mnemonic"> ld     </span> a,(hl)                   
<span class="number">2448 E4D3 </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                        
<span class="number">2449 E4D4 </span><span class="colon">X </span><span class="hex">28 13      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,POPART                 
<span class="number">244B E4D6 </span><span class="colon">X </span><span class="hex">CD 8A 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> OUTDO           ;[M80] TYPE THE CHAR
<span class="number">244E E4D9 </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af              ;[M80] GET KILL FLAG
<span class="number">244F E4DA </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af              ;[M80] SAVE BACK
<span class="number">2450      </span><span class="colon">X </span><span class="hex">DC E6 24   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> c,DELCHR        ;[M80] DELETE THE CHAR IF K COMMAND.
<span class="number">     E4DB </span><span class="colon">X </span><span class="hex">DC 71 E5   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2453 E4DE </span><span class="colon">X </span><span class="hex">38 02      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,NOTSRC        ;[M80] AND DONT MOVE POINTER AS DELCHR ALREADY DID
<span class="number">2455 E4E0 </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">2456 E4E1 </span><span class="colon">X </span><span class="hex">04         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> b               ;[M80] INCREMENT LINE POSIT
<span class="number">2457 E4E2 </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">[M80] </span><span class="label">NOTSRC:</span><span class="mnemonic"> ld     </span> a,(hl)          ;[M80] ARE WE AT END
<span class="number">2458 E4E3 </span><span class="colon">X </span><span class="hex">BB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> e               ;[M80] ARE CURRENT CHAR & SEARCH
<span class="number">2459 E4E4 </span><span class="colon">X </span><span class="hex">20 EC      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,SRCALP       ;[M80] CHAR THE SAME? IF NOT, LOOK MORE
<span class="number">245B E4E6 </span><span class="colon">X </span><span class="hex">15         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> d               ;[M80] LOOK FOR N MATCHES
<span class="number">245C E4E7 </span><span class="colon">X </span><span class="hex">20 E9      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,SRCALP       ;[M80] IF NOT 0, KEEP LOOKING
<span class="number">245E E4E9 </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">[M80] </span><span class="label">POPART:</span><span class="mnemonic"> pop    </span> af              ;[M80] GET RID OF KILL FLAG
<span class="number">245F E4EA </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                 ;[M80] DONE SEARCHING
<span class="number">2460 E4EB </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2460      </span><span class="colon">X </span><span class="hex">CD 2C 23   </span><span class="source">[M80] </span><span class="label">LED:   </span><span class="mnemonic"> call   </span> LISPRX          ;[M80] TYPE REST OF LINE
<span class="number">     E4EB </span><span class="colon">X </span><span class="hex">CD B7 E3   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2463 E4EE </span><span class="colon">X </span><span class="hex">CD EA 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CRDO            ;[M80] TYPE CARRIAGE RETURN
<span class="number">2466 E4F1 </span><span class="colon">X </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc              ;[M80] GET RID OF RETURN TO DISPED
<span class="number">2467      </span><span class="colon">X </span><span class="hex">C3 96 23   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> LLED            ;[M80] GO TO MAIN CODE
<span class="number">     E4F2 </span><span class="colon">X </span><span class="hex">C3 21 E4   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">246A E4F5 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">246A E4F5 </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">[M80] </span><span class="label">DED:   </span><span class="mnemonic"> ld     </span> a,(hl)          ;[M80] GET CHAR WHICH WE ARE TRYING TO DELETE
<span class="number">246B E4F6 </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a               ;[M80] IS IT THE END OF LINE
<span class="number">246C E4F7 </span><span class="colon">X </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z               ;[M80] DONE IF SO
<span class="number">246D E4F8 </span><span class="colon">X </span><span class="hex">3E 5C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,'\'           ;[M80] TYPE BACKSLASH
<span class="number">246F E4FA </span><span class="colon">X </span><span class="hex">CD 8A 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> OUTDO           ;[M80] LIKE SO
<span class="number">2472 E4FD </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">[M80] </span><span class="label">DELLP: </span><span class="mnemonic"> ld     </span> a,(hl)          ;[M80] GET CHAR FROM LINE
<span class="number">2473 E4FE </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a               ;[M80] ARE WE AT END?
<span class="number">2474 E4FF </span><span class="colon">X </span><span class="hex">28 09      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,TYPSLH        ;[M80] TYPE SLASH
<span class="number">2476 E501 </span><span class="colon">X </span><span class="hex">CD 8A 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> OUTDO           ;[M80] TYPE CHAR WE'RE GOING TO DELETE
<span class="number">2479      </span><span class="colon">X </span><span class="hex">CD E6 24   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> DELCHR          ;[M80] DELETE CURRENT CHAR
<span class="number">     E504 </span><span class="colon">X </span><span class="hex">CD 71 E5   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">247C E507 </span><span class="colon">X </span><span class="hex">15         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> d               ;[M80] DECREMENT DELETE COUNT
<span class="number">247D E508 </span><span class="colon">X </span><span class="hex">20 F3      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,DELLP        ;[M80] KEEP DOING IT
<span class="number">247F E50A </span><span class="colon">X </span><span class="hex">3E 5C      </span><span class="source">[M80] </span><span class="label">TYPSLH:</span><span class="mnemonic"> ld     </span> a,'\'           ;[M80] TYPE ENDING SLASH
<span class="number">2481 E50C </span><span class="colon">X </span><span class="hex">DF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> OUTCHR          ;[M80] LIKE SO
<span class="number">2482 E50D </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2483 E50E </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2483 E50E </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">[M80] </span><span class="label">CED:   </span><span class="mnemonic"> ld     </span> a,(hl)          ;[M80] ARE WE AT END OF LINE?
<span class="number">2484 E50F </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a               ;[M80] SEE IF 0
<span class="number">2485 E510 </span><span class="colon">X </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z               ;[M80] RETURN
<span class="number">2486 E511 </span><span class="colon">X </span><span class="hex">CD DA 19   </span><span class="source">[M80] </span><span class="label">CED2:  </span><span class="mnemonic"> call   </span> INCHR           ;[M80] GET CHAR TO REPLACE CHAR
<span class="number">2489 E514 </span><span class="colon">X </span><span class="hex">FE 20      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> ' '             ;[M80] IS IT CONTROL CHAR?
<span class="number">248B      </span><span class="colon">X </span><span class="hex">D2 9F 24   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,NOTCCC       ;[M80] NO
<span class="number">     E516 </span><span class="colon">X </span><span class="hex">D2 2A E5   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">248E E519 </span><span class="colon">X </span><span class="hex">FE 0A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 10              ;[M80] IS IT LF?
<span class="number">2490 E51B </span><span class="colon">X </span><span class="hex">28 0D      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,NOTCCC        ;[M80] YES
<span class="number">2492 E51D </span><span class="colon">X </span><span class="hex">FE 07      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 7               ;[M80] OR BELL?
<span class="number">2494 E51F </span><span class="colon">X </span><span class="hex">28 09      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,NOTCCC        ;[M80] OK
<span class="number">2496 E521 </span><span class="colon">X </span><span class="hex">FE 09      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 9               ;[M80] OR TAB?
<span class="number">2498 E523 </span><span class="colon">X </span><span class="hex">28 05      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,NOTCCC        ;[M80] OK
<span class="number">249A E525 </span><span class="colon">X </span><span class="hex">3E 07      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,7             ;[M80] GET BELL
<span class="number">249C E527 </span><span class="colon">X </span><span class="hex">DF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> OUTCHR          ;[M80] SEND IT
<span class="number">249D E528 </span><span class="colon">X </span><span class="hex">18 E7      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> CED2            ;[M80] RETRY
<span class="number">249F E52A </span><span class="colon">X </span><span class="hex">77         </span><span class="source">[M80] </span><span class="label">NOTCCC:</span><span class="mnemonic"> ld     </span> (hl),a          ;[M80] SAVE IN MEMORY
<span class="number">24A0 E52B </span><span class="colon">X </span><span class="hex">CD 8A 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> OUTDO           ;[M80] ECHO THE CHAR WERE USING TO REPLACE
<span class="number">24A3 E52E </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl              ;[M80] BUMP POINTER
<span class="number">24A4 E52F </span><span class="colon">X </span><span class="hex">04         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> b               ;[M80] INCREMENT POSITION WITHIN LINE
<span class="number">24A5 E530 </span><span class="colon">X </span><span class="hex">15         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> d               ;[M80] ARE WE DONE CHANGING?
<span class="number">24A6 E531 </span><span class="colon">X </span><span class="hex">20 DB      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,CED          ;[M80] IF NOT, CHANGE SOME MORE.
<span class="number">24A8 E533 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                 ;[M80] DONE
<span class="number">24A9 E534 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">24A9 E534 </span><span class="colon">X </span><span class="hex">36 00      </span><span class="source">[M80] </span><span class="label">HED:   </span><span class="mnemonic"> ld     </span> (hl),0          ;[M80] MAKE LINE END AT CURRENT POSITION
<span class="number">24AB E536 </span><span class="colon">X </span><span class="hex">48         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,b             ;[M80] SET UP LINE LENGTH CORRECTLY
<span class="number">24AC E537 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">24AC E537 </span><span class="colon">X </span><span class="hex">16 FF      </span><span class="source">[M80] </span><span class="label">XED:   </span><span class="mnemonic"> ld     </span> d,255           ;[M80] FIND END OF LINE
<span class="number">24AE      </span><span class="colon">X </span><span class="hex">CD 2B 24   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SPED            ;[M80] BY CALLING SPACER
<span class="number">     E539 </span><span class="colon">X </span><span class="hex">CD B6 E4   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">24B1 E53C </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;NOW FALL INTO INSERT CODE               </span>
<span class="number">24B1 E53C </span><span class="colon">X </span><span class="hex">CD DA 19   </span><span class="source">[M80] </span><span class="label">IED:   </span><span class="mnemonic"> call   </span> INCHR           ;[M80] GET CHAR TO INSERT
<span class="number">24B4 E53F </span><span class="colon">X </span><span class="hex">FE 1C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 28              ;[M80] DELETE??
<span class="number">24B6 E541 </span><span class="colon">X </span><span class="hex">28 1F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,TYPARW        ;[M80] YES, ACT LIKE "_"
<span class="number">24B8 E543 </span><span class="colon">X </span><span class="hex">FE 0D      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 13              ;[M80] IS IT A CARRIAGE RETURN?
<span class="number">24BA E545 </span><span class="colon">X </span><span class="hex">28 6A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,CRED          ;[M80] DONT INSERT, AND SIMULATE <CR>
<span class="number">24BC E547 </span><span class="colon">X </span><span class="hex">FE 11      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 17              ;[M80] IS IT ESCAPE?
<span class="number">24BE E549 </span><span class="colon">X </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z               ;[M80] IF SO, DONE.
<span class="number">24BF E54A </span><span class="colon">X </span><span class="hex">FE 08      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 8               ;[M80] BACKSPACE?
<span class="number">24C1 E54C </span><span class="colon">X </span><span class="hex">28 16      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,TYPAR1        ;[M80] TYPE BACKARROW AND DELETE
<span class="number">24C3 E54E </span><span class="colon">X </span><span class="hex">FE 0A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 10              ;[M80] LINE FEED?
<span class="number">24C5 E550 </span><span class="colon">X </span><span class="hex">28 2E      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,NTARRW        ;[M80] ALLOW IT
<span class="number">24C7 E552 </span><span class="colon">X </span><span class="hex">FE 07      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 7               ;[M80] BELL?
<span class="number">24C9 E554 </span><span class="colon">X </span><span class="hex">28 2A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,NTARRW        ;[M80] ALLOW IT
<span class="number">24CB E556 </span><span class="colon">X </span><span class="hex">FE 09      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 9               ;[M80] TAB?
<span class="number">24CD E558 </span><span class="colon">X </span><span class="hex">28 26      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,NTARRW        ;[M80] ALLOW IT
<span class="number">24CF E55A </span><span class="colon">X </span><span class="hex">FE 20      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> ' '             ;[M80] IS IT ILLEGAL CHAR
<span class="number">24D1 E55C </span><span class="colon">X </span><span class="hex">38 DE      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,IED           ;[M80] TOO SMALL
<span class="number">24D3 E55E </span><span class="colon">X </span><span class="hex">FE 5F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> '_'             ;[M80] DELETE PREVIOUS CHAR INSERTED?
<span class="number">24D5 E560 </span><span class="colon">X </span><span class="hex">20 1E      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,NTARRW       ;[M80] IF NOT, JUMP AROUND NEXT CODE
<span class="number">24D7 E562 </span><span class="colon">X </span><span class="hex">3E 5F      </span><span class="source">[M80] </span><span class="label">TYPARW:</span><span class="mnemonic"> ld     </span> a,'_'           ;[M80] TYPE IT
<span class="number">24D9 E562 </span><span class="colon">X </span><span class="hex">05         </span><span class="source">[M80] </span><span class="label">TYPAR1:</span><span class="mnemonic"> dec    </span> b               ;[M80] ARE WE AT START OF LINE?
<span class="number">24DA E565 </span><span class="colon">X </span><span class="hex">04         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> b               ;[M80] LETS SEE
<span class="number">24DB E566 </span><span class="colon">X </span><span class="hex">28 1F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,DINGI         ;[M80] IF SO, TYPE DING.
<span class="number">24DD E568 </span><span class="colon">X </span><span class="hex">CD 8A 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> OUTDO           ;[M80] TYPE THE BACK ARROW
<span class="number">24E0 E56B </span><span class="colon">X </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl              ;[M80] BACK UP THE POINTER
<span class="number">24E1 E56C </span><span class="colon">X </span><span class="hex">05         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> b               ;[M80] MOVE BACK POSIT IN LINE
<span class="number">24E2      </span><span class="colon">X </span><span class="hex">11 B1 24   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,IED          ;[M80] SET UP RETURN Address
<span class="number">     E56D </span><span class="colon">X </span><span class="hex">11 3C E5   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">24E5 E570 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de              ;[M80] SAVE IT  ON STACK & FALL THROUGH
<span class="number">24E6 E571 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[M80] </span><span class="comment">SUBROUTINE TO DELETE CHAR POINTED TO BY [H,L]. CORRECTS C.</span>
<span class="number">24E6 E571 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">[M80] </span><span class="label">DELCHR:</span><span class="mnemonic"> push   </span> hl              ;[M80] SAVE CURRENT POSIT POINTER
<span class="number">24E7 E572 </span><span class="colon">X </span><span class="hex">0D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> c               ;[M80] MAKE LENGTH OF LINE ONE LESS
<span class="number">24E8 E573 </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">[M80] </span><span class="label">CMPRSS:</span><span class="mnemonic"> ld     </span> a,(hl)          ;[M80] GET CHAR TO DELETE
<span class="number">24E9 E574 </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a               ;[M80] ARE WE AT END OF LINE
<span class="number">24EA E575 </span><span class="colon">X </span><span class="hex">37         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> scf    </span>                 ;[M80] FLAG THAT DELCHR WAS CALLED (FOR K)
<span class="number">24EB E576 </span><span class="colon">X </span><span class="hex">CA 1A 14   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,POPHRT        ;[M80] IF SO, DONE COMPRESSING
<span class="number">24EE E579 </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl              ;[M80] POINT TO NEXT BYTE
<span class="number">24EF E57A </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)          ;[M80] PICK IT UP
<span class="number">24F0 E57B </span><span class="colon">X </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl              ;[M80] NOW BACK AGAIN
<span class="number">24F1 E57C </span><span class="colon">X </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a          ;[M80] DEPOSIT IT
<span class="number">24F2 E57D </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl              ;[M80] NOW TO NEXT BYTE
<span class="number">24F3 E57E </span><span class="colon">X </span><span class="hex">18 F3      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> CMPRSS          ;[M80] KEEP CRUNCHING
<span class="number">24F5 E580 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">24F5 E580 </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">[M80] </span><span class="label">NTARRW:</span><span class="mnemonic"> push   </span> af              ;[M80] SAVE THE CHAR TO BE INSERTED
<span class="number">24F6 E581 </span><span class="colon">X </span><span class="hex">79         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,c             ;[M80] GET LENGTH OF LINE
<span class="number">24F7 E582 </span><span class="colon">X </span><span class="hex">FE 48      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> BUFLEN          ;[M80] SEE IF WE ARENT TRYING TO MAKE LINE TOO LONG
<span class="number">24F9 E584 </span><span class="colon">X </span><span class="hex">38 06      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,OKINS         ;[M80] IF LENGTH OK, GO INSERT
<span class="number">24FB E586 </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af              ;[M80] GET THE UNLAWFUL CHAR
<span class="number">24FC E587 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">24FC E587 </span><span class="colon">X </span><span class="hex">3E 07      </span><span class="source">[M80] </span><span class="label">DINGI: </span><span class="mnemonic"> ld     </span> a,7             ;[M80] TYPE A BELL TO LET USER KNOW
<span class="number">24FE E589 </span><span class="colon">X </span><span class="hex">DF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> OUTCHR          ;[M80] IT ALL OVER
<span class="number">24FF E58A </span><span class="colon">X </span><span class="hex">18 B0      </span><span class="source">[M80] </span><span class="label">IEDG:  </span><span class="mnemonic"> jr     </span> IED             ;[M80] HE HAS TO TYPE <ESC> TO GET OUT
<span class="number">2501 E58C </span><span class="colon">X </span><span class="hex">90         </span><span class="source">[M80] </span><span class="label">OKINS: </span><span class="mnemonic"> sub    </span> b               ;[M80] CALC POINTER TO 0 AT END OF LINE
<span class="number">2502 E58D </span><span class="colon">X </span><span class="hex">0C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> c               ;[M80] WE ARE GOING TO HAVE LINE LONGER BY 1
<span class="number">2503 E58E </span><span class="colon">X </span><span class="hex">04         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> b               ;[M80] POSITION MOVES UP ONE ALSO
<span class="number">2504 E58F </span><span class="colon">X </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc              ;[M80] SAVE [B,C]
<span class="number">2505 E590 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;[M80] SAVE [D,E] IN [H,L]
<span class="number">2506 E591 </span><span class="colon">X </span><span class="hex">6F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,a             ;[M80] SAVE # OF BYTES TO MOVE IN [L]
<span class="number">2507 E592 </span><span class="colon">X </span><span class="hex">26 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,0             ;[M80] GET SET TO ADD [D,E] TO [H,L]
<span class="number">2509 E594 </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de           ;[M80] CALC HIGH POINTER
<span class="number">250A E595 </span><span class="colon">X </span><span class="hex">44         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,h             ;[M80] GET HIGH BYTE TO MOVE POINTER
<span class="number">250B E596 </span><span class="colon">X </span><span class="hex">4D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,l             ;[M80] IN [B,C]
<span class="number">250C E597 </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl              ;[M80] ALWAYS MOVE AT LEAST ZERO AT END
<span class="number">250D E598 </span><span class="colon">X </span><span class="hex">CD 95 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> BLTUC           ;[M80] MOVE LINE OUT 1 CHAR
<span class="number">2510 E59B </span><span class="colon">X </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc              ;[M80] RESTORE [B,C]
<span class="number">2511 E59C </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af              ;[M80] GET CHAR BACK
<span class="number">2512 E59D </span><span class="colon">X </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a          ;[M80] SAVE IT IN LINE
<span class="number">2513 E59E </span><span class="colon">X </span><span class="hex">CD 8A 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> OUTDO           ;[M80] TYPE THE CHAR
<span class="number">2516 E5A1 </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl              ;[M80] POINT TO NEXT CHAR
<span class="number">2517 E5A2 </span><span class="colon">X </span><span class="hex">18 E6      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> IEDG            ;[M80] AND GO GET MORE CHARS
<span class="number">2519 E5A4 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2519 E5A4 </span><span class="colon">X </span><span class="hex">78         </span><span class="source">[M80] </span><span class="label">BAKED: </span><span class="mnemonic"> ld     </span> a,b             ;[M80] ARE WE MOVING BACK PAST THE
<span class="number">251A E5A5 </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a               ;[M80] FIRST CHARACTER
<span class="number">251B E5A6 </span><span class="colon">X </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z               ;[M80] DON'T ALLOW IT
<span class="number">251C E5A7 </span><span class="colon">X </span><span class="hex">05         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> b               ;[M80] CHANGE CURRENT POSITION
<span class="number">251D E5A8 </span><span class="colon">X </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl              ;[M80] MOVE CHAR POINTER BACK
<span class="number">251E E5A9 </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)          ;[M80]   
<span class="number">251F E5AA </span><span class="colon">X </span><span class="hex">CD 8A 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> OUTDO           ;[M80] ECHO IT
<span class="number">2522 E5AD </span><span class="colon">X </span><span class="hex">15         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> d               ;[M80] ARE WE DONE MOVING BACK?
<span class="number">2523 E5AE </span><span class="colon">X </span><span class="hex">20 F4      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,BAKED        ;[M80] IF NOT, GO BACK MORE
<span class="number">2525 E5B0 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                 ;[M80] RETURN
<span class="number">2526 E5B1 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2526      </span><span class="colon">X </span><span class="hex">CD 2C 23   </span><span class="source">[M80] </span><span class="label">CRED:  </span><span class="mnemonic"> call   </span> LISPRX          ;[M80] TYPE REST OF LINE
<span class="number">     E5B1 </span><span class="colon">X </span><span class="hex">CD B7 E3   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2529 E5B4 </span><span class="colon">X </span><span class="hex">CD EA 19   </span><span class="source">[M80] </span><span class="label">EED:   </span><span class="mnemonic"> call   </span> CRDO            ;[M80] TYPE CARRIAGE RETURN
<span class="number">252C E5B7 </span><span class="colon">X </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc              ;[M80]  GET RID OF DISPED Address
<span class="number">252D E5B8 </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de              ;[M80] GET LINE # OFF STACK
<span class="number">252E E5B9 </span><span class="colon">X </span><span class="hex">7A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,d             ;[M80] DOUBLE BYTE ZERO.
<span class="number">252F E5BA </span><span class="colon">X </span><span class="hex">A3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> and    </span> e                        
<span class="number">2530 E5BB </span><span class="colon">X </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a               ;[M80] SET ZERO IF [D,E] = ALL ONES.
<span class="number">2531 E5BC </span><span class="colon">X </span><span class="hex">21 5F 38   </span><span class="source">{M80} </span><span class="label">EDITRT:</span><span class="mnemonic"> ld     </span> hl,BUF-1        ;[M80] START KRUNCHING AT BUF
<span class="number">2534 E5BF </span><span class="colon">X </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z               ;[M80] RETURN TO INLIN IF CALLED FROM THERE
<span class="number">2535 E5C0 </span><span class="colon">X </span><span class="hex">37         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> scf    </span>                 ;[M80] FLAG LINE # WAS SEEN TO FOOL INSERT CODE
<span class="number">2536 E5C1 </span><span class="colon">X </span><span class="hex">03         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> bc              ;[M80] ;<span class="comment">;Not in MBASIC-80</span>
<span class="number">2537 E5C2 </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af              ;[M80] PSW IS ON STACK
<span class="number">2538 E5C3 </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl              ;[M80] NOW POINT AT BUF.
<span class="number">2539 E5C4 </span><span class="colon">X </span><span class="hex">C3 28 04   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> EDENT           ;[M80] GO TO ENTRY POINT IN MAIN CODE
<span class="number">253C E5C7 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">253C E5C7 </span><span class="colon">X </span><span class="hex">C1         </span><span class="source">[M80] </span><span class="label">QED:   </span><span class="mnemonic"> pop    </span> bc              ;[M80] GET RID OF DISPED Address
<span class="number">253D E5C8 </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de              ;[M80] GET LINE # OFF STACK
<span class="number">253E E5C9 </span><span class="colon">X </span><span class="hex">7A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,d             ;[M80] DOUBLE BYTE ZERO.
<span class="number">253F E5CA </span><span class="colon">X </span><span class="hex">A3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> and    </span> e                        
<span class="number">2540 E5CB </span><span class="colon">X </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a               ;[M80] SET ZERO IF [D,E] = ALL ONES.
<span class="number">2541 E5CC </span><span class="colon">X </span><span class="hex">CA E5 19   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,FININL        ;[M80] TYPE CR AND STORE ZERO IN BUF.
<span class="number">2544 E5CF </span><span class="colon">X </span><span class="hex">C3 02 04   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> READY           ;[M80] OTHERWISE CALLED FROM MAIN
<span class="number">2547 E5D2 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2547 E5D2 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">ALLOW A COORDINATE OF THE FORM (X,Y) OR STEP(X,Y)</span>
<span class="number">2547 E5D2 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">THE LATTER IS RELATIVE TO THE GRAPHICS AC.</span>
<span class="number">2547 E5D2 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">THE GRAPHICS AC IS UPDATED WITH THE NEW VALUE</span>
<span class="number">2547 E5D2 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">RESULT IS RETURNED WITH [B,C]=X AND [D,E]=Y</span>
<span class="number">2547 E5D2 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">CALL SCAN1 TO GET FIRST IN A SET OF TWO PAIRS SINCE IT ALLOWS</span>
<span class="number">2547 E5D2 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">A NULL ARGUMENT TO IMPLY THE CURRENT AC VALUE AND</span>
<span class="number">2547 E5D2 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">IT WILL SKIP A "@" IF ONE IS PRESENT</span>
<span class="number">2547 E5D2 </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">[GWB] </span><span class="label">SCAN1: </span><span class="mnemonic"> ld     </span> a,(hl)          ;[GWB] GET THE CURRENT CHARACTER
<span class="number">2548 E5D3 </span><span class="colon">X </span><span class="hex">FE 40      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> '@'             ;[GWB] ALLOW MEANINGLESS "@"
<span class="number">254A E5D5 </span><span class="colon">X </span><span class="hex">CC 6B 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> z,CHRGTR        ;[GWB] BY SKIPPING OVER IT
<span class="number">254D E5D8 </span><span class="colon">X </span><span class="hex">01 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> bc,0            ;[GWB] ASSUME NO COODINATES AT ALL (-SECOND)
<span class="number">2550 E5DB </span><span class="colon">X </span><span class="hex">50         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,b                      
<span class="number">2551 E5DC </span><span class="colon">X </span><span class="hex">59         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,c                      
<span class="number">2552 E5DD </span><span class="colon">X </span><span class="hex">FE A9      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> MINUTK          ;[GWB] SEE IF ITS SAME AS PREVIOUS
<span class="number">2554 E5DF </span><span class="colon">X </span><span class="hex">28 16      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,SCANN         ;[GWB] USE GRAPHICS ACCUMULATOR
<span class="number">2556 E5E1 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">THE STANDARD ENTRY POINT          </span>
<span class="number">2556 E5E1 </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">[GWB] </span><span class="label">SCANDX:</span><span class="mnemonic"> ld     </span> a,(hl)          ;[GWB] GET THE CURRENT CHARACTER
<span class="number">2557 E5E2 </span><span class="colon">X </span><span class="hex">FE A7      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> STEPTK          ;[GWB] IS IT RELATIVE?
<span class="number">2559 E5E4 </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af              ;[GWB] REMEMBER
<span class="number">255A E5E5 </span><span class="colon">X </span><span class="hex">CC 6B 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> z,CHRGTR        ;[GWB] SKIP OVER $STEP TOKEN
<span class="number">255D E5E8 </span><span class="colon">X </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK                   
<span class="number">255E E5E9 </span><span class="colon">X </span><span class="hex">28         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> '('             ;[GWB] SKIP OVER OPEN PAREN
<span class="number">255F      </span><span class="colon">X </span><span class="hex">CD 73 23   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GETIN2          ;[GWB] SCAN X INTO [D,E]
<span class="number">     E4EA </span><span class="colon">X </span><span class="hex">CD FE E3   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2562 E5ED </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de              ;SAVE WHILE SCANNING Y
<span class="number">2563 E5EE </span><span class="colon">X </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK                   
<span class="number">2564 E5EF </span><span class="colon">X </span><span class="hex">2C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> ','             ;[GWB] SCAN COMMA
<span class="number">2565      </span><span class="colon">X </span><span class="hex">CD 73 23   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GETIN2          ;[GWB] GET Y INTO [D,E]
<span class="number">     E5F0 </span><span class="colon">X </span><span class="hex">CD FE E3   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2568 E5F3 </span><span class="colon">X </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK                   
<span class="number">2569 E5F4 </span><span class="colon">X </span><span class="hex">29         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> ')'                      
<span class="number">256A E5F5 </span><span class="colon">X </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc              ;[GWB] GET BACK X INTO [B,C]
<span class="number">256B E5F6 </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af              ;[GWB] RECALL IF RELATIVE OR NOT
<span class="number">256C E5F7 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">[GWB] </span><span class="label">SCANN: </span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE TEXT POINTER
<span class="number">256D E5F8 </span><span class="colon">X </span><span class="hex">2A 09 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(GRPACX)     ;[GWB] GET OLD POSITION
<span class="number">2570 E5FB </span><span class="colon">X </span><span class="hex">28 03      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,SCXREL        ;[GWB] IF ZERO,RELATIVE SO USE OLD BASE
<span class="number">2572 E5FD </span><span class="colon">X </span><span class="hex">21 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,0            ;[GWB] IN ABSOLUTE CASE, JUST Y USE ARGEUMENT
<span class="number">2575 E600 </span><span class="colon">X </span><span class="hex">09         </span><span class="source">[GWB] </span><span class="label">SCXREL:</span><span class="mnemonic"> add    </span> hl,bc           ;[GWB] ADD NEW VALUE
<span class="number">2576 E601 </span><span class="colon">X </span><span class="hex">22 09 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (GRPACX),hl     ;[GWB] UPDATE GRAPHICS ACCUMLATOR
<span class="number">2579 E604 </span><span class="colon">X </span><span class="hex">22 03 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (GXPOS),hl      ;[GWB] STORE SECOND COORDINTE FOR CALLER
<span class="number">257C E607 </span><span class="colon">X </span><span class="hex">44         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,h             ;[GWB] RETURN X IN BC
<span class="number">257D E608 </span><span class="colon">X </span><span class="hex">4D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,l                      
<span class="number">257E E609 </span><span class="colon">X </span><span class="hex">2A 07 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(GRPACY)     ;[GWB] GET OLDY POSITION
<span class="number">2581 E60C </span><span class="colon">X </span><span class="hex">28 03      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,SCYREL        ;[GWB] IF ZERO, RELATIVE SO USE OLD BASE
<span class="number">2583 E60E </span><span class="colon">X </span><span class="hex">21 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,0            ;[GWB] ABSOLUTE SO OFFSET BY 0
<span class="number">2586 E611 </span><span class="colon">X </span><span class="hex">19         </span><span class="source">[GWB] </span><span class="label">SCYREL:</span><span class="mnemonic"> add    </span> hl,de                    
<span class="number">2587 E612 </span><span class="colon">X </span><span class="hex">22 07 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (GRPACY),hl     ;[GWB] UPDATE Y PART OF ACCUMULATOR
<span class="number">258A E615 </span><span class="colon">X </span><span class="hex">22 05 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (GYPOS),hl      ;[GWB] STORE Y FOR CALLER
<span class="number">258D E618 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;[GWB] RETURN Y IN [D,E]
<span class="number">258E E619 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;[GWB] GET BACK THE TEXT POINTER
<span class="number">258F E61A </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2590 E61B </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2590 E61B </span><span class="colon">X </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">ATTRIBUTE SCAN                    </span>
<span class="number">2590 E61B </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">LOOK AT THE CURRENT POSITION AND IF THERE IS AN ARGUMENT READ IT AS</span>
<span class="number">2590 E61B </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">THE 8-BIT ATTRIBUTE VALUE TO SEND TO SETATR. IF STATEMENT HAS ENDED</span>
<span class="number">2590 E61B </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">OR THERE IS A NULL ARGUMENT, SEND FORCLR  TO SETATR</span>
<span class="number">2590 E61B </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;                                       </span>
<span class="number">2590 E61B </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Entry point ATRENT will leave [A] unchanged if there is a null agrument</span>
<span class="number">2590 E61B </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;                                       </span>
<span class="number">2590 E61B </span><span class="colon">X </span><span class="hex">3A 00 39   </span><span class="source">[GWB] </span><span class="label">ATRSCN:</span><span class="mnemonic"> ld     </span> a,(FORCLR)      ;;Get Default foreground color
<span class="number">2593 E61E </span><span class="colon">X </span><span class="hex">C5         </span><span class="source">{GWB} </span><span class="label">ATRENT:</span><span class="mnemonic"> push   </span> bc              ;[GWB] SAVE THE CURRENT POINT
<span class="number">2594 E61F </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                       
<span class="number">2595 E620 </span><span class="colon">X </span><span class="hex">5F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,a             ;;Preload Attribute with Default Value
<span class="number">2596 E621 </span><span class="colon">X </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl              ;[GWB] SEE IF STATEMENT ENDED
<span class="number">2597 E622 </span><span class="colon">X </span><span class="hex">D7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> CHRGET                   
<span class="number">2598 E623 </span><span class="colon">X </span><span class="hex">28 09      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,ATRFIN        ;[GWB] USE DEFAULT
<span class="number">259A E625 </span><span class="colon">X </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK                   
<span class="number">259B E626 </span><span class="colon">X </span><span class="hex">2C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> ','             ;[GWB]  INSIST ON COMMA
<span class="number">259C E627 </span><span class="colon">X </span><span class="hex">FE 2C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> ','             ;[GWB] ANOTHER COMMA FOLLOWS?
<span class="number">259E E629 </span><span class="colon">X </span><span class="hex">28 03      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,ATRFIN        ;[GWB] IF SO, NULL ARGUMENT SO USE DEFAULT
<span class="number">25A0 E62B </span><span class="colon">X </span><span class="hex">CD 54 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GETBYT          ;[GWB] GET THE BYTE
<span class="number">25A3 E62E </span><span class="colon">X </span><span class="hex">7B         </span><span class="source">[GWB] </span><span class="label">ATRFIN:</span><span class="mnemonic"> ld     </span> a,e             ;[GWB] GET ATTRIBUTE INTO [A]
<span class="number">25A4 E62F </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE THE TEXT POINTER
<span class="number">25A5      </span><span class="colon">X </span><span class="hex">CD 84 2D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SETATR          ;[GWB] SET THE ATTRIBUTE AS THE CURRENT ONE
<span class="number">     E630 </span><span class="colon">X </span><span class="hex">CD 0F EE   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">25A8 E633 </span><span class="colon">X </span><span class="hex">DA 97 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> c,FCERR         ;[GWB] ILLEGAL ATTRIBUTES GIVE FUNCTION CALL
<span class="number">25AB E636 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">25AC E637 </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de              ;[GWB] GET BACK CURRENT POINT
<span class="number">25AD E638 </span><span class="colon">X </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                       
<span class="number">25AE E639 </span><span class="colon">X </span><span class="hex">C3 6C 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> CHRGT2                   
<span class="number">25B1 E63C </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">25B1 E63C </span><span class="colon">X </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">XDELT SETS [H,L]=ABS(GXPOS-[B,C]) AND SETS CARRY IF [B,C].GT.GXPOS</span>
<span class="number">25B1 E63C </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">ALL REGISTERS EXCEPT [H,L] AND [A,PSW] ARE PRESERVED</span>
<span class="number">25B1 E63C </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">NOTE: [H,L] WILL BE A DELTA BETWEEN GXPOS AND [B,C] - ADD 1 FOR AN X "COUNT"</span>
<span class="number">25B1 E63C </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">                                  </span>
<span class="number">25B1 E63C </span><span class="colon">X </span><span class="hex">2A 03 39   </span><span class="source">[GWB] </span><span class="label">XDELT: </span><span class="mnemonic"> ld     </span> hl,(GXPOS)      ;[GWB] GET ACCUMULATOR POSITION
<span class="number">25B4 E63F </span><span class="colon">X </span><span class="hex">7D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,l                      
<span class="number">25B5 E640 </span><span class="colon">X </span><span class="hex">91         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> c               ;[GWB] DO SUBTRACT INTO [H,L]
<span class="number">25B6 E641 </span><span class="colon">X </span><span class="hex">6F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,a                      
<span class="number">25B7 E642 </span><span class="colon">X </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,h                      
<span class="number">25B8 E643 </span><span class="colon">X </span><span class="hex">98         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sbc    </span> a,b                      
<span class="number">25B9 E644 </span><span class="colon">X </span><span class="hex">67         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,a                      
<span class="number">25BA E645 </span><span class="colon">X </span><span class="hex">D0         </span><span class="source">[GWB] </span><span class="label">CNEGHL:</span><span class="mnemonic"> ret    </span> nc                       
<span class="number">25BB E646 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">25BB E646 </span><span class="colon">X </span><span class="hex">AF         </span><span class="source">[GWB] </span><span class="label">NEGHL: </span><span class="mnemonic"> xor    </span>   a             ;[GWB] STANDARD [H,L] NEGATE
<span class="number">25BC E647 </span><span class="colon">X </span><span class="hex">95         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span>   l                      
<span class="number">25BD E648 </span><span class="colon">X </span><span class="hex">6F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span>   l,a                    
<span class="number">25BE E649 </span><span class="colon">X </span><span class="hex">9C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sbc    </span>   a,h                    
<span class="number">25BF E64A </span><span class="colon">X </span><span class="hex">95         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span>   l                      
<span class="number">25C0 E64B </span><span class="colon">X </span><span class="hex">67         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span>   h,a                    
<span class="number">25C1 E64C </span><span class="colon">X </span><span class="hex">37         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> scf    </span>                          
<span class="number">25C2 E64D </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">25C3 E64E </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">25C3 E64E </span><span class="colon">X </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">YDELT SETS [H,L]=ABS(GYPOS-[D,E]) AND SETS CARRY IF [D,E].GT.GYPOS</span>
<span class="number">25C3 E64E </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">ALL REGISTERS EXCEPT [H,L] AND [A,PSW] ARE PRESERVED</span>
<span class="number">25C3 E64E </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">                                  </span>
<span class="number">25C3 E64E </span><span class="colon">X </span><span class="hex">2A 05 39   </span><span class="source">[GWB] </span><span class="label">YDELT: </span><span class="mnemonic"> ld     </span> hl,(GYPOS)               
<span class="number">25C6 E651 </span><span class="colon">X </span><span class="hex">7D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,l                      
<span class="number">25C7 E652 </span><span class="colon">X </span><span class="hex">93         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> e                        
<span class="number">25C8 E653 </span><span class="colon">X </span><span class="hex">6F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,a                      
<span class="number">25C9 E654 </span><span class="colon">X </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,h                      
<span class="number">25CA E655 </span><span class="colon">X </span><span class="hex">9A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sbc    </span> a,d                      
<span class="number">25CB E656 </span><span class="colon">X </span><span class="hex">67         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,a                      
<span class="number">25CC E657 </span><span class="colon">X </span><span class="hex">18 EC      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> CNEGHL                   
<span class="number">25CE E659 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">25CE E659 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Register Exchange Routines             </span>
<span class="number">25CE E659 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">XCHGX EXCHANGES [B,C] WITH GXPOS  </span>
<span class="number">25CE E659 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">XCHGY EXCHANGES [D,E] WITH GYPOS  </span>
<span class="number">25CE E659 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">XCHGAC PERFORMS BOTH OF THE ABOVE </span>
<span class="number">25CE E659 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">NONE OF THE OTHER REGISTERS IS AFFECTED</span>
<span class="number">25CE E659 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">                                  </span>
<span class="number">25CE E659 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">[GWB] </span><span class="label">XCHGY: </span><span class="mnemonic"> push   </span> hl                       
<span class="number">25CF E65A </span><span class="colon">X </span><span class="hex">2A 05 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(GYPOS)               
<span class="number">25D2 E65D </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">25D3 E65E </span><span class="colon">X </span><span class="hex">22 05 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (GYPOS),hl               
<span class="number">25D6 E661 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">25D7 E662 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">25D8 E663 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">25D8      </span><span class="colon">X </span><span class="hex">CD CE 25   </span><span class="source">[GWB] </span><span class="label">XCHGAC:</span><span class="mnemonic"> call   </span> XCHGY                    
<span class="number">     E663 </span><span class="colon">X </span><span class="hex">CD 59 E6   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">25DB E666 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">[GWB] </span><span class="label">XCHGX: </span><span class="mnemonic"> push   </span> hl                       
<span class="number">25DC E667 </span><span class="colon">X </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                       
<span class="number">25DD E668 </span><span class="colon">X </span><span class="hex">2A 03 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(GXPOS)               
<span class="number">25E0 E66B </span><span class="colon">X </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl                  
<span class="number">25E1 E66C </span><span class="colon">X </span><span class="hex">22 03 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (GXPOS),hl               
<span class="number">25E4 E66F </span><span class="colon">X </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                       
<span class="number">25E5 E670 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">25E6 E671 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">25E7 E672 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">25E7 E672 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">LINE COMMAND                      </span>
<span class="number">25E7 E672 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">                                  </span>
<span class="number">25E7 E672 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">LINE [(X1,Y1)]-(X2,Y2) [,ATTRIBUTE[,B[F]]]</span>
<span class="number">25E7 E672 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">DRAW A LINE FROM (X1,Y1) TO (X2,Y2) EITHER</span>
<span class="number">25E7 E672 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">1. STANDARD FORM -- JUST A LINE CONNECTING THE 2 POINTS</span>
<span class="number">25E7 E672 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">2. ,B=BOXLINE -- RECTANGLE TREATING (X1,Y1) AND (X2,Y2) AS OPPOSITE CORNERS</span>
<span class="number">25E7 E672 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">3. ,BF= BOXFILL --  FILLED RECTANGLE WITH (X1,Y1) AND (X2,Y2) AS OPPOSITE CORNERS</span>
<span class="number">25E7 E672 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">                                  </span>
<span class="number">25E7 E672 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;ATTRIBUTE is the Foreground Color      </span>
<span class="number">25E7      </span><span class="colon">X </span><span class="hex">CD 47 25   </span><span class="source">[GWB] </span><span class="label">GLINE: </span><span class="mnemonic"> call   </span> SCAN1           ;[GWB] SCAN THE FIRST COORDINATE
<span class="number">     E672 </span><span class="colon">X </span><span class="hex">CD D2 E5   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">25EA E675 </span><span class="colon">X </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc              ;[GWB] SAVE THE POINT
<span class="number">25EB E676 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                       
<span class="number">25EC E677 </span><span class="colon">X </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK                   
<span class="number">25ED E678 </span><span class="colon">X </span><span class="hex">A9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> MINUTK          ;[GWB] MAKE SURE ITS PROPERLY SEPERATED
<span class="number">25EE      </span><span class="colon">X </span><span class="hex">CD 56 25   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SCANDX          ;[GWB] SCAN THE SECOND SET
<span class="number">     E679 </span><span class="colon">X </span><span class="hex">CD E1 E5   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">25F1      </span><span class="colon">X </span><span class="hex">CD 90 25   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> ATRSCN          ;[GWB] SCAN THE ATTRIBUTE
<span class="number">     E67C </span><span class="colon">X </span><span class="hex">CD 1B E6   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">25F4 E67F </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de              ;[GWB] GET BACK THE FIRST POINT
<span class="number">25F5 E680 </span><span class="colon">X </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                       
<span class="number">25F6 E681 </span><span class="colon">X </span><span class="hex">28 43      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,DOLINE        ;[GWB] IF STATEMENT ENDED ITS A NORMAL LINE
<span class="number">25F8 E683 </span><span class="colon">X </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK                   
<span class="number">25F9 E684 </span><span class="colon">X </span><span class="hex">2C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> ','             ;[GWB] OTHERWISE MUST HAVE A COMMA
<span class="number">25FA E685 </span><span class="colon">X </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK                   
<span class="number">25FB E686 </span><span class="colon">X </span><span class="hex">42         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'B'                      
<span class="number">25FC E687 </span><span class="colon">X </span><span class="hex">28 53      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,BOXLIN        ;[GWB] IF JUST "B" THE NON-FILLED BOX
<span class="number">25FE E689 </span><span class="colon">X </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK                   
<span class="number">25FF E68A </span><span class="colon">X </span><span class="hex">46         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'F'             ;[GWB] MUST BE FILLED BOX
<span class="number">2600 E68B </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">{GWB} </span><span class="label">DOBOXF:</span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE THE TEXT POINTER
<span class="number">2601      </span><span class="colon">X </span><span class="hex">CD 2B 2E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SCLXYX          ;[GWB] SCALE FIRST POINT
<span class="number">     E68C </span><span class="colon">X </span><span class="hex">CD B6 EE   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2604      </span><span class="colon">X </span><span class="hex">CD D8 25   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> XCHGAC          ;[GWB] SWITCH POINTS
<span class="number">     E68F </span><span class="colon">X </span><span class="hex">CD 63 E6   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2607      </span><span class="colon">X </span><span class="hex">CD 2B 2E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SCLXYX          ;[GWB] SCALE SECOND POINT
<span class="number">     E692 </span><span class="colon">X </span><span class="hex">CD B6 EE   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">260A      </span><span class="colon">X </span><span class="hex">CD C3 25   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> YDELT           ;[GWB] SEE HOW MANY LINES AND SET CARRY
<span class="number">     E695 </span><span class="colon">X </span><span class="hex">CD 4E E6   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">260D      </span><span class="colon">X </span><span class="hex">DC CE 25   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> c,XCHGY         ;[GWB] MAKE [D,E] THE SMALLEST Y
<span class="number">     E698 </span><span class="colon">X </span><span class="hex">DC 59 E6   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2610 E69B </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl              ;[GWB] MAKE [H,L] INTO A COUNT
<span class="number">2611 E69C </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE COUNT OF LINES
<span class="number">2612      </span><span class="colon">X </span><span class="hex">CD B1 25   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> XDELT           ;[GWB] GET WIDTH AND SMALLEST X
<span class="number">     E69D </span><span class="colon">X </span><span class="hex">CD 3C E6   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2615      </span><span class="colon">X </span><span class="hex">DC DB 25   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> c,XCHGX         ;[GWB] MAKE [B,C] THE SMALLEST X
<span class="number">     E6A0 </span><span class="colon">X </span><span class="hex">DC 66 E6   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2618 E6A3 </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl              ;[GWB] MAKE [H,L] INTO A WIDTH COUNT
<span class="number">2619 E6A4 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE WIDTH COUNT
<span class="number">261A      </span><span class="colon">X </span><span class="hex">CD FD 2D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MAPXYP          ;[GWB] MAP INTO A "C"
<span class="number">     E6A5 </span><span class="colon">X </span><span class="hex">CD 88 EE   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">261D E6A8 </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de              ;[GWB] GET WIDTH COUNT
<span class="number">261E E6A9 </span><span class="colon">X </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc              ;[GWB] GET LINE COUNT
<span class="number">261F E6AA </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">[GWB] </span><span class="label">BOXLOP:</span><span class="mnemonic"> push   </span> de              ;[GWB] SAVE WIDTH
<span class="number">2620 E6AB </span><span class="colon">X </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc              ;[GWB] SAVE NUMBER OF LINES
<span class="number">2621      </span><span class="colon">X </span><span class="hex">CD 7D 2D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FETCHC          ;[GWB] LOOK AT CURRENT C
<span class="number">     E6AC </span><span class="colon">X </span><span class="hex">CD 08 EE   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2624 E6AF </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af              ;[GWB] SAVE BIT MASK OF CURRENT "C"
<span class="number">2625 E6B0 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE Address
<span class="number">2626 E6B1 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;[GWB] SET UP FOR NSETCX WITH COUNT
<span class="number">2627      </span><span class="colon">X </span><span class="hex">CD C0 2D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> NSETCX          ;[GWB] IN [H,L] OF POINTS TO SETC
<span class="number">     E6B2 </span><span class="colon">X </span><span class="hex">CD 4B EE   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">262A E6B5 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;[GWB] GET BACK STARTING C
<span class="number">262B E6B6 </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af              ;[GWB] Address AND BIT MASK
<span class="number">262C      </span><span class="colon">X </span><span class="hex">CD 76 2D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> STOREC          ;[GWB] SET UP AS CURRENT "C"
<span class="number">     E6B7 </span><span class="colon">X </span><span class="hex">CD 01 EE   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">262F      </span><span class="colon">X </span><span class="hex">CD BD 2E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> DOWNC           ;[GWB] MOVE TO NEXT LINE DOWN IN Y
<span class="number">     E6BA </span><span class="colon">X </span><span class="hex">CD 48 EF   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2632 E6BD </span><span class="colon">X </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc              ;[GWB] GET BACK NUMBER OF LINES
<span class="number">2633 E6BE </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de              ;[GWB] GET BACK WIDTH
<span class="number">2634 E6BF </span><span class="colon">X </span><span class="hex">0B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> bc              ;[GWB] COUNT DOWN LINES
<span class="number">2635 E6C0 </span><span class="colon">X </span><span class="hex">78         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,b                      
<span class="number">2636 E6C1 </span><span class="colon">X </span><span class="hex">B1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> c               ;[GWB] SEE IF ANY LEFT
<span class="number">2637 E6C2 </span><span class="colon">X </span><span class="hex">20 E6      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,BOXLOP       ;[GWB] KEEP DRAWING MORE LINES
<span class="number">2639 E6C4 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">263A E6C5 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">263B E6C6 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">263B E6C6 </span><span class="colon">X </span><span class="hex">C5         </span><span class="source">[GWB] </span><span class="label">DOLINE:</span><span class="mnemonic"> push   </span> bc              ;[GWB] SAVE COORDINATES
<span class="number">263C E6C7 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                       
<span class="number">263D E6C8 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE TEXT POINTER
<span class="number">263E      </span><span class="colon">X </span><span class="hex">CD 7B 26   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> DOGRPH                   
<span class="number">     E6C9 </span><span class="colon">X </span><span class="hex">CD 06 E7   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2641 E6CC </span><span class="colon">X </span><span class="hex">2A 09 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(GRPACX)     ;[GWB] RESTORE ORIGINAL SECOND COORDINATE
<span class="number">2644 E6CF </span><span class="colon">X </span><span class="hex">22 03 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (GXPOS),hl               
<span class="number">2647 E6D2 </span><span class="colon">X </span><span class="hex">2A 07 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(GRPACY)     ;[GWB] FOR BOXLIN CODE
<span class="number">264A E6D5 </span><span class="colon">X </span><span class="hex">22 05 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (GYPOS),hl               
<span class="number">264D E6D8 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;[GWB] RESTORE TEXT POINTER
<span class="number">264E E6D9 </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                       
<span class="number">264F E6DA </span><span class="colon">X </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                       
<span class="number">2650 E6DB </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2651 E6DC </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2651 E6DC </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">[GWB] </span><span class="label">BOXLIN:</span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE TEXT POINTER
<span class="number">2652 E6DD </span><span class="colon">X </span><span class="hex">2A 05 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(GYPOS)               
<span class="number">2655 E6E0 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE Y2
<span class="number">2656 E6E1 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de              ;[GWB] SAVE Y1
<span class="number">2657 E6E2 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;[GWB] MOVE Y2 TO Y1
<span class="number">2658      </span><span class="colon">X </span><span class="hex">CD 3B 26   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> DOLINE          ;[GWB] DO TOP LINE
<span class="number">     E6E3 </span><span class="colon">X </span><span class="hex">CD C6 E6   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">265B E6E6 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;[GWB] MOVE Y1 TO Y2
<span class="number">265C E6E7 </span><span class="colon">X </span><span class="hex">22 05 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (GYPOS),hl               
<span class="number">265F E6EA </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;[GWB] RESTORE Y1 TO [D,E]
<span class="number">2660      </span><span class="colon">X </span><span class="hex">CD 3B 26   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> DOLINE                   
<span class="number">     E6EB </span><span class="colon">X </span><span class="hex">CD C6 E6   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2663 E6EE </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;[GWB] GET BACK Y2
<span class="number">2664 E6EF </span><span class="colon">X </span><span class="hex">22 05 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (GYPOS),hl      ;[GWB] AND RESTORE
<span class="number">2667 E6F2 </span><span class="colon">X </span><span class="hex">2A 03 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(GXPOS)      ;[GWB] GET X2
<span class="number">266A E6F5 </span><span class="colon">X </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc              ;[GWB] SAVE X1
<span class="number">266B E6F6 </span><span class="colon">X </span><span class="hex">44         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,h             ;[GWB] SET X1=X2
<span class="number">266C E6F7 </span><span class="colon">X </span><span class="hex">4D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,l                      
<span class="number">266D      </span><span class="colon">X </span><span class="hex">CD 3B 26   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> DOLINE                   
<span class="number">     E6F8 </span><span class="colon">X </span><span class="hex">CD C6 E6   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2670 E6FB </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">2671 E6FC </span><span class="colon">X </span><span class="hex">22 03 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (GXPOS),hl      ;[GWB] SET X2=X1
<span class="number">2674 E6FF </span><span class="colon">X </span><span class="hex">44         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,h             ;[GWB] RESTORE X1 TO [B,C]
<span class="number">2675 E700 </span><span class="colon">X </span><span class="hex">4D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,l                      
<span class="number">2676      </span><span class="colon">X </span><span class="hex">CD 3B 26   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> DOLINE                   
<span class="number">     E701 </span><span class="colon">X </span><span class="hex">CD C6 E6   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2679 E704 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;[GWB] RESTORE THE TEXT POINTER
<span class="number">267A E705 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">267B E706 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">267B      </span><span class="colon">X </span><span class="hex">CD 2B 2E   </span><span class="source">[GWB] </span><span class="label">DOGRPH:</span><span class="mnemonic"> call   </span> SCLXYX          ;[GWB] CHEATY SCALING - JUST TRUNCATE FOR NOW
<span class="number">     E706 </span><span class="colon">X </span><span class="hex">CD B6 EE   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">267E      </span><span class="colon">X </span><span class="hex">CD D8 25   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> XCHGAC                   
<span class="number">     E709 </span><span class="colon">X </span><span class="hex">CD 63 E6   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2681      </span><span class="colon">X </span><span class="hex">CD 2B 2E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SCLXYX                   
<span class="number">     E70C </span><span class="colon">X </span><span class="hex">CD B6 EE   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2684      </span><span class="colon">X </span><span class="hex">CD C3 25   </span><span class="source">{GWB} </span><span class="label">DOGRP2:</span><span class="mnemonic"> call   </span> YDELT           ;[GWB] GET COUNT DIFFERENCE IN [H,L]
<span class="number">     E70F </span><span class="colon">X </span><span class="hex">CD 4E E6   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2687      </span><span class="colon">X </span><span class="hex">DC D8 25   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> c,XCHGAC        ;[GWB] IF CURRENT Y IS SMALLER NO EXCHANGE
<span class="number">     E712 </span><span class="colon">X </span><span class="hex">DC 63 E6   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">268A E715 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de              ;[GWB] SAVE Y1 COORDINATE
<span class="number">268B E716 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE DELTA Y
<span class="number">268C      </span><span class="colon">X </span><span class="hex">CD B1 25   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> XDELT                    
<span class="number">     E717 </span><span class="colon">X </span><span class="hex">CD 3C E6   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">268F E71A </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;[GWB] PUT DELTA X INTO [D,E]
<span class="number">2690      </span><span class="colon">X </span><span class="hex">21 DB 2E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,RIGHTC       ;[GWB] ASSUME X WILL GO RIGHT
<span class="number">     E71B </span><span class="colon">X </span><span class="hex">21 66 EF   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2693 E71E </span><span class="colon">X </span><span class="hex">30 03      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,LINCN2                
<span class="number">2695      </span><span class="colon">X </span><span class="hex">21 D1 2E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,LEFTC                 
<span class="number">     E720 </span><span class="colon">X </span><span class="hex">21 5C EF   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2698 E723 </span><span class="colon">X </span><span class="hex">E3         </span><span class="source">[GWB] </span><span class="label">LINCN2:</span><span class="mnemonic"> ex     </span> (sp),hl         ;[GWB] XTHL
<span class="number">2699 E724 </span><span class="colon">X </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR          ;[GWB] SEE WHICH DELTA IS BIGGER
<span class="number">269A E725 </span><span class="colon">X </span><span class="hex">30 10      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,YDLTBG       ;[GWB] YDELTA IS BIGGER OR EQUAL
<span class="number">269C E727 </span><span class="colon">X </span><span class="hex">22 13 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (MINDEL),hl     ;[GWB] SAVE MINOR AXIS DELTA (Y)
<span class="number">269F E72A </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;[GWB] GET X ACTION ROUTINE
<span class="number">26A0 E72B </span><span class="colon">X </span><span class="hex">22 0C 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (MAXUPD+1),hl   ;[GWB] SAVE IN MAJOR ACTION Address
<span class="number">26A3      </span><span class="colon">X </span><span class="hex">21 BD 2E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,DOWNC        ;[GWB] ALWAYS INCREMENT
<span class="number">     E72E </span><span class="colon">X </span><span class="hex">21 48 EF   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">26A6 E731 </span><span class="colon">X </span><span class="hex">22 0F 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (MINUPD+1),hl   ;[GWB] WHICH IS THE MINOR AXIS
<span class="number">26A9 E734 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;[GWB] [H,L]=DELTA X=MAJOR DELTA
<span class="number">26AA E735 </span><span class="colon">X </span><span class="hex">18 0F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> LINCN3          ;[GWB] MERGE WITH YDLTBG CASE AND DO DRAW
<span class="number">26AC E737 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">26AC E737 </span><span class="colon">X </span><span class="hex">E3         </span><span class="source">[GWB] </span><span class="label">YDLTBG:</span><span class="mnemonic"> ex     </span> (sp),hl         ;[GWB] XTHL
<span class="number">26AD      </span><span class="colon">X </span><span class="hex">22 0F 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (MINUPD+1),hl   ;[GWB] SAVE Address OF MINOR AXIS UPDATE
<span class="number">26B0      </span><span class="colon">X </span><span class="hex">21 BD 2E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,DOWNC        ;[GWB] Y IS ALWAYS INCREMENT MODE
<span class="number">     E738 </span><span class="colon">X </span><span class="hex">22 0F 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (MINUPD+1),hl   ;;<span class="comment">;Swapped</span>
<span class="number">     E73B </span><span class="colon">X </span><span class="hex">21 48 EF   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,DOWNC        ;;<span class="comment">;      </span>
<span class="number">26B3 E73E </span><span class="colon">X </span><span class="hex">22 0C 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (MAXUPD+1),hl   ;[GWB] SAVE AS MAJOR AXIS UPDATE
<span class="number">26B6 E741 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;[GWB] [H,L]=DELTA X
<span class="number">26B7 E742 </span><span class="colon">X </span><span class="hex">22 13 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (MINDEL),hl     ;[GWB] SAVE MINOR DELTA
<span class="number">26BA E745 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;[GWB] [H,L]=DELTA Y=MAJOR DELTA
<span class="number">26BB E746 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">26BB E746 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Draw a Line                            </span>
<span class="number">26BB E746 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">MAJOR AXIS IS ONE WITH THE LARGEST DELTA</span>
<span class="number">26BB E746 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">MINOR IS THE OTHER                </span>
<span class="number">26BB E746 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">READY TO DRAW NOW                 </span>
<span class="number">26BB E746 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">MINUPD+1=Address TO GO TO UPDATE MINOR AXIS COORDINATE</span>
<span class="number">26BB E746 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">MAXUPD+1=Address TO GO TO UPDATE MAJOR AXIS COORDINATE</span>
<span class="number">26BB E746 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">[H,L]=MAJOR AXIS DELTA=# OF POINTS-1</span>
<span class="number">26BB E746 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">MINDEL=DELTA ON MINOR AXIS        </span>
<span class="number">26BB E746 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">                                  </span>
<span class="number">26BB E746 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">IDEA IS                           </span>
<span class="number">26BB E746 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment"> SET SUM=MAJOR DELTA/2            </span>
<span class="number">26BB E746 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment"> [B,C]=# OF POINTS                </span>
<span class="number">26BB E746 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment"> MAXDEL=-MAJOR DELTA (CONVENIENT FOR ADDING)</span>
<span class="number">26BB E746 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">LINE LOOP (LINLP3):               </span>
<span class="number">26BB E746 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">      DRAW AT CURRENT POSITION    </span>
<span class="number">26BB E746 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">      UPDATE MAJOR AXIS           </span>
<span class="number">26BB E746 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">      SUM=SUM+MINOR DELTA         </span>
<span class="number">26BB E746 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">      IF SUM.GT.MAJOR DELTA THEN UPDATE MINOR AND SUM=SUM-MAJOR DELTA</span>
<span class="number">26BB E746 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">      DECREMENT [B,C] AND TEST FOR 0 -- LOOP IF NOT</span>
<span class="number">26BB E746 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">END LOOP                          </span>
<span class="number">26BB E746 </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">[GWB] </span><span class="label">LINCN3:</span><span class="mnemonic"> pop    </span> de              ;[GWB] GET BACK Y1
<span class="number">26BC E747 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE FOR SETTING UP COUNT
<span class="number">26BD      </span><span class="colon">X </span><span class="hex">CD BB 25   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> NEGHL                    
<span class="number">     E748 </span><span class="colon">X </span><span class="hex">CD 46 E6   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">26C0 E74B </span><span class="colon">X </span><span class="hex">22 11 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (MAXDEL),hl     ;[GWB] SAVE MAJOR DELTA FOR SUMMING
<span class="number">26C3      </span><span class="colon">X </span><span class="hex">CD FD 2D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MAPXYP          ;[GWB] GET POSITION INTO BITMSK AND [H,L]
<span class="number">     E74E </span><span class="colon">X </span><span class="hex">CD 88 EE   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">26C6 E751 </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                       
<span class="number">26C7 E752 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de              ;[GWB] START SUM AT MAXDEL/2
<span class="number">26C8      </span><span class="colon">X </span><span class="hex">CD F0 26   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> HLFDE                    
<span class="number">     E753 </span><span class="colon">X </span><span class="hex">CD 7B E7   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">26CB E756 </span><span class="colon">X </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc              ;[GWB] GET COUNT IN [B,C]
<span class="number">26CC E757 </span><span class="colon">X </span><span class="hex">03         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> bc              ;[GWB] NUMBER OF POINTS IS DELTA PLUS ONE
<span class="number">26CD E758 </span><span class="colon">X </span><span class="hex">18 07      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> LINLP3                   
<span class="number">26CF E75A </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">26CF E75A </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">LINLPR:</span><span class="mnemonic"> pop    </span> hl                       
<span class="number">26D0 E75B </span><span class="colon">X </span><span class="hex">78         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,b                      
<span class="number">26D1 E75C </span><span class="colon">X </span><span class="hex">B1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> c                        
<span class="number">26D2 E75D </span><span class="colon">X </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                        
<span class="number">26D3 E75E </span><span class="colon">X </span><span class="hex">CD 0B 39   </span><span class="source">[GWB] </span><span class="label">LINLOP:</span><span class="mnemonic"> call   </span> MAXUPD          ;[GWB] UPDATE MAJOR AXIS
<span class="number">26D6      </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">Inner loop of line code.          </span>
<span class="number">26D6      </span><span class="colon">X </span><span class="hex">CD 99 2D   </span><span class="source">[GWB] </span><span class="label">LINLP3:</span><span class="mnemonic"> call   </span> SETC            ;[GWB] SET CURRENT POINT
<span class="number">     E761 </span><span class="colon">X </span><span class="hex">CD 24 EE   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">26D9 E764 </span><span class="colon">X </span><span class="hex">0B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> bc                       
<span class="number">26DA E765 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                       
<span class="number">26DB E766 </span><span class="colon">X </span><span class="hex">2A 13 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(MINDEL)              
<span class="number">26DE E769 </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de           ;[GWB] ADD SMALL DELTA TO SUM
<span class="number">26DF E76A </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">26E0 E76B </span><span class="colon">X </span><span class="hex">2A 11 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(MAXDEL)     ;[GWB] UPDATE SUM FOR NEXT POINT
<span class="number">26E3 E76E </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de                    
<span class="number">26E4 E76F </span><span class="colon">X </span><span class="hex">30 E9      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,LINLPR                
<span class="number">26E6 E771 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">26E7 E772 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">26E8 E773 </span><span class="colon">X </span><span class="hex">78         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,b                      
<span class="number">26E9 E774 </span><span class="colon">X </span><span class="hex">B1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> c                        
<span class="number">26EA E775 </span><span class="colon">X </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                        
<span class="number">26EB E776 </span><span class="colon">X </span><span class="hex">CD 0E 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MINUPD          ;[GWB] ADVANCE MINOR AXIS
<span class="number">26EE E779 </span><span class="colon">X </span><span class="hex">18 E3      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> LINLOP          ;[GWB] CONTINUE UNTIL COUNT EXHAUSTED
<span class="number">26F0 E77B </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">26F0 E77B </span><span class="colon">X </span><span class="hex">7A         </span><span class="source">[GWB] </span><span class="label">HLFDE: </span><span class="mnemonic"> ld     </span> a,d             ;;DE = DE/2
<span class="number">26F1 E77C </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                        
<span class="number">26F2 E77D </span><span class="colon">X </span><span class="hex">1F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rra    </span>                          
<span class="number">26F3 E77E </span><span class="colon">X </span><span class="hex">57         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,a                      
<span class="number">26F4 E77F </span><span class="colon">X </span><span class="hex">7B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,e                      
<span class="number">26F5 E780 </span><span class="colon">X </span><span class="hex">1F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rra    </span>                          
<span class="number">26F6 E781 </span><span class="colon">X </span><span class="hex">5F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,a                      
<span class="number">26F7 E782 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">26F8 E783 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">26F8 E783 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;Restore Text Pointer and Return         </span>
<span class="number">26F8 E783 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">[GWB] </span><span class="label">POPTRT:</span><span class="mnemonic"> pop    </span> hl                       
<span class="number">26F9 E784 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">26FA E785 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">26FA E785 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">[GWB] </span><span class="label">NEGDE: </span><span class="mnemonic"> ex     </span> de,hl           ;;DE = 0 - DE
<span class="number">26FB      </span><span class="colon">X </span><span class="hex">CD BB 25   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> NEGHL                    
<span class="number">     E786 </span><span class="colon">X </span><span class="hex">CD 46 E6   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">26FE E789 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">26FF E78A </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2700 E78B </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2700      </span><span class="colon">X </span><span class="hex">CD 47 25   </span><span class="source">[GWB] </span><span class="label">CIRCLE:</span><span class="mnemonic"> call   </span> SCAN1           ;[GWB] GET (X,Y) OF CENTER INTO GRPACX,Y
<span class="number">     E78B </span><span class="colon">X </span><span class="hex">CD D2 E5   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2703 E78E </span><span class="colon">X </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK                   
<span class="number">2704 E78F </span><span class="colon">X </span><span class="hex">2C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> ','             ;[GWB] EAT COMMA
<span class="number">2705      </span><span class="colon">X </span><span class="hex">CD 73 23   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GETIN2          ;[GWB] GET THE RADIUS
<span class="number">     E790 </span><span class="colon">X </span><span class="hex">CD FE E3   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2708 E793 </span><span class="colon">X </span><span class="hex">7A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,d                      
<span class="number">2709 E794 </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                        
<span class="number">270A E795 </span><span class="colon">X </span><span class="hex">FA 97 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> m,FCERR                  
<span class="number">270D E798 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE TXTPTR
<span class="number">270E E799 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">270F E79A </span><span class="colon">X </span><span class="hex">22 03 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (GXPOS),hl      ;[GWB] SAVE HERE TILL START OF MAIN LOOP
<span class="number">2712      </span><span class="colon">X </span><span class="hex">CD 20 23   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MAKINT          ;[GWB] PUT INTEGER INTO FAC
<span class="number">     E79D </span><span class="colon">X </span><span class="hex">CD AB E3   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2715 E7A0 </span><span class="colon">X </span><span class="hex">CD 75 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CHKNUM          ;[M65] MUST BE NUMBER
<span class="number">2718 E7A3 </span><span class="colon">X </span><span class="hex">01 35 80   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> bc,$8035        ;[GWB] LOAD REGS WITH SQR(2)/2
<span class="number">271B E7A6 </span><span class="colon">X </span><span class="hex">11 F3 04   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,$04F3                 
<span class="number">271E E7A9 </span><span class="colon">X </span><span class="hex">CD CB 13   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FMULT           ;[GWB] DO FLOATING PT MULTIPLY
<span class="number">2721      </span><span class="colon">X </span><span class="hex">CD 04 23   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FRCINX          ;[GWB] CONVERT TO INTEGER & GET INTO [HL]
<span class="number">     E7AC </span><span class="colon">X </span><span class="hex">CD 8F E3   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2724 E7AF </span><span class="colon">X </span><span class="hex">22 1A 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CNPNTS),hl     ;[GWB] CNPNTS=RADIUS*SQR(2)/2=# PTS TO PLOT
<span class="number">2727 E7B2 </span><span class="colon">X </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a               ;[GWB] ZERO OUT GLINEF - NO LINES TO CENTER
<span class="number">2728 E7B3 </span><span class="colon">X </span><span class="hex">32 19 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (GLINEF),a               
<span class="number">272B E7B6 </span><span class="colon">X </span><span class="hex">32 25 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CSCLXY),a               
<span class="number">272E E7B9 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;[GWB] REGET TXTPTR
<span class="number">272F      </span><span class="colon">X </span><span class="hex">CD 90 25   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> ATRSCN          ;[GWB] SCAN POSSIBLE ATTRIBUTE
<span class="number">     E7BA </span><span class="colon">X </span><span class="hex">CD 1B E6   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2732 E7BD </span><span class="colon">X </span><span class="hex">0E 01      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,1             ;[GWB] SET LO BIT IN GLINEF FOR LINE TO CNTR
<span class="number">2734 E7BF </span><span class="colon">X </span><span class="hex">11 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,0            ;[GWB] DEFAULT START COUNT = 0
<span class="number">2737      </span><span class="colon">X </span><span class="hex">CD 27 29   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CGTCNT                   
<span class="number">     E7C2 </span><span class="colon">X </span><span class="hex">CD B2 E9   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">273A E7C5 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de              ;[GWB] SAVE COUNT FOR LATER COMPARISON
<span class="number">273B E7C6 </span><span class="colon">X </span><span class="hex">0E 80      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,128           ;[GWB] SET HI BIT IN GLINEF FOR LINE TO CNTR
<span class="number">273D E7C8 </span><span class="colon">X </span><span class="hex">11 FF FF   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,0-1          ;[GWB] DEFAULT END COUNT = INFINITY
<span class="number">2740      </span><span class="colon">X </span><span class="hex">CD 27 29   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CGTCNT                   
<span class="number">     E7CB </span><span class="colon">X </span><span class="hex">CD B2 E9   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2743 E7CE </span><span class="colon">X </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl         ;[GWB] GET START COUNT, PUSH TXTPTR TILL DONE
<span class="number">2744 E7CF </span><span class="colon">X </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                        
<span class="number">2745 E7D0 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;[GWB] REVERSE REGS TO TEST FOR .LT.
<span class="number">2746 E7D1 </span><span class="colon">X </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR          ;[GWB] SEE IF END .GE. START
<span class="number">2747 E7D2 </span><span class="colon">X </span><span class="hex">3E 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,0                      
<span class="number">2749      </span><span class="colon">X </span><span class="hex">D2 5B 27   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,CSTPLT       ;[GWB] YES, PLOT POINTS BETWEEN STRT & END
<span class="number">     E7D4 </span><span class="colon">X </span><span class="hex">D2 E6 E7   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">274C E7D7 </span><span class="colon">X </span><span class="hex">3D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> a               ;[GWB] PLOT POINTS ABOVE & BELOW
<span class="number">274D E7D8 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;[GWB] SWAP START AND END SO START .LT. END
<span class="number">274E E7D9 </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af              ;[GWB] Swap sense of center line flags
<span class="number">274F E7DA </span><span class="colon">X </span><span class="hex">3A 19 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(GLINEF)               
<span class="number">2752 E7DD </span><span class="colon">X </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a                      
<span class="number">2753 E7DE </span><span class="colon">X </span><span class="hex">07         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rlca   </span>                          
<span class="number">2754 E7DF </span><span class="colon">X </span><span class="hex">07         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rlca   </span>                          
<span class="number">2755 E7E0 </span><span class="colon">X </span><span class="hex">B1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> c                        
<span class="number">2756 E7E1 </span><span class="colon">X </span><span class="hex">0F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rrca   </span>                          
<span class="number">2757 E7E2 </span><span class="colon">X </span><span class="hex">32 19 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (GLINEF),a      ;[GWB] Store swapped flags
<span class="number">275A E7E5 </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                       
<span class="number">275B E7E6 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">275B E7E6 </span><span class="colon">X </span><span class="hex">32 1C 39   </span><span class="source">[GWB] </span><span class="label">CSTPLT:</span><span class="mnemonic"> ld     </span> (CPLOTF),a      ;[GWB] SET UP PLOT POLARITY FLAG
<span class="number">275E E7E9 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">275F E7EA </span><span class="colon">X </span><span class="hex">22 23 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CSTCNT),hl     ;STORE START COUNT
<span class="number">2762 E7ED </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">2763 E7EE </span><span class="colon">X </span><span class="hex">22 17 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CENCNT),hl     ;[GWB] AND END COUNT
<span class="number">2766 E7F1 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;[GWB] GET TXTPTR
<span class="number">2767 E7F2 </span><span class="colon">X </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl              ;[GWB] NOW SEE IF LAST CHAR WAS A COMMA
<span class="number">2768 E7F3 </span><span class="colon">X </span><span class="hex">D7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> CHRGET                   
<span class="number">2769      </span><span class="colon">X </span><span class="hex">C2 7E 27   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,CIRC1        ;[GWB] SOMETHING THERE
<span class="number">     E7F4 </span><span class="colon">X </span><span class="hex">C2 09 E8   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">276C E7F7 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE TXTPTR
<span class="number">276D      </span><span class="colon">X </span><span class="hex">CD 6F 2D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GTASPC          ;[GWB] GET DEFAULT ASPECT RATIO INTO [HL]
<span class="number">     E7F8 </span><span class="colon">X </span><span class="hex">CD FA ED   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2770 E7FB </span><span class="colon">X </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,h                      
<span class="number">2771 E7FC </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a               ;[GWB] IS ASPECT RATIO GREATER THAN ONE?
<span class="number">2772      </span><span class="colon">X </span><span class="hex">CA 9E 27   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,CIRC2         ;[GWB] BRIF GOOD ASPECT RATIO
<span class="number">     E7FD </span><span class="colon">X </span><span class="hex">CA 29 E8   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2775 E800 </span><span class="colon">X </span><span class="hex">3E 01      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,1                      
<span class="number">2777 E802 </span><span class="colon">X </span><span class="hex">32 25 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CSCLXY),a               
<span class="number">277A E805 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;[GWB] ASPECT RATIO IS GREATER THAN ONE, USE INVERSE
<span class="number">277B      </span><span class="colon">X </span><span class="hex">C3 9E 27   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> CIRC2           ;[GWB] NOW GO CONVERT TO FRACTION OF 256
<span class="number">     E806 </span><span class="colon">X </span><span class="hex">C3 29 E8   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">277E E809 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">277E E809 </span><span class="colon">X </span><span class="hex">CF         </span><span class="source">[GWB] </span><span class="label">CIRC1: </span><span class="mnemonic"> rst    </span> SYNCHK          ;[GWB] EAT COMMA
<span class="number">277F E80A </span><span class="colon">X </span><span class="hex">2C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> ','                      
<span class="number">2780 E80B </span><span class="colon">X </span><span class="hex">CD 85 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FRMEVL          ;[GWB] EVALUATE A FORMULA
<span class="number">2783 E80E </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE TXTPTR
<span class="number">2784 E80F </span><span class="colon">X </span><span class="hex">CD 75 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CHKNUM          ;[M65] MUST BE NUMBER
<span class="number">2787      </span><span class="colon">X </span><span class="hex">CD 79 29   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CMPONE          ;[GWB] SEE IF GREATER THAN ONE
<span class="number">     E812 </span><span class="colon">X </span><span class="hex">CD 04 EA   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">278A      </span><span class="colon">X </span><span class="hex">C2 94 27   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,CIRC11       ;[GWB] LESS THAN ONE - SCALING Y
<span class="number">     E815 </span><span class="colon">X </span><span class="hex">C2 1F E8   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">278D E818 </span><span class="colon">X </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a               ;[GWB] MAKE [A] NZ
<span class="number">278E E819 </span><span class="colon">X </span><span class="hex">32 25 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CSCLXY),a      ;[GWB] FLAG SCALING X
<span class="number">2791 E81C </span><span class="colon">X </span><span class="hex">CD 2F 14   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FDIV            ;[GWB] RATIO = 1/RATIO, MAKE NUMBER FRACTION OF 256
<span class="number">2794 E81F </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2794 E81F </span><span class="colon">X </span><span class="hex">21 E7 38   </span><span class="source">[GWB] </span><span class="label">CIRC11:</span><span class="mnemonic"> ld     </span> hl,FAC          ;[GWB] BY MULTIPLYING BY 2^8 (256)
<span class="number">2797 E822 </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)                   
<span class="number">2798 E823 </span><span class="colon">X </span><span class="hex">C6 08      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,8             ;[GWB] ADD 8 TO EXPONENT
<span class="number">279A E825 </span><span class="colon">X </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a                   
<span class="number">279B      </span><span class="colon">X </span><span class="hex">CD 04 23   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FRCINX          ;[GWB] MAKE IT AN INTEGER IN [HL]
<span class="number">     E826 </span><span class="colon">X </span><span class="hex">CD 8F E3   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">279E E829 </span><span class="colon">X </span><span class="hex">22 15 39   </span><span class="source">[GWB] </span><span class="label">CIRC2: </span><span class="mnemonic"> ld     </span> (ASPECT),hl     ;[GWB] STORE ASPECT RATIO
<span class="number">27A1 E82C </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">27A1 E82C </span><span class="colon">X </span><span class="hex">           </span><span class="source">   +  </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">      CIRCLE ALGORITHM            </span>
<span class="number">27A1 E82C </span><span class="colon">X </span><span class="hex">           </span><span class="source">   |  </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">                                  </span>
<span class="number">27A1 E82C </span><span class="colon">X </span><span class="hex">           </span><span class="source">   |  </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">      [HL]=X=RADIUS * 2 (ONE BIT FRACTION FOR ROUNDING)</span>
<span class="number">27A1 E82C </span><span class="colon">X </span><span class="hex">           </span><span class="source">   |  </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">      [DE]=Y=0                    </span>
<span class="number">27A1 E82C </span><span class="colon">X </span><span class="hex">           </span><span class="source">   |  </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">      SUM =0                      </span>
<span class="number">27A1 E82C </span><span class="colon">X </span><span class="hex">           </span><span class="source">   |  </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">LOOP: IF Y IS EVEN THEN           </span>
<span class="number">27A1 E82C </span><span class="colon">X </span><span class="hex">           </span><span class="source">   |  </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">            REFLECT((X+1)/2,(Y+1)/2) (I.E., PLOT POINTS)</span>
<span class="number">27A1 E82C </span><span class="colon">X </span><span class="hex">           </span><span class="source">   |  </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">            IF X.LT.Y THEN EXIT   </span>
<span class="number">27A1 E82C </span><span class="colon">X </span><span class="hex">           </span><span class="source">   |  </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">      SUM=SUM+2*Y+1               </span>
<span class="number">27A1 E82C </span><span class="colon">X </span><span class="hex">           </span><span class="source">   |  </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">      Y=Y+1                       </span>
<span class="number">27A1 E82C </span><span class="colon">X </span><span class="hex">           </span><span class="source">   |  </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">      IF SUM.GGWGRP.RNO           </span>
<span class="number">27A1 E82C </span><span class="colon">X </span><span class="hex">           </span><span class="source">   |  </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">            SUM=SUM-2*X+1         </span>
<span class="number">27A1 E82C </span><span class="colon">X </span><span class="hex">           </span><span class="source">   |  </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">            X=X-1                 </span>
<span class="number">27A1 E82C </span><span class="colon">X </span><span class="hex">           </span><span class="source">   |  </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">      ENDIF                       </span>
<span class="number">27A1 E82C </span><span class="colon">X </span><span class="hex">           </span><span class="source">   |  </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">      GOTO LOOP                   </span>
<span class="number">27A1 E82C </span><span class="colon">X </span><span class="hex">           </span><span class="source">   |  </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">                                  </span>
<span class="number">27A1 E82C </span><span class="colon">X </span><span class="hex">11 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,0            ;[GWB] INIT Y = 0
<span class="number">27A4 E82F </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">27A5 E830 </span><span class="colon">X </span><span class="hex">22 21 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CRCSUM),hl     ;[GWB] SUM = 0
<span class="number">27A8 E833 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">27A9 E834 </span><span class="colon">X </span><span class="hex">2A 03 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(GXPOS)      ;[GWB] X = RADIUS*2
<span class="number">27AC E837 </span><span class="colon">X </span><span class="hex">29         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,hl                    
<span class="number">27AD E838 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">27AD E838 </span><span class="colon">X </span><span class="hex">CD 25 1A   </span><span class="source">[GWB] </span><span class="label">CIRCLP:</span><span class="mnemonic"> call   </span> ISCNTC          ;[M80] CHECK FOR CONTROL-C
<span class="number">27B0 E83B </span><span class="colon">X </span><span class="hex">7B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,e             ;[GWB] TEST EVENNESS OF Y
<span class="number">27B1 E83C </span><span class="colon">X </span><span class="hex">1F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rra    </span>                 ;[GWB] TO SEE IF WE NEED TO PLOT
<span class="number">27B2      </span><span class="colon">X </span><span class="hex">DA CB 27   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> c,CRCLP2        ;[GWB] Y IS ODD - DON'T TEST OR PLOT
<span class="number">     E83D </span><span class="colon">X </span><span class="hex">DA 56 E8   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">27B5 E840 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de              ;[GWB] SAVE Y AND X
<span class="number">27B6 E841 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                       
<span class="number">27B7 E842 </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl              ;[GWB] ACTUAL COORDS ARE (X+1)/2,(Y+1)/2
<span class="number">27B8 E843 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">27B9      </span><span class="colon">X </span><span class="hex">CD F0 26   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> HLFDE           ;[GWB] (PLUS ONE BEFORE DIVIDE TO ROUND UP)
<span class="number">     E844 </span><span class="colon">X </span><span class="hex">CD 7B E7   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">27BC E847 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">27BD E848 </span><span class="colon">X </span><span class="hex">13         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> de                       
<span class="number">27BE      </span><span class="colon">X </span><span class="hex">CD F0 26   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> HLFDE                    
<span class="number">     E849 </span><span class="colon">X </span><span class="hex">CD 7B E7   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">27C1      </span><span class="colon">X </span><span class="hex">CD FC 27   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CPLOT8                   
<span class="number">     E84C </span><span class="colon">X </span><span class="hex">CD 87 E8   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">27C4 E84F </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de              ;[GWB] RESTORE X AND Y
<span class="number">27C5 E850 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;[GWB] INTO [DE] AND [HL] (BACKWARDS FOR CMP)
<span class="number">27C6 E851 </span><span class="colon">X </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR          ;[GWB] QUIT IF Y .GE. X
<span class="number">27C7      </span><span class="colon">X </span><span class="hex">D2 F8 26   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,POPTRT       ;[GWB] GO POP TXTPTR AND QUIT
<span class="number">     E852 </span><span class="colon">X </span><span class="hex">D2 83 E7   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">27CA E855 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;[GWB] GET OFFSETS INTO PROPER REGISTERS
<span class="number">27CB E856 </span><span class="colon">X </span><span class="hex">44         </span><span class="source">[GWB] </span><span class="label">CRCLP2:</span><span class="mnemonic"> ld     </span> b,h             ;[GWB] [BC]=X
<span class="number">27CC E857 </span><span class="colon">X </span><span class="hex">4D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,l                      
<span class="number">27CD E858 </span><span class="colon">X </span><span class="hex">2A 21 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(CRCSUM)              
<span class="number">27D0 E85B </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl              ;[GWB] SUM = SUM+2*Y+1
<span class="number">27D1 E85C </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de                    
<span class="number">27D2 E85D </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de                    
<span class="number">27D3 E85E </span><span class="colon">X </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,h             ;[GWB] NOW CHECK SIGN OF RESULT
<span class="number">27D4 E85F </span><span class="colon">X </span><span class="hex">87         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,a                      
<span class="number">27D5      </span><span class="colon">X </span><span class="hex">DA E7 27   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> c,CNODEX        ;[GWB] DON'T ADJUST X IF WAS NEGATIVE
<span class="number">     E860 </span><span class="colon">X </span><span class="hex">DA 72 E8   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">27D8 E863 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de              ;[GWB] SAVE Y
<span class="number">27D9 E864 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;[GWB] [DE]=SUM
<span class="number">27DA E865 </span><span class="colon">X </span><span class="hex">60         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,b             ;[GWB] [HL]=X
<span class="number">27DB E866 </span><span class="colon">X </span><span class="hex">69         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,c             ;[GWB] [HL]=2*X-1
<span class="number">27DC E867 </span><span class="colon">X </span><span class="hex">29         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,hl                    
<span class="number">27DD E868 </span><span class="colon">X </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                       
<span class="number">27DE E869 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;[GWB] PREPARE TO SUBTRACT
<span class="number">27DF E86A </span><span class="colon">X </span><span class="hex">7D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,l             ;[GWB] CALC SUM-2*X+1
<span class="number">27E0 E86B </span><span class="colon">X </span><span class="hex">93         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> e                        
<span class="number">27E1 E86C </span><span class="colon">X </span><span class="hex">6F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,a                      
<span class="number">27E2 E86D </span><span class="colon">X </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,h                      
<span class="number">27E3 E86E </span><span class="colon">X </span><span class="hex">9A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sbc    </span> a,d                      
<span class="number">27E4 E86F </span><span class="colon">X </span><span class="hex">67         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,a                      
<span class="number">27E5 E870 </span><span class="colon">X </span><span class="hex">0B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> bc              ;[GWB] X=X-1
<span class="number">27E6 E871 </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de              ;[GWB] GET Y BACK
<span class="number">27E7 E872 </span><span class="colon">X </span><span class="hex">22 21 39   </span><span class="source">[GWB] </span><span class="label">CNODEX:</span><span class="mnemonic"> ld     </span> (CRCSUM),hl     ;[GWB] UPDATE CIRCLE SUM
<span class="number">27EA E875 </span><span class="colon">X </span><span class="hex">60         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,b             ;[GWB] GET X BACK TO [HL]
<span class="number">27EB E876 </span><span class="colon">X </span><span class="hex">69         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,c                      
<span class="number">27EC E877 </span><span class="colon">X </span><span class="hex">13         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> de              ;[GWB] Y=Y+1
<span class="number">27ED      </span><span class="colon">X </span><span class="hex">C3 AD 27   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> CIRCLP                   
<span class="number">     E878 </span><span class="colon">X </span><span class="hex">C3 38 E8   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">27F0 E87B </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">27F0 E87B </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">[GWB] </span><span class="label">CPLSCX:</span><span class="mnemonic"> push   </span> de                       
<span class="number">27F1      </span><span class="colon">X </span><span class="hex">CD F7 28   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SCALEY                   
<span class="number">     E87C </span><span class="colon">X </span><span class="hex">CD 82 E9   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">27F4 E87F </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;[GWB] GET UNSCALED INTO [HL]
<span class="number">27F5 E880 </span><span class="colon">X </span><span class="hex">3A 25 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(CSCLXY)      ;[GWB] SEE WHETHER ASPECT WAS .GT. 1
<span class="number">27F8 E883 </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                        
<span class="number">27F9 E884 </span><span class="colon">X </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z               ;[GWB] DON'T SWAP IF ZERO
<span class="number">27FA E885 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">27FB E886 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">27FC E887 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">27FC E887 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">                                  </span>
<span class="number">27FC E887 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">REFLECT THE POINTS AROUND CENTER  </span>
<span class="number">27FC E887 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">[HL]=X OFFSET FROM CENTER, [DE]=Y OFFSET FROM CENTER</span>
<span class="number">27FC E887 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">                                  </span>
<span class="number">27FC E887 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">[GWB] </span><span class="label">CPLOT8:</span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">27FD E887 </span><span class="colon">X </span><span class="hex">22 1D 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CPCNT),hl      ;[GWB] POINT COUNT IS ALWAYS = Y
<span class="number">2800 E888 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">2801 E88B </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE X
<span class="number">2802 E88C </span><span class="colon">X </span><span class="hex">21 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,0            ;[GWB] START CPCNT8 OUT AT 0
<span class="number">2805 E890 </span><span class="colon">X </span><span class="hex">22 1F 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CPCNT8),hl              
<span class="number">2808      </span><span class="colon">X </span><span class="hex">CD F0 27   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CPLSCX          ;[GWB] SCALE Y AS APPROPRIATE
<span class="number">     E893 </span><span class="colon">X </span><span class="hex">CD 7B E8   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">280B E896 </span><span class="colon">X </span><span class="hex">22 29 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CXOFF),hl      ;[GWB] SAVE CXOFF
<span class="number">280E E899 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;[GWB] GET BACK X
<span class="number">280F E89A </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">2810 E89B </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE INITIAL [DE]
<span class="number">2811      </span><span class="colon">X </span><span class="hex">CD F0 27   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CPLSCX          ;[GWB] SCALE X AS APPROPRIATE
<span class="number">     E89C </span><span class="colon">X </span><span class="hex">CD 7B E8   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2814 E89F </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">2815 E8A0 </span><span class="colon">X </span><span class="hex">22 2B 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CYOFF),hl               
<span class="number">2818 E8A3 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">2819 E8A4 </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de              ;[GWB] GET BACK INITIAL [DE]
<span class="number">281A      </span><span class="colon">X </span><span class="hex">CD FA 26   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> NEGDE           ;[GWB] START: [DE]=-Y,[HL]=X,CXOFF=Y,CY=X
<span class="number">     E8A5 </span><span class="colon">X </span><span class="hex">CD 85 E7   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">281D      </span><span class="colon">X </span><span class="hex">CD 44 28   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CPLOT4          ;[GWB] PLOT +X,-SY -Y,-SX -X,+SY +Y,-SX
<span class="number">     E8A8 </span><span class="colon">X </span><span class="hex">CD CF E8   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2820 E8AB </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                       
<span class="number">2821 E8AC </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                       
<span class="number">2822 E8AD </span><span class="colon">X </span><span class="hex">2A 1A 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(CNPNTS)     ;[GWB] GET # PNTS PER OCTANT
<span class="number">2825 E8B0 </span><span class="colon">X </span><span class="hex">22 1F 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CPCNT8),hl     ;[GWB] AND SET FOR DOING ODD OCTANTS
<span class="number">2828 E8B3 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">2829 E8B4 </span><span class="colon">X </span><span class="hex">2A 1D 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(CPCNT)      ;[GWB] GET POINT COUNT
<span class="number">282C E8B7 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">282D E8B8 </span><span class="colon">X </span><span class="hex">7D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,l             ;[GWB] ODD OCTANTS ARE BACKWARDS SO
<span class="number">282E E8B9 </span><span class="colon">X </span><span class="hex">93         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> e               ;[GWB] PNTCNT = PNTS/OCT - PNTCN
<span class="number">282F E8BA </span><span class="colon">X </span><span class="hex">6F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,a                      
<span class="number">2830 E8BB </span><span class="colon">X </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,h                      
<span class="number">2831 E8BC </span><span class="colon">X </span><span class="hex">9A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sbc    </span> a,d                      
<span class="number">2832 E8BD </span><span class="colon">X </span><span class="hex">67         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,a                      
<span class="number">2833 E8BE </span><span class="colon">X </span><span class="hex">22 1D 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CPCNT),hl      ;[GWB] PNTCNT = PNTS/OCT - PNTCNT
<span class="number">2836 E8C1 </span><span class="colon">X </span><span class="hex">2A 29 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(CXOFF)      ;[GWB] NEED TO NEGATE CXOFF TO START OUT RIGHT
<span class="number">2839      </span><span class="colon">X </span><span class="hex">CD BB 25   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> NEGHL                    
<span class="number">     E8C4 </span><span class="colon">X </span><span class="hex">CD 46 E6   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">283C E8C7 </span><span class="colon">X </span><span class="hex">22 29 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CXOFF),hl               
<span class="number">283F E8CA </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                       
<span class="number">2840 E8CB </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">2841      </span><span class="colon">X </span><span class="hex">CD FA 26   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> NEGDE           ;[GWB] ALSO NEED TO MAKE [DE]=-SX=-[DE],
<span class="number">     E8CC </span><span class="colon">X </span><span class="hex">CD 85 E7   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2844      </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">                                ;[GBB] PLOT +Y,-SX -X,-SY -Y,+SX +X,+SY</span>
<span class="number">2844 E8CF </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">                                ;[GWB] (FALL THRU TO CPLOT4)</span>
<span class="number">2844 E8CF </span><span class="colon">X </span><span class="hex">3E 04      </span><span class="source">[GWB] </span><span class="label">CPLOT4:</span><span class="mnemonic"> ld     </span> a,4             ;[GWB] LOOP FOUR TIMES
<span class="number">2846 E8D1 </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">[GWB] </span><span class="label">CPLOT: </span><span class="mnemonic"> push   </span> af              ;[GWB] SAVE LOOP COUNT
<span class="number">2847 E8D2 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE BOTH X & Y OFFSETS
<span class="number">2848 E8D3 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                       
<span class="number">2849 E8D4 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE TWICE
<span class="number">284A E8D5 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                       
<span class="number">284B E8D6 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">284C E8D7 </span><span class="colon">X </span><span class="hex">2A 1F 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(CPCNT8)     ;[GWB] GET NP*OCTANT*8
<span class="number">284F E8DA </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">2850 E8DB </span><span class="colon">X </span><span class="hex">2A 1A 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(CNPNTS)     ;[GWB] ADD SQR(2)*RADIUS FOR NEXT OCTANT
<span class="number">2853 E8DE </span><span class="colon">X </span><span class="hex">29         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,hl                    
<span class="number">2854 E8DF </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de                    
<span class="number">2855 E8E0 </span><span class="colon">X </span><span class="hex">22 1F 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CPCNT8),hl     ;[GWB] UPDATE FOR NEXT TIME
<span class="number">2858 E8E3 </span><span class="colon">X </span><span class="hex">2A 1D 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(CPCNT)      ;[GWB] CALC THIS POINT'S POINT COUNT
<span class="number">285B E8E6 </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de           ;[GWB] ADD IN PNTCNT*OCTANT*NP
<span class="number">285C E8E7 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;[GWB] SAVE THIS POINT'S COUNT IN [DE]
<span class="number">285D E8E8 </span><span class="colon">X </span><span class="hex">2A 23 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(CSTCNT)     ;[GWB] GET START COUNT
<span class="number">2860 E8EB </span><span class="colon">X </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR                   
<span class="number">2861      </span><span class="colon">X </span><span class="hex">CA 85 28   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,CLINSC        ;[GWB] SEE IF LINE TO CENTER REQUIRED
<span class="number">     E8EC </span><span class="colon">X </span><span class="hex">CA 10 E9   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2864      </span><span class="colon">X </span><span class="hex">D2 71 28   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,CNBTWN       ;[GWB] IF SC .GT. PC, THEN NOT BETWEEN
<span class="number">     E8EF </span><span class="colon">X </span><span class="hex">D2 FC E8   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2867 E8F2 </span><span class="colon">X </span><span class="hex">2A 17 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(CENCNT)     ;[GWB] GET END COUNT
<span class="number">286A E8F5 </span><span class="colon">X </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR                   
<span class="number">286B      </span><span class="colon">X </span><span class="hex">CA 7B 28   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,GLINEC        ;[GWB] GO SEE IF LINE FROM CENTER NEEDED
<span class="number">     E8F6 </span><span class="colon">X </span><span class="hex">CA 06 E9   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">286E      </span><span class="colon">X </span><span class="hex">D2 97 28   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,CBTWEN       ;[GWB] IF EC .GT. PC, THEN BETWEEN
<span class="number">     E8F9 </span><span class="colon">X </span><span class="hex">D2 22 E9   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2871 E8FC </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2871 E8FC </span><span class="colon">X </span><span class="hex">3A 1C 39   </span><span class="source">[GWB] </span><span class="label">CNBTWN:</span><span class="mnemonic"> ld     </span> a,(CPLOTF)      ;[GWB] SEE WHETHER TO PLOT OR NOT
<span class="number">2874 E8FF </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a               ;[GWB] IF NZ, PLOT POINTS NOT IN BETWEEN
<span class="number">2875      </span><span class="colon">X </span><span class="hex">C2 A3 28   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,CPLTIT       ;[GWB] NEED TO PLOT NOT-BETWEEN POINTS
<span class="number">     E900 </span><span class="colon">X </span><span class="hex">C2 2E E9   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2878      </span><span class="colon">X </span><span class="hex">C3 9E 28   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> GCPLFN          ;[GWB] DON'T PLOT - FIX UP STACK & RETURN
<span class="number">     E903 </span><span class="colon">X </span><span class="hex">C3 29 E9   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">287B E906 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">287B E906 </span><span class="colon">X </span><span class="hex">3A 19 39   </span><span class="source">[GWB] </span><span class="label">GLINEC:</span><span class="mnemonic"> ld     </span> a,(GLINEF)      ;[GWB] GET CENTER LINE FLAG BYTE
<span class="number">287E E909 </span><span class="colon">X </span><span class="hex">87         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,a             ;[GWB] BIT 7=1 MEANS DRAW LINE FROM CENTER
<span class="number">287F      </span><span class="colon">X </span><span class="hex">D2 A3 28   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,CPLTIT       ;[GWB] NO LINE REQUIRED - JUST PLOT POINT
<span class="number">     E90A </span><span class="colon">X </span><span class="hex">D2 2E E9   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2882      </span><span class="colon">X </span><span class="hex">C3 8C 28   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> CLINE           ;[GWB] LINE REQUIRED.
<span class="number">     E90D </span><span class="colon">X </span><span class="hex">C3 17 E9   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2885 E910 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2885 E910 </span><span class="colon">X </span><span class="hex">3A 19 39   </span><span class="source">[GWB] </span><span class="label">CLINSC:</span><span class="mnemonic"> ld     </span> a,(GLINEF)      ;[GWB] GET CENTER LINE FLAG BYTE
<span class="number">2888 E913 </span><span class="colon">X </span><span class="hex">1F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rra    </span>                 ;[GWB] BIT 0=1 MEANS LINE FROM CENTER NEEDED.
<span class="number">2889      </span><span class="colon">X </span><span class="hex">D2 A3 28   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,CPLTIT       ;[GWB] NO LINE REQUIRED - JUST PLOT POINT
<span class="number">     E914 </span><span class="colon">X </span><span class="hex">D2 2E E9   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">288C      </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">288C E917 </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">[GWB] </span><span class="label">CLINE: </span><span class="mnemonic"> pop    </span> de              ;[GWB] GET X & Y OFFSETS
<span class="number">288D E918 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">288E      </span><span class="colon">X </span><span class="hex">CD E7 28   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GTABSC          ;[GWB] GO CALC TRUE COORDINATE OF POINT
<span class="number">     E919 </span><span class="colon">X </span><span class="hex">CD 72 E9   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2891      </span><span class="colon">X </span><span class="hex">CD D8 28   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GLINE2          ;[GWB] DRAW LINE FROM [BC],[DE] TO CENTER
<span class="number">     E91C </span><span class="colon">X </span><span class="hex">CD 63 E9   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2894      </span><span class="colon">X </span><span class="hex">C3 B4 28   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> CPLFIN                   
<span class="number">     E91F </span><span class="colon">X </span><span class="hex">C3 3F E9   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2897 E922 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2897 E922 </span><span class="colon">X </span><span class="hex">3A 1C 39   </span><span class="source">[GWB] </span><span class="label">CBTWEN:</span><span class="mnemonic"> ld     </span> a,(CPLOTF)      ;[GWB] SEE WHETHER PLOTTING BETWEENS OR NOT
<span class="number">289A E925 </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                        
<span class="number">289B      </span><span class="colon">X </span><span class="hex">CA A3 28   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,CPLTIT        ;[GWB] IF Z, THEN DOING BETWEENS
<span class="number">     E926 </span><span class="colon">X </span><span class="hex">CA 2E E9   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">289E E929 </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">[GWB] </span><span class="label">GCPLFN:</span><span class="mnemonic"> pop    </span> de              ;[GWB] CLEAN UP STACK
<span class="number">289F E92A </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">28A0      </span><span class="colon">X </span><span class="hex">C3 B4 28   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> CPLFIN                   
<span class="number">     E92B </span><span class="colon">X </span><span class="hex">C3 3F E9   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">28A3 E92E </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">28A3 E92E </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">[GWB] </span><span class="label">CPLTIT:</span><span class="mnemonic"> pop    </span> de              ;[GWB] GET X & Y OFFSETS
<span class="number">28A4 E92F </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">28A5      </span><span class="colon">X </span><span class="hex">CD E7 28   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GTABSC          ;[GWB] CALC TRUE COORDINATE OF POINT
<span class="number">     E930 </span><span class="colon">X </span><span class="hex">CD 72 E9   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">28A8      </span><span class="colon">X </span><span class="hex">CD 2B 2E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SCLXYX          ;[GWB] SEE IF POINT OFF SCREEN
<span class="number">     E933 </span><span class="colon">X </span><span class="hex">CD B6 EE   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">28AB      </span><span class="colon">X </span><span class="hex">D2 B4 28   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,CPLFIN       ;[GWB] NC IF POINT OFF SCREEN - NO PLOT
<span class="number">     E936 </span><span class="colon">X </span><span class="hex">D2 3F E9   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">28AE      </span><span class="colon">X </span><span class="hex">CD FD 2D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MAPXYP                   
<span class="number">     E939 </span><span class="colon">X </span><span class="hex">CD 88 EE   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">28B1      </span><span class="colon">X </span><span class="hex">CD 99 2D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SETC            ;[GWB] PLOT THE POINT
<span class="number">     E93C </span><span class="colon">X </span><span class="hex">CD 24 EE   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">28B4 E93F </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">28B4 E93F </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">[GWB] </span><span class="label">CPLFIN:</span><span class="mnemonic"> pop    </span> de              ;[GWB] GET BACK OFFSETS
<span class="number">28B5 E940 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">28B6 E941 </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af              ;[GWB] GET BACK LOOP COUNT
<span class="number">28B7 E942 </span><span class="colon">X </span><span class="hex">3D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> a                        
<span class="number">28B8 E943 </span><span class="colon">X </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z               ;[GWB] QUIT IF DONE.
<span class="number">28B9 E944 </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af              ;[GWB]  PUSH PSW
<span class="number">28BA E945 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de              ;[GWB] SAVE X OFFSET
<span class="number">28BB E946 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">28BC E947 </span><span class="colon">X </span><span class="hex">2A 29 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(CXOFF)      ;[GWB] SWAP [HL] AND CXOFF
<span class="number">28BF E94A </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">28C0      </span><span class="colon">X </span><span class="hex">CD FA 26   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> NEGDE           ;[GWB] NEGATE NEW [HL]
<span class="number">     E94B </span><span class="colon">X </span><span class="hex">CD 85 E7   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">28C3 E94E </span><span class="colon">X </span><span class="hex">22 29 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CXOFF),hl               
<span class="number">28C6 E951 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">28C7 E952 </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                       
<span class="number">28C8 E953 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                       
<span class="number">28C9 E954 </span><span class="colon">X </span><span class="hex">2A 2B 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(CYOFF)      ;[GWB] SWAP [DE] AND CYOFF
<span class="number">28CC E957 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;[GWB] NEGATE NEW [DE]
<span class="number">28CD E958 </span><span class="colon">X </span><span class="hex">22 2B 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CYOFF),hl               
<span class="number">28D0      </span><span class="colon">X </span><span class="hex">CD FA 26   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> NEGDE                    
<span class="number">     E95B </span><span class="colon">X </span><span class="hex">CD 85 E7   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">28D3 E95E </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">28D4 E95F </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af              ;[GWB]  POP PSW
<span class="number">28D5      </span><span class="colon">X </span><span class="hex">C3 46 28   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> CPLOT           ;[GWB] PLOT NEXT POINT
<span class="number">     E960 </span><span class="colon">X </span><span class="hex">C3 D1 E8   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">28D8 E963 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">28D8 E963 </span><span class="colon">X </span><span class="hex">2A 09 39   </span><span class="source">[GWB] </span><span class="label">GLINE2:</span><span class="mnemonic"> ld     </span> hl,(GRPACX)     ;[GWB] DRAW LINE FROM [BC],[DE]
<span class="number">28DB E966 </span><span class="colon">X </span><span class="hex">22 03 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (GXPOS),hl      ;[GWB] TO GRPACX,Y
<span class="number">28DE E969 </span><span class="colon">X </span><span class="hex">2A 07 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(GRPACY)              
<span class="number">28E1 E96C </span><span class="colon">X </span><span class="hex">22 05 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (GYPOS),hl               
<span class="number">28E4      </span><span class="colon">X </span><span class="hex">C3 7B 26   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> DOGRPH          ;[GWB] GO DRAW THE LINE
<span class="number">     E96F </span><span class="colon">X </span><span class="hex">C3 06 E7   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">28E7 E972 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">28E7 E972 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">GTABSC - GET ABSOLUTE COORDS      </span>
<span class="number">28E7 E972 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">([BC],[DE])=(GRPACX+[HL],GRPACY+[DE])</span>
<span class="number">28E7 E972 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">                                  </span>
<span class="number">28E7 E972 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">[GWB] </span><span class="label">GTABSC:</span><span class="mnemonic"> push   </span> de              ;[GWB] SAVE Y OFFSET FROM CENTER
<span class="number">28E8 E973 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">28E9 E974 </span><span class="colon">X </span><span class="hex">2A 09 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(GRPACX)     ;[GWB] GET CENTER POS
<span class="number">28EC E977 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">28ED E978 </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de           ;[GWB] ADD TO DX
<span class="number">28EE E979 </span><span class="colon">X </span><span class="hex">44         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,h             ;[GWB] [BC]=X CENTER + [HL]
<span class="number">28EF E97A </span><span class="colon">X </span><span class="hex">4D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,l                      
<span class="number">28F0 E97B </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                       
<span class="number">28F1 E97C </span><span class="colon">X </span><span class="hex">2A 07 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(GRPACY)     ;[GWB] GET CENTER Y
<span class="number">28F4 E97F </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de                    
<span class="number">28F5 E980 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;[GWB] [DE]=Y CENTER + [DE]
<span class="number">28F6 E981 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">28F7 E982 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">28F7 E982 </span><span class="colon">X </span><span class="hex">2A 15 39   </span><span class="source">[GWB] </span><span class="label">SCALEY:</span><span class="mnemonic"> ld     </span> hl,(ASPECT)     ;[GWB] CHECK FOR *0 AND *1 CASES
<span class="number">28FA E985 </span><span class="colon">X </span><span class="hex">7D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,l                      
<span class="number">28FB E986 </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">[GWB] </span><span class="label">SCALE2:</span><span class="mnemonic"> or     </span> a               ;[GWB] ENTRY TO DO [A]*[DE] ([A] NON-Z)
<span class="number">28FC      </span><span class="colon">X </span><span class="hex">C2 03 29   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,SCAL2        ;[GWB] NON-ZERO
<span class="number">     E987 </span><span class="colon">X </span><span class="hex">C2 8E E9   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">28FF E98A </span><span class="colon">X </span><span class="hex">B4         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> h               ;[GWB] TEST HI BYTE
<span class="number">2900 E98B </span><span class="colon">X </span><span class="hex">C0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nz              ;[GWB] IF NZ, THEN WAS *1 CASE
<span class="number">2901 E98C </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;[GWB] WAS *0 CASE - PUT 0 IN [DE]
<span class="number">2902 E98D </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2903 E98E </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2903 E98E </span><span class="colon">X </span><span class="hex">4A         </span><span class="source">(GWB) </span><span class="label">SCAL2: </span><span class="mnemonic"> ld     </span> c,d                      
<span class="number">2904 E98F </span><span class="colon">X </span><span class="hex">16 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,0                      
<span class="number">2906 E991 </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                       
<span class="number">2907      </span><span class="colon">X </span><span class="hex">CD 17 29   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SCAL2M                   
<span class="number">     E992 </span><span class="colon">X </span><span class="hex">CD A2 E9   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">290A E995 </span><span class="colon">X </span><span class="hex">1E 80      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,128                    
<span class="number">290C E997 </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de           ;??? [GWB] ADDI AX,128  - ROUND UP
<span class="number">290D E998 </span><span class="colon">X </span><span class="hex">59         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,c                      
<span class="number">290E E999 </span><span class="colon">X </span><span class="hex">4C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,h                      
<span class="number">290F E99A </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                       
<span class="number">2910      </span><span class="colon">X </span><span class="hex">CD 17 29   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SCAL2M                   
<span class="number">     E99B </span><span class="colon">X </span><span class="hex">CD A2 E9   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2913 E99E </span><span class="colon">X </span><span class="hex">59         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,c                      
<span class="number">2914 E99F </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de                    
<span class="number">2915 E9A0 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">2916 E9A1 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2917 E9A2 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2917 E9A2 </span><span class="colon">X </span><span class="hex">06 08      </span><span class="source">(~~~) </span><span class="label">SCAL2M:</span><span class="mnemonic"> ld     </span> b,8             ;;Going to Loop 8 Times
<span class="number">2919 E9A4 </span><span class="colon">X </span><span class="hex">21 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,0            ;;Clear [HL] First
<span class="number">291C E9A7 </span><span class="colon">X </span><span class="hex">29         </span><span class="source">(~~~) </span><span class="label">SCAL2L:</span><span class="mnemonic"> add    </span> hl,hl           ;;[HL] = [HL] * 2
<span class="number">291D E9A8 </span><span class="colon">X </span><span class="hex">87         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,a             ;;[A] = [A] * 2
<span class="number">291E      </span><span class="colon">X </span><span class="hex">D2 22 29   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,NOCARY       ;;If Carry
<span class="number">     E9A9 </span><span class="colon">X </span><span class="hex">D2 AD E9   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2921 E9AC </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de           ;;  [HL] = [HL] + [DE]
<span class="number">2922 E9AD </span><span class="colon">X </span><span class="hex">05         </span><span class="source">(GWB) </span><span class="label">NOCARY:</span><span class="mnemonic"> dec    </span> b               ;;Countdown
<span class="number">2923      </span><span class="colon">X </span><span class="hex">C2 1C 29   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,SCAL2L        ;<span class="comment">;  and Loop</span>
<span class="number">     E9AE </span><span class="colon">X </span><span class="hex">C2 A7 E9   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2926 E9B1 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2927      </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2928      </span><span class="colon">X </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">PARSE THE BEGIN AND END ANGLES    </span>
<span class="number">2928      </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment"> SETTING APPROPRIATE BITS IN GLINEF IF NEG.</span>
<span class="number">2928 E9B2 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">                                  </span>
<span class="number">2927 E9B2 </span><span class="colon">X </span><span class="hex">2B         </span><span class="source">[GWB] </span><span class="label">CGTCNT:</span><span class="mnemonic"> dec    </span> hl                       
<span class="number">2928 E9B3 </span><span class="colon">X </span><span class="hex">D7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> CHRGET          ;[GWB] GET CURRENT CHAR
<span class="number">2929 E9B4 </span><span class="colon">X </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z               ;[GWB] IF NOTHING, RETURN DFLT IN [DE]
<span class="number">292A E9B5 </span><span class="colon">X </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK                   
<span class="number">292B E9B6 </span><span class="colon">X </span><span class="hex">2C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> ','             ;[GWB] EAT THE COMMA
<span class="number">292C E9B7 </span><span class="colon">X </span><span class="hex">FE 2C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> ','             ;[GWB] USE DEFAULT IF NO ARGUMENT.
<span class="number">292E E9B9 </span><span class="colon">X </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                        
<span class="number">292F E9BA </span><span class="colon">X </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc              ;[GWB] SAVE FLAG BYTE IN [C]
<span class="number">2930 E9BB </span><span class="colon">X </span><span class="hex">CD 85 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FRMEVL          ;[GWB] EVALUATE THE THING
<span class="number">2933 E9BE </span><span class="colon">X </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl         ;[GWB] XTHL
<span class="number">2934 E9BF </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;[GWB] POP FLAG BYTE, PUSH TXTPTR
<span class="number">2935 E9C0 </span><span class="colon">X </span><span class="hex">CD 75 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CHKNUM          ;[M65] MUST BE NUMBER
<span class="number">2938 E9C3 </span><span class="colon">X </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc              ;[GWB] GET BACK FLAG BYTE
<span class="number">2939 E9C4 </span><span class="colon">X </span><span class="hex">21 E7 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,FAC          ;[GWB] NOW SEE WHETHER POSITIVE OR NOT
<span class="number">293C E9C7 </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)          ;[GWB] GET EXPONENT BYTE
<span class="number">293D E9C8 </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                        
<span class="number">293E      </span><span class="colon">X </span><span class="hex">CA 50 29   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,CGTC2         ;[GWB] SET TO HIGH MANTISSA BYTE
<span class="number">     E9C9 </span><span class="colon">X </span><span class="hex">CA DB E9   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2941 E9CC </span><span class="colon">X </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                       
<span class="number">2942 E9CD </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)                   
<span class="number">2943 E9CE </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                        
<span class="number">2944      </span><span class="colon">X </span><span class="hex">F2 50 29   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> p,CGTC2                  
<span class="number">     E9CF </span><span class="colon">X </span><span class="hex">F2 DB E9   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2947 E9D2 </span><span class="colon">X </span><span class="hex">E6 7F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> and    </span> 127             ;[GWB] MAKE IT POSITIVE
<span class="number">2949 E9D4 </span><span class="colon">X </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a                   
<span class="number">294A E9D5 </span><span class="colon">X </span><span class="hex">21 19 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,GLINEF       ;[GWB] SET BIT IN [C] IN GLINEF
<span class="number">294D E9D8 </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)                   
<span class="number">294E      </span><span class="colon">X </span><span class="hex">B1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> c                        
<span class="number">     E9D9 </span><span class="colon">X </span><span class="hex">B1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> c                        
<span class="number">294F E9DA </span><span class="colon">X </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a                   
<span class="number">2950 E9DB </span><span class="colon">X </span><span class="hex">01 22 7E   </span><span class="source">[GWB] </span><span class="label">CGTC2: </span><span class="mnemonic"> ld     </span> bc,$7E22        ;[GWB] LOAD REGS WITH 1/2*PI
<span class="number">2953 E9DE </span><span class="colon">X </span><span class="hex">11 83 F9   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,$F983                 
<span class="number">2956 E9E1 </span><span class="colon">X </span><span class="hex">CD CB 13   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FMULT           ;[GWB] MULTIPLY BY 1/(2*PI) TO GET FRACTION
<span class="number">2959      </span><span class="colon">X </span><span class="hex">CD 79 29   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CMPONE          ;[GWB] SEE IF RESULT IS GREATER THAN ONE
<span class="number">     E9E4 </span><span class="colon">X </span><span class="hex">CD 04 EA   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">295C E9E7 </span><span class="colon">X </span><span class="hex">CA 97 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,FCERR         ;[GWB] FC ERROR IF SO
<span class="number">295F E9EA </span><span class="colon">X </span><span class="hex">CD 13 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> PUSHF           ;[GWB] SAVE FAC ON STAC
<span class="number">2962 E9ED </span><span class="colon">X </span><span class="hex">2A 1A 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(CNPNTS)     ;[GWB] GET NO. OF POINTS PER OCTANT
<span class="number">2965 E9F0 </span><span class="colon">X </span><span class="hex">29         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,hl           ;[GWB] TIMES 8 FOR TRUE CIRCUMFERENCE
<span class="number">2966 E9F1 </span><span class="colon">X </span><span class="hex">29         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,hl                    
<span class="number">2967 E9F2 </span><span class="colon">X </span><span class="hex">29         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,hl                    
<span class="number">2968      </span><span class="colon">X </span><span class="hex">CD 20 23   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MAKINT          ;[GWB] STICK IT IN FAC
<span class="number">     E9F3 </span><span class="colon">X </span><span class="hex">CD AB E3   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">296B E9F6 </span><span class="colon">X </span><span class="hex">CD 75 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CHKNUM          ;[M65] MUST BE NUMBER
<span class="number">296E E9F9 </span><span class="colon">X </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc              ;[GWB] GET BACK ANG/2*PI IN REGS
<span class="number">296F E9FA </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                       
<span class="number">2970 E9FB </span><span class="colon">X </span><span class="hex">CD CB 13   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FMULT           ;[GWB] DO THE MULTIPLY
<span class="number">2973      </span><span class="colon">X </span><span class="hex">CD 04 23   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FRCINX          ;[GWB] CONVERT TO INTEGER IN [HL]
<span class="number">     E9FE </span><span class="colon">X </span><span class="hex">CD 8F E3   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2976 EA01 </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de              ;[GWB] GET BACK TXTPTR
<span class="number">2977 EA02 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">2978 EA03 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2979 EA04 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2979 EA04 </span><span class="colon">X </span><span class="hex">01 00 81   </span><span class="source">      </span><span class="label">CMPONE:</span><span class="mnemonic"> ld     </span> bc,$8100        ;;Compare FAC with 1.0
<span class="number">297C EA07 </span><span class="colon">X </span><span class="hex">11 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,$0000                 
<span class="number">297F EA0A </span><span class="colon">X </span><span class="hex">CD 5B 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FCOMP                    
<span class="number">2982 EA0D </span><span class="colon">X </span><span class="hex">3D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> a                        
<span class="number">2983 EA0E </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2984      </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2984      </span><span class="colon">X </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">GET & PUT - READ & WRITE GRAPHICS BIT ARRAY</span>
<span class="number">2984      </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">                                  </span>
<span class="number">2984      </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment"> SYNTAX:                          </span>
<span class="number">2984      </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">       GET @(X,Y),ARRAYVAR        </span>
<span class="number">2984      </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">       PUT @(X,Y),ARRAYVAR[,FUNCTION]</span>
<span class="number">2984      </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">                                  </span>
<span class="number">2984      </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">       FUNCTION = OR/AND/PRESET/PSET/XOR</span>
<span class="number">2984 EA0F </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">                                  </span>
<span class="number">2984 EA0F </span><span class="colon">X </span><span class="hex">32 3B 39   </span><span class="source">[GWB] </span><span class="label">GPUTG: </span><span class="mnemonic"> ld     </span> (PUTFLG),a      ;[GWB] IFE PC8A&RSTLES-1STORE WHETHER PUTTING OR NOT
<span class="number">2987 EA12 </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af              ;[GWB] SAVE THIS FLAG A SEC
<span class="number">2988 EA13 </span><span class="colon">X </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK                   
<span class="number">2989 EA14 </span><span class="colon">X </span><span class="hex">28         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> '('             ;[GWB] SKIP OVER OPEN PAREN
<span class="number">298A EA15 </span><span class="colon">X </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                       
<span class="number">298B      </span><span class="colon">X </span><span class="hex">CD 47 25   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SCAN1           ;[GWB] GET FIRST COORD
<span class="number">     EA16 </span><span class="colon">X </span><span class="hex">CD D2 E5   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">298E      </span><span class="colon">X </span><span class="hex">CD 12 2C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CHKRNG                   
<span class="number">     EA19 </span><span class="colon">X </span><span class="hex">CD 9D EC   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2991 EA1C </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af              ;[GWB] REGET PUT FLAG
<span class="number">2992 EA1D </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                        
<span class="number">2993 EA1E </span><span class="colon">X </span><span class="hex">20 6C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,PUT1                  
<span class="number">2995 EA20 </span><span class="colon">X </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK                   
<span class="number">2996 EA21 </span><span class="colon">X </span><span class="hex">A9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> MINUTK          ;[GWB] EAT "-"
<span class="number">2997 EA22 </span><span class="colon">X </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc              ;[GWB] SAVE X1
<span class="number">2998 EA23 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de              ;[GWB] SAVE Y1
<span class="number">2999      </span><span class="colon">X </span><span class="hex">CD 56 25   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SCANDX          ;[GWB] GET SECOND COORD FOR 'GET' ONLY
<span class="number">     EA24 </span><span class="colon">X </span><span class="hex">CD E1 E5   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">299C      </span><span class="colon">X </span><span class="hex">CD 12 2C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CHKRNG                   
<span class="number">     EA27 </span><span class="colon">X </span><span class="hex">CD 9D EC   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">299F EA2A </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de              ;[GWB] GET Y1 BACK
<span class="number">29A0 EA2B </span><span class="colon">X </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc              ;[GWB] AND X1
<span class="number">29A1 EA2C </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE TXTPTR
<span class="number">29A2      </span><span class="colon">X </span><span class="hex">CD C3 25   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> YDELT           ;[GWB] CALC DELTA Y
<span class="number">     EA2D </span><span class="colon">X </span><span class="hex">CD 4E E6   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">29A5      </span><span class="colon">X </span><span class="hex">DC CE 25   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> c,XCHGY         ;[GWB] MAKE DE=MIN(GXPOS,DE)
<span class="number">     EA30 </span><span class="colon">X </span><span class="hex">DC 59 E6   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">29A8 EA33 </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl              ;[GWB] MAKE DELTA A COUNT
<span class="number">29A9 EA34 </span><span class="colon">X </span><span class="hex">22 13 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (MINDEL),hl     ;[GWB] SAVE DELTA Y IN MIDEL
<span class="number">29AC      </span><span class="colon">X </span><span class="hex">CD B1 25   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> XDELT                    
<span class="number">     EA37 </span><span class="colon">X </span><span class="hex">CD 3C E6   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">29AF      </span><span class="colon">X </span><span class="hex">DC DB 25   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> c,XCHGX         ;[GWB] BC = MIN(GXPOS,DE)
<span class="number">     EA3A </span><span class="colon">X </span><span class="hex">DC 66 E6   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">29B2 EA3D </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl              ;[GWB] MAKE DELTA A COUNT
<span class="number">29B3 EA3E </span><span class="colon">X </span><span class="hex">22 11 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (MAXDEL),hl     ;[GWB] SAVE DX IN MAXDEL
<span class="number">29B6      </span><span class="colon">X </span><span class="hex">CD ED 2D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MAPXYC                   
<span class="number">     EA41 </span><span class="colon">X </span><span class="hex">CD 78 EE   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">29B9 EA44 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">29BA      </span><span class="colon">X </span><span class="hex">CD 77 2A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GTARRY                   
<span class="number">     EA45 </span><span class="colon">X </span><span class="hex">CD 02 EB   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">29BD EA48 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                       
<span class="number">29BE EA49 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de              ;;Save Pointer to Array Data
<span class="number">29BF EA4A </span><span class="colon">X </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc              ;;Save End of Array Data
<span class="number">29C0 EA4B </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de              ;;Save Number of Bytes to be Used
<span class="number">29C1 EA4C </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">29C2 EA4D </span><span class="colon">X </span><span class="hex">2A 11 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(MAXDEL)              
<span class="number">29C5 EA50 </span><span class="colon">X </span><span class="hex">4D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,l                      
<span class="number">29C6 EA51 </span><span class="colon">X </span><span class="hex">44         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,h                      
<span class="number">29C7 EA52 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">29C8 EA53 </span><span class="colon">X </span><span class="hex">CB 23      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sla    </span> e                        
<span class="number">29CA EA55 </span><span class="colon">X </span><span class="hex">CB 12      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rl     </span> d                        
<span class="number">29CC EA57 </span><span class="colon">X </span><span class="hex">2A 13 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(MINDEL)     ;[GWB] GET DELTA Y
<span class="number">29CF EA5A </span><span class="colon">X </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc              ;[GWB] SAVE DX*BITS/PIX
<span class="number">29D0 EA5B </span><span class="colon">X </span><span class="hex">44         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,h             ;[GWB] INTO [BC] FOR UMULT
<span class="number">29D1 EA5C </span><span class="colon">X </span><span class="hex">4D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,l                      
<span class="number">29D2 EA5D </span><span class="colon">X </span><span class="hex">CD CA 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> UMULT           ;[GWB] [DE]=DX*DY*BITS/PIX
<span class="number">29D5 EA60 </span><span class="colon">X </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc              ;[GWB] GET BACK DX*BITS/PIX
<span class="number">29D6 EA61 </span><span class="colon">X </span><span class="hex">11 04 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,4            ;[GWB] ADD 4 BYTES FOR DX,DY STORAGE
<span class="number">29D9 EA64 </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de           ;[HL] HAS NO. OF BYTES TO BE USED
<span class="number">29DA EA65 </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de              ;ADD NO. OF BYTES TO BE USED
<span class="number">29DB EA66 </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de                    
<span class="number">29DC EA67 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;[GWB] [DE] = CALCULATED END OF DATA
<span class="number">29DD EA68 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;[GWB] END OF ARRAY DATA TO [HL]
<span class="number">29DE EA69 </span><span class="colon">X </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR                   
<span class="number">29DF EA6A </span><span class="colon">X </span><span class="hex">DA 97 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> c,FCERR         ;[GWB] ARRAY START+LENGTH .GT. 64K
<span class="number">29E2 EA6D </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">                                ;[GWB] BEG OF DATA PTR IS ON STK HERE</span>
<span class="number">29E2 EA6D </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;[GWB] GET POINTER TO ARRAY DATA
<span class="number">29E3 EA6E </span><span class="colon">X </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR                   
<span class="number">29E4 EA6F </span><span class="colon">X </span><span class="hex">D2 97 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,FCERR        ;[GWB] ARRAY START+LENGTH .GT. 64K
<span class="number">29E7 EA72 </span><span class="colon">X </span><span class="hex">71         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),c          ;[GWB] SAVE DX*BITS/PIX IN 1ST 2 BYTES OF ARY
<span class="number">29E8 EA73 </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">29E9 EA74 </span><span class="colon">X </span><span class="hex">70         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),b          ;[GWB] PASS NO. OF BITS DESIRED IN [BC]
<span class="number">29EA EA75 </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">29EB EA76 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">29EC EA77 </span><span class="colon">X </span><span class="hex">2A 13 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(MINDEL)     ;[GWB] GET LINE (Y) COUNT
<span class="number">29EF EA7A </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">29F0 EA7B </span><span class="colon">X </span><span class="hex">73         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),e                   
<span class="number">29F1 EA7C </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">29F2 EA7D </span><span class="colon">X </span><span class="hex">72         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),d                   
<span class="number">29F3 EA7E </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl              ;[GWB] SAVE DY IN 2ND 2 BYTES
<span class="number">29F4 EA7F </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a               ;[GWB] CLEAR CARRY FOR GET INIT.
<span class="number">29F5 EA80 </span><span class="colon">X </span><span class="hex">18 57      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> GOPGIN          ;[GWB] GIVE LOW LEVEL ADDR OF ARRAY & GO
<span class="number">29F7      </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">29F7 EA82 </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af              ;;Orphan Code?
<span class="number">29F8 EA83 </span><span class="colon">X </span><span class="hex">21 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,0                     
<span class="number">29FB EA86 </span><span class="colon">X </span><span class="hex">19         </span><span class="source">[GWB] </span><span class="label">MULBLP:</span><span class="mnemonic"> add    </span> hl,de           ;[GWB] CALC DX * BITS/PIX
<span class="number">29FC EA87 </span><span class="colon">X </span><span class="hex">3D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> a                        
<span class="number">29FD EA88 </span><span class="colon">X </span><span class="hex">20 FC      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,MULBLP                
<span class="number">29FF EA8A </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af                       
<span class="number">2A00 EA8B </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2A01 EA8C </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2A01 EA8C </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">[GWB] </span><span class="label">PUT1:  </span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE TXTPTR
<span class="number">2A02      </span><span class="colon">X </span><span class="hex">CD ED 2D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MAPXYC          ;[GWB] MAP THE POINT
<span class="number">     EA8D </span><span class="colon">X </span><span class="hex">CD 78 EE   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2A05 EA90 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">2A06      </span><span class="colon">X </span><span class="hex">CD 77 2A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GTARRY          ;[GWB] SCAN ARRAY NAME & GET PTR TO IT
<span class="number">     EA91 </span><span class="colon">X </span><span class="hex">CD 02 EB   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2A09 EA94 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de              ;[GWB] SAVE PTR TO DELTAS IN ARRAY
<span class="number">2A0A EA95 </span><span class="colon">X </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl              ;[GWB] NOW SCAN POSSIBLE PUT OPTION
<span class="number">2A0B EA96 </span><span class="colon">X </span><span class="hex">D7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> CHRGET                   
<span class="number">2A0C EA97 </span><span class="colon">X </span><span class="hex">06 05      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,5             ;[GWB] DEFAULT OPTION IS XOR
<span class="number">2A0E EA99 </span><span class="colon">X </span><span class="hex">28 12      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,PUT2          ;[GWB] IF NO CHAR, USE DEFAULT
<span class="number">2A10 EA9B </span><span class="colon">X </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> SYNCHK                   
<span class="number">2A11 EA9C </span><span class="colon">X </span><span class="hex">2C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> ','             ;[GWB] MUST BE A COMMA
<span class="number">2A12 EA9D </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;[GWB] PUT TXTPTR IN [DE]
<span class="number">2A13      </span><span class="colon">X </span><span class="hex">21 9C 2A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,GFUNTB+4     ;;From End of Table to Start if Table
<span class="number">     EA9E </span><span class="colon">X </span><span class="hex">21 27 EB   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2A16 EAA1 </span><span class="colon">X </span><span class="hex">BE         </span><span class="source">[GWB] </span><span class="label">PFUNLP:</span><span class="mnemonic"> cp     </span> (hl)            ;[GWB] IS THIS AN OPTION?
<span class="number">2A17 EAA2 </span><span class="colon">X </span><span class="hex">28 07      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,PUT20         ;[GWB] YES, HAND IT TO PGINIT.
<span class="number">2A19 EAA4 </span><span class="colon">X </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl              ;[GWB] POINT TO NEXT
<span class="number">2A1A EAA5 </span><span class="colon">X </span><span class="hex">05         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> b                        
<span class="number">2A1B EAA6 </span><span class="colon">X </span><span class="hex">20 F9      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,PFUNLP                
<span class="number">2A1D EAA8 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;[GWB] GET TXTPTR BACK TO [HL]
<span class="number">2A1E EAA9 </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de              ;[GWB] CLEAN UP STACK
<span class="number">2A1F EAAA </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                 ;[GWB] LET NEWSTT GIVE SYNTAX ERROR
<span class="number">2A20 EAAB </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2A20 EAAB </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">[GWB] </span><span class="label">PUT20: </span><span class="mnemonic"> ex     </span> de,hl           ;[GWB] GET TXTPTR BACK TO [HL]
<span class="number">2A21 EAAC </span><span class="colon">X </span><span class="hex">D7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> CHRGET          ;[GWB] EAT THE TOKEN
<span class="number">2A22 EAAD </span><span class="colon">X </span><span class="hex">05         </span><span class="source">[GWB] </span><span class="label">PUT2:  </span><span class="mnemonic"> dec    </span> b               ;[GWB] 1..5 TO 0..4
<span class="number">2A23 EAAE </span><span class="colon">X </span><span class="hex">78         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,b             ;[GWB] INTO [A] FOR PGINIT
<span class="number">2A24 EAAF </span><span class="colon">X </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl         ;[GWB] XTHL
<span class="number">2A25 EAB0 </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af              ;[GWB] SAVE PUT ACTION MODE
<span class="number">2A26 EAB1 </span><span class="colon">X </span><span class="hex">5E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,(hl)          ;[GWB] [DE]=NO. OF BITS IN X
<span class="number">2A27 EAB2 </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">2A28 EAB3 </span><span class="colon">X </span><span class="hex">56         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,(hl)                   
<span class="number">2A29 EAB4 </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">2A2A EAB5 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de              ;[GWB] SAVE BIT COUNT
<span class="number">2A2B EAB6 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE ARRAY POINTER
<span class="number">2A2C EAB7 </span><span class="colon">X </span><span class="hex">1B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> de              ;[GWB] DECREMENT DX SINCE IT'S A COUNTER
<span class="number">2A2D EAB8 </span><span class="colon">X </span><span class="hex">2A 03 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(GXPOS)      ;[GWB] NOW CALC TRUE X
<span class="number">2A30 EABB </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">2A31 EABC </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de                    
<span class="number">2A32 EABD </span><span class="colon">X </span><span class="hex">38 0E      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,PRNGER        ;[GWB] ERROR IF CARRY
<span class="number">2A34 EABF </span><span class="colon">X </span><span class="hex">44         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,h             ;[GWB] TO [BC] FOR SCLXYX
<span class="number">2A35 EAC0 </span><span class="colon">X </span><span class="hex">4D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,l                      
<span class="number">2A36 EAC1 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;[GWB] GET BACK ARRAY POINTER
<span class="number">2A37 EAC2 </span><span class="colon">X </span><span class="hex">5E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,(hl)          ;[GWB] [DE] = DELTA Y ([HL] POINTS TO DATA)
<span class="number">2A38 EAC3 </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">2A39 EAC4 </span><span class="colon">X </span><span class="hex">56         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,(hl)                   
<span class="number">2A3A EAC5 </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">2A3B EAC6 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de              ;[GWB] SAVE DELTA Y ON STACK
<span class="number">2A3C EAC7 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE PTR ON STACK AGAIN
<span class="number">2A3D EAC8 </span><span class="colon">X </span><span class="hex">2A 05 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(GYPOS)               
<span class="number">2A40 EACB </span><span class="colon">X </span><span class="hex">1B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> de              ;[GWB] DECREMENT DY SINCE IT'S A COUNTER
<span class="number">2A41 EACC </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de                    
<span class="number">2A42 EACD </span><span class="colon">X </span><span class="hex">DA 97 06   </span><span class="source">[GWB] </span><span class="label">PRNGER:</span><span class="mnemonic"> jp     </span> c,FCERR         ;[GWB] ERROR IF CARRY
<span class="number">2A45 EAD0 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;[GWB] [DE]=Y + DELTA Y
<span class="number">2A46 EAD1 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;[GWB] GET BACK ARRAY POINTER
<span class="number">2A47      </span><span class="colon">X </span><span class="hex">CD 12 2C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CHKRNG          ;[GWB] MAKE SURE [BC],[HL] ARE ON THE SCREEN
<span class="number">     EAD2 </span><span class="colon">X </span><span class="hex">CD 9D EC   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2A4A EAD5 </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de              ;[GWB] POP DY
<span class="number">2A4B EAD6 </span><span class="colon">X </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc              ;[GWB] POP DX*BITS/PIX
<span class="number">2A4C EAD7 </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af              ;[GWB] GET BACK ACTION MODE
<span class="number">2A4D EAD8 </span><span class="colon">X </span><span class="hex">37         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> scf    </span>                 ;[GWB] SET CARRY TO FLAG PUT INIT
<span class="number">2A4E EAD9 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2A4E EAD9 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">[GWB] </span><span class="label">GOPGIN:</span><span class="mnemonic"> push   </span> de              ;[GWB] RESAVE DY
<span class="number">2A4F      </span><span class="colon">X </span><span class="hex">CD 00 2F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> PGINIT          ;;Set Operation Routine Address
<span class="number">     EADA </span><span class="colon">X </span><span class="hex">CD 8B EF   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2A52 EADD </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de              ;[GWB] GET Y COUNT
<span class="number">2A53 EADE </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">[GWB] </span><span class="label">PGLOOP:</span><span class="mnemonic"> push   </span> de              ;[GWB] SAVE LINE COUNT
<span class="number">2A54      </span><span class="colon">X </span><span class="hex">CD 7D 2D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FETCHC                   
<span class="number">     EADF </span><span class="colon">X </span><span class="hex">CD 08 EE   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2A57 EAE2 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                       
<span class="number">2A58 EAE3 </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                       
<span class="number">2A59 EAE4 </span><span class="colon">X </span><span class="hex">3A 3B 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(PUTFLG)      ;[GWB] SEE IF PUTTING OR GETTING
<span class="number">2A5C EAE7 </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                        
<span class="number">2A5D EAE8 </span><span class="colon">X </span><span class="hex">20 05      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,PGLOO2                
<span class="number">2A5F      </span><span class="colon">X </span><span class="hex">CD 22 2F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> NREAD                    
<span class="number">     EAEA </span><span class="colon">X </span><span class="hex">CD AD EF   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2A62 EAED </span><span class="colon">X </span><span class="hex">18 03      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> PGLOO3                   
<span class="number">2A64      </span><span class="colon">X </span><span class="hex">CD 39 2F   </span><span class="source">[GWB] </span><span class="label">PGLOO2:</span><span class="mnemonic"> call   </span> NWRITE                   
<span class="number">     EAEF </span><span class="colon">X </span><span class="hex">CD C4 EF   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2A67 EAF2 </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">[GWB] </span><span class="label">PGLOO3:</span><span class="mnemonic"> pop    </span> af              ;{GWB} GET BACK STARTING C
<span class="number">2A68 EAF3 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;{GWB} Address AND BIT MASK
<span class="number">2A69      </span><span class="colon">X </span><span class="hex">CD 76 2D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> STOREC          ;{GWB} SET UP AS CURRENT "C"
<span class="number">     EAF4 </span><span class="colon">X </span><span class="hex">CD 01 EE   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2A6C      </span><span class="colon">X </span><span class="hex">CD B1 2E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> DOWNL           ;[GWB] NOW MOVE DOWN A LINE
<span class="number">     EAF7 </span><span class="colon">X </span><span class="hex">CD 3C EF   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2A6F EAFA </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                       
<span class="number">2A70 EAFB </span><span class="colon">X </span><span class="hex">1B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> de                       
<span class="number">2A71 EAFC </span><span class="colon">X </span><span class="hex">7A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,d                      
<span class="number">2A72 EAFD </span><span class="colon">X </span><span class="hex">B3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> e                        
<span class="number">2A73 EAFE </span><span class="colon">X </span><span class="hex">20 DE      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,PGLOOP       ;[GWB] CONTINUE IF NOT ZERO
<span class="number">2A75 EB00 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;[GWB] GET BACK TXTPTR
<span class="number">2A76 EB01 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                 ;[GWB] AND RETURN
<span class="number">2A77 EB02 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2A77 EB02 </span><span class="colon">X </span><span class="hex">CF         </span><span class="source">[GWB] </span><span class="label">GTARRY:</span><span class="mnemonic"> rst    </span> SYNCHK                   
<span class="number">2A78 EB03 </span><span class="colon">X </span><span class="hex">2C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> ','             ;[GWB] EAT COMMA
<span class="number">2A79 EB04 </span><span class="colon">X </span><span class="hex">3E 01      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,1             ;[GWB] SEARCH ARRAYS ONLY
<span class="number">2A7B EB06 </span><span class="colon">X </span><span class="hex">32 CB 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (SUBFLG),a               
<span class="number">2A7E EB09 </span><span class="colon">X </span><span class="hex">CD D1 10   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> PTRGET          ;[GWB] GET PTR TO ARRAY
<span class="number">2A81 EB0C </span><span class="colon">X </span><span class="hex">C2 97 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,FCERR        ;[GWB] NOT THERE - ERROR
<span class="number">2A84 EB0F </span><span class="colon">X </span><span class="hex">32 CB 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (SUBFLG),a      ;[GWB] CLEAR THIS
<span class="number">2A87 EB12 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE TXTPTR
<span class="number">2A88 EB13 </span><span class="colon">X </span><span class="hex">60         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,b             ;[GWB] HL = PTR TO ARRAY
<span class="number">2A89 EB14 </span><span class="colon">X </span><span class="hex">69         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,c                      
<span class="number">2A8A EB15 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;[GWB] HL = LENGTH
<span class="number">2A8B EB16 </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de           ;[GWB] HL = LAST BYTE OF ARRAY
<span class="number">2A8C EB17 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE
<span class="number">2A8D EB18 </span><span class="colon">X </span><span class="hex">0A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(bc)          ;[GWB] GET NO. OF DIMS
<span class="number">2A8E EB19 </span><span class="colon">X </span><span class="hex">87         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,a             ;[GWB] DOUBLE SINCE 2 BYTE ENTRIES
<span class="number">2A8F EB1A </span><span class="colon">X </span><span class="hex">6F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,a                      
<span class="number">2A90 EB1B </span><span class="colon">X </span><span class="hex">26 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,0                      
<span class="number">2A92 EB1D </span><span class="colon">X </span><span class="hex">03         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> bc              ;[GWB] SKIP NO. OF DIMS
<span class="number">2A93 EB1E </span><span class="colon">X </span><span class="hex">09         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,bc                    
<span class="number">2A94 EB1F </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;[GWB] DE = PTR TO FIRST BYTE OF DATA
<span class="number">2A95 EB20 </span><span class="colon">X </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc              ;[GWB] BC = PTR TO LAST BYTE OF DATA
<span class="number">2A96 EB21 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;[GWB] GET TXTPTR
<span class="number">2A97 EB22 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2A98 EB23 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2A98 EB23 </span><span class="colon">X </span><span class="hex">AE AD      </span><span class="source">[GWB] </span><span class="label">GFUNTB:</span><span class="mnemonic"> byte   </span> ORTK, ANDTK      ;<span class="comment">;PUT Action Tokens Table</span>
<span class="number">2A9A EB25 </span><span class="colon">X </span><span class="hex">9D 9C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> PRESTK, PSETTK           
<span class="number">2A9C EB27 </span><span class="colon">X </span><span class="hex">CF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> XORTK                    
<span class="number">2A9D      </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2A9D      </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;</span><span class="source">[GWB] </span><span class="comment">GRAPHICS MACRO LANGUAGE SUPPORT   </span>
<span class="number">2A9D      </span><span class="colon">X </span><span class="hex">11 A7 2A   </span><span class="source">[GWB] </span><span class="label">DRAW:  </span><span class="mnemonic"> ld     </span> de,DRWTAB       ;[GWB] DISPATCH TABLE FOR GML
<span class="number">     EB28 </span><span class="colon">X </span><span class="hex">11 32 EB   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2AA0 EB2B </span><span class="colon">X </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a               ;[GWB] CLEAR OUT DRAW FLAGS
<span class="number">2AA1 EB2C </span><span class="colon">X </span><span class="hex">32 34 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (DRWFLG),a               
<span class="number">2AA4      </span><span class="colon">X </span><span class="hex">C3 24 2C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> MACLNG                   
<span class="number">     EB2F </span><span class="colon">X </span><span class="hex">C3 AF EC   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2AA7 EB32 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2AA7 EB32 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">[GWB] </span><span class="label">DRWTAB:</span><span class="mnemonic"> byte   </span> 'U'+128         ;[GWB] UP
<span class="number">2AA8      </span><span class="colon">X </span><span class="hex">D5 2A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> DRUP                     
<span class="number">     EB33 </span><span class="colon">X </span><span class="hex">60 EB      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2AAA EB35 </span><span class="colon">X </span><span class="hex">C4         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'D'+128         ;[GWB] DOWN
<span class="number">2AAB      </span><span class="colon">X </span><span class="hex">D8 2A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> DRDOWN                   
<span class="number">     EB36 </span><span class="colon">X </span><span class="hex">63 EB      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2AAC EB38 </span><span class="colon">X </span><span class="hex">CC         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'L'+128         ;[GWB] LEFT
<span class="number">2AAE      </span><span class="colon">X </span><span class="hex">DE 2A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> DRLEFT                   
<span class="number">     EB39 </span><span class="colon">X </span><span class="hex">69 EB      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2AB0 EB3B </span><span class="colon">X </span><span class="hex">D2         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'R'+128         ;[GWB] RIGHT
<span class="number">2AB1      </span><span class="colon">X </span><span class="hex">E1 2A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> DRIGHT                   
<span class="number">     EB3C </span><span class="colon">X </span><span class="hex">6C EB      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2AB3 EB3E </span><span class="colon">X </span><span class="hex">4D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'M'             ;[GWB] MOVE
<span class="number">2AB4      </span><span class="colon">X </span><span class="hex">01 2B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> DMOVE                    
<span class="number">     EB3F </span><span class="colon">X </span><span class="hex">8C EB      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2AB6 EB41 </span><span class="colon">X </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'E'+128         ;[GWB] -,-
<span class="number">2AB7      </span><span class="colon">X </span><span class="hex">F1 2A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> DRWEEE                   
<span class="number">     EB42 </span><span class="colon">X </span><span class="hex">7C EB      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2AB9 EB44 </span><span class="colon">X </span><span class="hex">C6         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'F'+128         ;[GWB] +,-
<span class="number">2ABA      </span><span class="colon">X </span><span class="hex">EC 2A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> DRWFFF                   
<span class="number">     EB45 </span><span class="colon">X </span><span class="hex">77 EB      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2ABC EB47 </span><span class="colon">X </span><span class="hex">C7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'G'+128         ;[GWB] +,+
<span class="number">2ABD      </span><span class="colon">X </span><span class="hex">F9 2A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> DRWGGG                   
<span class="number">     EB48 </span><span class="colon">X </span><span class="hex">84 EB      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2ABF EB4A </span><span class="colon">X </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'H'+128         ;[GWB] -,+
<span class="number">2AC0      </span><span class="colon">X </span><span class="hex">E9 2A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> DRWHHH                   
<span class="number">     EB4B </span><span class="colon">X </span><span class="hex">74 EB      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2AC2 EB4D </span><span class="colon">X </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'A'+128         ;[GWB] ANGLE COMMAND
<span class="number">2AC3      </span><span class="colon">X </span><span class="hex">BA 2B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> DANGLE                   
<span class="number">     EB4E </span><span class="colon">X </span><span class="hex">45 EC      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2AC5 EB50 </span><span class="colon">X </span><span class="hex">42         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'B'             ;[GWB] MOVE WITHOUT PLOTTING
<span class="number">2AC6      </span><span class="colon">X </span><span class="hex">B2 2B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> DNOPLT                   
<span class="number">     EB51 </span><span class="colon">X </span><span class="hex">3D EC      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2AC8 EB53 </span><span class="colon">X </span><span class="hex">4E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'N'             ;[GWB] DON'T CHANGE CURRENT COORDS
<span class="number">2AC9      </span><span class="colon">X </span><span class="hex">AD 2B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> DNOMOV                   
<span class="number">     EB54 </span><span class="colon">X </span><span class="hex">38 EC      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2ACB EB56 </span><span class="colon">X </span><span class="hex">58         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'X'             ;[GWB] EXECUTE STRING
<span class="number">2ACC      </span><span class="colon">X </span><span class="hex">33 2D      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> MCLXEQ                   
<span class="number">     EB57 </span><span class="colon">X </span><span class="hex">BE ED      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2ACE EB59 </span><span class="colon">X </span><span class="hex">C3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'C'+128         ;[GWB] COLOR
<span class="number">2ACF      </span><span class="colon">X </span><span class="hex">07 2C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> DCOLR                    
<span class="number">     EB5A </span><span class="colon">X </span><span class="hex">92 EC      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2AD1 EB5C </span><span class="colon">X </span><span class="hex">D3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 'S'+128         ;[GWB] SCALE
<span class="number">2AD2      </span><span class="colon">X </span><span class="hex">C7 2B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> DSCALE                   
<span class="number">     EB5D </span><span class="colon">X </span><span class="hex">52 EC      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2AD4 EB5F </span><span class="colon">X </span><span class="hex">00         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> 0               ;[GWB] END OF TABLE
<span class="number">2AD5 EB60 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2AD5      </span><span class="colon">X </span><span class="hex">CD FA 26   </span><span class="source">[GWB] </span><span class="label">DRUP:  </span><span class="mnemonic"> call   </span> NEGDE           ;[GWB] MOVE +0,-Y
<span class="number">     EB60 </span><span class="colon">X </span><span class="hex">CD 85 E7   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2AD8 EB63 </span><span class="colon">X </span><span class="hex">01 00 00   </span><span class="source">[GWB] </span><span class="label">DRDOWN:</span><span class="mnemonic"> ld     </span> bc,0            ;[GWB] MOVE +0,+Y, DX=0
<span class="number">2ADB      </span><span class="colon">X </span><span class="hex">C3 2B 2B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> DOMOVR          ;[GWB] TREAT AS RELATIVE MOVE
<span class="number">     EB66 </span><span class="colon">X </span><span class="hex">C3 B6 EB   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2ADE EB69 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2ADE      </span><span class="colon">X </span><span class="hex">CD FA 26   </span><span class="source">[GWB] </span><span class="label">DRLEFT:</span><span class="mnemonic"> call   </span> NEGDE           ;[GWB] MOVE -X,+0
<span class="number">     EB69 </span><span class="colon">X </span><span class="hex">CD 85 E7   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2AE1 EB6C </span><span class="colon">X </span><span class="hex">42         </span><span class="source">[GWB] </span><span class="label">DRIGHT:</span><span class="mnemonic"> ld     </span> b,d             ;[GWB] MOVE +X,+0
<span class="number">2AE2 EB6D </span><span class="colon">X </span><span class="hex">4B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,e             ;[GWB] [BC]=VALUE
<span class="number">2AE3 EB6E </span><span class="colon">X </span><span class="hex">11 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,0            ;[GWB] DY=0
<span class="number">2AE6      </span><span class="colon">X </span><span class="hex">C3 2B 2B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> DOMOVR          ;[GWB] TREAT AS RELATIVE MOVE
<span class="number">     EB71 </span><span class="colon">X </span><span class="hex">C3 B6 EB   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2AE9 EB74 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2AE9      </span><span class="colon">X </span><span class="hex">CD FA 26   </span><span class="source">[GWB] </span><span class="label">DRWHHH:</span><span class="mnemonic"> call   </span> NEGDE           ;[GWB] MOVE -X,-Y
<span class="number">     EB74 </span><span class="colon">X </span><span class="hex">CD 85 E7   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2AEC EB77 </span><span class="colon">X </span><span class="hex">42         </span><span class="source">[GWB] </span><span class="label">DRWFFF:</span><span class="mnemonic"> ld     </span> b,d             ;[GWB] MOVE +X,+Y
<span class="number">2AED EB78 </span><span class="colon">X </span><span class="hex">4B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,e                      
<span class="number">2AEE      </span><span class="colon">X </span><span class="hex">C3 2B 2B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> DOMOVR                   
<span class="number">     EB79 </span><span class="colon">X </span><span class="hex">C3 B6 EB   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2AF1 EB7C </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2AF1 EB7C </span><span class="colon">X </span><span class="hex">42         </span><span class="source">[GWB] </span><span class="label">DRWEEE:</span><span class="mnemonic"> ld     </span> b,d             ;[GWB] MOVE +X,-Y
<span class="number">2AF2 EB7D </span><span class="colon">X </span><span class="hex">4B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,e                      
<span class="number">2AF3      </span><span class="colon">X </span><span class="hex">CD FA 26   </span><span class="source">[GWB] </span><span class="label">DRWHHC:</span><span class="mnemonic"> call   </span> NEGDE                    
<span class="number">     EB7E </span><span class="colon">X </span><span class="hex">CD 85 E7   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2AF6      </span><span class="colon">X </span><span class="hex">C3 2B 2B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> DOMOVR                   
<span class="number">     EB81 </span><span class="colon">X </span><span class="hex">C3 B6 EB   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2AF9 EB84 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2AF9      </span><span class="colon">X </span><span class="hex">CD FA 26   </span><span class="source">[GWB] </span><span class="label">DRWGGG:</span><span class="mnemonic"> call   </span> NEGDE           ;[GWB] MOVE -X,+Y
<span class="number">     EB84 </span><span class="colon">X </span><span class="hex">CD 85 E7   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2AFC EB87 </span><span class="colon">X </span><span class="hex">42         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,d                      
<span class="number">2AFD EB88 </span><span class="colon">X </span><span class="hex">4B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,e                      
<span class="number">2AFE      </span><span class="colon">X </span><span class="hex">C3 F3 2A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> DRWHHC          ;[GWB] MAKE DY POSITIVE & GO
<span class="number">     EB89 </span><span class="colon">X </span><span class="hex">C3 7E EB   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2B01 EB8C </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2B01      </span><span class="colon">X </span><span class="hex">CD 92 2C   </span><span class="source">[GWB] </span><span class="label">DMOVE: </span><span class="mnemonic"> call   </span> FETCHZ          ;[GWB] GET NEXT CHAR AFTER COMMA
<span class="number">     EB8C </span><span class="colon">X </span><span class="hex">CD 1D ED   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2B04 EB8F </span><span class="colon">X </span><span class="hex">06 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,0             ;[GWB] ASSUME RELATIVE
<span class="number">2B06 EB91 </span><span class="colon">X </span><span class="hex">FE 2B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> '+'             ;[GWB] IF "+" OR "-" THEN RELATIVE
<span class="number">2B08      </span><span class="colon">X </span><span class="hex">CA 11 2B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,MOVREL                 
<span class="number">     EB93 </span><span class="colon">X </span><span class="hex">CA 9C EB   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2B0B EB96 </span><span class="colon">X </span><span class="hex">FE 2D      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> '-'                      
<span class="number">2B0D      </span><span class="colon">X </span><span class="hex">CA 11 2B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> z,MOVREL                 
<span class="number">     EB98 </span><span class="colon">X </span><span class="hex">CA 9C EB   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2B10 EB9B </span><span class="colon">X </span><span class="hex">04         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> b               ;[GWB] NON-Z TO FLAG ABSOLUTE
<span class="number">2B11 EB9C </span><span class="colon">X </span><span class="hex">78         </span><span class="source">[GWB] </span><span class="label">MOVREL:</span><span class="mnemonic"> ld     </span> a,b                      
<span class="number">2B12 EB9D </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af              ;[GWB] SAVE ABS/REL FLAG ON STACK
<span class="number">2B13      </span><span class="colon">X </span><span class="hex">CD B5 2C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> DECFET          ;[GWB] BACK UP SO VALSCN WILL SEE "-"
<span class="number">     EB9E </span><span class="colon">X </span><span class="hex">CD 40 ED   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2B16      </span><span class="colon">X </span><span class="hex">CD C3 2C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> VALSCN          ;[GWB] GET X VALUE
<span class="number">     EBA1 </span><span class="colon">X </span><span class="hex">CD 4E ED   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2B19 EBA4 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de              ;[GWB] SAVE IT
<span class="number">2B1A      </span><span class="colon">X </span><span class="hex">CD 92 2C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FETCHZ          ;[GWB] NOW CHECK FOR COMMA
<span class="number">     EBA5 </span><span class="colon">X </span><span class="hex">CD 1D ED   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2B1D EBA8 </span><span class="colon">X </span><span class="hex">FE 2C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> ','             ;[GWB] COMMA?
<span class="number">2B1F      </span><span class="colon">X </span><span class="hex">C2 97 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,FCERR                 
<span class="number">     EBAA </span><span class="colon">X </span><span class="hex">C2 97 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2B22      </span><span class="colon">X </span><span class="hex">CD C3 2C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> VALSCN          ;[GWB] GET Y VALUE IN D
<span class="number">     EBAD </span><span class="colon">X </span><span class="hex">CD 4E ED   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2B25 EBB0 </span><span class="colon">X </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc              ;[GWB] GET BACK X VALUE
<span class="number">2B26 EBB1 </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af              ;[GWB] GET ABS/REL FLAG
<span class="number">2B27 EBB2 </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                        
<span class="number">2B28      </span><span class="colon">X </span><span class="hex">C2 87 2B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,DRWABS       ;[GWB] NZ - ABSOLUTE
<span class="number">     EBB3 </span><span class="colon">X </span><span class="hex">C2 12 EC   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2B2B EBB6 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2B2B      </span><span class="colon">X </span><span class="hex">CD D4 2B   </span><span class="source">[GWB] </span><span class="label">DOMOVR:</span><span class="mnemonic"> call   </span> DSCLDE          ;[GWB] ADJUST Y OFFSET BY SCALE
<span class="number">     EBB6 </span><span class="colon">X </span><span class="hex">CD 5F EC   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2B2E EBB9 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de              ;[GWB] SAVE Y OFFSET
<span class="number">2B2F EBBA </span><span class="colon">X </span><span class="hex">50         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,b             ;[GWB] GET X INTO [DE]
<span class="number">2B30 EBBB </span><span class="colon">X </span><span class="hex">59         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,c                      
<span class="number">2B31      </span><span class="colon">X </span><span class="hex">CD D4 2B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> DSCLDE          ;[GWB] GO SCALE IT.
<span class="number">     EBBC </span><span class="colon">X </span><span class="hex">CD 5F EC   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2B34 EBBF </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;[GWB] GET ADJUSTED X INTO [HL]
<span class="number">2B35 EBC0 </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de              ;[GWB] GET ADJUSTED Y INTO [DE]
<span class="number">2B36 EBC1 </span><span class="colon">X </span><span class="hex">AF         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> a                        
<span class="number">2B37 EBC2 </span><span class="colon">X </span><span class="hex">32 25 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CSCLXY),a               
<span class="number">2B3A EBC5 </span><span class="colon">X </span><span class="hex">3A 35 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(DRWANG)      ;[GWB] GET ANGLE BYTE
<span class="number">2B3D EBC8 </span><span class="colon">X </span><span class="hex">1F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rra    </span>                 ;[GWB] LOW BIT TO CARRY
<span class="number">2B3E EBC9 </span><span class="colon">X </span><span class="hex">30 3A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,ANGEVN       ;[GWB] ANGLE IS EVEN - DON'T SWAP X AND Y
<span class="number">2B40 EBCB </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af              ;[GWB] SAVE THIS BYTE
<span class="number">2B41 EBCC </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de              ;[GWB] SAVE DY
<span class="number">2B42 EBCD </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE DX
<span class="number">2B43      </span><span class="colon">X </span><span class="hex">CD 6F 2D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GTASPC          ;[GWB] GO GET SCREEN ASPECT RATIO
<span class="number">     EBCE </span><span class="colon">X </span><span class="hex">CD FA ED   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2B46 EBD1 </span><span class="colon">X </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,h                      
<span class="number">2B47 EBD2 </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a               ;[GWB] IS ASPECT RATIO GREATER THAN ONE?
<span class="number">2B48 EBD3 </span><span class="colon">X </span><span class="hex">28 05      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,ASPLS0        ;[GWB] BRIF GOOD ASPECT RATIO
<span class="number">2B4A EBD5 </span><span class="colon">X </span><span class="hex">3E 01      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,1                      
<span class="number">2B4C EBD7 </span><span class="colon">X </span><span class="hex">32 25 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CSCLXY),a               
<span class="number">2B4F EBDA </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">[GWB] </span><span class="label">ASPLS0:</span><span class="mnemonic"> ex     </span> de,hl           ;[GWB] GET ASPECT RATIO INTO [C] FOR GOSCAL
<span class="number">2B50 EBDB </span><span class="colon">X </span><span class="hex">4D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,l                      
<span class="number">2B51 EBDC </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;[GWB] GET BACK DX
<span class="number">2B52 EBDD </span><span class="colon">X </span><span class="hex">3A 25 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(CSCLXY)               
<span class="number">2B55 EBE0 </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                        
<span class="number">2B56 EBE1 </span><span class="colon">X </span><span class="hex">28 01      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,ASPLS1        ;branch if aspect ratio less 1.0
<span class="number">2B58 EBE3 </span><span class="colon">X </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl         ;[GWB] XTHL
<span class="number">2B59 EBE4 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">[GWB] </span><span class="label">ASPLS1:</span><span class="mnemonic"> ex     </span> de,hl           ;[GWB] [HL]=DY, save DX
<span class="number">2B5A EBE5 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE 1/ASPECT
<span class="number">2B5B      </span><span class="colon">X </span><span class="hex">CD F7 2B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GOSCAL          ;[GWB] SCALE DELTA X BY ASPECT RATIO
<span class="number">     EBE6 </span><span class="colon">X </span><span class="hex">CD 82 EC   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2B5E EBE9 </span><span class="colon">X </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc              ;[GWB] GET BACK 1/ASPECT RATIO
<span class="number">2B5F EBEA </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;[GWB] GET DY
<span class="number">2B60 EBEB </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de              ;[GWB] SAVE SCALED DX
<span class="number">2B61 EBEC </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;[GWB] DY TO [DE] FOR GOSCAL
<span class="number">2B62 EBED </span><span class="colon">X </span><span class="hex">21 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,0                     
<span class="number">2B65 EBF0 </span><span class="colon">X </span><span class="hex">19         </span><span class="source">[GWB] </span><span class="label">DMULP: </span><span class="mnemonic"> add    </span> hl,de           ;[GWB] MULTIPLY [DE] BY HI BYTE OF 1/ASPECT
<span class="number">2B66 EBF1 </span><span class="colon">X </span><span class="hex">10 FD      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> djnz   </span> DMULP                    
<span class="number">2B68 EBF3 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE PARTIAL RESULT
<span class="number">2B69      </span><span class="colon">X </span><span class="hex">CD F7 2B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GOSCAL          ;[GWB] MULTIPLY [DE] BY LOW BYTE
<span class="number">     EBF4 </span><span class="colon">X </span><span class="hex">CD 82 EC   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2B6C EBF7 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;[GWB] GET BACK PARTIAL RESULT
<span class="number">2B6D EBF8 </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de           ;[GWB] [HL]=Y * 1/ASPECT
<span class="number">2B6E EBF9 </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de              ;[GWB] GET BACK SCALED Y
<span class="number">2B6F EBFA </span><span class="colon">X </span><span class="hex">3A 25 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(CSCLXY)               
<span class="number">2B72 EBFD </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                        
<span class="number">2B73 EBFE </span><span class="colon">X </span><span class="hex">28 01      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,ASLSS1        ;[GWB] branch if aspect ratio less than 1
<span class="number">2B75 EC00 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">2B76      </span><span class="colon">X </span><span class="hex">CD FA 26   </span><span class="source">[GWB] </span><span class="label">ASLSS1:</span><span class="mnemonic"> call   </span> NEGDE           ;[GWB] ALWAYS NEGATE NEW DY
<span class="number">     EC01 </span><span class="colon">X </span><span class="hex">CD 85 E7   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2B79 EC04 </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af              ;[GWB] GET BACK SHIFTED ANGLE
<span class="number">2B7A EC05 </span><span class="colon">X </span><span class="hex">1F         </span><span class="source">[GWB] </span><span class="label">ANGEVN:</span><span class="mnemonic"> rra    </span>                 ;[GWB] TEST SECOND BIT
<span class="number">2B7B      </span><span class="colon">X </span><span class="hex">D2 84 2B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,ANGPOS       ;[GWB] DON'T NEGATE COORDS IF NOT SET
<span class="number">     EC06 </span><span class="colon">X </span><span class="hex">D2 0F EC   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2B7E      </span><span class="colon">X </span><span class="hex">CD BB 25   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> NEGHL                    
<span class="number">     EC09 </span><span class="colon">X </span><span class="hex">CD 46 E6   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2B81      </span><span class="colon">X </span><span class="hex">CD FA 26   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> NEGDE           ;[GWB] NEGATE BOTH DELTAS
<span class="number">     EC0C </span><span class="colon">X </span><span class="hex">CD 85 E7   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2B84      </span><span class="colon">X </span><span class="hex">CD E7 28   </span><span class="source">[GWB] </span><span class="label">ANGPOS:</span><span class="mnemonic"> call   </span> GTABSC          ;[GWB] GO CALC TRUE COORDINATES
<span class="number">     EC0F </span><span class="colon">X </span><span class="hex">CD 72 E9   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2B87 EC12 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2B87 EC12 </span><span class="colon">X </span><span class="hex">3A 34 39   </span><span class="source">[GWB] </span><span class="label">DRWABS:</span><span class="mnemonic"> ld     </span> a,(DRWFLG)      ;[GWB] SEE WHETHER WE PLOT OR NOT
<span class="number">2B8A EC15 </span><span class="colon">X </span><span class="hex">87         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,a             ;[GWB] CHECK HI BIT
<span class="number">2B8B      </span><span class="colon">X </span><span class="hex">DA 9A 2B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> c,DSTPOS        ;[GWB] JUST SET POSITION.
<span class="number">     EC16 </span><span class="colon">X </span><span class="hex">DA 25 EC   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2B8E EC19 </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af              ;[GWB] SAVE THIS FLAG
<span class="number">2B8F EC1A </span><span class="colon">X </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc              ;[GWB] SAVE X,Y COORDS
<span class="number">2B90 EC1B </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de              ;[GWB] BEFORE SCALE SO REFLECT DISTANCE OFF
<span class="number">2B91      </span><span class="colon">X </span><span class="hex">CD 2B 2E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SCLXYX          ;[GWB] SCALE IN CASE COORDS OFF SCREEN
<span class="number">     EC1C </span><span class="colon">X </span><span class="hex">CD B6 EE   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2B94      </span><span class="colon">X </span><span class="hex">CD D8 28   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GLINE2                   
<span class="number">     EC1F </span><span class="colon">X </span><span class="hex">CD 63 E9   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2B97 EC22 </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                       
<span class="number">2B98 EC23 </span><span class="colon">X </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc              ;[GWB] GET THEM BACK
<span class="number">2B99 EC24 </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af              ;[GWB] GET BACK FLAG
<span class="number">2B9A EC25 </span><span class="colon">X </span><span class="hex">87         </span><span class="source">[GWB] </span><span class="label">DSTPOS:</span><span class="mnemonic"> add    </span> a,a             ;[GWB] SEE WHETHER TO STORE COORDS
<span class="number">2B9B      </span><span class="colon">X </span><span class="hex">DA A8 2B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> c,DNSTOR        ;[GWB] DON'T UPDATE IF B6=1
<span class="number">     EC26 </span><span class="colon">X </span><span class="hex">DA 33 EC   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2B9E EC29 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">2B9F EC2A </span><span class="colon">X </span><span class="hex">22 07 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (GRPACY),hl     ;[GWB] UPDATE GRAPHICS AC
<span class="number">2BA2 EC2D </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">2BA3 EC2E </span><span class="colon">X </span><span class="hex">60         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,b                      
<span class="number">2BA4 EC2F </span><span class="colon">X </span><span class="hex">69         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,c                      
<span class="number">2BA5 EC30 </span><span class="colon">X </span><span class="hex">22 09 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (GRPACX),hl              
<span class="number">2BA8 EC33 </span><span class="colon">X </span><span class="hex">AF         </span><span class="source">[GWB] </span><span class="label">DNSTOR:</span><span class="mnemonic"> xor    </span> a               ;[GWB] CLEAR SPECIAL FUNCTION FLAGS
<span class="number">2BA9 EC34 </span><span class="colon">X </span><span class="hex">32 34 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (DRWFLG),a               
<span class="number">2BAC EC37 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2BAD EC38 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2BAD EC38 </span><span class="colon">X </span><span class="hex">3E 40      </span><span class="source">[GWB] </span><span class="label">DNOMOV:</span><span class="mnemonic"> ld     </span> a,64            ;[GWB] SET BIT SIX IN FLAG BYTE
<span class="number">2BAF      </span><span class="colon">X </span><span class="hex">C3 B4 2B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> DSTFLG                   
<span class="number">     EC3A </span><span class="colon">X </span><span class="hex">C3 3F EC   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2BB2 EC3D </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2BB2 EC3D </span><span class="colon">X </span><span class="hex">3E 80      </span><span class="source">[GWB] </span><span class="label">DNOPLT:</span><span class="mnemonic"> ld     </span> a,128           ;[GWB] SET BIT 7
<span class="number">2BB4 EC3F </span><span class="colon">X </span><span class="hex">21 34 39   </span><span class="source">[GWB] </span><span class="label">DSTFLG:</span><span class="mnemonic"> ld     </span> hl,DRWFLG                
<span class="number">2BB7 EC42 </span><span class="colon">X </span><span class="hex">B6         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> (hl)                     
<span class="number">2BB8 EC43 </span><span class="colon">X </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a          ;[GWB] STORE UPDATED BYTE
<span class="number">2BB9 EC44 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2BBA EC45 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2BBA      </span><span class="colon">X </span><span class="hex">D2 C7 2B   </span><span class="source">[GWB] </span><span class="label">DANGLE:</span><span class="mnemonic"> jp     </span> nc,NCFCER       ;[GWB] ERROR IF NO ARG
<span class="number">     EC45 </span><span class="colon">X </span><span class="hex">D2 52 EC   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2BBD EC48 </span><span class="colon">X </span><span class="hex">7B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,e             ;[GWB] MAKE SURE LESS THAN 4
<span class="number">2BBE EC49 </span><span class="colon">X </span><span class="hex">FE 04      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 4                        
<span class="number">2BC0      </span><span class="colon">X </span><span class="hex">D2 C7 2B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,NCFCER       ;[GWB] ERROR IF NOT
<span class="number">     EC4B </span><span class="colon">X </span><span class="hex">D2 52 EC   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2BC3 EC4E </span><span class="colon">X </span><span class="hex">32 35 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (DRWANG),a               
<span class="number">2BC6 EC51 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2BC7 EC52 </span><span class="colon">X </span><span class="hex">           </span><span class="source">[GWB] </span><span class="label">NCFCER:</span><span class="mnemonic">        </span>                          
<span class="number">2BC7 EC52 </span><span class="colon">X </span><span class="hex">D2 97 06   </span><span class="source">[GWB] </span><span class="label">DSCALE:</span><span class="mnemonic"> jp     </span> nc,FCERR        ;[GWB] FC ERROR IF NO ARG
<span class="number">2BCA EC55 </span><span class="colon">X </span><span class="hex">7A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,d             ;[GWB] MAKE SURE LESS THAN 256
<span class="number">2BCB EC56 </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                        
<span class="number">2BCC EC57 </span><span class="colon">X </span><span class="hex">C2 97 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,FCERR                 
<span class="number">2BCF EC5A </span><span class="colon">X </span><span class="hex">7B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,e                      
<span class="number">2BD0 EC5B </span><span class="colon">X </span><span class="hex">32 33 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (DRWSCL),a      ;[GWB] STORE SCALE FACTOR
<span class="number">2BD3 EC5E </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2BD4 EC5F </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2BD4 EC5F </span><span class="colon">X </span><span class="hex">3A 33 39   </span><span class="source">[GWB] </span><span class="label">DSCLDE:</span><span class="mnemonic"> ld     </span> a,(DRWSCL)      ;[GWB] GET SCALE FACTOR
<span class="number">2BD7 EC62 </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a               ;[GWB] ZERO MEANS NO SCALING
<span class="number">2BD8 EC63 </span><span class="colon">X </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                        
<span class="number">2BD9 EC64 </span><span class="colon">X </span><span class="hex">21 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,0                     
<span class="number">2BDC EC67 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2BDC EC67 </span><span class="colon">X </span><span class="hex">19         </span><span class="source">[GWB] </span><span class="label">DSCLP: </span><span class="mnemonic"> add    </span> hl,de           ;[GWB] ADD IN [DE] SCALE TIMES
<span class="number">2BDD EC68 </span><span class="colon">X </span><span class="hex">3D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> a                        
<span class="number">2BDE      </span><span class="colon">X </span><span class="hex">C2 DC 2B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nz,DSCLP                 
<span class="number">     EC69 </span><span class="colon">X </span><span class="hex">C2 67 EC   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2BE1 EC6C </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;[GWB] PUT IT BACK IN [DE]
<span class="number">2BE2 EC6D </span><span class="colon">X </span><span class="hex">7A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,d             ;[GWB] SEE IF VALUE IS NEGATIVE
<span class="number">2BE3 EC6E </span><span class="colon">X </span><span class="hex">87         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,a                      
<span class="number">2BE4 EC6F </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af              ;[GWB] SAVE RESULTS OF TEST
<span class="number">2BE5      </span><span class="colon">X </span><span class="hex">D2 E9 2B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,DSCPOS                
<span class="number">     EC70 </span><span class="colon">X </span><span class="hex">D2 74 EC   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2BE8 EC73 </span><span class="colon">X </span><span class="hex">1B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> de              ;[GWB] MAKE IT TRUNCATE DOWN
<span class="number">2BE9      </span><span class="colon">X </span><span class="hex">CD F0 26   </span><span class="source">[GWB] </span><span class="label">DSCPOS:</span><span class="mnemonic"> call   </span> HLFDE           ;[GWB] DIVIDE BY FOUR
<span class="number">     EC74 </span><span class="colon">X </span><span class="hex">CD 7B E7   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2BEC      </span><span class="colon">X </span><span class="hex">CD F0 26   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> HLFDE                    
<span class="number">     EC77 </span><span class="colon">X </span><span class="hex">CD 7B E7   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2BEF EC7A </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af              ;[GWB] SEE IF WAS NEGATIVE
<span class="number">2BF0 EC7B </span><span class="colon">X </span><span class="hex">D0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nc                       
<span class="number">2BF1 EC7C </span><span class="colon">X </span><span class="hex">7A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,d                      
<span class="number">2BF2 EC7D </span><span class="colon">X </span><span class="hex">F6 C0      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> 0C0H                     
<span class="number">2BF4 EC7F </span><span class="colon">X </span><span class="hex">57         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,a                      
<span class="number">2BF5 EC80 </span><span class="colon">X </span><span class="hex">13         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> de                       
<span class="number">2BF6 EC81 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                 ;[GWB] ALL DONE IF WAS POSITIVE
<span class="number">2BF7 EC82 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2BF7 EC82 </span><span class="colon">X </span><span class="hex">7A         </span><span class="source">[GWB] </span><span class="label">GOSCAL:</span><span class="mnemonic"> ld     </span> a,d             ;[GWB] SEE IF NEGATIVE
<span class="number">2BF8 EC83 </span><span class="colon">X </span><span class="hex">87         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,a                      
<span class="number">2BF9      </span><span class="colon">X </span><span class="hex">D2 03 2C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,GOSC2        ;[GWB] NO, MULTIPLY AS-IS
<span class="number">     EC84 </span><span class="colon">X </span><span class="hex">D2 8E EC   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2BFC      </span><span class="colon">X </span><span class="hex">21 46 2D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,NEGD         ;[GWB] NEGATE BEFORE RETURNING
<span class="number">     EC87 </span><span class="colon">X </span><span class="hex">21 D1 ED   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2BFF EC8A </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                       
<span class="number">2C00      </span><span class="colon">X </span><span class="hex">CD FA 26   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> NEGDE           ;[GWB] MAKE POSITIVE FOR MULTIPLY
<span class="number">     EC8B </span><span class="colon">X </span><span class="hex">CD 85 E7   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2C03 EC8E </span><span class="colon">X </span><span class="hex">79         </span><span class="source">[GWB] </span><span class="label">GOSC2: </span><span class="mnemonic"> ld     </span> a,c             ;[GWB] GET SCALE FACTOR
<span class="number">2C04      </span><span class="colon">X </span><span class="hex">C3 FB 28   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> SCALE2          ;[GWB] GET SCALE FACTOR
<span class="number">     EC8F </span><span class="colon">X </span><span class="hex">C3 86 E9   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2C07 EC92 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2C07      </span><span class="colon">X </span><span class="hex">D2 C7 2B   </span><span class="source">[GWB] </span><span class="label">DCOLR: </span><span class="mnemonic"> jp     </span> nc,NCFCER       ;[GWB] FC ERROR IF NO ARG
<span class="number">     EC92 </span><span class="colon">X </span><span class="hex">D2 52 EC   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2C0A EC95 </span><span class="colon">X </span><span class="hex">7B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,e             ;[GWB] GO SET ATTRIBUTE
<span class="number">2C0B      </span><span class="colon">X </span><span class="hex">CD 84 2D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SETATR                   
<span class="number">     EC96 </span><span class="colon">X </span><span class="hex">CD 0F EE   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2C0E EC99 </span><span class="colon">X </span><span class="hex">DA 97 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> c,FCERR         ;[GWB] ERROR IF ILLEGAL ATTRIBUTE
<span class="number">2C11 EC9C </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2C12 EC9D </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2C12 EC9D </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Issue FC Error if Point is Not on Screen</span>
<span class="number">2C12 EC9D </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">[GWB] </span><span class="label">CHKRNG:</span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE TXTPTR
<span class="number">2C13      </span><span class="colon">X </span><span class="hex">CD 1F 2E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CHKRXY                   
<span class="number">     EC9E </span><span class="colon">X </span><span class="hex">CD AA EE   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2C16 ECA1 </span><span class="colon">X </span><span class="hex">D2 97 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,FCERR        ;[GWB] OUT OF BOUNDS - ERROR
<span class="number">2C19 ECA4 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">{GWB} </span><span class="label">CHKPHR:</span><span class="mnemonic"> pop    </span> hl                       
<span class="number">2C1A ECA5 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2C1B ECA6 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2C1B ECA6 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Deprecated: Issue FC Error if Point is Not on Screen</span>
<span class="number">2C1B ECA6 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;This is the same code as CHKRNG in GW-BASIC</span>
<span class="number">2C1B ECA6 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;The above code is uses instead, and this is never called</span>
<span class="number">2C1B ECA6 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;                                       </span>
<span class="number">2C1B ECA6 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;;Save [HL]
<span class="number">2C1C      </span><span class="colon">X </span><span class="hex">CD 2B 2E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SCLXYX          ;;Check if Point is Off Screen
<span class="number">     ECA7 </span><span class="colon">X </span><span class="hex">CD B6 EE   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2C1F ECAA </span><span class="colon">X </span><span class="hex">D2 97 06   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> nc,FCERR        ;;If it is, generate FC Error
<span class="number">2C22 ECAD </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;;Otherwise, Restorw [HL]
<span class="number">2C23 ECAE </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                 ;;and Return
<span class="number">2C24 ECAF </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2C24 ECAF </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">[GWB] </span><span class="label">MACLNG:</span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">2C25 ECB0 </span><span class="colon">X </span><span class="hex">22 39 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (MCLTAB),hl     ;[GWB] SAVE POINTER TO COMMAND TABLE
<span class="number">2C28 ECB3 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">2C29 ECB4 </span><span class="colon">X </span><span class="hex">CD 85 09   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FRMEVL          ;[GWB] EVALUATE STRING ARGUMENT
<span class="number">2C2C ECB7 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE TXTPTR TILL DONE
<span class="number">2C2D ECB8 </span><span class="colon">X </span><span class="hex">11 00 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,0            ;[GWB] PUSH DUMMY ENTRY TO MARK END OF STK
<span class="number">2C30 ECBB </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de              ;[GWB] DUMMY ADDR
<span class="number">2C31 ECBC </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af              ;[GWB] DUMMY LENGTH
<span class="number">2C32 ECBD </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2C32 ECBD </span><span class="colon">X </span><span class="hex">CD C6 0F   </span><span class="source">[GWB] </span><span class="label">MCLNEW:</span><span class="mnemonic"> call   </span> FRESTR                   
<span class="number">2C35 ECC0 </span><span class="colon">X </span><span class="hex">CD 31 15   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> MOVRM           ;[GWB] GET LENGTH & POINTER
<span class="number">2C38 ECC3 </span><span class="colon">X </span><span class="hex">78         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,b                      
<span class="number">2C39 ECC4 </span><span class="colon">X </span><span class="hex">B1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> c                        
<span class="number">2C3A ECC5 </span><span class="colon">X </span><span class="hex">28 06      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,MCLOOP        ;[GWB] Don't Push if addr is 0
<span class="number">2C3C ECC7 </span><span class="colon">X </span><span class="hex">7B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,e                      
<span class="number">2C3D ECC8 </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                        
<span class="number">2C3E ECC9 </span><span class="colon">X </span><span class="hex">28 02      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,MCLOOP        ;[GWB]  or if Len is 0...
<span class="number">2C40 ECCB </span><span class="colon">X </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc              ;[GWB] PUSH ADDR OF STRING
<span class="number">2C41 ECCC </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                       
<span class="number">2C42 ECCD </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2C42 ECCD </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">[GWB] </span><span class="label">MCLOOP:</span><span class="mnemonic"> pop    </span> af              ;GWB] GET LENGTH OFF STACK
<span class="number">2C43 ECCE </span><span class="colon">X </span><span class="hex">32 38 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (MCLLEN),a               
<span class="number">2C46 ECD1 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;GWB] GET ADDR
<span class="number">2C47 ECD2 </span><span class="colon">X </span><span class="hex">7C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,h                      
<span class="number">2C48 ECD3 </span><span class="colon">X </span><span class="hex">B5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> l               ;[GWB] SEE IF LAST ENTRY
<span class="number">2C49 ECD4 </span><span class="colon">X </span><span class="hex">28 68      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,POPHRX        ;[GWB] ALL FINISHED IF ZERO
<span class="number">2C4B ECD6 </span><span class="colon">X </span><span class="hex">22 36 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (MCLPTR),hl     ;[GWB] SET UP POINTER
<span class="number">2C4E      </span><span class="colon">X </span><span class="hex">CD 98 2C   </span><span class="source">[GWB] </span><span class="label">MCLSCN:</span><span class="mnemonic"> call   </span> FETCHR          ;[GWB] GET A CHAR FROM STRING
<span class="number">     ECD9 </span><span class="colon">X </span><span class="hex">CD 23 ED   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2C51 ECDC </span><span class="colon">X </span><span class="hex">28 EF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,MCLOOP        ;[GWB] END OF STRING - SEE IF MORE ON STK
<span class="number">2C53 ECDE </span><span class="colon">X </span><span class="hex">87         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,a             ;[GWB] PUT CHAR * 2 INTO [C]
<span class="number">2C54 ECDF </span><span class="colon">X </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a                      
<span class="number">2C55 ECE0 </span><span class="colon">X </span><span class="hex">2A 39 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(MCLTAB)     ;GWB] POINT TO COMMAND TABLE
<span class="number">2C58 ECE3 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2C58 ECE3 </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">[GWB] </span><span class="label">MSCNLP:</span><span class="mnemonic"> ld     </span> a,(hl)          ;[GWB] GET CHAR FROM COMMAND TABLE
<span class="number">2C59 ECE4 </span><span class="colon">X </span><span class="hex">87         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,a             ;[GWB] CHAR = CHAR * 2 (CLR HI BIT FOR CMP)
<span class="number">2C5A ECE5 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2C5A ECE5 </span><span class="colon">X </span><span class="hex">CC 97 06   </span><span class="source">[GWB] </span><span class="label">GOFCER:</span><span class="mnemonic"> call   </span> z,FCERR         ;[GWB] END OF TABLE.
<span class="number">2C5D ECE8 </span><span class="colon">X </span><span class="hex">B9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> c               ;[GWB] HAVE WE GOT IT?
<span class="number">2C5E ECE9 </span><span class="colon">X </span><span class="hex">28 05      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,MISCMD        ;[GWB] YES.
<span class="number">2C60 ECEB </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl              ;[GWB] MOVE TO NEXT ENTRY
<span class="number">2C61 ECEC </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">2C62 ECED </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">2C63 ECEE </span><span class="colon">X </span><span class="hex">18 F3      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> MSCNLP                   
<span class="number">2C65 ECF0 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2C65      </span><span class="colon">X </span><span class="hex">01 4E 2C   </span><span class="source">[GWB] </span><span class="label">MISCMD:</span><span class="mnemonic"> ld     </span> bc,MCLSCN       ;[GWB] RETURN TO TOP OF LOOP WHEN DONE
<span class="number">     ECF0 </span><span class="colon">X </span><span class="hex">01 D9 EC   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2C68 ECF3 </span><span class="colon">X </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                       
<span class="number">2C69 ECF4 </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)          ;[GWB] SEE IF A VALUE NEEDED
<span class="number">2C6A ECF5 </span><span class="colon">X </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a             ;[GWB] PASS GOTTEN CHAR IN [C]
<span class="number">2C6B ECF6 </span><span class="colon">X </span><span class="hex">87         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,a                      
<span class="number">2C6C ECF7 </span><span class="colon">X </span><span class="hex">30 1E      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,MNOARG       ;[GWB] COMMAND DOESN'T REQUIRE ARGUMENT
<span class="number">2C6E ECF9 </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a               ;[GWB] CLEAR CARRY
<span class="number">2C6F ECFA </span><span class="colon">X </span><span class="hex">1F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rra    </span>                 ;[GWB] MAKE IT A CHAR AGAIN
<span class="number">2C70 ECFB </span><span class="colon">X </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a             ;[GWB] PUT IN [C]
<span class="number">2C71 ECFC </span><span class="colon">X </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                       
<span class="number">2C72 ECFD </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE PTR INTO CMD TABLE
<span class="number">2C73      </span><span class="colon">X </span><span class="hex">CD 98 2C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FETCHR          ;[GWB] GET A CHAR
<span class="number">     ECFE </span><span class="colon">X </span><span class="hex">CD 23 ED   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2C76 ED01 </span><span class="colon">X </span><span class="hex">11 01 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,1            ;[GWB] DEFAULT ARG=1
<span class="number">2C79 ED04 </span><span class="colon">X </span><span class="hex">28 0E      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,VSNAR0                 
<span class="number">2C7B ED06 </span><span class="colon">X </span><span class="hex">CD C6 0C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> ISLETC                   
<span class="number">2C7E ED09 </span><span class="colon">X </span><span class="hex">30 06      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,VSNARG       ;[GWB] NO ARG IF END OF STRING
<span class="number">2C80      </span><span class="colon">X </span><span class="hex">CD C6 2C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> ISLET2          ;[GWB] SEE IF POSSIBLE LETTER
<span class="number">     ED0B </span><span class="colon">X </span><span class="hex">CD 51 ED   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2C83 ED0E </span><span class="colon">X </span><span class="hex">37         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> scf    </span>                          
<span class="number">2C84 ED0F </span><span class="colon">X </span><span class="hex">18 04      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> ISCMD3                   
<span class="number">2C86 ED11 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2C86      </span><span class="colon">X </span><span class="hex">CD B5 2C   </span><span class="source">[GWB] </span><span class="label">VSNARG:</span><span class="mnemonic"> call   </span> DECFET          ;[GWB] PUT CHAR BACK INTO STRING
<span class="number">     ED11 </span><span class="colon">X </span><span class="hex">CD 40 ED   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2C89 ED14 </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">[GWB] </span><span class="label">VSNAR0:</span><span class="mnemonic"> or     </span> a               ;[GWB] CLEAR CARRY
<span class="number">2C8A ED15 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">(GWB) </span><span class="label">ISCMD3:</span><span class="mnemonic"> pop    </span> hl                       
<span class="number">2C8B ED16 </span><span class="colon">X </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc              ;[GWB] GET BACK COMMAND CHAR
<span class="number">2C8C ED17 </span><span class="colon">X </span><span class="hex">23         </span><span class="source">[GWB] </span><span class="label">MNOARG:</span><span class="mnemonic"> inc    </span> hl              ;[GWB] POINT TO DISPATCH ADDR
<span class="number">2C8D ED18 </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)          ;[GWB] GET Address INTO HL
<span class="number">2C8E ED19 </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">2C8F ED1A </span><span class="colon">X </span><span class="hex">66         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,(hl)                   
<span class="number">2C90 ED1B </span><span class="colon">X </span><span class="hex">6F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,a                      
<span class="number">2C91 ED1C </span><span class="colon">X </span><span class="hex">E9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> (hl)            ;[GWB] DISPATCH
<span class="number">2C92 ED1D </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2C92      </span><span class="colon">X </span><span class="hex">CD 98 2C   </span><span class="source">[GWB] </span><span class="label">FETCHZ:</span><span class="mnemonic"> call   </span> FETCHR          ;[GWB] GET A CHAR FROM STRING
<span class="number">     ED1D </span><span class="colon">X </span><span class="hex">CD 23 ED   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2C95 ED20 </span><span class="colon">X </span><span class="hex">28 C3      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,GOFCER        ;[GWB] GIVE ERROR IF END OF LINE
<span class="number">2C97 ED22 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2C98 ED23 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2C98 ED23 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">[GWB] </span><span class="label">FETCHR:</span><span class="mnemonic"> push   </span> hl                       
<span class="number">2C99 ED24 </span><span class="colon">X </span><span class="hex">21 38 39   </span><span class="source">[GWB] </span><span class="label">FETCH2:</span><span class="mnemonic"> ld     </span> hl,MCLLEN       ;[GWB] POINT TO STRING LENGTH
<span class="number">2C9C ED24 </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)                   
<span class="number">2C9D ED27 </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                        
<span class="number">2C9E ED28 </span><span class="colon">X </span><span class="hex">28 13      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,POPHRX        ;[GWB] RETURN Z=0 IF END OF STRING
<span class="number">2CA0 ED29 </span><span class="colon">X </span><span class="hex">35         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> (hl)            ;[GWB] UPDATE COUNT FOR NEXT TIME
<span class="number">2CA1 ED2B </span><span class="colon">X </span><span class="hex">2A 36 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(MCLPTR)     ;[GWB] GET PTR TO STRING
<span class="number">2CA4 ED2C </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)          ;[GWB] GET CHARACTER FROM STRING
<span class="number">2CA5 ED2F </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl              ;UPDATE PTR FOR NEXT TIME
<span class="number">2CA6 ED30 </span><span class="colon">X </span><span class="hex">22 36 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (MCLPTR),hl              
<span class="number">2CA9 ED31 </span><span class="colon">X </span><span class="hex">FE 20      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> ' '             ;[GWB] [GWB] SKIP SPACES
<span class="number">2CAB ED34 </span><span class="colon">X </span><span class="hex">28 EC      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,FETCH2                 
<span class="number">2CAD ED36 </span><span class="colon">X </span><span class="hex">FE 60      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 96              ;[GWB] CONVERT LOWER CASE TO UPPER
<span class="number">2CAF ED38 </span><span class="colon">X </span><span class="hex">38 02      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,POPHRX                 
<span class="number">2CB1 ED3A </span><span class="colon">X </span><span class="hex">D6 20      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> 32              ;[GWB] DO CONVERSION
<span class="number">2CB3 ED3C </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">(~~~) </span><span class="label">POPHRX:</span><span class="mnemonic"> pop    </span> hl                       
<span class="number">2CB4 ED3E </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2CB5 ED3F </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2CB5 ED40 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">[GWB] </span><span class="label">DECFET:</span><span class="mnemonic"> push   </span> hl                       
<span class="number">2CB6 ED40 </span><span class="colon">X </span><span class="hex">21 38 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,MCLLEN       ;[GWB] INCREMENT LENGTH
<span class="number">2CB9 ED41 </span><span class="colon">X </span><span class="hex">34         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> (hl)                     
<span class="number">2CBA ED44 </span><span class="colon">X </span><span class="hex">2A 36 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(MCLPTR)     ;[GWB] BACK UP POINTER
<span class="number">2CBD ED45 </span><span class="colon">X </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl                       
<span class="number">2CBE ED48 </span><span class="colon">X </span><span class="hex">22 36 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (MCLPTR),hl              
<span class="number">2CC1 ED49 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">2CC2 ED4C </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2CC3 ED4E </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2CC3      </span><span class="colon">X </span><span class="hex">CD 92 2C   </span><span class="source">[GWB] </span><span class="label">VALSCN:</span><span class="mnemonic"> call   </span> FETCHZ          ;[GWB] GET FIRST CHAR OF ARGUMENT
<span class="number">     ED4E </span><span class="colon">X </span><span class="hex">CD 1D ED   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2CC6 ED51 </span><span class="colon">X </span><span class="hex">FE 3D      </span><span class="source">[GWB] </span><span class="label">ISLET2:</span><span class="mnemonic"> cp     </span> '='             ;[GWB] NUMERIC?
<span class="number">2CC8 ED53 </span><span class="colon">X </span><span class="hex">28 61      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,VARGET        ;;No, Evaluate Variable
<span class="number">2CCA ED55 </span><span class="colon">X </span><span class="hex">FE 2B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> '+'             ;[GWB] PLUS SIGN?
<span class="number">2CCC ED57 </span><span class="colon">X </span><span class="hex">28 F5      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,VALSCN        ;[GWB] THEN SKIP IT
<span class="number">2CCE ED59 </span><span class="colon">X </span><span class="hex">FE 2D      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> '-'             ;[GWB] NEGATIVE VALUE?
<span class="number">2CD0 ED5B </span><span class="colon">X </span><span class="hex">20 06      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,VALSC2                
<span class="number">2CD2      </span><span class="colon">X </span><span class="hex">11 46 2D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,NEGD         ;[GWB] IF SO, NEGATE BEFORE RETURNING
<span class="number">     ED5D </span><span class="colon">X </span><span class="hex">11 D1 ED   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2CD5 ED60 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                       
<span class="number">2CD6 ED61 </span><span class="colon">X </span><span class="hex">18 EB      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> VALSCN          ;[GWB] EAT THE "-"
<span class="number">2CD8 ED63 </span><span class="colon">X </span><span class="hex">11 00 00   </span><span class="source">[GWB] </span><span class="label">VALSC2:</span><span class="mnemonic"> ld     </span> de,0                     
<span class="number">2CDB ED66 </span><span class="colon">X </span><span class="hex">06 04      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,4                      
<span class="number">2CDD ED68 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2CDD ED68 </span><span class="colon">X </span><span class="hex">FE 2C      </span><span class="source">[GWB] </span><span class="label">NUMLOP:</span><span class="mnemonic"> cp     </span> ','             ;[GWB] COMMA
<span class="number">2CDF ED6A </span><span class="colon">X </span><span class="hex">28 D4      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,DECFET        ;[GWB] YES, BACK UP AND RETURN
<span class="number">2CE1 ED6C </span><span class="colon">X </span><span class="hex">FE 3B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> ';'             ;[GWB] SEMICOLON?
<span class="number">2CE3 ED6E </span><span class="colon">X </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z               ;[GWB] YES, JUST RETURN
<span class="number">2CE4 ED6F </span><span class="colon">X </span><span class="hex">FE 3A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> '9'+1           ;[GWB] NOW SEE IF ITS A DIGIT
<span class="number">2CE6 ED71 </span><span class="colon">X </span><span class="hex">30 CD      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,DECFET       ;[GWB] IF NOT, BACK UP AND RETURN
<span class="number">2CE8 ED73 </span><span class="colon">X </span><span class="hex">FE 30      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> '0'                      
<span class="number">2CEA ED75 </span><span class="colon">X </span><span class="hex">38 C9      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,DECFET                 
<span class="number">2CEC ED77 </span><span class="colon">X </span><span class="hex">6B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,e                      
<span class="number">2CED ED78 </span><span class="colon">X </span><span class="hex">62         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,d                      
<span class="number">2CEE ED79 </span><span class="colon">X </span><span class="hex">29         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,hl                    
<span class="number">2CEF ED7A </span><span class="colon">X </span><span class="hex">29         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,hl                    
<span class="number">2CF0 ED7B </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de                    
<span class="number">2CF1 ED7C </span><span class="colon">X </span><span class="hex">29         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,hl                    
<span class="number">2CF2 ED7D </span><span class="colon">X </span><span class="hex">D6 30      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> '0'             ;[GWB] ADD IN THE DIGIT
<span class="number">2CF4 ED7F </span><span class="colon">X </span><span class="hex">5F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,a                      
<span class="number">2CF5 ED80 </span><span class="colon">X </span><span class="hex">16 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,0                      
<span class="number">2CF7 ED82 </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de           ;[GWB] VALUE SHOULD BE IN [DE]
<span class="number">2CF8 ED83 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;[GWB] GET NEXT CHAR
<span class="number">2CF9      </span><span class="colon">X </span><span class="hex">CD 98 2C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FETCHR                   
<span class="number">     ED84 </span><span class="colon">X </span><span class="hex">CD 23 ED   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2CFC ED87 </span><span class="colon">X </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z                        
<span class="number">2CFD ED88 </span><span class="colon">X </span><span class="hex">05         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> b                        
<span class="number">2CFE ED89 </span><span class="colon">X </span><span class="hex">20 DD      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,NUMLOP                
<span class="number">2D00 ED8B </span><span class="colon">X </span><span class="hex">FE 30      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> '0'                      
<span class="number">2D02 ED8D </span><span class="colon">X </span><span class="hex">38 D9      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,NUMLOP                 
<span class="number">2D04 ED8F </span><span class="colon">X </span><span class="hex">FE 3A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> '9'+1                    
<span class="number">2D06 ED91 </span><span class="colon">X </span><span class="hex">30 D5      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,NUMLOP                
<span class="number">2D08 ED93 </span><span class="colon">X </span><span class="hex">18 1A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> SCNFC                    
<span class="number">2D0A ED95 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2D0A      </span><span class="colon">X </span><span class="hex">CD 92 2C   </span><span class="source">[GWB] </span><span class="label">SCNVAR:</span><span class="mnemonic"> call   </span> FETCHZ          ;[GWB] MAKE SURE FIRST CHAR IS LETTER
<span class="number">     ED95 </span><span class="colon">X </span><span class="hex">CD 1D ED   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2D0D ED98 </span><span class="colon">X </span><span class="hex">11 60 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,BUF          ;[GWB] PLACE TO COPY NAME FOR PTRGET
<span class="number">2D10 ED9B </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de              ;[GWB] SAVE ADDR OF BUF FOR "ISVAR"
<span class="number">2D11 ED9C </span><span class="colon">X </span><span class="hex">06 20      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,32            ;[GWB] COPY MAX OF 32 CHARACTERS
<span class="number">2D13 ED9E </span><span class="colon">X </span><span class="hex">CD C6 0C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> ISLETC          ;[GWB] MAKE SURE IT'S A LETTER
<span class="number">2D16 EDA1 </span><span class="colon">X </span><span class="hex">38 0C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,SCNFC         ;[GWB] FC ERROR IF NOT LETTER
<span class="number">2D18 EDA3 </span><span class="colon">X </span><span class="hex">12         </span><span class="source">[GWB] </span><span class="label">SCNVLP:</span><span class="mnemonic"> ld     </span> (de),a          ;[GWB] STORE CHAR IN BUF
<span class="number">2D19 EDA4 </span><span class="colon">X </span><span class="hex">13         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> de                       
<span class="number">2D1A EDA5 </span><span class="colon">X </span><span class="hex">FE 3B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> ';'             ;[GWB] A SEMICOLON?
<span class="number">2D1C EDA7 </span><span class="colon">X </span><span class="hex">28 09      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,SCNV2         ;[GWB] YES - END OF VARIABLE NAME
<span class="number">2D1E      </span><span class="colon">X </span><span class="hex">CD 92 2C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FETCHZ          ;[GWB] GET NEXT CHAR
<span class="number">     EDA9 </span><span class="colon">X </span><span class="hex">CD 1D ED   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2D21 EDAC </span><span class="colon">X </span><span class="hex">05         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> b                        
<span class="number">2D22 EDAD </span><span class="colon">X </span><span class="hex">20 F4      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,SCNVLP                
<span class="number">2D24 EDAF </span><span class="colon">X </span><span class="hex">CD 97 06   </span><span class="source">[GWB] </span><span class="label">SCNFC: </span><span class="mnemonic"> call   </span> FCERR           ;[GWB]ERROR - VARIABLE TOO LONG
<span class="number">2D27 EDB2 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">[GWB] </span><span class="label">SCNV2: </span><span class="mnemonic"> pop    </span> hl              ;[GWB]GET PTR TO BUF
<span class="number">2D28 EDB3 </span><span class="colon">X </span><span class="hex">C3 4E 0A   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> ISVAR           ;[GWB]GO GET ITS VALUE
<span class="number">2D2B EDB6 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2D2B      </span><span class="colon">X </span><span class="hex">CD 0A 2D   </span><span class="source">[GWB] </span><span class="label">VARGET:</span><span class="mnemonic"> call   </span> SCNVAR          ;[GWB]SCAN & EVALUATE VARIABLE
<span class="number">     EDB6 </span><span class="colon">X </span><span class="hex">CD 95 ED   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2D2E      </span><span class="colon">X </span><span class="hex">CD 04 23   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FRCINX          ;[GWB]MAKE IT AN INTEGER
<span class="number">     EDB9 </span><span class="colon">X </span><span class="hex">CD 8F E3   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2D31 EDBC </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;[GWB]IN [DE]
<span class="number">2D32 EDBD </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2D33 EDBE </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2D33      </span><span class="colon">X </span><span class="hex">CD 0A 2D   </span><span class="source">[GWB] </span><span class="label">MCLXEQ:</span><span class="mnemonic"> call   </span> SCNVAR          ;[GWB] SCAN VARIABLE NAME
<span class="number">     EDBE </span><span class="colon">X </span><span class="hex">CD 95 ED   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2D36 EDC1 </span><span class="colon">X </span><span class="hex">3A 38 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(MCLLEN)      ;[GWB] SAVE CURRENT STRING POS & LENGTH
<span class="number">2D39 EDC4 </span><span class="colon">X </span><span class="hex">2A 36 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(MCLPTR)              
<span class="number">2D3C EDC7 </span><span class="colon">X </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl         ;[GWB]PUSH MCLPTR
<span class="number">2D3D EDC8 </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                       
<span class="number">2D3E EDC9 </span><span class="colon">X </span><span class="hex">0E 02      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,2             ;[GWB]MAKE SURE OF ROOM ON STACK
<span class="number">2D40 EDCB </span><span class="colon">X </span><span class="hex">CD A0 0B   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> GETSTK                   
<span class="number">2D43      </span><span class="colon">X </span><span class="hex">C3 32 2C   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> MCLNEW                   
<span class="number">     EDCE </span><span class="colon">X </span><span class="hex">C3 BD EC   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2D46 EDD1 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2D46 EDD1 </span><span class="colon">X </span><span class="hex">AF         </span><span class="source">[GWB] </span><span class="label">NEGD:  </span><span class="mnemonic"> xor    </span> a               ;;[DE] = -[DE]
<span class="number">2D47 EDD2 </span><span class="colon">X </span><span class="hex">93         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> e                        
<span class="number">2D48 EDD3 </span><span class="colon">X </span><span class="hex">5F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,a                      
<span class="number">2D49 EDD4 </span><span class="colon">X </span><span class="hex">9A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sbc    </span> a,d                      
<span class="number">2D4A EDD5 </span><span class="colon">X </span><span class="hex">93         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> e                        
<span class="number">2D4B EDD6 </span><span class="colon">X </span><span class="hex">57         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,a                      
<span class="number">2D4C EDD7 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2D4D EDD8 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2D4D EDD8 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Move Cursor to Column [H], Row [L]     </span>
<span class="number">2D4D EDD8 </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">[~~~] </span><span class="label">MOVEIT:</span><span class="mnemonic"> push   </span> af                       
<span class="number">2D4E EDD9 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;;Save Location
<span class="number">2D4F EDDA </span><span class="colon">X </span><span class="hex">D9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> exx    </span>                          
<span class="number">2D50 EDDB </span><span class="colon">X </span><span class="hex">2A 01 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(CURRAM)     ;;Get Current Cursor Address
<span class="number">2D53 EDDE </span><span class="colon">X </span><span class="hex">3A 0D 38   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(CURCHR)      ;;Get Character Under Cursor
<span class="number">2D56 EDE1 </span><span class="colon">X </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a          ;;and Put Back into Screen Location
<span class="number">2D57 EDE2 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;;Restore Location
<span class="number">2D58 EDE3 </span><span class="colon">X </span><span class="hex">7D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,l             ;;Address Offset = Row * 5
<span class="number">2D59 EDE4 </span><span class="colon">X </span><span class="hex">87         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,a                      
<span class="number">2D5A EDE5 </span><span class="colon">X </span><span class="hex">87         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,a                      
<span class="number">2D5B EDE6 </span><span class="colon">X </span><span class="hex">85         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,l                      
<span class="number">2D5C EDE7 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl                    
<span class="number">2D5D EDE8 </span><span class="colon">X </span><span class="hex">5A         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,d             ;;[DE] = Column
<span class="number">2D5E EDE9 </span><span class="colon">X </span><span class="hex">16 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,0                      
<span class="number">2D60 EDEB </span><span class="colon">X </span><span class="hex">62         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,d             ;;[HL] = Offset
<span class="number">2D61 EDEC </span><span class="colon">X </span><span class="hex">6F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,a                      
<span class="number">2D62 EDED </span><span class="colon">X </span><span class="hex">7B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,e             ;;[A] = Column - 1
<span class="number">2D63 EDEE </span><span class="colon">X </span><span class="hex">3D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> a                        
<span class="number">2D64 EDEF </span><span class="colon">X </span><span class="hex">29         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,hl           ;;Offset = Offset * 8 (Row * 40)
<span class="number">2D65 EDF0 </span><span class="colon">X </span><span class="hex">29         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,hl                    
<span class="number">2D66 EDF1 </span><span class="colon">X </span><span class="hex">29         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,hl                    
<span class="number">2D67 EDF2 </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de           ;;Offset = Offset + Column
<span class="number">2D68 EDF3 </span><span class="colon">X </span><span class="hex">11 00 30   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,SCREEN       ;;Get Screen Address
<span class="number">2D6B EDF6 </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de           ;;and Add Offset
<span class="number">2D6C EDF7 </span><span class="colon">X </span><span class="hex">C3 E7 1D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> TTYFIS          ;;Save Position and Finish
<span class="number">2D6F EDFA </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2D6F EDFA </span><span class="colon">X </span><span class="hex">11 CC 00   </span><span class="source">[GWB] </span><span class="label">GTASPC:</span><span class="mnemonic"> ld     </span> de,204          ;;Aspect Ration = 318:204 (6.25:4)
<span class="number">2D72 EDFD </span><span class="colon">X </span><span class="hex">21 3E 01   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,318                   
<span class="number">2D75 EE00 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2D76 EE01 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2D76 EE01 </span><span class="colon">X </span><span class="hex">32 28 39   </span><span class="source">[GWB] </span><span class="label">STOREC:</span><span class="mnemonic"> ld     </span> (PINDEX),a      ;;Store Point Position
<span class="number">2D79 EE04 </span><span class="colon">X </span><span class="hex">22 26 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CURLOC),hl     ;;and Semigraphics Character Address
<span class="number">2D7C EE07 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2D7D EE08 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2D7D EE08 </span><span class="colon">X </span><span class="hex">3A 28 39   </span><span class="source">[GWB] </span><span class="label">FETCHC:</span><span class="mnemonic"> ld     </span> a,(PINDEX)      ;;Load Bit Index
<span class="number">2D80 EE0B </span><span class="colon">X </span><span class="hex">2A 26 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(CURLOC)     ;;Load Current Point Address
<span class="number">2D83 EE0E </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2D84 EE0F </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2D84 EE0F </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Set Graphics Attribute (Foreground Color)</span>
<span class="number">2D84 EE0F </span><span class="colon">X </span><span class="hex">FE 10      </span><span class="source">[GWB] </span><span class="label">SETATR:</span><span class="mnemonic"> cp     </span> 16              ;;Is Color > 16
<span class="number">2D86 EE11 </span><span class="colon">X </span><span class="hex">3F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ccf    </span>                 ;;If Yes 
<span class="number">2D87 EE12 </span><span class="colon">X </span><span class="hex">D8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> c               ;;  Return Error
<span class="number">2D88 EE13 </span><span class="colon">X </span><span class="hex">32 02 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (ATRBYT),a      ;;Store Color
<span class="number">2D8B EE16 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2D8C EE17 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2D8C EE17 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Get Bit Mask for Bit Position PINDEX   </span>
<span class="number">2D8C EE17 </span><span class="colon">X </span><span class="hex">11 CA 1A   </span><span class="source">[~~~] </span><span class="label">GETMSK:</span><span class="mnemonic"> ld     </span> de,BITTAB                
<span class="number">2D8F EE1A </span><span class="colon">X </span><span class="hex">3A 28 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(PINDEX)               
<span class="number">2D92 EE1D </span><span class="colon">X </span><span class="hex">83         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,e                      
<span class="number">2D93 EE1E </span><span class="colon">X </span><span class="hex">5F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,a                      
<span class="number">2D94 EE1F </span><span class="colon">X </span><span class="hex">30 01      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,GETMSS                
<span class="number">2D96 EE21 </span><span class="colon">X </span><span class="hex">14         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> d                        
<span class="number">2D97 EE22 </span><span class="colon">X </span><span class="hex">1A         </span><span class="source">      </span><span class="label">GETMSS:</span><span class="mnemonic"> ld     </span> a,(de)                   
<span class="number">2D98 EE23 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2D99 EE24 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2D99 EE24 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;{GWB} SET CURRENT POINT                 </span>
<span class="number">2D99 EE24 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Sets Current Point to Foreground Color ATRBYT</span>
<span class="number">2D99 EE24 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Background Color is not changed        </span>
<span class="number">2D99 EE24 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Current point is at Current Point Index PINDEX in</span>
<span class="number">2D99 EE24 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Semigraphics Character at Current Address CURLOC</span>
<span class="number">2D99 EE24 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2D99 EE24 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">[GWB] </span><span class="label">SETC:  </span><span class="mnemonic"> push   </span> hl              ;;Save [HL]
<span class="number">2D9A EE25 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de              ;;and [DE]
<span class="number">2D9B EE26 </span><span class="colon">X </span><span class="hex">2A 26 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(CURLOC)     ;;Get Current Screen Address
<span class="number">2D9E EE29 </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)          ;;Get Character at Address
<span class="number">2D9F EE2A </span><span class="colon">X </span><span class="hex">F6 A0      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> SGBASE          ;;Verify it's in the range of
<span class="number">2DA1 EE2C </span><span class="colon">X </span><span class="hex">AE         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> (hl)            ;;Semigraphics Characters
<span class="number">2DA2 EE2D </span><span class="colon">X </span><span class="hex">28 02      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,SETC2         ;;If Not 
<span class="number">2DA4 EE2F </span><span class="colon">X </span><span class="hex">36 A0      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),SGBASE     ;;  Store Base Semigraphic Character
<span class="number">2DA6      </span><span class="colon">X </span><span class="hex">CD 8C 2D   </span><span class="source">(~~~) </span><span class="label">SETC2: </span><span class="mnemonic"> call   </span> GETMSK          ;;Get Bit Mask for Pixel to set
<span class="number">     EE31 </span><span class="colon">X </span><span class="hex">CD 17 EE   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2DA9 EE34 </span><span class="colon">X </span><span class="hex">B6         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> (hl)            ;;Set it 
<span class="number">2DAA EE35 </span><span class="colon">X </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a          ;;Write Character back to Screen Matrix
<span class="number">2DAB EE36 </span><span class="colon">X </span><span class="hex">11 00 04   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,COLOR-SCREEN ;;Add Offset into Color Matrix to
<span class="number">2DAE EE39 </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de           ;;Screen Address to Get Color Address
<span class="number">2DAF EE3A </span><span class="colon">X </span><span class="hex">3A 02 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(ATRBYT)      ;;Get Color Byte
<span class="number">2DB2 EE3D </span><span class="colon">X </span><span class="hex">87         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,a             ;;Now multiply by 16,
<span class="number">2DB3 EE3E </span><span class="colon">X </span><span class="hex">87         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,a             ;;moving it to the high nybble (Foreground Color)
<span class="number">2DB4 EE3F </span><span class="colon">X </span><span class="hex">87         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,a             ;;leaving 0 (Black) in thr low nybblr (Background Color)
<span class="number">2DB5 EE40 </span><span class="colon">X </span><span class="hex">87         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,a                      
<span class="number">2DB6 EE41 </span><span class="colon">X </span><span class="hex">57         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> d,a             ;;Save New Color Byte
<span class="number">2DB7 EE42 </span><span class="colon">X </span><span class="hex">5E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,(hl)          ;;Get Old Color Byte
<span class="number">2DB8 EE43 </span><span class="colon">X </span><span class="hex">3E 0F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,15            ;;Override Old Background Color ($0F would keep it)
<span class="number">2DBA EE45 </span><span class="colon">X </span><span class="hex">A3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> and    </span> e               ;;Clear Old Foreground Color
<span class="number">2DBB EE46 </span><span class="colon">X </span><span class="hex">B2         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> d               ;;Put in the New Foreground Color
<span class="number">2DBC EE47 </span><span class="colon">X </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a          ;;Writeback Attribute back to Color Matrix
<span class="number">2DBD EE48 </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                       
<span class="number">2DBE EE49 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">2DBF EE4A </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2DC0 EE4B </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2DC0 EE4B </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Draw Horizontal Line [HL] Pixels Long  </span>
<span class="number">2DC0 EE4B </span><span class="colon">X </span><span class="hex">7D         </span><span class="source">[~~~] </span><span class="label">NSETCX:</span><span class="mnemonic"> ld     </span> a,l             ;;Looping HL Times
<span class="number">2DC1 EE4C </span><span class="colon">X </span><span class="hex">B4         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> h               ;;If HL is 0
<span class="number">2DC2 EE4D </span><span class="colon">X </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z               ;;  Return
<span class="number">2DC3      </span><span class="colon">X </span><span class="hex">CD 99 2D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> SETC            ;;Set Pixel at Current Location
<span class="number">     EE4E </span><span class="colon">X </span><span class="hex">CD 24 EE   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2DC6      </span><span class="colon">X </span><span class="hex">CD DB 2E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> RIGHTC          ;;Move 1 Pixel Right
<span class="number">     EE51 </span><span class="colon">X </span><span class="hex">CD 66 EF   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2DC9 EE54 </span><span class="colon">X </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl              ;;Count Down
<span class="number">2DCA EE55 </span><span class="colon">X </span><span class="hex">18 F4      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> NSETCX          ;;and Loop
<span class="number">2DCC EE57 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2DCC EE57 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Deprecated: Get Foreground Color at Current Location</span>
<span class="number">2DCC EE57 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;This routine was intended to return both the Pixel State and Color</span>
<span class="number">2DCC EE57 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;It first sets [A] to the pixel value, which is always 0 due to a bug,</span>
<span class="number">2DCC EE57 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;  then sets [A] to the Foreground Color, so it</span>
<span class="number">2DCC EE57 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Returns Only the Foreground Color.     </span>
<span class="number">2DCC EE57 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">{~~~} </span><span class="label">GETC:  </span><span class="mnemonic"> push   </span> hl              ;;Save [HL]
<span class="number">2DCD EE58 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de              ;;and [DE]
<span class="number">2DCE EE59 </span><span class="colon">X </span><span class="hex">2A 26 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(CURLOC)     ;;Get Current Screen Address
<span class="number">2DD1 EE5C </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)          ;;Get Character at Address
<span class="number">2DD2 EE5D </span><span class="colon">X </span><span class="hex">F6 A0      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> SGBASE          ;;Verify it's in the range of
<span class="number">2DD4 EE5F </span><span class="colon">X </span><span class="hex">AE         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> xor    </span> (hl)            ;;Semigraphics Characters
<span class="number">2DD5 EE60 </span><span class="colon">X </span><span class="hex">28 10      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,GETC2         ;;If it is, Check Pixel BUG: Should be JR NZ
<span class="number">2DD7 EE62 </span><span class="colon">X </span><span class="hex">11 00 04   </span><span class="source">(~~~) </span><span class="label">GETC3: </span><span class="mnemonic"> ld     </span> de,COLOR-SCREEN ;;Add Offset into Color Matrix to
<span class="number">2DDA EE65 </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de           ;;Screen Address to Get Color Address
<span class="number">2DDB EE66 </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)          ;;Get Color Byte
<span class="number">2DDC EE67 </span><span class="colon">X </span><span class="hex">28 04      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,GETC4         ;;If Not Zero
<span class="number">2DDE EE69 </span><span class="colon">X </span><span class="hex">0F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rrca   </span>                 ;;  Rotate 4 Bits Right
<span class="number">2DDF EE6A </span><span class="colon">X </span><span class="hex">0F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rrca   </span>                 ;;  Moving High Nybble (Foreground Color)
<span class="number">2DE0 EE6B </span><span class="colon">X </span><span class="hex">0F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rrca   </span>                 ;;  to Low Nybbme
<span class="number">2DE1 EE6C </span><span class="colon">X </span><span class="hex">0F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rrca   </span>                          
<span class="number">2DE2 EE6D </span><span class="colon">X </span><span class="hex">E6 0F      </span><span class="source">(~~~) </span><span class="label">GETC4: </span><span class="mnemonic"> and    </span> $0F             ;;Set High Nybble to 0, leaving only Foreground color
<span class="number">2DE4 EE6F </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de              ;;Restore [DE]
<span class="number">2DE5 EE70 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;;and [HL]
<span class="number">2DE6 EE71 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2DE7      </span><span class="colon">X </span><span class="hex">CD 8C 2D   </span><span class="source">(~~~) </span><span class="label">GETC2: </span><span class="mnemonic"> call   </span> GETMSK          ;;Get Bit Mask for Pixel to set
<span class="number">     EE72 </span><span class="colon">X </span><span class="hex">CD 17 EE   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2DEA EE75 </span><span class="colon">X </span><span class="hex">A6         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> and    </span> (hl)            ;;and Remove all other Bits of Character
<span class="number">2DEB EE76 </span><span class="colon">X </span><span class="hex">18 EA      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> GETC3           ;;Then continue on to Get the Foreground Color
<span class="number">2DED EE78 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2DED EE78 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;{GWB} MACHINE DEPENDENT GRAPHICS ROUTINES:</span>
<span class="number">2DED EE78 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;                                        </span>
<span class="number">2DED EE78 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Get Screen Address and and Pixel Index from Character X, Character Y</span>
<span class="number">2DED EE78 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;{GWB} GET POSITION INTO BITMSK AND [H,L]</span>
<span class="number">2DED EE78 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Uses: [B,C] = Character X Position     </span>
<span class="number">2DED EE78 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;      [D,E] = Character Y Position     </span>
<span class="number">2DED EE78 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Sets: PINDEX = [A] = 0                 </span>
<span class="number">2DED EE78 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;      CURLOC = [H,L] = Screen Address  </span>
<span class="number">2DED EE78 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;                                       </span>
<span class="number">2DED EE78 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">[GWB] </span><span class="label">MAPXYC:</span><span class="mnemonic"> push   </span> hl              ;;Save [H,L]
<span class="number">2DEE EE79 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de              ;;Save [D,E] (YPOS)
<span class="number">2DEF EE7A </span><span class="colon">X </span><span class="hex">21 28 30   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,SCREEN+40    ;;Address = Column 0, Line 1
<span class="number">2DF2 EE7D </span><span class="colon">X </span><span class="hex">7B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,e             ;;       
<span class="number">2DF3 EE7E </span><span class="colon">X </span><span class="hex">11 28 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,40           ;;Screen Width
<span class="number">2DF6 EE81 </span><span class="colon">X </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a               ;;Mask = YPOS +1
<span class="number">2DF7 EE82 </span><span class="colon">X </span><span class="hex">3D         </span><span class="source">(~~~) </span><span class="label">MAPCLP:</span><span class="mnemonic"> dec    </span> a               ;;Mask = Mask - 1
<span class="number">2DF8 EE83 </span><span class="colon">X </span><span class="hex">28 1B      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> z,MAPXYA        ;;iF Zero, Add XPOS and FInish Up
<span class="number">2DFA EE85 </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de           ;;Else Add Screen Width to Address
<span class="number">2DFB EE86 </span><span class="colon">X </span><span class="hex">18 FA      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> MAPCLP          ;;and Loop
<span class="number">2DFD EE88 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2DED EE88 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    + </span><span class="comment">;;Get Screen Address and and Pixel Index from Character X, Character Y</span>
<span class="number">2DED EE88 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Uses: [B,C] = Character X Position     </span>
<span class="number">2DED EE88 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;      [D,E] = Pixel Y Position         </span>
<span class="number">2DFD EE88 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;Sets: PINDEX = [A] = 0, 1, or 2        </span>
<span class="number">2DFD EE88 </span><span class="colon">X </span><span class="hex">           </span><span class="source">    | </span><span class="comment">;;      CURLOC = [H,L] = Screen Address  </span>
<span class="number">2DFD EE88 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">[GWB] </span><span class="label">MAPXYP:</span><span class="mnemonic"> push   </span> hl              ;;Save [H,L]
<span class="number">2DFE EE89 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de              ;;Save [D,E] (YPOS)
<span class="number">2DFF EE8A </span><span class="colon">X </span><span class="hex">21 28 30   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,SCREEN+40    ;;Address = Column 0, Line 1
<span class="number">2E02 EE8D </span><span class="colon">X </span><span class="hex">7B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,e             ;;Mask = YPOS
<span class="number">2E03 EE8E </span><span class="colon">X </span><span class="hex">11 28 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,40           ;;Screen Width
<span class="number">2E06 EE91 </span><span class="colon">X </span><span class="hex">D6 03      </span><span class="source">(~~~) </span><span class="label">MAPPLP:</span><span class="mnemonic"> sub    </span> 3               ;;Mask = Mask - 3
<span class="number">2E08 EE93 </span><span class="colon">X </span><span class="hex">38 03      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,MAPPAD        ;;If Positive
<span class="number">2E0A EE95 </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de           ;;  Add Screen Width to Screen Address
<span class="number">2E0B EE96 </span><span class="colon">X </span><span class="hex">18 F9      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> MAPPLP          ;;  and Loop
<span class="number">2E0D EE98 </span><span class="colon">X </span><span class="hex">C6 03      </span><span class="source">(~~~) </span><span class="label">MAPPAD:</span><span class="mnemonic"> add    </span> a,3             ;;Mask = Mask + 3
<span class="number">2E0F EE9A </span><span class="colon">X </span><span class="hex">87         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,a             ;;       
<span class="number">2E10 EE9B </span><span class="colon">X </span><span class="hex">CB 29      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sra    </span> c               ;;       
<span class="number">2E12 EE9D </span><span class="colon">X </span><span class="hex">30 01      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,MAPXYA       ;;If Mask is Even
<span class="number">2E14 EE9F </span><span class="colon">X </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a               ;;  Mask = Mask + 1
<span class="number">2E15 EEA0 </span><span class="colon">X </span><span class="hex">09         </span><span class="source">(~~~) </span><span class="label">MAPXYA:</span><span class="mnemonic"> add    </span> hl,bc           ;;Add XPOS to Screen Address
<span class="number">2E16 EEA1 </span><span class="colon">X </span><span class="hex">32 28 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (PINDEX),a      ;;Store Mask
<span class="number">2E19 EEA4 </span><span class="colon">X </span><span class="hex">22 26 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CURLOC),hl     ;;Store Address
<span class="number">2E1C EEA7 </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de              ;;Get YPOS back into DE
<span class="number">2E1D EEA8 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;;Restore HL
<span class="number">2E1E EEA9 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2E1F EEAA </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2E1F EEAA </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;{GWB} SEE IF LOCATION OFF SCREEN        </span>
<span class="number">2E1F EEAA </span><span class="colon">X </span><span class="hex">3E 17      </span><span class="source">[~~~] </span><span class="label">CHKRXY:</span><span class="mnemonic"> ld     </span>  a,23                    
<span class="number">2E21 EEAC </span><span class="colon">X </span><span class="hex">32 41 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span>  (GYMAX),a       ;<span class="comment">;Mex Y = 23 Rows</span>
<span class="number">2E24 EEAF </span><span class="colon">X </span><span class="hex">3E 27      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span>  a,39                    
<span class="number">2E26 EEB1 </span><span class="colon">X </span><span class="hex">32 42 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">ld      </span> (GXMAX),a       ;;Mac X = 39 Coumns
<span class="number">2E29 EEB4 </span><span class="colon">X </span><span class="hex">18 0A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span>  CMPGMY                  
<span class="number">2E2B EEB6 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2E2B EEB6 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;{GWB} SEE IF POINT OFF SCREEN           </span>
<span class="number">2E2B EEB6 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;; Labeled SCALXY in GW-BASIC, but Standard BASIC also has a SCALXY Routine</span>
<span class="number">2E2B EEB6 </span><span class="colon">X </span><span class="hex">3E 47      </span><span class="source">[GWB] </span><span class="label">SCLXYX:</span><span class="mnemonic"> ld     </span> a,71                     
<span class="number">2E2D EEB8 </span><span class="colon">X </span><span class="hex">32 41 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (GYMAX),a       ;;Max Y = 71 Pixels
<span class="number">2E30 EEBB </span><span class="colon">X </span><span class="hex">3E 4F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,79                     
<span class="number">2E32 EEBD </span><span class="colon">X </span><span class="hex">32 42 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (GXMAX),a       ;;Max X = 79 Pixels
<span class="number">2E35 EEC0 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">(~~~) </span><span class="label">CMPGMY:</span><span class="mnemonic"> push   </span> hl              ;Save Registers
<span class="number">2E36 EEC1 </span><span class="colon">X </span><span class="hex">C5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> bc                       
<span class="number">2E37 EEC2 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                       
<span class="number">2E38 EEC3 </span><span class="colon">X </span><span class="hex">3A 41 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(GYMAX)                
<span class="number">2E3B EEC6 </span><span class="colon">X </span><span class="hex">26 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,0             ;;[H,L] = GYMAX
<span class="number">2E3D EEC8 </span><span class="colon">X </span><span class="hex">6F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,a                      
<span class="number">2E3E EEC9 </span><span class="colon">X </span><span class="hex">CB 7A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> bit    </span> 7,d             ;;If [D,E] is Negative
<span class="number">2E40 EECB </span><span class="colon">X </span><span class="hex">20 1F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,SETGYZ       ;;  [H,L] = 0 and Set Carry
<span class="number">2E42 EECD </span><span class="colon">X </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR          ;;Else Compare [D,E] and [H,L]
<span class="number">2E43 EECE </span><span class="colon">X </span><span class="hex">50         </span><span class="source">(~~~) </span><span class="label">SCLXY2:</span><span class="mnemonic"> ld     </span> d,b             ;;[D,E] = [B,C]
<span class="number">2E44 EECF </span><span class="colon">X </span><span class="hex">59         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> e,c                      
<span class="number">2E45 EED0 </span><span class="colon">X </span><span class="hex">06 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,0                      
<span class="number">2E47 EED2 </span><span class="colon">X </span><span class="hex">30 02      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,CMPGMX                
<span class="number">2E49 EED4 </span><span class="colon">X </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl                  
<span class="number">2E4A EED5 </span><span class="colon">X </span><span class="hex">04         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> b                        
<span class="number">2E4B EED6 </span><span class="colon">X </span><span class="hex">3A 42 39   </span><span class="source">(~~~) </span><span class="label">CMPGMX:</span><span class="mnemonic"> ld     </span> a,(GXMAX)                
<span class="number">2E4E EED9 </span><span class="colon">X </span><span class="hex">26 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,0             ;;[H,L] = GXMAX
<span class="number">2E50 EEDB </span><span class="colon">X </span><span class="hex">6F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,a                      
<span class="number">2E51 EEDC </span><span class="colon">X </span><span class="hex">CB 7A      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> bit    </span> 7,d             ;;If [D,E] is Negative
<span class="number">2E53 EEDE </span><span class="colon">X </span><span class="hex">20 11      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,SETGXZ       ;;  [H,L] = 0 and Set Carry
<span class="number">2E55 EEE0 </span><span class="colon">X </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR          ;;Else Compare [D,E] and [H,L]
<span class="number">2E56 EEE1 </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">(~~~) </span><span class="label">SCLXY3:</span><span class="mnemonic"> pop    </span> de                       
<span class="number">2E57 EEE2 </span><span class="colon">X </span><span class="hex">38 03      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,SCLXY4                 
<span class="number">2E59 EEE4 </span><span class="colon">X </span><span class="hex">CB 18      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rr     </span> b                        
<span class="number">2E5B EEE6 </span><span class="colon">X </span><span class="hex">06         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $06             ;;LD B, over EX
<span class="number">2E5C EEE7 </span><span class="colon">X </span><span class="hex">E3         </span><span class="source">(~~~) </span><span class="label">SCLXY4:</span><span class="mnemonic"> ex     </span> (sp),hl                  
<span class="number">2E5D EEE8 </span><span class="colon">X </span><span class="hex">C1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> bc                       
<span class="number">2E5E EEE9 </span><span class="colon">X </span><span class="hex">3F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ccf    </span>                          
<span class="number">2E5F EEEA </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl                       
<span class="number">2E60 EEEB </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2E61 EEEC </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2E61 EEEC </span><span class="colon">X </span><span class="hex">2E 00      </span><span class="source">(~~~) </span><span class="label">SETGYZ:</span><span class="mnemonic"> ld     </span> l,0             ;;[L] = 0
<span class="number">2E63 EEEE </span><span class="colon">X </span><span class="hex">37         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> scf    </span>                 ;;Set Carry Flag
<span class="number">2E64 EEEF </span><span class="colon">X </span><span class="hex">18 DD      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> SCLXY2          ;;and Continue
<span class="number">2E66 EEF1 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2E66 EEF1 </span><span class="colon">X </span><span class="hex">2E 00      </span><span class="source">(~~~) </span><span class="label">SETGXZ:</span><span class="mnemonic"> ld     </span> l,0             ;;[L] = 0
<span class="number">2E68 EEF3 </span><span class="colon">X </span><span class="hex">37         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> scf    </span>                 ;;Set Carry Flag
<span class="number">2E69 EEF4 </span><span class="colon">X </span><span class="hex">18 EB      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> SCLXY3          ;;and Continue
<span class="number">2E6B EEF6 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2E6B EEF6 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;; Orphan Code???                       </span>
<span class="number">2E6B EEF6 </span><span class="colon">X </span><span class="hex">FE 02      </span><span class="source">{~~~} </span><span class="label">CHKMSK:</span><span class="mnemonic"> cp     </span> 2                        
<span class="number">2E6D EEF8 </span><span class="colon">X </span><span class="hex">30 07      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nc,CHKMS2                
<span class="number">2E6F EEFA </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                       
<span class="number">2E70 EEFB </span><span class="colon">X </span><span class="hex">11 29 30   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,SCREEN+41             
<span class="number">2E73 EEFE </span><span class="colon">X </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR                   
<span class="number">2E74 EEFF </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                       
<span class="number">2E75 EF00 </span><span class="colon">X </span><span class="hex">D8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> c                        
<span class="number">2E76 EF01 </span><span class="colon">X </span><span class="hex">3D         </span><span class="source">(~~~) </span><span class="label">CHKMS2:</span><span class="mnemonic"> dec    </span> a                        
<span class="number">2E77 EF02 </span><span class="colon">X </span><span class="hex">3D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> a                        
<span class="number">2E78 EF03 </span><span class="colon">X </span><span class="hex">D0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nc                       
<span class="number">2E79 EF04 </span><span class="colon">X </span><span class="hex">C6 06      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,6                      
<span class="number">2E7B EF06 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                       
<span class="number">2E7C EF07 </span><span class="colon">X </span><span class="hex">11 D8 FF   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,$FFD8        ;;-40    
<span class="number">2E7F EF0A </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de                    
<span class="number">2E80 EF0B </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                       
<span class="number">2E81 EF0C </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a                        
<span class="number">2E82 EF0D </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2E83 EF0E </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2E83 EF0E </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;; Orphan Code???                       </span>
<span class="number">2E83 EF0E </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Call with [A] = Pixel Index, [HL] = Screen Address</span>
<span class="number">2E83 EF0E </span><span class="colon">X </span><span class="hex">FE 04      </span><span class="source">(~~~) </span><span class="label">DOWN4: </span><span class="mnemonic"> cp     </span> 4                        
<span class="number">2E85 EF10 </span><span class="colon">X </span><span class="hex">38 08      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> c,DOWNP         ;;If Pixel Index > 3, Move Down 1 Pixel
<span class="number">2E87 EF12 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                       
<span class="number">2E88 EF13 </span><span class="colon">X </span><span class="hex">11 C0 33   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,SCREEN+960            
<span class="number">2E8B EF16 </span><span class="colon">X </span><span class="hex">E7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> rst    </span> COMPAR                   
<span class="number">2E8C EF17 </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                       
<span class="number">2E8D EF18 </span><span class="colon">X </span><span class="hex">3F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ccf    </span>                          
<span class="number">2E8E EF19 </span><span class="colon">X </span><span class="hex">D8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> c                        
<span class="number">2E8F EF1A </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2E8F EF1A </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;Down 1 Pixel: Calculate New Screen Address and Bit Index</span>
<span class="number">2E8F EF1A </span><span class="colon">X </span><span class="hex">3C         </span><span class="source">      </span><span class="label">DOWNP: </span><span class="mnemonic"> inc    </span> a                        
<span class="number">2E90 EF1B </span><span class="colon">X </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a               ;;[A] = Bit Index * 2
<span class="number">2E91 EF1C </span><span class="colon">X </span><span class="hex">FE 06      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> cp     </span> 6                        
<span class="number">2E93 EF1E </span><span class="colon">X </span><span class="hex">3F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ccf    </span>                          
<span class="number">2E94 EF1F </span><span class="colon">X </span><span class="hex">D0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nc                       
<span class="number">2E95 EF20 </span><span class="colon">X </span><span class="hex">D6 06      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> sub    </span> 6               ;;[A] = [A] - 6
<span class="number">2E97 EF22 </span><span class="colon">X </span><span class="hex">D5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> de                       
<span class="number">2E98 EF23 </span><span class="colon">X </span><span class="hex">11 28 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,40                    
<span class="number">2E9B EF26 </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de           ;;[HL] = curloc + 40
<span class="number">2E9C EF27 </span><span class="colon">X </span><span class="hex">D1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> de                       
<span class="number">2E9D EF28 </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a               ;;Set Flags
<span class="number">2E9E EF29 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2E9F EF2A </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2E9F EF2A </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Left 1 Pixel: Calculate New Screen Address and Bit Index</span>
<span class="number">2E9F EF2A </span><span class="colon">X </span><span class="hex">3D         </span><span class="source">      </span><span class="label">LEFTP: </span><span class="mnemonic"> dec    </span> a               ;;Decrement Bit Index
<span class="number">2EA0 EF2B </span><span class="colon">X </span><span class="hex">CB 47      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> bit    </span> 0,a                      
<span class="number">2EA2 EF2D </span><span class="colon">X </span><span class="hex">C8         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> z               ;;If Bit Index is Even
<span class="number">2EA3 EF2E </span><span class="colon">X </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a               ;;  Add 2
<span class="number">2EA4 EF2F </span><span class="colon">X </span><span class="hex">3C         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> a                        
<span class="number">2EA5 EF30 </span><span class="colon">X </span><span class="hex">2B         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> hl              ;;  Decremement Address
<span class="number">2EA6 EF31 </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a               ;;  Set Flags from Bit Index
<span class="number">2EA7 EF32 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2EA8 EF33 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2EA8 EF33 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Right 1 Pixel: Calculate New Screen Address and Bit Index</span>
<span class="number">2EA8 EF33 </span><span class="colon">X </span><span class="hex">3C         </span><span class="source">[GWB] </span><span class="label">RIGHTP:</span><span class="mnemonic"> inc    </span> a               ;;Increment Bit Index
<span class="number">2EA9 EF34 </span><span class="colon">X </span><span class="hex">CB 47      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> bit    </span> 0,a                      
<span class="number">2EAB EF36 </span><span class="colon">X </span><span class="hex">C0         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span> nz              ;;If Bit Index is Odd
<span class="number">2EAC EF37 </span><span class="colon">X </span><span class="hex">3D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> a               ;;  Add 2
<span class="number">2EAD EF38 </span><span class="colon">X </span><span class="hex">3D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> a                        
<span class="number">2EAE EF39 </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl              ;;  Incremement Address
<span class="number">2EAF EF3A </span><span class="colon">X </span><span class="hex">B7         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> or     </span> a               ;;  Set Flags from Bit Index
<span class="number">2EB0 EF3B </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2EB1 EF3C </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2EB1 EF3C </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Move Text Cursor Down One Line         </span>
<span class="number">2EB1 EF3C </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">[~~~] </span><span class="label">DOWNL: </span><span class="mnemonic"> push   </span> af              ;[GWB] SAVE BIT MASK OF CURRENT "C" Address
<span class="number">2EB2 EF3D </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE Address
<span class="number">2EB3      </span><span class="colon">X </span><span class="hex">CD 7D 2D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FETCHC          ;[GWB] GET CURRENT LOCATION
<span class="number">     EF3E </span><span class="colon">X </span><span class="hex">CD 08 EE   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2EB6 EF41 </span><span class="colon">X </span><span class="hex">11 28 00   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,40           ;;Line Width = 40 characters
<span class="number">2EB9 EF44 </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de           ;;Move Down One Line
<span class="number">2EBA      </span><span class="colon">X </span><span class="hex">C3 F7 2E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jp     </span> POPSTC          ;;Store Current, Restore Saved and Return
<span class="number">     EF45 </span><span class="colon">X </span><span class="hex">C3 82 EF   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2EBD EF48 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2EB1 EF48 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Move Pixel Cursor Down One Line        </span>
<span class="number">2EBD EF48 </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">[GWB] </span><span class="label">DOWNC: </span><span class="mnemonic"> push   </span> af              ;[GWB] SAVE BIT MASK OF CURRENT "C" Address
<span class="number">2EBE EF49 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE Address
<span class="number">2EBF      </span><span class="colon">X </span><span class="hex">CD 7D 2D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FETCHC          ;[GWB] ;GET CURRENT LOCATION
<span class="number">     EF4A </span><span class="colon">X </span><span class="hex">CD 08 EE   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2EC2      </span><span class="colon">X </span><span class="hex">CD 8F 2E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> DOWNP           ;;Calculate New Screen Address, Bit Index
<span class="number">     EF4D </span><span class="colon">X </span><span class="hex">CD 1A EF   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2EC5 EF50 </span><span class="colon">X </span><span class="hex">18 30      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> POPSTC          ;;Store Current, Restore Saved and Return
<span class="number">2EC7 EF52 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2EC7 EF52 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Orphan Code???                         </span>
<span class="number">2EC7 EF52 </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af              ;[GWB] SAVE BIT MASK OF CURRENT "C" Address
<span class="number">2EC8 EF53 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE Address
<span class="number">2EC9      </span><span class="colon">X </span><span class="hex">CD 7D 2D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FETCHC          ;[GWB] ;GET CURRENT LOCATION
<span class="number">     EF54 </span><span class="colon">X </span><span class="hex">CD 08 EE   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2ECC      </span><span class="colon">X </span><span class="hex">CD 76 2E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> CHKMS2                   
<span class="number">     EF57 </span><span class="colon">X </span><span class="hex">CD 01 EF   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2ECF EF5A </span><span class="colon">X </span><span class="hex">18 26      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> POPSTC          ;;Store Current, Restore Saved and Return
<span class="number">2ED1 EF5C </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2ED1 EF5C </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">[GWB] </span><span class="label">LEFTC: </span><span class="mnemonic"> push   </span> af              ;[GWB] SAVE BIT MASK OF CURRENT "C" Address
<span class="number">2ED2 EF5D </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE Address
<span class="number">2ED3      </span><span class="colon">X </span><span class="hex">CD 7D 2D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FETCHC          ;[GWB] GET CURRENT LOCATION
<span class="number">     EF5E </span><span class="colon">X </span><span class="hex">CD 08 EE   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2ED6      </span><span class="colon">X </span><span class="hex">CD 9F 2E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> LEFTP           ;;Calculate New Screen Address, Bit Index
<span class="number">     EF61 </span><span class="colon">X </span><span class="hex">CD 2A EF   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2ED9 EF64 </span><span class="colon">X </span><span class="hex">18 1C      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> POPSTC          ;;Store Current, Restore Saved and Return
<span class="number">2EDB EF66 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2EDB EF66 </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">[GWB] </span><span class="label">RIGHTC:</span><span class="mnemonic"> push   </span> af              ;[GWB] SAVE BIT MASK OF CURRENT "C" Address
<span class="number">2EDC EF67 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;[GWB] SAVE Address
<span class="number">2EDD      </span><span class="colon">X </span><span class="hex">CD 7D 2D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FETCHC          ;[GWB] GET CURRENT LOCATION
<span class="number">     EF68 </span><span class="colon">X </span><span class="hex">CD 08 EE   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2EE0      </span><span class="colon">X </span><span class="hex">CD A8 2E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> RIGHTP                   
<span class="number">     EF6B </span><span class="colon">X </span><span class="hex">CD 33 EF   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2EE3 EF70 </span><span class="colon">X </span><span class="hex">18 12      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> POPSTC          ;;Store Current, Restore Saved and Return
<span class="number">2EE5 EF70 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2EE5 EF70 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Orphan Code???                         </span>
<span class="number">2EE5 EF70 </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                       
<span class="number">2EE6 EF71 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                       
<span class="number">2EE7      </span><span class="colon">X </span><span class="hex">CD 7D 2D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FETCHC                   
<span class="number">     EF72 </span><span class="colon">X </span><span class="hex">CD 08 EE   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2EEA      </span><span class="colon">X </span><span class="hex">CD 83 2E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> DOWN4                    
<span class="number">     EF75 </span><span class="colon">X </span><span class="hex">CD 0E EF   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2EED EF78 </span><span class="colon">X </span><span class="hex">18 08      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> POPSTC                   
<span class="number">2EEF EF7A </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2EEF EF7A </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Orphan Code???                         </span>
<span class="number">2EEF EF7A </span><span class="colon">X </span><span class="hex">F5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> af                       
<span class="number">2EF0 EF7B </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                       
<span class="number">2EF1      </span><span class="colon">X </span><span class="hex">CD 7D 2D   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> FETCHC                   
<span class="number">     EF7C </span><span class="colon">X </span><span class="hex">CD 08 EE   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2EF4      </span><span class="colon">X </span><span class="hex">CD 83 2E   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> DOWN4                    
<span class="number">     EF7F </span><span class="colon">X </span><span class="hex">CD 0E EF   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2EF7 EF82 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2EF7 EF82 </span><span class="colon">X </span><span class="hex">32 28 39   </span><span class="source">      </span><span class="label">POPSTC:</span><span class="mnemonic"> ld     </span> (PINDEX),a      ;;Store Bit Position
<span class="number">2EFA EF85 </span><span class="colon">X </span><span class="hex">22 26 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (CURLOC),hl     ;;Store Current Point Address
<span class="number">2EFD EF88 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;;Restore Saved Address
<span class="number">2EFE EF89 </span><span class="colon">X </span><span class="hex">F1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> af              ;;Restore Saved Bit Index
<span class="number">2EFF EF8A </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                 ;;Return from Subroutine
<span class="number">2F00 EF8B </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2F00 EF8B </span><span class="colon">X </span><span class="hex">22 3C 39   </span><span class="source">[GWB] </span><span class="label">PGINIT:</span><span class="mnemonic"> ld     </span> (ARYPNT),hl     ;;Save Pointer into Array
<span class="number">2F03 EF8E </span><span class="colon">X </span><span class="hex">60         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,b                      
<span class="number">2F04 EF8F </span><span class="colon">X </span><span class="hex">69         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,c                      
<span class="number">2F05 EF90 </span><span class="colon">X </span><span class="hex">22 11 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (MAXDEL),hl     ;;Save Bit Counr?
<span class="number">2F08 EF93 </span><span class="colon">X </span><span class="hex">87         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> a,a             ;;Index = Operation ID * 2
<span class="number">2F09 EF94 </span><span class="colon">X </span><span class="hex">4F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,a             ;;Copy to BC
<span class="number">2F0A EF95 </span><span class="colon">X </span><span class="hex">06 00      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,0                      
<span class="number">2F0C      </span><span class="colon">X </span><span class="hex">21 18 2F   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,OPCTAB       ;;Get Operation Table Address
<span class="number">     EF97 </span><span class="colon">X </span><span class="hex">21 A3 EF   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2F0F EF9A </span><span class="colon">X </span><span class="hex">09         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,bc           ;;Add Index
<span class="number">2F10 EF9B </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)          ;;Get Address from Table
<span class="number">2F11 EF9C </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl                       
<span class="number">2F12 EF9D </span><span class="colon">X </span><span class="hex">66         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> h,(hl)                   
<span class="number">2F13 EF9E </span><span class="colon">X </span><span class="hex">6F         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> l,a                      
<span class="number">2F14 EF9F </span><span class="colon">X </span><span class="hex">22 3F 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (OPCADR),hl      ;<span class="comment">;Store It</span>
<span class="number">2F17 EFA2 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2F18      </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2F18      </span><span class="colon">X </span><span class="hex">6C 2F      </span><span class="source">      </span><span class="label">OPCTAB:</span><span class="mnemonic"> word   </span> ORC             ;;A = A | C     OR
<span class="number">     EFA3 </span><span class="colon">X </span><span class="hex">F7 EF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2F1A      </span><span class="colon">X </span><span class="hex">6E 2F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> ANDC            ;;A = A & C     AND
<span class="number">     EFA5 </span><span class="colon">X </span><span class="hex">F9 EF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2F1C      </span><span class="colon">X </span><span class="hex">72 2F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> CPLA            ;;A = !A        PRESET
<span class="number">     EFA7 </span><span class="colon">X </span><span class="hex">FD EF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2F1E      </span><span class="colon">X </span><span class="hex">73 2F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> NOOP            ;;No Operation  PSET
<span class="number">     EFA9 </span><span class="colon">X </span><span class="hex">FE EF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2F20      </span><span class="colon">X </span><span class="hex">70 2F      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> XORC            ;;A = A ^ C     XOR (Default)
<span class="number">     EFAB </span><span class="colon">X </span><span class="hex">FB EF      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2F22 EFAD </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2F22 EFAD </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Read One Line of Characters from Colors to Screen</span>
<span class="number">2F22      </span><span class="colon">X </span><span class="hex">CD 5F 2F   </span><span class="source">[GWB] </span><span class="label">NREAD: </span><span class="mnemonic"> call   </span> NSETUP          ;;[H,L] = Screen Address, [A] = Counter
<span class="number">     EFAD </span><span class="colon">X </span><span class="hex">CD EA EF   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2F25 EFB0 </span><span class="colon">X </span><span class="hex">46         </span><span class="source">      </span><span class="label">NREADL:</span><span class="mnemonic"> ld     </span> b,(hl)          ;;[B] = Character at Address
<span class="number">2F26 EFB1 </span><span class="colon">X </span><span class="hex">11 00 04   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,COLOR-SCREEN ;;[D,E] = Offset into Color Matrix
<span class="number">2F29 EFB4 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;;[D,E] = Screen Address, [H,L] = Offset
<span class="number">2F2A EFB5 </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de           ;;[H,L] = Color Address
<span class="number">2F2B EFB6 </span><span class="colon">X </span><span class="hex">4E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,(hl)          ;;[C] = Color Attribute
<span class="number">2F2C EFB7 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;;Pop Array Pointer into [H,L]
<span class="number">2F2D EFB8 </span><span class="colon">X </span><span class="hex">70         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),b          ;;Copy Character into Array
<span class="number">2F2E EFB9 </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl              ;;Bump Array Pointer
<span class="number">2F2F EFBA </span><span class="colon">X </span><span class="hex">71         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),c          ;;Copy Colors into Array
<span class="number">2F30 EFBB </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl              ;;Bump Array Pointer
<span class="number">2F31 EFBC </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;;Push Array Pointer back onto Stack
<span class="number">2F32 EFBD </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;;[H,L} = Screen Address, Discard Offset
<span class="number">2F33 EFBE </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl              ;;Bump Screen Address
<span class="number">2F34 EFBF </span><span class="colon">X </span><span class="hex">3D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> a               ;;Decrement Counter
<span class="number">2F35 EFC0 </span><span class="colon">X </span><span class="hex">20 EE      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,NREADL       ;;If Not Done, Do Next Position
<span class="number">2F37 EFC2 </span><span class="colon">X </span><span class="hex">18 21      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> NDONE           ;;Else Save Array Pointer and Return
<span class="number">2F39 EFC4 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2F39 EFC4 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Write One Line of Characters and Colors to Screen</span>
<span class="number">2F39      </span><span class="colon">X </span><span class="hex">CD 5F 2F   </span><span class="source">[GWB] </span><span class="label">NWRITE:</span><span class="mnemonic"> call   </span> NSETUP          ;;[H,L] = Screen Address, [A] = Counter
<span class="number">     EFC4 </span><span class="colon">X </span><span class="hex">CD EA EF   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ..     </span>                          
<span class="number">2F3C EFC7 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">NWRITL:</span><span class="mnemonic"> ex     </span> de,hl           ;;[D,E] = Screen Address
<span class="number">2F3D EFC8 </span><span class="colon">X </span><span class="hex">21 00 04   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,COLOR-SCREEN ;;[H,L] = Offset into Color Matrix
<span class="number">2F40 EFCB </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de           ;;[H,L] = Color Address
<span class="number">2F41 EFCC </span><span class="colon">X </span><span class="hex">4E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> c,(hl)          ;;[C] = Color Attribute
<span class="number">2F42 EFCD </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> pop    </span> hl              ;;Pop Array Pointer into [H,L]
<span class="number">2F43 EFCE </span><span class="colon">X </span><span class="hex">46         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> b,(hl)          ;;Read Character from Array into [B]
<span class="number">2F44 EFCF </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl              ;;Bump Array Pointer
<span class="number">2F45 EFD0 </span><span class="colon">X </span><span class="hex">08         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> af,af'          ;;Save Counter
<span class="number">2F46 EFD1 </span><span class="colon">X </span><span class="hex">7E         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,(hl)          ;;Read Color Attribute from into [A]
<span class="number">2F47 EFD2 </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl              ;;Bump Array Pointer
<span class="number">2F48 EFD3 </span><span class="colon">X </span><span class="hex">CD 3E 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> call   </span> OPCJMP          ;;Do Operation on Color Attribute
<span class="number">2F4B EFD6 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl              ;;Push Array Pointer onto Stack
<span class="number">2F4C EFD7 </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;;[H,L} = Screen Address, Discard Offset
<span class="number">2F4D EFD8 </span><span class="colon">X </span><span class="hex">70         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),b          ;;Write Character to Character
<span class="number">2F4E EFD9 </span><span class="colon">X </span><span class="hex">11 00 04   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> de,COLOR-SCREEN ;;[H,L] = Offset into Color Matrix
<span class="number">2F51 EFDC </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;;[D,E] = Screen Address, [H,L] = Offse
<span class="number">2F52 EFDD </span><span class="colon">X </span><span class="hex">19         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> add    </span> hl,de           ;;[H,L] = Color Address
<span class="number">2F53 EFDE </span><span class="colon">X </span><span class="hex">77         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (hl),a          ;;Write Attribute to Color Matrix
<span class="number">2F54 EFDF </span><span class="colon">X </span><span class="hex">EB         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> de,hl           ;;[H,L] = Screen Address
<span class="number">2F55 EFE0 </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> inc    </span> hl              ;;Next Screen Address
<span class="number">2F56 EFE1 </span><span class="colon">X </span><span class="hex">08         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> af,af'          ;;Restore Counter
<span class="number">2F57 EFE2 </span><span class="colon">X </span><span class="hex">3D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> dec    </span> a               ;;Decremement it
<span class="number">2F58 EFE3 </span><span class="colon">X </span><span class="hex">20 E2      </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> jr     </span> nz,NWRITL       ;;If Not Done, Do Next Position
<span class="number">2F5A EFE5 </span><span class="colon">X </span><span class="hex">E1         </span><span class="source">      </span><span class="label">NDONE: </span><span class="mnemonic"> pop    </span> hl              ;;Pop Array Pointer off Stack
<span class="number">2F5B EFE6 </span><span class="colon">X </span><span class="hex">22 3C 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> (ARYPNT),hl     ;;and Store in ARYPNT
<span class="number">2F5E EFE9 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2F5F      </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2F5F EFEA </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;Get CURLOC and MAXDEL for NREAD and NWRITE</span>
<span class="number">2F5F EFEA </span><span class="colon">X </span><span class="hex">2A 11 39   </span><span class="source">      </span><span class="label">NSETUP:</span><span class="mnemonic"> ld     </span> hl,(MAXDEL)              
<span class="number">2F62 EFED </span><span class="colon">X </span><span class="hex">7D         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> a,l             ;;[A] = Byte Count
<span class="number">2F63 EFEE </span><span class="colon">X </span><span class="hex">2A 3C 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(ARYPNT)              
<span class="number">2F66 EFF1 </span><span class="colon">X </span><span class="hex">E3         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ex     </span> (sp),hl         ;;Push Array Pointer under Return Address
<span class="number">2F67 EFF2 </span><span class="colon">X </span><span class="hex">E5         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> push   </span> hl                       
<span class="number">2F68 EFF3 </span><span class="colon">X </span><span class="hex">2A 26 39   </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ld     </span> hl,(CURLOC)     ;;[H,L] = Screen Address
<span class="number">2F6B EFF6 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                          
<span class="number">2F6C EFF7 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2F6C EFF7 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="comment">;;PUT Action Subroutines                 </span>
<span class="number">2F6C EFF7 </span><span class="colon">X </span><span class="hex">B1         </span><span class="source">      </span><span class="label">ORC:   </span><span class="mnemonic"> or     </span> c               ;;OR     
<span class="number">2F6D EFF8 </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                 ;;       
<span class="number">2F6E EFF9 </span><span class="colon">X </span><span class="hex">A1         </span><span class="source">      </span><span class="label">ANDC:  </span><span class="mnemonic"> and    </span> c               ;;AND    
<span class="number">2F6F EFFA </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                 ;;       
<span class="number">2F70 EFFB </span><span class="colon">X </span><span class="hex">A9         </span><span class="source">      </span><span class="label">XORC:  </span><span class="mnemonic"> xor    </span> c               ;;XOR (Default)
<span class="number">2F71 EFFC </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> ret    </span>                 ;;       
<span class="number">2F72 EFFD </span><span class="colon">X </span><span class="hex">2F         </span><span class="source">      </span><span class="label">CPLA:  </span><span class="mnemonic"> cpl    </span>                 ;;PRSET  
<span class="number">2F73 EFFE </span><span class="colon">X </span><span class="hex">C9         </span><span class="source">      </span><span class="label">NOOP:  </span><span class="mnemonic"> ret    </span>                 ;;PSET (Use Color from Array)
<span class="number">     EFFF </span><span class="colon">X </span><span class="hex">23         </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> byte   </span> $23                      
<span class="number">2F74      </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">2F74      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000     ;;Filler to End of 4K ROM
<span class="number">2F78      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2F7C      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2F80      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2F84      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2F88      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2F8C      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2F90      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2F94      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2F98      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2F9C      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2FA0      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2FA4      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2FA8      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2FAC      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2FB0      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2FB4      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2FB8      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2FBC      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2FC0      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2FC4      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2FC8      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2FCC      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2FD0      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2FD4      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2FD8      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2FDC      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2FE0      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2FE4      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2FE8      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2FEC      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2FF0      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2FF4      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2FF8      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">2FFC      </span><span class="colon">X </span><span class="hex">FF FF 00 00</span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> word   </span> $FFFF,$0000              
<span class="number">3000 F000 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic">        </span>                          
<span class="number">3000 F000 </span><span class="colon">X </span><span class="hex">           </span><span class="source">      </span><span class="label">       </span><span class="mnemonic"> end    </span>                          
</pre>
</body>
</html>
